(window.webpackJsonp=window.webpackJsonp||[]).push([[71],{128:function(e,i,t){"use strict";t.r(i),t.d(i,"frontMatter",(function(){return o})),t.d(i,"metadata",(function(){return s})),t.d(i,"rightToc",(function(){return c})),t.d(i,"default",(function(){return p}));var a=t(2),n=t(6),r=(t(0),t(215)),o={title:"Service Policy Baseline Configurations",sidebar_label:"Service Policy Baseline Defaults"},s={unversionedId:"bcp_service-policy_defaults",id:"bcp_service-policy_defaults",isDocsHomePage:!1,title:"Service Policy Baseline Configurations",description:"One of the most powerful aspects of the 128T data model is the flexibility offered by a service-policy. Giving customers the ability to configure thresholds for when traffic should migrate from path to path based on current network status is a daunting task, however; most customers \u2013 and even application developers \u2013 are unaware of the sensitivity of their service to latency, loss, and jitter.",source:"@site/docs/bcp_service-policy_defaults.md",slug:"/bcp_service-policy_defaults",permalink:"/docs/bcp_service-policy_defaults",version:"current",lastUpdatedAt:1617128779,sidebar_label:"Service Policy Baseline Defaults",sidebar:"docs",previous:{title:"Service and Service Policy Design",permalink:"/docs/bcp_service_and_service_policy_design"},next:{title:"Tenancy Design",permalink:"/docs/bcp_tenants"}},c=[{value:"Traffic Categories",id:"traffic-categories",children:[{value:"Real-Time Traffic",id:"real-time-traffic",children:[]},{value:"Non Real-Time Traffic",id:"non-real-time-traffic",children:[]}]},{value:"References",id:"references",children:[]},{value:"Basic Service Policy Definitions",id:"basic-service-policy-definitions",children:[]}],l={rightToc:c};function p(e){var i=e.components,t=Object(n.a)(e,["components"]);return Object(r.b)("wrapper",Object(a.a)({},l,t,{components:i,mdxType:"MDXLayout"}),Object(r.b)("p",null,"One of the most powerful aspects of the 128T data model is the flexibility offered by a ",Object(r.b)("inlineCode",{parentName:"p"},"service-policy"),". Giving customers the ability to configure thresholds for when traffic should migrate from path to path based on current network status is a daunting task, however; most customers \u2013 and even application developers \u2013 are unaware of the sensitivity of their service to latency, loss, and jitter."),Object(r.b)("p",null,"This document recommends several base class ",Object(r.b)("inlineCode",{parentName:"p"},"service-policy")," definitions for common types of traffic. These can be used as sane starting points for configuring the 128T. Administrators should derive their own policies from these base definitions, adding in administrative preference for path selection using vectors."),Object(r.b)("p",null,"The entire set of proposed base class policies is provided at the end of this document in a format suitable for copy/paste into existing systems."),Object(r.b)("h2",{id:"traffic-categories"},"Traffic Categories"),Object(r.b)("p",null,"Traffic can be broken into two basic categories, each with their respective set of subcategories. The basic categories are ",Object(r.b)("em",{parentName:"p"},"real-time traffic")," and ",Object(r.b)("em",{parentName:"p"},"non real-time traffic"),". The goal of categorizing traffic is to construct a corresponding set of basic policies for managing that traffic. We will discuss the network resource consumption behavior of commonly deployed network services (such as VoIP, SCCM, and FTP) and create basic models for them, but will also discuss strategies for choosing an appropriate base class for custom applications."),Object(r.b)("h3",{id:"real-time-traffic"},"Real-Time Traffic"),Object(r.b)("p",null,"As described in ","[delay-limits]",", real-time traffic's basic requirement is the ",Object(r.b)("em",{parentName:"p"},"preservation of the time relation (variation) between the information entities of the stream"),". In practice, this means the most important factor to consider for the success of the service traffic is ",Object(r.b)("strong",{parentName:"p"},"latency"),". There are largely three major categories of real-time traffic today, of which two are common in enterprise networking:"),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},"Voice/Video over IP (hereafter collectively referred to as VoIP)"),Object(r.b)("li",{parentName:"ul"},"Remote desktop services"),Object(r.b)("li",{parentName:"ul"},"Online gaming")),Object(r.b)("h4",{id:"voip"},"VoIP"),Object(r.b)("p",null,"VoIP traffic is somewhat unique in that it is comprised of (at least) two separate, parallel channels: the ",Object(r.b)("em",{parentName:"p"},"signaling")," used for user location, call setup and teardown, etc., and the ",Object(r.b)("em",{parentName:"p"},"media")," \u2013 the audio/video traffic itself. Each of these have significantly different properties and for this reason it is recommended that they be separated into unique services whenever possible. In most deployments, there is a clean separation between the IP:ports used for signaling and the IP:ports used for media."),Object(r.b)("div",{className:"admonition admonition-note alert alert--secondary"},Object(r.b)("div",Object(a.a)({parentName:"div"},{className:"admonition-heading"}),Object(r.b)("h5",{parentName:"div"},Object(r.b)("span",Object(a.a)({parentName:"h5"},{className:"admonition-icon"}),Object(r.b)("svg",Object(a.a)({parentName:"span"},{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"}),Object(r.b)("path",Object(a.a)({parentName:"svg"},{fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"})))),"note")),Object(r.b)("div",Object(a.a)({parentName:"div"},{className:"admonition-content"}),Object(r.b)("p",{parentName:"div"},"VoIP signaling is in fact not a real-time network service, but is described here due to its codependence on media streaming, which is a classic real-time network service."))),Object(r.b)("p",null,"VoIP signaling, at least for telephony applications, typically creates a long-lived session; this session is created when a phone is powered on and registers, and lasts until that phone is powered off. As such, it is important to ensure that the signaling follows the best path available at all times. This is done using the ",Object(r.b)("inlineCode",{parentName:"p"},"session-resiliency")," setting ",Object(r.b)("inlineCode",{parentName:"p"},"revertible-failover"),"."),Object(r.b)("p",null,"Signaling is not particularly sensitive to jitter or loss. The recommended latency for VoIP signaling is ",Object(r.b)("inlineCode",{parentName:"p"},"250"),", as the most prevalent VoIP protocol (SIP) retransmits messages when no reply is received within 500ms. Using a value of ",Object(r.b)("inlineCode",{parentName:"p"},"250")," accommodates one round trip between UAC and UAS."),Object(r.b)("p",null,"The ",Object(r.b)("inlineCode",{parentName:"p"},"service-class")," is assigned the value ",Object(r.b)("inlineCode",{parentName:"p"},"Signalling"),", one of 128T's factory default service classes. It will mark egress packets with DSCP 40 (CS5), per the recommendations of ",Object(r.b)("a",Object(a.a)({parentName:"p"},{href:"https://tools.ietf.org/html/rfc4594#section-4.2"}),"[RFC 4594]"),"."),Object(r.b)("p",null,"Baseline configuration:"),Object(r.b)("pre",null,Object(r.b)("code",Object(a.a)({parentName:"pre"},{}),'*admin@labsystem1.fiedler (service-policy[name=voip-signaling])# show\nname                 voip-signaling\ndescription          "SIP, H.323, MEGACO, etc."\nservice-class        Signalling\nsession-resiliency   revertible-failover\npath-quality-filter  true\nbest-effort          true\nmax-latency          250\n')),Object(r.b)("p",null,'VoIP media, on the other hand, is very sensitive to latency, loss, and jitter. The 128T software calculates "MOS" (',Object(r.b)("a",Object(a.a)({parentName:"p"},{href:"https://en.wikipedia.org/wiki/Mean_opinion_score"}),"Mean Opinion Score"),') for every peer path, as a composite metric derived by BFD metric data exchanged across the path. MOS is a "Quality of Experience" measurement, which assigns a single scalar value between 1 and 5 to an interactive session. Our benchmark for reasonable quality for VoIP media will be 3.6, which is the threshold below which many users will be disastisfied ',Object(r.b)("a",Object(a.a)({parentName:"p"},{href:"https://www.voipmechanic.com/mos-mean-opinion-score.htm"}),"[voip-mechanic]"),"."),Object(r.b)("p",null,"Because voice and video calls are transient, we ",Object(r.b)("em",{parentName:"p"},"strongly discourage")," using ",Object(r.b)("inlineCode",{parentName:"p"},"revertible-failover")," as the ",Object(r.b)("inlineCode",{parentName:"p"},"session-resiliency"),' setting. This can cause traffic to "ping pong" between two links during congestion or periods of "brown outs," degrading the overall quality of experience for the caller.'),Object(r.b)("p",null,"Baseline configuration:"),Object(r.b)("pre",null,Object(r.b)("code",Object(a.a)({parentName:"pre"},{}),'*admin@labsystem1.fiedler (service-policy[name=voip-audio])# show\nname                 voip-audio\ndescription          "RTP/bearer audio"\nservice-class        Telephony\nsession-resiliency   failover\npath-quality-filter  true\nbest-effort          true\nmin-mos              3.6\n')),Object(r.b)("div",{className:"admonition admonition-note alert alert--secondary"},Object(r.b)("div",Object(a.a)({parentName:"div"},{className:"admonition-heading"}),Object(r.b)("h5",{parentName:"div"},Object(r.b)("span",Object(a.a)({parentName:"h5"},{className:"admonition-icon"}),Object(r.b)("svg",Object(a.a)({parentName:"span"},{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"}),Object(r.b)("path",Object(a.a)({parentName:"svg"},{fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"})))),"note")),Object(r.b)("div",Object(a.a)({parentName:"div"},{className:"admonition-content"}),Object(r.b)("p",{parentName:"div"},"MOS values can be dramatically affected by the codecs used in the audio/video streams. A G.711 stream (which is uncompressed) can achieve a theoretical maximum MOS of 4.4, whereas a G.729 stream can reach a theoretical maximum MOS of 3.9. However, the 128T's MOS calculation is derivative of path latency, loss, and jitter and will not consider codec. A value above 3.6 should be suitable for most signaled media traffic."))),Object(r.b)("p",null,"Alternatively, it is possible to approximate the same behavior by explicitly specifying loss, latency, and jitter values. This gives additional flexibility if the values need to be tuned individually."),Object(r.b)("p",null,"Baseline configuration (alternate):"),Object(r.b)("pre",null,Object(r.b)("code",Object(a.a)({parentName:"pre"},{}),'*admin@labsystem1.fiedler (service-policy[name=voip-audio])# show\nname                 voip-audio\ndescription          "RTP/bearer audio"\nservice-class        Telephony\nsession-resiliency   failover\npath-quality-filter  true\nbest-effort          true\nmax-loss             1\nmax-latency          150\nmax-jitter           30\n')),Object(r.b)("h4",{id:"interactive-video"},"Interactive Video"),Object(r.b)("p",null,"For video traffic associated with VoIP sessions (videoconferencing), the only difference is the recommended marking of the packets; for video, this is ",Object(r.b)("inlineCode",{parentName:"p"},"MultimediaConferencing")," which uses AF41 (Assured Forwarding)."),Object(r.b)("p",null,"Baseline configuration:"),Object(r.b)("pre",null,Object(r.b)("code",Object(a.a)({parentName:"pre"},{}),'*admin@labsystem1.fiedler (service-policy[name=voip-video])# show\nname                 voip-video\ndescription          "Interactive video"\nservice-class        MultimediaConferencing\nsession-resiliency   failover\npath-quality-filter  true\nbest-effort          true\nmax-loss             1\nmax-latency          150\nmax-jitter           30\n')),Object(r.b)("h4",{id:"remote-desktop-services"},"Remote Desktop Services"),Object(r.b)("p",null,'Remote Desktop (including Virtual Desktop Infrastructure, a.k.a. "VDI") is a client/server implementation where a user communicates with a local client application that connects to a remote server, streaming display information from server to client, and keyboard/mouse information streamed from client to server. This is common in enterprise networking, whether it is in support of "thin client" deployments (as is popularized by the commercial applications Citrix Desktop and VMware\'s "PCoIP"), or troubleshooting tools such as Microsoft Remote Desktop and VNC.'),Object(r.b)("p",null,"Remote Desktop quality of experience is degraded for latency values above 225ms, so this will be our governing factor."),Object(r.b)("p",null,"Baseline configuration:"),Object(r.b)("pre",null,Object(r.b)("code",Object(a.a)({parentName:"pre"},{}),'*admin@labsystem1.fiedler (service-policy[name=remote-desktop])# show\nname                 remote-desktop\ndescription          "Remote Desktop and VDI"\nservice-class        RealTimeInteractive\nsession-resiliency   failover\npath-quality-filter  true\nmax-latency          225\n')),Object(r.b)("div",{className:"admonition admonition-note alert alert--secondary"},Object(r.b)("div",Object(a.a)({parentName:"div"},{className:"admonition-heading"}),Object(r.b)("h5",{parentName:"div"},Object(r.b)("span",Object(a.a)({parentName:"h5"},{className:"admonition-icon"}),Object(r.b)("svg",Object(a.a)({parentName:"span"},{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"}),Object(r.b)("path",Object(a.a)({parentName:"svg"},{fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"})))),"note")),Object(r.b)("div",Object(a.a)({parentName:"div"},{className:"admonition-content"}),Object(r.b)("p",{parentName:"div"},"The baseline configuration recommends ",Object(r.b)("inlineCode",{parentName:"p"},"session-resiliency")," to be set to ",Object(r.b)("inlineCode",{parentName:"p"},"failover"),", which is acceptable for infrequent and/or transient use of remote desktop services such as troubleshooting exercices, or transactional applications. For enterprises that use VDI as a standard means for allowing employees to access their desktops as hosted server infrastructure, consider setting ",Object(r.b)("inlineCode",{parentName:"p"},"session-resiliency")," to ",Object(r.b)("inlineCode",{parentName:"p"},"true"),"."))),Object(r.b)("h4",{id:"gaming"},"Gaming"),Object(r.b)("p",null,"Gaming traffic is highly susceptible to latency and fairly insensitive to loss (since most real-time games will periodically send cumulative updates to clients to ensure state synchronization). Thus the governing metric is again latency."),Object(r.b)("p",null,"We will set ",Object(r.b)("inlineCode",{parentName:"p"},"best-effort")," to ",Object(r.b)("inlineCode",{parentName:"p"},"false"),", since gaming applications requiring low latency will become unplayable if latency exceeds 100ms. We will also set ",Object(r.b)("inlineCode",{parentName:"p"},"revertible-failover")," to ",Object(r.b)("inlineCode",{parentName:"p"},"true"),", as gaming sessions are typically long-lived."),Object(r.b)("p",null,"Baseline configuration:"),Object(r.b)("pre",null,Object(r.b)("code",Object(a.a)({parentName:"pre"},{}),'*admin@labsystem1.fiedler (service-policy[name=gaming])# show\nname                 gaming\ndescription          "Real-time gaming applications"\nservice-class        LowLatencyData\nsession-resiliency   revertible-failover\npath-quality-filter  true\nbest-effort          false\nmax-latency          100\n')),Object(r.b)("h3",{id:"non-real-time-traffic"},"Non Real-Time Traffic"),Object(r.b)("p",null,"As opposed to real-time traffic, the quality of experience for ",Object(r.b)("em",{parentName:"p"},"non real-time traffic")," is less dependent on round trip latency. We will describe several categories of traffic:"),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},"Management traffic, both interactive (e.g., SSH, telnet) and non-interactive (SNMP, NTP, Syslog, API calls, etc.)"),Object(r.b)("li",{parentName:"ul"},"Streaming video"),Object(r.b)("li",{parentName:"ul"},"Mission-critical data: enterprise-specific applications critical to day-to-day operations"),Object(r.b)("li",{parentName:"ul"},"Best-effort data, which typically represents the lion's share of the network traffic"),Object(r.b)("li",{parentName:"ul"},"Bulk/scavenger data, the lowest class of data and first to be dropped during congestion")),Object(r.b)("h4",{id:"management-traffic"},"Management Traffic"),Object(r.b)("p",null,"Management traffic can be interactive, as is the case when administrators log into devices over the network; they can also be non-interactive, as is the case for machine-to-machine (M2M) traffic exemplified by SNMP. The difference between interactive and non-interactive focuses on latency: the human-to-machine interface quickly becomes unusable as latency grows."),Object(r.b)("p",null,"For the interactive traffic, we set ",Object(r.b)("inlineCode",{parentName:"p"},"session-resiliency")," to ",Object(r.b)("inlineCode",{parentName:"p"},"failover")," as these types of interactive sessions are typically short-lived. For M2M traffic, management sessions may last indefinitely, hence the use of ",Object(r.b)("inlineCode",{parentName:"p"},"revertible-failover"),"."),Object(r.b)("p",null,"Baseline configurations:"),Object(r.b)("pre",null,Object(r.b)("code",Object(a.a)({parentName:"pre"},{}),'*admin@labsystem1.fiedler (service-policy[name=management-interactive])# show                                    \nname                 management-interactive\ndescription          "SSH, Telnet, mosh, etc."\nservice-class        OAM\nsession-resiliency   failover\npath-quality-filter  true\nbest-effort          true\nmax-latency          200\n\n*admin@labsystem1.fiedler (service-policy[name=management-m2m])# show                                            \nname                 management-m2m\ndescription          "SNMP, NTP, Syslog, etc."\nservice-class        OAM\nsession-resiliency   revertible-failover\npath-quality-filter  true\nbest-effort          true\nmax-latency          1000\n')),Object(r.b)("h4",{id:"streaming-video"},"Streaming Video"),Object(r.b)("p",null,'There are many variants of streaming video in today\'s networks; for the purposes of session policy definition we will divided streaming video into two categories: enterprise-relevant (such as e-learning content), and non-critical or "scavenger" video (entertainment content such as YouTube).'),Object(r.b)("p",null,"Streaming video, unlike real-time video, is relatively insensitive to loss, latency, and jitter. The distinction we draw between the enterprise-class policy and the scavenger policy is in two factors:"),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},"Enterprise-class video is marked as AF31 as compared to scavenger video marked as CS1"),Object(r.b)("li",{parentName:"ul"},"Enterprise-class video has ",Object(r.b)("inlineCode",{parentName:"li"},"best-effort")," forwarding enabled, whereas scavenger video will not be forwarded if no paths meeth the quality criteria")),Object(r.b)("p",null,"Baseline configuration:"),Object(r.b)("pre",null,Object(r.b)("code",Object(a.a)({parentName:"pre"},{}),'*admin@labsystem1.fiedler (service-policy[name=video-streaming])# show\nname                 video-streaming\ndescription          "Enterprise video streaming services"\nservice-class        MultimediaStreaming\nsession-resiliency   failover\npath-quality-filter  true\nbest-effort          true\nmax-loss             5\nmax-latency          4000\n\n*admin@labsystem1.fiedler (service-policy[name=video-streaming-scavenger])# show\nname                 video-streaming-scavenger\ndescription          "Non-organizational streaming video"\nservice-class        LowPriorityData\nsession-resiliency   failover\npath-quality-filter  true\nbest-effort          false\nmax-loss             5\nmax-latency          4000\n')),Object(r.b)("h4",{id:"interactive-data"},"Interactive Data"),Object(r.b)("p",null,"When users (as network clients) interact with servers in a session-oriented, transactional way \u2013 typically using HTTP/HTTPS \u2013 this is referred to as ",Object(r.b)("em",{parentName:"p"},"interactive data"),". Users are sensitive to high latency connections when interacting with network resources; as such, this ",Object(r.b)("inlineCode",{parentName:"p"},"service-policy")," leverages ",Object(r.b)("inlineCode",{parentName:"p"},"path-quality-filter")," to choose the most suitable forwarding path."),Object(r.b)("p",null,"Baseline configuration:"),Object(r.b)("pre",null,Object(r.b)("code",Object(a.a)({parentName:"pre"},{}),'*admin@labsystem1.fiedler (service-policy[name=data-interactive])# show\nname                 data-interactive\ndescription          "Interactive data"\nservice-class        LowLatencyData\npath-quality-filter  true\nbest-effort          true\nmax-latency          250\n')),Object(r.b)("div",{className:"admonition admonition-note alert alert--secondary"},Object(r.b)("div",Object(a.a)({parentName:"div"},{className:"admonition-heading"}),Object(r.b)("h5",{parentName:"div"},Object(r.b)("span",Object(a.a)({parentName:"h5"},{className:"admonition-icon"}),Object(r.b)("svg",Object(a.a)({parentName:"span"},{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"}),Object(r.b)("path",Object(a.a)({parentName:"svg"},{fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"})))),"note")),Object(r.b)("div",Object(a.a)({parentName:"div"},{className:"admonition-content"}),Object(r.b)("p",{parentName:"div"},"In present-day networks, a large percentage of network transactions leverage HTTP/HTTPS. For this reason, it is not advisable to classify all HTTP/HTTPS traffic as ",Object(r.b)("inlineCode",{parentName:"p"},"data-interactive"),", as this could dramatically shift the percentages of traffic assigned to your 128T's traffic-engineering queues away from ",Object(r.b)("inlineCode",{parentName:"p"},"best-effort")," data. This policy straddles between ",Object(r.b)("inlineCode",{parentName:"p"},"data-mission-critical")," and ",Object(r.b)("inlineCode",{parentName:"p"},"data-best-effort"),", and should be used judiciously to improve network performance for client/server applications that fit into that spot in your network's QoS framework."))),Object(r.b)("h4",{id:"mission-critical-data"},"Mission-Critical Data"),Object(r.b)("p",null,'The policy for "mission-critical" data differs from "interactive-data" only through the use of the ',Object(r.b)("inlineCode",{parentName:"p"},"service-class")," (AF31 vs. AF21). As such, during times of network congestion and contention, mission-critical data will be prioritized over interactive data."),Object(r.b)("p",null,"Resist the temptation to assign this ",Object(r.b)("inlineCode",{parentName:"p"},"service-policy")," to too many services; it should be used sparingly to truly reflect the highest priority services within your enterprise network."),Object(r.b)("p",null,"Baseline configuration:"),Object(r.b)("pre",null,Object(r.b)("code",Object(a.a)({parentName:"pre"},{}),'*admin@labsystem1.fiedler (service-policy[name=data-mission-critical])# show\nname                 data-mission-critical\ndescription          "Mission-critical data"\nservice-class        MultimediaStreaming\npath-quality-filter  true\nbest-effort          true\nmax-latency          250\n')),Object(r.b)("div",{className:"admonition admonition-note alert alert--secondary"},Object(r.b)("div",Object(a.a)({parentName:"div"},{className:"admonition-heading"}),Object(r.b)("h5",{parentName:"div"},Object(r.b)("span",Object(a.a)({parentName:"h5"},{className:"admonition-icon"}),Object(r.b)("svg",Object(a.a)({parentName:"span"},{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"}),Object(r.b)("path",Object(a.a)({parentName:"svg"},{fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"})))),"note")),Object(r.b)("div",Object(a.a)({parentName:"div"},{className:"admonition-content"}),Object(r.b)("p",{parentName:"div"},"This baseline configuration uses the ",Object(r.b)("inlineCode",{parentName:"p"},"MultimediaStreaming")," service-class, which in turn uses DSCP 26 (AF31). MultimediaStreaming is assigned to the 128T's ",Object(r.b)("inlineCode",{parentName:"p"},"medium")," traffic-engineering queue."))),Object(r.b)("h4",{id:"best-effort-data"},"Best-Effort Data"),Object(r.b)("p",null,'The majority of traffic on any network is classified as "best effort" data. Traditionally this will use the ',Object(r.b)("inlineCode",{parentName:"p"},"Standard")," service class (DSCP 0). There are no path quality requirements explicitly called out for best effort data. This is recommended the ",Object(r.b)("inlineCode",{parentName:"p"},"service-policy"),' for "default route" services such as ',Object(r.b)("inlineCode",{parentName:"p"},"0.0.0.0/0"),"."),Object(r.b)("p",null,"Aside from the ",Object(r.b)("inlineCode",{parentName:"p"},"service-class")," assignment, the only other configuration is the ",Object(r.b)("inlineCode",{parentName:"p"},"session-resiliency")," value of ",Object(r.b)("inlineCode",{parentName:"p"},"failover"),". The value of ",Object(r.b)("inlineCode",{parentName:"p"},"failover")," is recommended for transient sessions; for long-lived sessions where resiliency is crucial, consider classifying that traffic discretely as its own ",Object(r.b)("inlineCode",{parentName:"p"},"service")," and assigning a more appropriate ",Object(r.b)("inlineCode",{parentName:"p"},"service-policy"),"."),Object(r.b)("p",null,"Baseline configuration:"),Object(r.b)("pre",null,Object(r.b)("code",Object(a.a)({parentName:"pre"},{}),'*admin@labsystem1.fiedler (service-policy[name=data-best-effort])# show\nname                data-best-effort\ndescription         "Best effort data"\nservice-class       Standard\nsession-resiliency  failover\n')),Object(r.b)("h4",{id:"bulkscavenger-data"},"Bulk/Scavenger Data"),Object(r.b)("p",null,"Bulk/scavenger data is prioritized at the bottom of the list, and will be the last class of traffic to get network resources during periods of contention. This is typically used for things like OS updates, which can rapidly choke a network when populations of machines all attempt downloads in a synchronized fashion."),Object(r.b)("p",null,"Baseline configuration:"),Object(r.b)("pre",null,Object(r.b)("code",Object(a.a)({parentName:"pre"},{}),'*admin@labsystem1.fiedler (service-policy[name=data-scavenger])# show\nname                 data-scavenger\ndescription          "Scavenger class data"\nservice-class        LowPriorityData\npath-quality-filter  false\n')),Object(r.b)("h2",{id:"references"},"References"),Object(r.b)("p",null,"[delay-limits]",'\nSuznjevic, M. and Saldana, J., "Delay Limits for Real-Time Services", ',Object(r.b)("a",Object(a.a)({parentName:"p"},{href:"https://www.ietf.org/archive/id/draft-suznjevic-tsvwg-delay-limits-00.txt"}),"draft-suznjevic-tsvwg-delay-limits-00"),", June 2016."),Object(r.b)("p",null,"[voip-mechanic]",'\n"Measuring MOS for VoIP Test", ',Object(r.b)("a",Object(a.a)({parentName:"p"},{href:"https://www.voipmechanic.com/mos-mean-opinion-score.htm"}),"MOS - Mean Opinion Score for VoIP"),"."),Object(r.b)("p",null,"[RFC 4594]",'\nBabiarz, J., et. al., "Configuration Guidelines for DiffServ Service Classes", ',Object(r.b)("a",Object(a.a)({parentName:"p"},{href:"https://tools.ietf.org/html/rfc4594"}),"RFC 4594"),", August 2006."),Object(r.b)("h2",{id:"basic-service-policy-definitions"},"Basic Service Policy Definitions"),Object(r.b)("p",null,"The output here is provided in ",Object(r.b)("inlineCode",{parentName:"p"},"flat")," format, to facilitate copy/pasting into an existing 128T conductor or router. Note that it has referencial dependencies on the various system-default ",Object(r.b)("inlineCode",{parentName:"p"},"service-class")," configuration, so for users that have modified or removed those ",Object(r.b)("inlineCode",{parentName:"p"},"service-class")," elements, adjustments will be required."),Object(r.b)("pre",null,Object(r.b)("code",Object(a.a)({parentName:"pre"},{}),'config authority service-policy voip-signaling name voip-signaling\nconfig authority service-policy voip-signaling description "SIP, H.323, MEGACO, etc."\nconfig authority service-policy voip-signaling service-class Signalling\nconfig authority service-policy voip-signaling session-resiliency revertible-failover\nconfig authority service-policy voip-signaling path-quality-filter true\nconfig authority service-policy voip-signaling best-effort true\nconfig authority service-policy voip-signaling max-latency 250\nconfig authority service-policy remote-desktop name remote-desktop\nconfig authority service-policy remote-desktop description "Remote Desktop and VDI"\nconfig authority service-policy remote-desktop service-class RealTimeInteractive\nconfig authority service-policy remote-desktop session-resiliency failover\nconfig authority service-policy remote-desktop path-quality-filter true\nconfig authority service-policy remote-desktop max-latency 225\nconfig authority service-policy gaming name gaming\nconfig authority service-policy gaming description "Real-time gaming applications"\nconfig authority service-policy gaming service-class LowLatencyData\nconfig authority service-policy gaming session-resiliency revertible-failover\nconfig authority service-policy gaming path-quality-filter true\nconfig authority service-policy gaming best-effort false\nconfig authority service-policy gaming max-latency 100\nconfig authority service-policy management-interactive name management-interactive\nconfig authority service-policy management-interactive description "SSH, Telnet, mosh, etc."\nconfig authority service-policy management-interactive service-class OAM\nconfig authority service-policy management-interactive session-resiliency failover\nconfig authority service-policy management-interactive path-quality-filter true\nconfig authority service-policy management-interactive best-effort true\nconfig authority service-policy management-interactive max-latency 200\nconfig authority service-policy management-m2m name management-m2m\nconfig authority service-policy management-m2m description "SNMP, NTP, Syslog, etc."\nconfig authority service-policy management-m2m service-class OAM\nconfig authority service-policy management-m2m session-resiliency revertible-failover\nconfig authority service-policy management-m2m path-quality-filter true\nconfig authority service-policy management-m2m best-effort true\nconfig authority service-policy management-m2m max-latency 1000\nconfig authority service-policy voip-audio name voip-audio\nconfig authority service-policy voip-audio description "RTP/bearer audio"\nconfig authority service-policy voip-audio service-class Telephony\nconfig authority service-policy voip-audio session-resiliency failover\nconfig authority service-policy voip-audio path-quality-filter true\nconfig authority service-policy voip-audio best-effort true\nconfig authority service-policy voip-audio max-loss 1\nconfig authority service-policy voip-audio max-latency 150\nconfig authority service-policy voip-audio max-jitter 30\nconfig authority service-policy voip-video name voip-video\nconfig authority service-policy voip-video description "Interactive video"\nconfig authority service-policy voip-video service-class RealTimeInteractive\nconfig authority service-policy voip-video session-resiliency failover\nconfig authority service-policy voip-video path-quality-filter true\nconfig authority service-policy voip-video best-effort true\nconfig authority service-policy voip-video max-loss 1\nconfig authority service-policy voip-video max-latency 150\nconfig authority service-policy voip-video max-jitter 30\nconfig authority service-policy video-streaming name video-streaming\nconfig authority service-policy video-streaming description "Enterprise video streaming services"\nconfig authority service-policy video-streaming service-class MultimediaStreaming\nconfig authority service-policy video-streaming session-resiliency failover\nconfig authority service-policy video-streaming path-quality-filter true\nconfig authority service-policy video-streaming best-effort true\nconfig authority service-policy video-streaming max-loss 5\nconfig authority service-policy video-streaming max-latency 4000\nconfig authority service-policy video-streaming-scavenger name video-streaming-scavenger\nconfig authority service-policy video-streaming-scavenger description "Non-organizational streaming video"\nconfig authority service-policy video-streaming-scavenger service-class LowPriorityData\nconfig authority service-policy video-streaming-scavenger session-resiliency failover\nconfig authority service-policy video-streaming-scavenger path-quality-filter true\nconfig authority service-policy video-streaming-scavenger best-effort false\nconfig authority service-policy video-streaming-scavenger max-loss 5\nconfig authority service-policy video-streaming-scavenger max-latency 4000\nconfig authority service-policy data-best-effort name data-best-effort\nconfig authority service-policy data-best-effort description "Best effort data"\nconfig authority service-policy data-best-effort service-class Standard\nconfig authority service-policy data-best-effort session-resiliency failover\nconfig authority service-policy data-interactive name data-interactive\nconfig authority service-policy data-interactive description "Interactive data"\nconfig authority service-policy data-interactive service-class LowLatencyData\nconfig authority service-policy data-interactive path-quality-filter true\nconfig authority service-policy data-interactive best-effort true\nconfig authority service-policy data-interactive max-latency 250\nconfig authority service-policy data-mission-critical name data-mission-critical\nconfig authority service-policy data-mission-critical description "Mission-critical data"\nconfig authority service-policy data-mission-critical service-class MultimediaStreaming\nconfig authority service-policy data-mission-critical path-quality-filter true\nconfig authority service-policy data-mission-critical best-effort true\nconfig authority service-policy data-mission-critical max-latency 250\nconfig authority service-policy data-scavenger name data-scavenger\nconfig authority service-policy data-scavenger description "Scavenger class data"\nconfig authority service-policy data-scavenger service-class LowPriorityData\nconfig authority service-policy data-scavenger path-quality-filter false\n')))}p.isMDXComponent=!0},215:function(e,i,t){"use strict";t.d(i,"a",(function(){return d})),t.d(i,"b",(function(){return f}));var a=t(0),n=t.n(a);function r(e,i,t){return i in e?Object.defineProperty(e,i,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[i]=t,e}function o(e,i){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);i&&(a=a.filter((function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable}))),t.push.apply(t,a)}return t}function s(e){for(var i=1;i<arguments.length;i++){var t=null!=arguments[i]?arguments[i]:{};i%2?o(Object(t),!0).forEach((function(i){r(e,i,t[i])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):o(Object(t)).forEach((function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(t,i))}))}return e}function c(e,i){if(null==e)return{};var t,a,n=function(e,i){if(null==e)return{};var t,a,n={},r=Object.keys(e);for(a=0;a<r.length;a++)t=r[a],i.indexOf(t)>=0||(n[t]=e[t]);return n}(e,i);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)t=r[a],i.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(n[t]=e[t])}return n}var l=n.a.createContext({}),p=function(e){var i=n.a.useContext(l),t=i;return e&&(t="function"==typeof e?e(i):s(s({},i),e)),t},d=function(e){var i=p(e.components);return n.a.createElement(l.Provider,{value:i},e.children)},m={inlineCode:"code",wrapper:function(e){var i=e.children;return n.a.createElement(n.a.Fragment,{},i)}},b=n.a.forwardRef((function(e,i){var t=e.components,a=e.mdxType,r=e.originalType,o=e.parentName,l=c(e,["components","mdxType","originalType","parentName"]),d=p(t),b=a,f=d["".concat(o,".").concat(b)]||d[b]||m[b]||r;return t?n.a.createElement(f,s(s({ref:i},l),{},{components:t})):n.a.createElement(f,s({ref:i},l))}));function f(e,i){var t=arguments,a=i&&i.mdxType;if("string"==typeof e||a){var r=t.length,o=new Array(r);o[0]=b;var s={};for(var c in i)hasOwnProperty.call(i,c)&&(s[c]=i[c]);s.originalType=e,s.mdxType="string"==typeof e?e:a,o[1]=s;for(var l=2;l<r;l++)o[l]=t[l];return n.a.createElement.apply(null,o)}return n.a.createElement.apply(null,t)}b.displayName="MDXCreateElement"}}]);