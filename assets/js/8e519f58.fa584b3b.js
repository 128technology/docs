"use strict";(self.webpackChunk_128t_docs=self.webpackChunk_128t_docs||[]).push([[9894],{46467:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>a,contentTitle:()=>s,default:()=>h,frontMatter:()=>i,metadata:()=>l,toc:()=>c});var o=t(74848),r=t(28453);const i={title:"Rolling Back Software",sidebar_label:"Rollback"},s=void 0,l={id:"intro_rollback",title:"Rolling Back Software",description:"Occasionally you may need to revert to a previously running version of SSR software. This is referred to as rolling back, and can be accomplished via either the standalone SSR installer application, or by using Automated Provisioner.",source:"@site/docs/intro_rollback.md",sourceDirName:".",slug:"/intro_rollback",permalink:"/docs/intro_rollback",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{title:"Rolling Back Software",sidebar_label:"Rollback"},sidebar:"docs",previous:{title:"Legacy Upgrades",permalink:"/docs/upgrade_legacy"},next:{title:"Installation Overview",permalink:"/docs/intro_installation"}},a={},c=[{value:"Rollback Considerations",id:"rollback-considerations",level:2},{value:"Legacy Rollback",id:"legacy-rollback",level:2},{value:"Rolling Back using Automated Provisioner",id:"rolling-back-using-automated-provisioner",level:3},{value:"Rolling Back using the Interactive Installer",id:"rolling-back-using-the-interactive-installer",level:3}];function d(e){const n={admonition:"admonition",code:"code",em:"em",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",...(0,r.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(n.p,{children:["Occasionally you may need to revert to a previously running version of SSR software. This is referred to as ",(0,o.jsx)(n.em,{children:"rolling back"}),", and can be accomplished via either the standalone SSR installer application, or by using Automated Provisioner."]}),"\n",(0,o.jsx)(n.admonition,{type:"note",children:(0,o.jsx)(n.p,{children:"As with upgrading, rolling back software using Automated Provisioner is only possible on routers managed by an SSR Conductor."})}),"\n",(0,o.jsx)(n.h2,{id:"rollback-considerations",children:"Rollback Considerations"}),"\n",(0,o.jsxs)(n.p,{children:["With an upgrade or installation of SSR v6.3.0, conductor rollbacks are performed using the ",(0,o.jsx)(n.code,{children:"request system software revert"})," command from the conductor's PCLI. The ",(0,o.jsx)(n.code,{children:"show system software revert"})," command to view the progress of a revert operation. On routers, it is recommended that upgrades are performed from the conductor's GUI. Router rollbacks must be performed from the PCLI."]}),"\n",(0,o.jsx)(n.p,{children:"Beginning with SSR v6.3.0, the use of the interactive installer is not supported, or necessary. Software installation and upgrade upgrade activities are supported from the GUI or PCLI; rollback activities can only be performed from the the PCLI."}),"\n",(0,o.jsx)(n.h2,{id:"legacy-rollback",children:"Legacy Rollback"}),"\n",(0,o.jsx)(n.p,{children:"Use the information below when rolling back software versions prior to 6.3.0."}),"\n",(0,o.jsx)(n.p,{children:"Rollbacks are not supported if configuration changes are made after the conductor or router are updated to the target version. For example, if the conductor and/or router has been upgraded to version 6.2, and a new feature is configured on the target conductor or router, rolling back to an earlier version of software may result in loss of configuration or router functionality."}),"\n",(0,o.jsx)(n.h3,{id:"rolling-back-using-automated-provisioner",children:"Rolling Back using Automated Provisioner"}),"\n",(0,o.jsx)(n.p,{children:"From the PCLI command line on your conductor, issue the command:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{children:"send command rollback router [router name]\n"})}),"\n",(0,o.jsx)(n.p,{children:"Confirming the action will initiate the rollback process."}),"\n",(0,o.jsx)(n.h3,{id:"rolling-back-using-the-interactive-installer",children:"Rolling Back using the Interactive Installer"}),"\n",(0,o.jsxs)(n.p,{children:["For software versions prior to SSR v6.3.0, ",(0,o.jsx)(n.strong,{children:"conductors"})," can only be rolled back with the interactive installer. Shutting down the salt-minion is required."]}),"\n",(0,o.jsx)(n.admonition,{type:"important",children:(0,o.jsxs)(n.p,{children:["Rolling back an earlier version of the SSR software on a router that is managed by a conductor using the interactive installer ",(0,o.jsx)(n.code,{children:"install128t"})," may result in the system becoming unresponsive. It is highly recommended that managed router rollbacks be performed through the conductor UI. Manual upgrades and rollbacks may not be resilient to failures."]})}),"\n",(0,o.jsx)(n.p,{children:"For all software versions prior to SSR v6.3.0 in a situation where a rollback must be performed with the interactive installer, the salt-minion must be shut down. This is done on the target node using the following command:"}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.code,{children:"sudo systemctl stop salt-minion"})}),"\n",(0,o.jsxs)(n.ol,{children:["\n",(0,o.jsx)(n.li,{children:"Launch a Linux command prompt window on the node you wish to rollback."}),"\n"]}),"\n",(0,o.jsx)(n.admonition,{type:"note",children:(0,o.jsx)(n.p,{children:"To avoid SSH session timeout during installation, it is strongly recommended to use the Screen utility when performing a rollback in interactive mode."})}),"\n",(0,o.jsxs)(n.ol,{start:"2",children:["\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:"Create a screen and attach to it."}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{children:"screen -d -m -s <name-of-screen-session>\nscreen -x <name-of-screen-session>\n"})}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:"Shut down the salt-minion on the target node using the following command:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{children:"sudo systemctl stop salt-minion\n"})}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:"Enter the command to launch the interactive installer wizard."}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{children:"sudo install128t\n"})}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:["Skip the step regarding the installation of a certificate by selecting ",(0,o.jsx)(n.em,{children:"No"})," at the prompt."]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:"The Interactive Installer will determine that SSR software is already installed. In the dialog box, navigate to the item labeled Roll Back and press the space bar to select the item."}),"\n",(0,o.jsx)(n.admonition,{type:"tip",children:(0,o.jsx)(n.p,{children:"The version of software that will be running after executing the roll back function is displayed in the footer of the window."})}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:["Navigate to the OK button and press ",(0,o.jsx)(n.code,{children:"enter"})," to select it."]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:"Follow the on-screen prompts to complete the Roll Back operation."}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:"Detach from the Screen utility."}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{children:"ctrl+a\nd\n"})}),"\n"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(d,{...e})}):d(e)}},28453:(e,n,t)=>{t.d(n,{R:()=>s,x:()=>l});var o=t(96540);const r={},i=o.createContext(r);function s(e){const n=o.useContext(i);return o.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:s(e.components),o.createElement(i.Provider,{value:n},e.children)}}}]);