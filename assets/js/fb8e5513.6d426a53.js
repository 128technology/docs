"use strict";(self.webpackChunk_128t_docs=self.webpackChunk_128t_docs||[]).push([[9480],{52130:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>r,default:()=>h,frontMatter:()=>o,metadata:()=>d,toc:()=>a});var s=t(74848),i=t(28453);const o={title:"Troubleshooting STEP",sidebar_label:"Troubleshooting STEP"},r=void 0,d={id:"ts_step",title:"Troubleshooting STEP",description:"Missing Forwarding State Information",source:"@site/docs/ts_step.md",sourceDirName:".",slug:"/ts_step",permalink:"/docs/ts_step",draft:!1,unlisted:!1,tags:[],version:"current",lastUpdatedAt:1710776226,formattedLastUpdatedAt:"Mar 18, 2024",frontMatter:{title:"Troubleshooting STEP",sidebar_label:"Troubleshooting STEP"},sidebar:"docs",previous:{title:"Using the STEP GUI",permalink:"/docs/howto_STEP_GUI"},next:{title:"Local Configuration Override",permalink:"/docs/how_to_local_config_override"}},c={},a=[{value:"Missing Forwarding State Information",id:"missing-forwarding-state-information",level:2},{value:"Show Commands",id:"show-commands",level:3}];function l(e){const n={a:"a",code:"code",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.h2,{id:"missing-forwarding-state-information",children:"Missing Forwarding State Information"}),"\n",(0,s.jsx)(n.p,{children:"If a router is missing the expected STEP provided forwarding state information (FIB entries and service-path entries) for a service:"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["Check that the router is connected to the STEP repository (using ",(0,s.jsx)(n.code,{children:"show step clients"}),")"]}),"\n",(0,s.jsxs)(n.li,{children:["Check the router's view of the LSDB (use the ",(0,s.jsx)(n.code,{children:"show step lsdb"})," command) to verify the destination router is known and is advertising the service in its STEP document"]}),"\n",(0,s.jsxs)(n.li,{children:["Check the result of the STEP path computation for the service (use ",(0,s.jsx)(n.code,{children:"show step routes"}),")"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"show-commands",children:"Show Commands"}),"\n",(0,s.jsx)(n.p,{children:"The following show commands provide a view into the STEP functionality."}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"show step lsdb"})}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"admin@T197_DUT5.Site5# show step lsdb\nThu 2020-12-17 19:04:42 UTC\n\nRetrieving from 'Site5'...\n\n================== ===============\n District           Originator\n================== ===============\n default-district   Site4\n default-district   Site5\n default-district   Datacenter\n\n"})}),"\n",(0,s.jsxs)(n.p,{children:["For additional information, see ",(0,s.jsx)(n.a,{href:"/docs/cli_reference#show-step-lsdb",children:"show step lsdb"}),"."]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"show step routes"})}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"admin@T197_DUT5.Site5# show step routes\nThu 2020-12-17 19:26:56 UTC\n\nRetrieving from 'T197_DUT5.Site5'...\n\n=========== ===================== =============\n Node Name   Service               IP Prefix\n=========== ===================== =============\n T197_DUT5   site4-LAN             10.4.0.0/16\n\n"})}),"\n",(0,s.jsxs)(n.p,{children:["For additional information, see ",(0,s.jsx)(n.a,{href:"/docs/cli_reference#show-step-routes",children:"show step routes"}),"."]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"show step clients"})}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["To verify that a given router has established connectivity to its repositories, use the ",(0,s.jsx)(n.code,{children:"show step clients"})," command:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"admin@dut3.Blackall# show step clients\nusage: clients [rows <rows>] [<verbosity>]\n\nShow STEP clients\n\nkeyword arguments:\nrows    The number of items to display at once [type: int or 'all'] (default: 50)\n\npositional arguments:\nverbosity    detail | summary (default: summary)\n\n\nadmin@dut3.Blackall# show step clients\nFri 2022-04-15 21:20:46 UTC\n\n================= ================= =========== ================= ============== ================= ========== =================\n Repository        Uptime            Documents   Last Received     Num Received   Last Sent         Num Sent   Num Disconnects\n================= ================= =========== ================= ============== ================= ========== =================\n 127.0.1.2:15555   0 days 22:29:57   None        0 days  0:00:41           1391   0 days  0:01:23        465                 2\n 127.0.1.3:15555   0 days 22:27:15   None        0 days  0:00:41           1393   0 days  0:01:23        465                 1\n\n\u2714 Retrieving step information...\nCompleted in 0.46 seconds\n\n\nadmin@dut3.Blackall# show step clients detail\nFri 2022-04-15 21:23:34 UTC\n\n=======================================================\n Information\n=======================================================\n Item:\n   Last Client Disconnect Time:   2022-04-14T22:48:26Z\n   Connected:                     True\n   Last Client Connect Time:      2022-04-14T22:50:50Z\n   Num Updates Received:          1394\n   Num Router Documents:          None\n   Num Client Connects:           3\n   Num Client Disconnects:        2\n   Num Updates Sent:              466\n   Last Update Received Time:     2022-04-15T21:23:06Z\n   Name:                          Blackall_dut3_Step_0\n   Last Update Sent Time:         2022-04-15T21:22:24Z\n   Repository:                    127.0.1.2:15555\n Item:\n   Last Client Disconnect Time:   2022-04-14T22:51:35Z\n   Connected:                     True\n   Last Client Connect Time:      2022-04-14T22:53:32Z\n   Num Updates Received:          1396\n   Num Router Documents:          None\n   Num Client Connects:           2\n   Num Client Disconnects:        1\n   Num Updates Sent:              466\n   Last Update Received Time:     2022-04-15T21:23:06Z\n   Name:                          Blackall_dut3_Step_1\n   Last Update Sent Time:         2022-04-15T21:22:24Z\n   Repository:                    127.0.1.3:15555\n\n\u2714 Retrieving step information...\nCompleted in 0.06 seconds\n\n"})})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(l,{...e})}):l(e)}},28453:(e,n,t)=>{t.d(n,{R:()=>r,x:()=>d});var s=t(96540);const i={},o=s.createContext(i);function r(e){const n=s.useContext(o);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:r(e.components),s.createElement(o.Provider,{value:n},e.children)}}}]);