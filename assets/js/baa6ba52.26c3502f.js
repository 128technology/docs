"use strict";(self.webpackChunk_128t_docs=self.webpackChunk_128t_docs||[]).push([[8114],{3905:function(e,t,a){a.d(t,{Zo:function(){return p},kt:function(){return u}});var n=a(67294);function s(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function o(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(Object(a),!0).forEach((function(t){s(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function r(e,t){if(null==e)return{};var a,n,s=function(e,t){if(null==e)return{};var a,n,s={},i=Object.keys(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||(s[a]=e[a]);return s}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(s[a]=e[a])}return s}var c=n.createContext({}),l=function(e){var t=n.useContext(c),a=t;return e&&(a="function"==typeof e?e(t):o(o({},t),e)),a},p=function(e){var t=l(e.components);return n.createElement(c.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},h=n.forwardRef((function(e,t){var a=e.components,s=e.mdxType,i=e.originalType,c=e.parentName,p=r(e,["components","mdxType","originalType","parentName"]),h=l(a),u=s,m=h["".concat(c,".").concat(u)]||h[u]||d[u]||i;return a?n.createElement(m,o(o({ref:t},p),{},{components:a})):n.createElement(m,o({ref:t},p))}));function u(e,t){var a=arguments,s=t&&t.mdxType;if("string"==typeof e||s){var i=a.length,o=new Array(i);o[0]=h;var r={};for(var c in t)hasOwnProperty.call(t,c)&&(r[c]=t[c]);r.originalType=e,r.mdxType="string"==typeof e?e:s,o[1]=r;for(var l=2;l<i;l++)o[l]=a[l];return n.createElement.apply(null,o)}return n.createElement.apply(null,a)}h.displayName="MDXCreateElement"},69324:function(e,t,a){a.r(t),a.d(t,{assets:function(){return p},contentTitle:function(){return c},default:function(){return u},frontMatter:function(){return r},metadata:function(){return l},toc:function(){return d}});var n=a(87462),s=a(63366),i=(a(67294),a(3905)),o=["components"],r={title:"Session Recovery Detection",sidebar_label:"Session Recovery Detection"},c=void 0,l={unversionedId:"config_session_recovery",id:"config_session_recovery",title:"Session Recovery Detection",description:"Version History",source:"@site/docs/config_session_recovery.md",sourceDirName:".",slug:"/config_session_recovery",permalink:"/docs/config_session_recovery",draft:!1,tags:[],version:"current",lastUpdatedAt:1697734319,formattedLastUpdatedAt:"Oct 19, 2023",frontMatter:{title:"Session Recovery Detection",sidebar_label:"Session Recovery Detection"},sidebar:"docs",previous:{title:"Asset Connection Resiliency",permalink:"/docs/config_asset_connection_resiliency"},next:{title:"Configuring DSCP Steering",permalink:"/docs/config_dscp_steering"}},p={},d=[{value:"Version History",id:"version-history",level:3},{value:"How It Works",id:"how-it-works",level:2},{value:"Session Recovery Detection",id:"session-recovery-detection",level:3},{value:"PCLI Configuration",id:"pcli-configuration",level:4},{value:"Show Stats Commands",id:"show-stats-commands",level:3}],h={toc:d};function u(e){var t=e.components,r=(0,s.Z)(e,o);return(0,i.kt)("wrapper",(0,n.Z)({},h,r,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",{id:"version-history"},"Version History"),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:null},"Release"),(0,i.kt)("th",{parentName:"tr",align:null},"Modification"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"6.1.0"),(0,i.kt)("td",{parentName:"tr",align:null},"Feature introduced")))),(0,i.kt)("p",null,"When SSR routers peer, forward and reverse flows are established between devices as traffic flows from client to server through the routers. As failures occur in networks, the SSR communicates with its peers in an effort to preserve client to server communication across alternate available pathways. Traffic destined to flows that no longer exist result in a metadata response from the SSR. This response may falsely indicate that the SSR is listening and responding to wayports - which it does not."),(0,i.kt)("p",null,"An alternate approach to SSR communication for session recovery has been created, ",(0,i.kt)("inlineCode",{parentName:"p"},"session-recovery-detection"),". The feature has two modes, the default ",(0,i.kt)("inlineCode",{parentName:"p"},"packet-based")," detection, and ",(0,i.kt)("inlineCode",{parentName:"p"},"inactivity-based")," detection which has a configurable timeout. When inactivity-based detection is enabled, the originating node monitors activity on the flow. If no activity is detected for the specified time, the originator will add an additional metadata attribute called ",(0,i.kt)("inlineCode",{parentName:"p"},"session-health-check")," to the next packet. The ",(0,i.kt)("inlineCode",{parentName:"p"},"session-health-check")," attribute is validated by the receiving node. If the flow on the receiving node does not exist, it generates an ",(0,i.kt)("inlineCode",{parentName:"p"},"enable-metadata")," message back to the originator. "),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"Session Flow Example",src:a(42549).Z,width:"956",height:"706"})),(0,i.kt)("p",null,"The activity is monitored for both forward and reverse flows, and if forward flow is deemed to be idle, the ",(0,i.kt)("inlineCode",{parentName:"p"},"session-health-check")," attribute will be generated for the reverse traffic."),(0,i.kt)("h2",{id:"how-it-works"},"How It Works"),(0,i.kt)("p",null,"The following configuration parameter is available under Authority: "),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"Session Recovery Detection",src:a(51771).Z,width:"2986",height:"416"})),(0,i.kt)("h3",{id:"session-recovery-detection"},"Session Recovery Detection"),(0,i.kt)("p",null,"Session Recovery Detection has two modes:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"packet-based")," (default mode)"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"inactivity-based")," This has a configurable ",(0,i.kt)("inlineCode",{parentName:"li"},"inactivity-timeout")," with a default of 5 seconds.")),(0,i.kt)("admonition",{type:"important"},(0,i.kt)("p",{parentName:"admonition"},"Because this feature uses a request/response mechanism, ",(0,i.kt)("strong",{parentName:"p"},"all")," SSR's using this feature must be upgraded.")),(0,i.kt)("h4",{id:"pcli-configuration"},"PCLI Configuration"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"config\n    authority        \n        session-recovery-detection\n            mode                inactivity-based\n            inactivity-timeout  1\n        exit\n    exit\nexit\n")),(0,i.kt)("h3",{id:"show-stats-commands"},"Show Stats Commands"),(0,i.kt)("p",null,"The following ",(0,i.kt)("inlineCode",{parentName:"p"},"show stats")," commands provide insight into session information. For additional details, select the link for each stat. "),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("a",{parentName:"p",href:"/docs/cli_stats_reference#show-stats-packet-processing-action-failure-metadata-session-health-check-buffer-allocation"},"show stats packet-processing action failure metadata session-health-check-buffer-allocation"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("a",{parentName:"p",href:"/docs/cli_stats_reference#show-stats-packet-processing-action-failure-metadata-session-health-check-timeout"},"show stats packet-processing action failure metadata session-health-check-timeout"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("a",{parentName:"p",href:"/docs/cli_stats_reference#show-stats-packet-processing-action-failure-metadata-session-health-check-timeout-forward-pinhole-flow"},"show stats packet-processing action failure metadata session-health-check-timeout-forward-pinhole-flow"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("a",{parentName:"p",href:"/docs/cli_stats_reference#show-stats-packet-processing-action-failure-metadata-session-health-check-timeout-reverse-pinhole-flow"},"show stats packet-processing action failure metadata session-health-check-timeout-reverse-pinhole-flow"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("a",{parentName:"p",href:"/docs/cli_stats_reference#show-stats-packet-processing-action-success-metadata-added-session-health-check"},"show stats packet-processing action success metadata added-session-health-check"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("a",{parentName:"p",href:"/docs/cli_stats_reference#show-stats-packet-processing-action-success-metadata-generated-session-health-check-acknowledgement"},"show stats packet-processing action success metadata generated-session-health-check-acknowledgement"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("a",{parentName:"p",href:"/docs/cli_stats_reference#show-stats-packet-processing-action-success-metadata-received-session-health-check-acknowledgement"},"show stats packet-processing action success metadata received-session-health-check-acknowledgement"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("a",{parentName:"p",href:"/docs/cli_stats_reference#show-stats-packet-processing-action-success-metadata-received-stale-session-health-check-acknowledgement"},"show stats packet-processing action success metadata received-stale-session-health-check-acknowledgement"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("a",{parentName:"p",href:"/docs/cli_stats_reference#show-stats-packet-processing-action-success-metadata-sent-session-health-check-acknowledgement"},"show stats packet-processing action success metadata sent-session-health-check-acknowledgement"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("a",{parentName:"p",href:"/docs/cli_stats_reference#show-stats-service-area-received-reverse-packets-for-stuck-pinhole-session"},"show stats service-area received reverse-packets-for-stuck-pinhole-session")))))}u.isMDXComponent=!0},42549:function(e,t,a){t.Z=a.p+"assets/images/config_session_flow_example-9afbae6ca0937a72ef2861afb0fe2173.png"},51771:function(e,t,a){t.Z=a.p+"assets/images/config_session_recovery-ce648e98436e17723f42633ad70ff74d.png"}}]);