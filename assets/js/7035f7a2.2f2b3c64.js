"use strict";(self.webpackChunk_128t_docs=self.webpackChunk_128t_docs||[]).push([[7122],{19462:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>a,default:()=>u,frontMatter:()=>r,metadata:()=>o,toc:()=>c});var i=n(74848),s=n(28453);const r={title:"Unable to bind accelerated networking interfaces in Azure when using vmbus-id",date:"2024-4-25",tags:["6.1","6.1.5"],hide_table_of_contents:!1},a=void 0,o={permalink:"/kb/2024/04/25/I95-54541",source:"@site/kb/2024-04-25-I95-54541.md",title:"Unable to bind accelerated networking interfaces in Azure when using vmbus-id",description:"Recent changes to fix MTU to use the max device supported value causes the SSR to set MTU to 9K. However since NetVSC does not support Scatter RX, it fails to bind because the SSR uses packet buffers of size 2K, and cannot span multiple mbufs.",date:"2024-04-25T00:00:00.000Z",formattedDate:"April 25, 2024",tags:[{label:"6.1",permalink:"/kb/tags/6-1"},{label:"6.1.5",permalink:"/kb/tags/6-1-5"}],hasTruncateMarker:!0,authors:[],frontMatter:{title:"Unable to bind accelerated networking interfaces in Azure when using vmbus-id",date:"2024-4-25",tags:["6.1","6.1.5"],hide_table_of_contents:!1},unlisted:!1,prevItem:{title:"Packet forwarding stops in AWS after several hours",permalink:"/kb/2024/04/25/I95-56233"},nextItem:{title:"Application Identification incompatible with DSCP Steering",permalink:"/kb/2024/04/25/I95-56437"}},l={authorsImageUrls:[]},c=[{value:"Problem",id:"problem",level:3},{value:"Release Notes",id:"release-notes",level:3},{value:"Severity",id:"severity",level:3},{value:"Status",id:"status",level:3},{value:"Resolved In",id:"resolved-in",level:3},{value:"Product",id:"product",level:3},{value:"Functional Area",id:"functional-area",level:3},{value:"Workaround",id:"workaround",level:3}];function d(e){const t={a:"a",br:"br",h3:"h3",li:"li",p:"p",strong:"strong",ul:"ul",...(0,s.R)(),...e.components},{Details:n}=t;return n||function(e,t){throw new Error("Expected "+(t?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Details",!0),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(t.p,{children:"Recent changes to fix MTU to use the max device supported value causes the SSR to set MTU to 9K. However since NetVSC does not support Scatter RX, it fails to bind because the SSR uses packet buffers of size 2K, and cannot span multiple mbufs."}),"\n",(0,i.jsxs)(t.p,{children:[(0,i.jsx)(t.strong,{children:"Issue ID:"})," I95-54541",(0,i.jsx)(t.br,{}),"\n",(0,i.jsx)(t.strong,{children:"Last Updated:"})," 2024-04-25",(0,i.jsx)(t.br,{}),"\n",(0,i.jsx)(t.strong,{children:"Introduced in SSR Version:"})," 6.1.5"]}),"\n",(0,i.jsx)(t.h3,{id:"problem",children:"Problem"}),"\n",(0,i.jsx)(t.p,{children:"NetVSC does not support Scatter RX, so with new changes to use 9K max RX, it is unable to span multipe 2K packet buffers. When matched with MLX in accelerated networking, the MLX device fails to initialize.\nDuring device configuration, user specified MTU exceeding 2K will cause init failure for that device interface."}),"\n",(0,i.jsx)(t.p,{children:"Limit the MTU (also max RX size in DPDK) of NetVSC devices to SSR packet buffer size."}),"\n",(0,i.jsx)(t.h3,{id:"release-notes",children:"Release Notes"}),"\n",(0,i.jsx)(t.p,{children:"Fixes an issue where device-interfaces configured in Azure VM would fail during initialization and port remains operationally down."}),"\n",(0,i.jsx)(t.h3,{id:"severity",children:"Severity"}),"\n",(0,i.jsxs)(n,{children:[(0,i.jsx)(t.p,{children:"The potential impact of a software defect if encountered. Severity levels are:"}),(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsx)(t.li,{children:"Critical: Could severely affect service, capacity/traffic, and maintenance capabilities. May have a prolonged impact to the entire system."}),"\n",(0,i.jsx)(t.li,{children:"Major: Could seriously affect system operation, maintenance, administration and related tasks."}),"\n",(0,i.jsx)(t.li,{children:"Minor: Would not significantly impair the functioning or affect service."}),"\n"]})]}),"\n",(0,i.jsx)(t.p,{children:"Major"}),"\n",(0,i.jsx)(t.h3,{id:"status",children:"Status"}),"\n",(0,i.jsx)(t.p,{children:"Closed"}),"\n",(0,i.jsx)(t.h3,{id:"resolved-in",children:"Resolved In"}),"\n",(0,i.jsxs)(t.p,{children:[(0,i.jsx)(t.a,{href:"/docs/release_notes_128t_6.1#release-618-15",children:"6.1.8"}),",\n",(0,i.jsx)(t.a,{href:"/docs/release_notes_128t_6.2#release-624-14r2",children:"6.2.4"})]}),"\n",(0,i.jsx)(t.h3,{id:"product",children:"Product"}),"\n",(0,i.jsx)(t.p,{children:"Azure SSR AMI"}),"\n",(0,i.jsx)(t.h3,{id:"functional-area",children:"Functional Area"}),"\n",(0,i.jsx)(t.p,{children:"Interface Binding"}),"\n",(0,i.jsx)(t.h3,{id:"workaround",children:"Workaround"}),"\n",(0,i.jsx)(n,{children:(0,i.jsx)(t.p,{children:"Juniper may provide a method to temporarily circumvent a problem; workarounds do not exist for all issues."})}),"\n",(0,i.jsx)(t.p,{children:"Disable the accelerated networking to allow the device to be bound via PCLI address instead of vmbus-id."})]})}function u(e={}){const{wrapper:t}={...(0,s.R)(),...e.components};return t?(0,i.jsx)(t,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},28453:(e,t,n)=>{n.d(t,{R:()=>a,x:()=>o});var i=n(96540);const s={},r=i.createContext(s);function a(e){const t=i.useContext(r);return i.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function o(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:a(e.components),i.createElement(r.Provider,{value:t},e.children)}}}]);