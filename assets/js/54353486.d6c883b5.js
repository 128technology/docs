"use strict";(self.webpackChunk_128t_docs=self.webpackChunk_128t_docs||[]).push([[1628],{3905:function(e,t,n){n.d(t,{Zo:function(){return c},kt:function(){return m}});var r=n(67294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var s=r.createContext({}),u=function(e){var t=r.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},c=function(e){var t=u(e.components);return r.createElement(s.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},d=r.forwardRef((function(e,t){var n=e.components,a=e.mdxType,o=e.originalType,s=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),d=u(n),m=a,f=d["".concat(s,".").concat(m)]||d[m]||p[m]||o;return n?r.createElement(f,i(i({ref:t},c),{},{components:n})):r.createElement(f,i({ref:t},c))}));function m(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=n.length,i=new Array(o);i[0]=d;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l.mdxType="string"==typeof e?e:a,i[1]=l;for(var u=2;u<o;u++)i[u]=n[u];return r.createElement.apply(null,i)}return r.createElement.apply(null,n)}d.displayName="MDXCreateElement"},91263:function(e,t,n){n.r(t),n.d(t,{assets:function(){return c},contentTitle:function(){return s},default:function(){return m},frontMatter:function(){return l},metadata:function(){return u},toc:function(){return p}});var r=n(87462),a=n(63366),o=(n(67294),n(3905)),i=["components"],l={title:"Traceroute",sidebar_label:"Traceroute"},s=void 0,u={unversionedId:"ts_traceroute",id:"ts_traceroute",title:"Traceroute",description:"Version History",source:"@site/docs/ts_traceroute.md",sourceDirName:".",slug:"/ts_traceroute",permalink:"/docs/ts_traceroute",draft:!1,tags:[],version:"current",lastUpdatedAt:1685719813,formattedLastUpdatedAt:"Jun 2, 2023",frontMatter:{title:"Traceroute",sidebar_label:"Traceroute"},sidebar:"docs",previous:{title:"T1 Troubleshooting",permalink:"/docs/ts_t1_troubleshooting"},next:{title:"Troubleshooting VRF",permalink:"/docs/ts_troubleshooting_vrf"}},c={},p=[{value:"Version History",id:"version-history",level:4},{value:"How it Works",id:"how-it-works",level:2},{value:"Command Information",id:"command-information",level:2},{value:"Show Command",id:"show-command",level:3}],d={toc:p};function m(e){var t=e.components,n=(0,a.Z)(e,i);return(0,o.kt)("wrapper",(0,r.Z)({},d,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h4",{id:"version-history"},"Version History"),(0,o.kt)("table",null,(0,o.kt)("thead",{parentName:"table"},(0,o.kt)("tr",{parentName:"thead"},(0,o.kt)("th",{parentName:"tr",align:null},"Release"),(0,o.kt)("th",{parentName:"tr",align:null},"Modification"))),(0,o.kt)("tbody",{parentName:"table"},(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"6.1.0"),(0,o.kt)("td",{parentName:"tr",align:null},"This feature was introduced.")))),(0,o.kt)("p",null,"Traceroute is implemented as a troubleshooting tool, allowing you to debug connectivity from point to point."),(0,o.kt)("p",null,"Network administrators frequently make use of Linux traceroute as a complement to ping when isolating intermediate connectivity issues and troubleshooting MTU, and TTL issues. Traceroute provides information on the intermediate connectivity on a hop-by-hop basis between a source and destination. The SSR Traceroute commands provide the ability to detect failure points in connectivity along the network traffic flow. With the routing model and distributed nature of the SSR, traceroute behaves differently depending on the use case."),(0,o.kt)("p",null,"The following types of traceroute are available:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"routed traceroute"),": Mirrors the traceroute utility in Unix. Uses the service, tenant, and interface according to the SSR\u2019s route table."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"service traceroute"),": Analogous to the service-ping functionality. Useful to debug test traffic as defined in the deployment."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"peer traceroute"),": Performs traceroute between two adjacent SSRs. Useful for diagnosing peering issues.")),(0,o.kt)("h2",{id:"how-it-works"},"How it Works"),(0,o.kt)("p",null,"Discovery packets are sent from the originating SSR to a single the destination port with varying time-to-live (TTL) values. For each iteration, the TTL is increased by 1, and a 3 packet burst is transmitted. This process is repeated until the originating SSR receives a suitable \u2018terminating\u2019 packet from the final destination, or until an upper-limit is reached for hop counts. "),(0,o.kt)("p",null,"For service-traceroute and peer-traceroute, ICMP echo requests are the default discovery packets. To support instances where ICMP replies are disabled at the destination or disallowed by firewall rules, UDP is also supported."),(0,o.kt)("h2",{id:"command-information"},"Command Information"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"admin@combo-west-a.combo-west# traceroute\nusage: traceroute [peer-name <peer-name>][source-ip <source-ip>] [service <service>] [tenant <tenant>] destination-ip <destination-ip>\n")),(0,o.kt)("p",null,"The ",(0,o.kt)("inlineCode",{parentName:"p"},"traceroute")," command creates a traceroute context for probing the path to a specified endpoint. Traceroute targets can be specified as SVR peers, service/tenant defined endpoints, or targets reachable by routing."),(0,o.kt)("table",null,(0,o.kt)("thead",{parentName:"table"},(0,o.kt)("tr",{parentName:"thead"},(0,o.kt)("th",{parentName:"tr",align:null},"Element"),(0,o.kt)("th",{parentName:"tr",align:null},"Type"),(0,o.kt)("th",{parentName:"tr",align:null},"Description"))),(0,o.kt)("tbody",{parentName:"table"},(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"destination-ip"),(0,o.kt)("td",{parentName:"tr",align:null},"positional"),(0,o.kt)("td",{parentName:"tr",align:null},"The destination IP address for the traceroute command")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"peer-name"),(0,o.kt)("td",{parentName:"tr",align:null},"string"),(0,o.kt)("td",{parentName:"tr",align:null},"The name of the SVR peer to probe (default is empty)")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"service"),(0,o.kt)("td",{parentName:"tr",align:null},"string"),(0,o.kt)("td",{parentName:"tr",align:null},"The service for the traceroute command (default is empty)")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"source-ip"),(0,o.kt)("td",{parentName:"tr",align:null},"IP address"),(0,o.kt)("td",{parentName:"tr",align:null},"The source address for the traceroute command (default: 0.0.0.0)")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"tenant"),(0,o.kt)("td",{parentName:"tr",align:null},"string"),(0,o.kt)("td",{parentName:"tr",align:null},"The tenant name for the traceroute command (default is empty)")))),(0,o.kt)("p",null,"To define each of the traceroute types, enter the following parameters:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"Service traceroute: Enter the service name, tenant, and destination-ip."),(0,o.kt)("li",{parentName:"ul"},"Routed traceroute: Enter the destination-ip."),(0,o.kt)("li",{parentName:"ul"},"Peer traceroute: Enter the peer name and destination-ip.")),(0,o.kt)("p",null,"Example of a Service Traceroute:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"admin@combo-west-a.combo-west# traceroute service east tenant red 172.16.1.201\nRunning traceroute...\ntraceroute to 172.16.1.201, 64 hops max \n1. 172.16.102.101 10ms 7ms 1ms\n2. 172.16.101.1 20ms 5ms 2ms\n3. 172.16.4.1 42ms 5ms 6ms\n4. 172.16.1.201 4ms 4ms 3ms\n")),(0,o.kt)("h3",{id:"show-command"},"Show Command"),(0,o.kt)("p",null,"Use ",(0,o.kt)("inlineCode",{parentName:"p"},"show stats traceroute")," to display traceroute metrics."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"admin@combo-west-a.combo-west# show stats traceroute \n\nTue 2023-02-07 14:55:09 UTC \n\nRetrieving statistics... \n\nTraceroute Handling Stats \n\n------------------------- \n\n============================= ============== ======= \n\n Metric                        Node           Value \n\n============================= ============== ======= \n\n received port-unreachable     combo-west-a       1 \n\n received ttl-expired          combo-west-a       3 \n\n received unexpected-packets   combo-west-a       0 \n\nCompleted in 0.04 seconds \n")))}m.isMDXComponent=!0}}]);