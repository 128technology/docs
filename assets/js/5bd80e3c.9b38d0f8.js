"use strict";(self.webpackChunk_128t_docs=self.webpackChunk_128t_docs||[]).push([[1585],{3905:function(e,t,n){n.d(t,{Zo:function(){return u},kt:function(){return m}});var o=n(67294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,o,a=function(e,t){if(null==e)return{};var n,o,a={},r=Object.keys(e);for(o=0;o<r.length;o++)n=r[o],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(o=0;o<r.length;o++)n=r[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var s=o.createContext({}),c=function(e){var t=o.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},u=function(e){var t=c(e.components);return o.createElement(s.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},p=o.forwardRef((function(e,t){var n=e.components,a=e.mdxType,r=e.originalType,s=e.parentName,u=l(e,["components","mdxType","originalType","parentName"]),p=c(n),m=a,g=p["".concat(s,".").concat(m)]||p[m]||d[m]||r;return n?o.createElement(g,i(i({ref:t},u),{},{components:n})):o.createElement(g,i({ref:t},u))}));function m(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var r=n.length,i=new Array(r);i[0]=p;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l.mdxType="string"==typeof e?e:a,i[1]=l;for(var c=2;c<r;c++)i[c]=n[c];return o.createElement.apply(null,i)}return o.createElement.apply(null,n)}p.displayName="MDXCreateElement"},97400:function(e,t,n){n.r(t),n.d(t,{frontMatter:function(){return l},contentTitle:function(){return s},metadata:function(){return c},toc:function(){return u},default:function(){return p}});var o=n(87462),a=n(63366),r=(n(67294),n(3905)),i=["components"],l={title:"Troubleshooting",sidebar_label:"Troubleshooting"},s=void 0,c={unversionedId:"wan_telemetry_troubleshooting",id:"wan_telemetry_troubleshooting",title:"Troubleshooting",description:"Use the following information to help identify or resolve issues configuring WAN Assurance on an SSR.",source:"@site/docs/wan_telemetry_troubleshooting.md",sourceDirName:".",slug:"/wan_telemetry_troubleshooting",permalink:"/docs/wan_telemetry_troubleshooting",tags:[],version:"current",lastUpdatedAt:1672324271,formattedLastUpdatedAt:"12/29/2022",frontMatter:{title:"Troubleshooting",sidebar_label:"Troubleshooting"},sidebar:"docs",previous:{title:"Features",permalink:"/docs/wan_telemetry_features"},next:{title:"Configuration Management",permalink:"/docs/config_basics"}},u=[{value:"Show Command",id:"show-command",children:[],level:2},{value:"SSR Connection Status",id:"ssr-connection-status",children:[{value:"On the Conductor GUI",id:"on-the-conductor-gui",children:[],level:3},{value:"On the Conductor PCLI",id:"on-the-conductor-pcli",children:[],level:3}],level:2},{value:"Moving a Router",id:"moving-a-router",children:[{value:"Releasing a Router",id:"releasing-a-router",children:[],level:3},{value:"Re-Onboarding a Router",id:"re-onboarding-a-router",children:[{value:"Using the Conductor UI",id:"using-the-conductor-ui",children:[],level:4},{value:"Using the Conductor PCLI",id:"using-the-conductor-pcli",children:[],level:4}],level:3}],level:2}],d={toc:u};function p(e){var t=e.components,l=(0,a.Z)(e,i);return(0,r.kt)("wrapper",(0,o.Z)({},d,l,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("p",null,"Use the following information to help identify or resolve issues configuring WAN Assurance on an SSR."),(0,r.kt)("h2",{id:"show-command"},"Show Command"),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"show plugins state")," command displays extensive information about the state of the plugin. Use the following command as a starting point for any troubleshooting."),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"show plugins state router <router name> summary 128T-mist-wan-assurance")),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"connection")," column will display the current status of the device connection to the MIST cloud. When the connection is down, it will also display information useful to diagnose the connection issue."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"admin@node1.office# show plugins state summary 128T-mist-wan-assurance\nThu 2022-05-12 22:38:34 EDT\n\u2714 Retrieving state data...\nTarget: node1.office\n\n============ ======================== ============== ================= =================== ============\n Agent        Connection               128T           128T-mist-agent   Device-ID           Interfaces\n============ ======================== ============== ================= =================== ============\n unassigned   down - no DNS response   5.5.0-43.el7   3.1.2666-1.el7    02-00-01-f3-39-eb            4\n\nRetrieved state data.\nCompleted in 1.98 seconds\nadmin@node1.office#\n")),(0,r.kt)("p",null,"For additional troubleshooting information use the ",(0,r.kt)("inlineCode",{parentName:"p"},"detail")," commands as shown below"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"show plugins state router <router name> detail 128T-mist-wan-assurance")),(0,r.kt)("h2",{id:"ssr-connection-status"},"SSR Connection Status"),(0,r.kt)("p",null,"The status of the SSR connection to the Mist cloud and other details can be found on the SSR GUI and PCLI."),(0,r.kt)("h3",{id:"on-the-conductor-gui"},"On the Conductor GUI"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Navigate to Plugins > MIST WAN ASSURANCE > Details."),(0,r.kt)("p",{parentName:"li"},(0,r.kt)("img",{alt:"Plugins Context Menu",src:n(9782).Z}))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Select the router from the ",(0,r.kt)("inlineCode",{parentName:"p"},"Router Context")," menu."),(0,r.kt)("p",{parentName:"li"},(0,r.kt)("img",{alt:"Plugins Context Menu",src:n(71835).Z}))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"The summary output is displayed by default and contains useful information about the device connection to the Mist cloud."),(0,r.kt)("p",{parentName:"li"},(0,r.kt)("img",{alt:"Plugins Context Menu",src:n(49303).Z})))),(0,r.kt)("h3",{id:"on-the-conductor-pcli"},"On the Conductor PCLI"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"The ",(0,r.kt)("inlineCode",{parentName:"li"},"show mist")," command can be used to display the summary and detail information about the SSR's connection to the Mist cloud.")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-console"},"admin@node1.conductor1# show mist router 128t-east\nWed 2022-07-20 05:33:05 UTC\n\u2714 Retrieving mist state...\nTarget: node1.128t-east\n\n========== ============ ============= ================= ============================= =================== ============\n Agent      Connection   128T          128T-mist-agent   Platform                      Device-ID           Interfaces\n========== ============ ============= ================= ============================= =================== ============\n assigned   up           5.6.1-9.el7   4.0.3330-1.el7    OpenStack Foundation - Nova   02-00-01-c9-90-16            6\n\nRetrieved mist state.\nCompleted in 1.06 seconds\nadmin@node1.conductor1#\n")),(0,r.kt)("h2",{id:"moving-a-router"},"Moving a Router"),(0,r.kt)("p",null,"In a situation where a router needs to be moved from one organization to another or physically relocated, the router must be released and then re-onboarded."),(0,r.kt)("h3",{id:"releasing-a-router"},"Releasing a Router"),(0,r.kt)("p",null,"To release a router, use the following process from the Mist GUI:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Go to ",(0,r.kt)("strong",{parentName:"li"},"Organization > Inventory"),"."),(0,r.kt)("li",{parentName:"ul"},"Select the checkbox next to the router."),(0,r.kt)("li",{parentName:"ul"},"Click on the ",(0,r.kt)("strong",{parentName:"li"},"More")," drop down that appears on the top of the page."),(0,r.kt)("li",{parentName:"ul"},"Select ",(0,r.kt)("strong",{parentName:"li"},"Release"),"."),(0,r.kt)("li",{parentName:"ul"},"Click on ",(0,r.kt)("strong",{parentName:"li"},"Release")," to confirm.")),(0,r.kt)("p",null,"After a few minutes the router will be released and stop sending the data to the Mist cloud. Use the information in ",(0,r.kt)("a",{parentName:"p",href:"#viewing-the-ssr-status"},"Viewing the SSR Status")," to check the current status. A successfully released router will display the following:"),(0,r.kt)("p",null," ",(0,r.kt)("img",{alt:"Plugins Context Menu",src:n(10761).Z})),(0,r.kt)("p",null,"Once that process is completed, disable the Mist WAN Assurance plugin on the router."),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"Disable MWA Plugin",src:n(64563).Z})),(0,r.kt)("h3",{id:"re-onboarding-a-router"},"Re-Onboarding a Router"),(0,r.kt)("p",null,"Once the necessary changes have been made to the registration-code and other configuration, the re-onboarding process can begin."),(0,r.kt)("h4",{id:"using-the-conductor-ui"},"Using the Conductor UI"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Navigate to Plugins > MIST WAN ASSURANCE > Details."),(0,r.kt)("p",{parentName:"li"},(0,r.kt)("img",{alt:"Plugins Context Menu",src:n(9782).Z}))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Confirm the registration-code on the router is as expected. This can done via the ",(0,r.kt)("inlineCode",{parentName:"p"},"Detail State")," tab as shown below."),(0,r.kt)("p",{parentName:"li"},(0,r.kt)("img",{alt:"Plugins Detail State",src:n(28984).Z}))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Re-enable the plugin on the router and commit the configuration."))),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"Enable MWA Plugin",src:n(6106).Z})),(0,r.kt)("ol",{start:4},(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Switch to the ",(0,r.kt)("inlineCode",{parentName:"p"},"Command")," tab, select the router from the ",(0,r.kt)("inlineCode",{parentName:"p"},"Router Context")," menu and select the ",(0,r.kt)("inlineCode",{parentName:"p"},"unrelease mist agent")," command."),(0,r.kt)("p",{parentName:"li"},(0,r.kt)("img",{alt:"Plugins Command Context Menu",src:n(89326).Z}))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Click on ",(0,r.kt)("inlineCode",{parentName:"p"},"Execute")," to initiate the re-onboarding process using the registration-code currently available on the system."),(0,r.kt)("p",{parentName:"li"},(0,r.kt)("img",{alt:"Unreleased",src:n(48027).Z})))),(0,r.kt)("h4",{id:"using-the-conductor-pcli"},"Using the Conductor PCLI"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Confirm the registration-code on the router is as expected.")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-console"},"admin@node1.conductor1# show mist router 128t-east detail\nWed 2022-07-20 05:58:33 UTC\n\u2714 Retrieving mist state...\n\n==============================================================================================================================================================================================================================================================\n node1.128t-east\n==============================================================================================================================================================================================================================================================\n   128T:                                       5.6.1-9\n   128T-mist-agent:                            4.0.3330-1\n   Agent:                                      released\n   Connection:                                 down\n   registration-code:                          eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJvcmdfaWQiOiIwYzE2MGI3Zi0xMDI3LTRjZDEtOTIzYi03NDQ1MzRjNGIwNzAiLCJzdmMiOiIxMjhyb3V0ZXIiLCJwcm92aWRlciI6ImF3cyIsImVudiI6InN0YWdpbmciLCJlcHRlcm1fdXJsIjoid3NzOi8vZXAtdGVyb\n WluYXRvci1zdGFnaW5nLm1pc3RzeXMubmV0L3dzIiwiaWF0IjoxNjU4MjkzMTQ2LCJleHAiOjE2ODk4MjkxNDZ9.LVIW0Gx8Q8IIkp0o1J86ZoW3_FytrRDKJEMQdBqABCD\n   registration-time:                          unknown\n\nRetrieved mist state.\nCompleted in 0.97 seconds\nadmin@node1.conductor1#\n")),(0,r.kt)("ol",{start:2},(0,r.kt)("li",{parentName:"ol"},"Re-enable the plugin on the router.")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-console"},"admin@node1.conductor1# config authority router 128t-east mist-wan-assurance enabled true\n")),(0,r.kt)("ol",{start:3},(0,r.kt)("li",{parentName:"ol"},"Unrelease the router to initiate the re-onboarding process.")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-console"},"admin@node1.conductor1# unrelease mist agent\nnode   router\nadmin@node1.conductor1# unrelease mist agent router 128t-east node node1\n\u2714 Retrieving...\nTarget: node1.conductor1\n\nUnreleased\n\nSuccessfully retrieved info.\nadmin@node1.conductor1#\n")),(0,r.kt)("ol",{start:4},(0,r.kt)("li",{parentName:"ol"},"Once re-onboarded, check the status using the ",(0,r.kt)("inlineCode",{parentName:"li"},"show mist")," command.")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-console"},"admin@node1.conductor1# show mist router 128t-east\nWed 2022-07-20 06:01:32 UTC\n\u2714 Retrieving mist state...\nTarget: node1.128t-east\n\n============ ============ ============= ================= ============================= =================== ============\n Agent        Connection   128T          128T-mist-agent   Platform                      Device-ID           Interfaces\n============ ============ ============= ================= ============================= =================== ============\n unassigned   up           5.6.1-9.el7   4.0.3330-1.el7    OpenStack Foundation - Nova   02-00-01-63-0e-65            6\n\nRetrieved mist state.\nCompleted in 0.90 seconds\nadmin@node1.conductor1#\n")))}p.isMDXComponent=!0},64563:function(e,t,n){t.Z=n.p+"assets/images/wana_disabled_mwa-c5c8375642c387a2426ff6c6ac8be17c.png"},6106:function(e,t,n){t.Z=n.p+"assets/images/wana_enabled_mwa-7d49ab5e80acde7b119b67f9077b6b02.png"},89326:function(e,t,n){t.Z=n.p+"assets/images/wana_plugin_command_context-a3dad204cf46cc927be81279036fb5b1.png"},71835:function(e,t,n){t.Z=n.p+"assets/images/wana_plugin_context-7f4737ccc464a60d89b1eb256ee83191.png"},9782:function(e,t,n){t.Z=n.p+"assets/images/wana_plugin_detail-cf19264e0cff13bd639a5bc0b14f0892.png"},28984:function(e,t,n){t.Z=n.p+"assets/images/wana_plugin_detail_regcode-c6e45c429f711f180ed658f635350efb.png"},10761:function(e,t,n){t.Z=n.p+"assets/images/wana_plugin_released-f2c628b73dac83288279ac6c1043f399.png"},49303:function(e,t,n){t.Z=n.p+"assets/images/wana_plugin_state-3467664113fd0f213c20c9af4ae8452c.png"},48027:function(e,t,n){t.Z=n.p+"assets/images/wana_unreleased-008c26e8a9020789280d0a4c7ae53e8a.png"}}]);