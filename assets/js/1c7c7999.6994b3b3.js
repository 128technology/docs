"use strict";(self.webpackChunk_128t_docs=self.webpackChunk_128t_docs||[]).push([[7830],{3905:function(e,n,t){t.d(n,{Zo:function(){return l},kt:function(){return y}});var r=t(67294);function o(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function i(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function a(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?i(Object(t),!0).forEach((function(n){o(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):i(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function c(e,n){if(null==e)return{};var t,r,o=function(e,n){if(null==e)return{};var t,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)t=i[r],n.indexOf(t)>=0||(o[t]=e[t]);return o}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)t=i[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}var s=r.createContext({}),p=function(e){var n=r.useContext(s),t=n;return e&&(t="function"==typeof e?e(n):a(a({},n),e)),t},l=function(e){var n=p(e.components);return r.createElement(s.Provider,{value:n},e.children)},d={inlineCode:"code",wrapper:function(e){var n=e.children;return r.createElement(r.Fragment,{},n)}},u=r.forwardRef((function(e,n){var t=e.components,o=e.mdxType,i=e.originalType,s=e.parentName,l=c(e,["components","mdxType","originalType","parentName"]),u=p(t),y=o,f=u["".concat(s,".").concat(y)]||u[y]||d[y]||i;return t?r.createElement(f,a(a({ref:n},l),{},{components:t})):r.createElement(f,a({ref:n},l))}));function y(e,n){var t=arguments,o=n&&n.mdxType;if("string"==typeof e||o){var i=t.length,a=new Array(i);a[0]=u;var c={};for(var s in n)hasOwnProperty.call(n,s)&&(c[s]=n[s]);c.originalType=e,c.mdxType="string"==typeof e?e:o,a[1]=c;for(var p=2;p<i;p++)a[p]=t[p];return r.createElement.apply(null,a)}return r.createElement.apply(null,t)}u.displayName="MDXCreateElement"},40616:function(e,n,t){t.r(n),t.d(n,{assets:function(){return l},contentTitle:function(){return s},default:function(){return y},frontMatter:function(){return c},metadata:function(){return p},toc:function(){return d}});var r=t(87462),o=t(63366),i=(t(67294),t(3905)),a=["components"],c={title:"Transport Based Encryption",sidebar_label:"Transport Based Encryption"},s=void 0,p={unversionedId:"config_transport_encryption",id:"config_transport_encryption",title:"Transport Based Encryption",description:"Providing a secure transport system for traffic often requires enabling encryption on all links/paths. For traffic already traversing a trusted link, this adds unnecesary processing overhead. Transport based encryption allows you to select specific links for encryption, such as public broadband or LTE. This reduces the performance hit taken when encrypting traffic over an already secure transport link. When a failover occurs from a trusted link to a public connection, payload encryption can be enabled to maintain the secure connection.",source:"@site/docs/config_transport_encryption.md",sourceDirName:".",slug:"/config_transport_encryption",permalink:"/docs/config_transport_encryption",draft:!1,tags:[],version:"current",lastUpdatedAt:1675695520,formattedLastUpdatedAt:"Feb 6, 2023",frontMatter:{title:"Transport Based Encryption",sidebar_label:"Transport Based Encryption"},sidebar:"docs",previous:{title:"Tenants",permalink:"/docs/config_tenants"},next:{title:"Tuning BFD",permalink:"/docs/howto_tune_bfd"}},l={},d=[{value:"Configuration",id:"configuration",level:2},{value:"Validating the Configuration",id:"validating-the-configuration",level:3},{value:"Failover",id:"failover",level:2},{value:"Troubleshooting",id:"troubleshooting",level:3}],u={toc:d};function y(e){var n=e.components,c=(0,o.Z)(e,a);return(0,i.kt)("wrapper",(0,r.Z)({},u,c,{components:n,mdxType:"MDXLayout"}),(0,i.kt)("p",null,"Providing a secure transport system for traffic often requires enabling encryption on all links/paths. For traffic already traversing a trusted link, this adds unnecesary processing overhead. Transport based encryption allows you to select specific links for encryption, such as public broadband or LTE. This reduces the performance hit taken when encrypting traffic over an already secure transport link. When a failover occurs from a trusted link to a public connection, payload encryption can be enabled to maintain the secure connection. "),(0,i.kt)("p",null,"Transport based encryption does not change how packets are encrypted, it simply provides more control points for enabling payload encryption. This provides flexibility when expanding your network from a legacy, all-private VPN MPLS network to include more modern communication technologies, such as wireless LTE connections. By retaining the service level payload encryption setting as disabled and enabling the transport level payload encryption at the new LTE link, traffic is encrypted on the public link maintaining the necessary security. "),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Transport based encryption only applies to the services that have a security policy defined but encryption turned off."),(0,i.kt)("li",{parentName:"ul"},"Payload encryption happens on the first router where the override is enabled (irrespective of the number of hops and payload override configuration) and decryption happens on the last hop."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"/docs/sec_adaptive_encrypt"},"Adaptive encryption")," does not apply to transport based encryption.")),(0,i.kt)("h2",{id:"configuration"},"Configuration"),(0,i.kt)("p",null,"To provide control on transport based encryption, use the following configuration options:"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"payload-encryption-override"),": Enforces transport based encryption using the following options."),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"enable-encryption"),": Enable encryption of the payload even when the security-policy associated with the service is set to ",(0,i.kt)("inlineCode",{parentName:"li"},"encrypt=false"),". If the payload is already encrypted by another SSR, send it out as is. "),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"disabled-override"),": Disable override of the security policy and use the security policy settings associated with the service.")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"config authority\n  router Router1\n    node bar\n        device-interface dev1\n        network-interface net1\n            neighborhood n1\n                payload-encryption-override disable-override\n                adjacency 1.1.1.1 peer1\n                    payload-encryption-override enable-encryption\n                    generated false\n                    exit\n        exit\n      exit\n    exit\n  exit\nexit\n")),(0,i.kt)("h3",{id:"validating-the-configuration"},"Validating the Configuration"),(0,i.kt)("p",null,"The compatibility of ",(0,i.kt)("inlineCode",{parentName:"p"},"payload-encryption-override")," settings is checked at the corresponding peers. If ",(0,i.kt)("inlineCode",{parentName:"p"},"enable-encryption")," is selected at one adjacency, the adjacency at the corresponding peer should also select ",(0,i.kt)("inlineCode",{parentName:"p"},"enable-encryption")," for ",(0,i.kt)("inlineCode",{parentName:"p"},"payload-encryption-override"),". If this has not been done, a pair of error messages are displayed during the validation step. "),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"*admin@conductor-east-1.RTR_EAST_CONDUCTOR (adjacency[ip-address=172.16.4.3][peer=RTR_CENTRAL_COMBO])# validate\n\u2716 Validating...\n% Error: Candidate configuration is invalid:\n1. payload-encryption-override is not compatible with corresponding peer (RTR_EAST_COMBO) network-interface 'intf11' address '172.16.4.2' ('disable-override' != 'enable-encryption')\n\n    config\n        authority\n            router RTR_CENTRAL_COMBO\n                node combo-central-1\n                    device-interface 11\n                        network-interface intf11\n                            adjacency 172.16.4.2 RTR_EAST_COMBO\n                                peer\n\n2. payload-encryption-override is not compatible with corresponding peer (RTR_CENTRAL_COMBO) network-interface 'intf11' address '172.16.4.3' ('enable-encryption' != 'disable-override')\n\n    config\n        authority\n            router RTR_EAST_COMBO\n                node combo-east-1\n                    device-interface 11\n                        network-interface intf11\n                            adjacency 172.16.4.3 RTR_CENTRAL_COMBO\n                                peer\n\n")),(0,i.kt)("p",null,"A packet duplication warning message is displayed when the session resiliency of a service policy is discovered with a potential peer path ",(0,i.kt)("inlineCode",{parentName:"p"},"payload-encryption-override")," to ",(0,i.kt)("inlineCode",{parentName:"p"},"enable-encryption"),". "),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"All of the packet duplication paths for service 'west' that potentially go through peer 'RTR_WEST_COMBO' (service-route 'to-west') might be overridden to enable-encryption.\n")),(0,i.kt)("h2",{id:"failover"},"Failover"),(0,i.kt)("p",null,"If a session fails over to a different link, the session\u2019s encryption is changed accordingly based on the transport based encryption setting."),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"Transport Encryption",src:t(7508).Z,width:"2158",height:"724"})),(0,i.kt)("p",null,"Transport based encryption can be disabled through the configuration if encryption problems occur, such as the platform being under-powered, packet decryption issues due to configuration errors, etc."),(0,i.kt)("h3",{id:"troubleshooting"},"Troubleshooting"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"show sessions")," displays the field \u201cPayload Encrypted\u201d to indicate if the session is being encrypted."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"show session by-id")," includes the field \u201cPayload Encryption\u201d to show the encryption status of the session.")))}y.isMDXComponent=!0},7508:function(e,n,t){n.Z=t.p+"assets/images/config_transport_encryption-1f21cfe02ac3c0e865d815acc7ddd59c.png"}}]);