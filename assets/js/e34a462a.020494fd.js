"use strict";(self.webpackChunk_128t_docs=self.webpackChunk_128t_docs||[]).push([[3187],{53081:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>d,contentTitle:()=>o,default:()=>h,frontMatter:()=>a,metadata:()=>i,toc:()=>c});var r=t(74848),s=t(28453);const a={title:"Upgrading the Conductor",sidebar_label:"Upgrading the Conductor"},o=void 0,i={id:"upgrade_ibu_conductor",title:"Upgrading the Conductor",description:"SSR software version 6.3.0 and newer allows a Conductor to manage routers running image-based software, manage routers running older, package-based software, and initiate image-based upgrades to those routers.",source:"@site/docs/upgrade_ibu_conductor.md",sourceDirName:".",slug:"/upgrade_ibu_conductor",permalink:"/docs/upgrade_ibu_conductor",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{title:"Upgrading the Conductor",sidebar_label:"Upgrading the Conductor"},sidebar:"docs",previous:{title:"Upgrade Overview",permalink:"/docs/intro_upgrading"},next:{title:"Upgrading a Router",permalink:"/docs/upgrade_router"}},d={},c=[{value:"Upgrade using the GUI",id:"upgrade-using-the-gui",level:2},{value:"Upgrading Using the CLI",id:"upgrading-using-the-cli",level:2},{value:"Image-based and Package-based Installation Status",id:"image-based-and-package-based-installation-status",level:4},{value:"High Availability Upgrades",id:"high-availability-upgrades",level:2},{value:"Other HA Considerations",id:"other-ha-considerations",level:4},{value:"Plugin Support",id:"plugin-support",level:4}];function l(e){const n={a:"a",admonition:"admonition",code:"code",h2:"h2",h4:"h4",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.p,{children:"SSR software version 6.3.0 and newer allows a Conductor to manage routers running image-based software, manage routers running older, package-based software, and initiate image-based upgrades to those routers."}),"\n",(0,r.jsx)(n.p,{children:"Image-based installations provide many benefits over the earlier RPM package-based installation/upgrade process, including upgrade speed, stability, efficiency, and ease of use. This section describes the process for upgrading a Conductor, allowing it to manage both package-based and image-based routers."}),"\n",(0,r.jsxs)(n.admonition,{type:"note",children:[(0,r.jsxs)(n.p,{children:["Before upgrading a conductor, it is recommended to ",(0,r.jsx)(n.a,{href:"/docs/config_basics#importexport",children:"export the running configuration"}),"."]}),(0,r.jsx)(n.p,{children:"For systems with both primary and secondary conductors, it is a best practice to upgrade only one conductor at a time."})]}),"\n",(0,r.jsx)(n.h2,{id:"upgrade-using-the-gui",children:"Upgrade using the GUI"}),"\n",(0,r.jsx)(n.p,{children:"Use the following procedures to upgrade a Conductor from the GUI."}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["Select ",(0,r.jsx)(n.strong,{children:"Conductor"})," under Authority."]}),"\n",(0,r.jsxs)(n.li,{children:["In the ",(0,r.jsx)(n.strong,{children:"Node: Conductor"})," panel, select the ",(0,r.jsx)(n.strong,{children:"Manage SSR Software"})," icon (the arrow within a circle). This icon displays green when upgrades are available."]}),"\n",(0,r.jsxs)(n.li,{children:["In the ",(0,r.jsx)(n.strong,{children:"Upgrade SSR"})," window, use the drop down to select the SSR version for the upgrade."]}),"\n",(0,r.jsxs)(n.li,{children:["Click ",(0,r.jsx)(n.strong,{children:"Proceed"}),"."]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"The Upgrade screen displays the Raw Log with the upgrade progress. Once the upgrade is complete, the Conductor is restarted and the GUI is refreshed."}),"\n",(0,r.jsx)(n.h2,{id:"upgrading-using-the-cli",children:"Upgrading Using the CLI"}),"\n",(0,r.jsxs)(n.p,{children:["Use the ",(0,r.jsx)(n.code,{children:"request system software upgrade"})," command and the associated arguments to perform upgrades. All of the upgrade features are available from the command line as well as the GUI."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"admin@conductor-node-1.Conductor# request system software upgrade\nusage: upgrade [{router <router> | resource-group <resource-group>}] [simultaneous] [skip-package-transfer] [skip-pre-check]\n               [skip-health-check] [cohort-id <cohort-id>] [force] [node <node>] version <version>\nkeyword arguments:\ncohort-id                 Assign a cohort ID to the operation.\nforce                     Skip confirmation prompt.\nnode                      The name of the node\nresource-group            The name of the resource group\nrouter                    The router on which to upgrade SSR software (default: Conductor)\nsimultaneous              Upgrade both nodes in an HA router at the same time to maximize speed but interrupt service. Only valid when targeting a router.\nskip-health-check         Skip the post upgrade health check, which reverts to the previous version upon failure.\nskip-package-transfer     Don't transfer any packages installed on top of the current SSR ISO to the new SSR ISO. Only valid for\n                          image based systems.\nskip-pre-check            Skip the pre upgrade health check, which prevents the upgrade from starting upon failure.\nversion                   The targeted upgrade version.\n\nsee also:\nrequest system software downgrade       Downgrade to a new version of the SSR.\nrequest system software download        Download a new version of the SSR.\nrequest system software health-check    Perform a health check of an SSR.\nrequest system software revert          Revert to a previous version of the SSR.\n*admin@conductor-node-1.Conductor# request system software upgrade\n"})}),"\n",(0,r.jsx)(n.h4,{id:"image-based-and-package-based-installation-status",children:"Image-based and Package-based Installation Status"}),"\n",(0,r.jsxs)(n.p,{children:["The image-based and package-based status is visible under ",(0,r.jsx)(n.strong,{children:"Install Type"})," in the PCLI using ",(0,r.jsx)(n.code,{children:"show assets"}),"."]}),"\n",(0,r.jsxs)(n.admonition,{type:"note",children:[(0,r.jsxs)(n.p,{children:["The states displayed in the ",(0,r.jsx)(n.code,{children:"status"})," column under ",(0,r.jsx)(n.code,{children:"show assests"})," have changed. The old and new states are mapped below."]}),(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Old"}),(0,r.jsx)(n.th,{children:"New"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Disconnected"}),(0,r.jsx)(n.td,{children:"Disconnected"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Connected"}),(0,r.jsx)(n.td,{children:"Synchronizing or Resynchronizing"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Running"}),(0,r.jsx)(n.td,{children:"Synchronized"})]})]})]})]}),"\n",(0,r.jsxs)(n.p,{children:["For more information about asset status and state descriptions, see ",(0,r.jsx)(n.a,{href:"/docs/ts_ap_salt_minion#asset-status",children:"Asset Status"}),"."]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Image Based"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"admin@t106-dut1.Conductor# show assets\nMon 2024-09-09 18:14:18 UTC\nRetrieving assets...\n\n=========== =========== ===================== ================== ============== ================ ================ ========\n Router      Node        Asset Id              SSR Version        Install Type   Status           Time in Status   Errors\n=========== =========== ===================== ================== ============== ================ ================ ========\n Conductor   t106-dut1   t106-dut1.novalocal   6.3.0-107.r1.el7   Image          Synchronized     34m 44s               0\n             t106-dut2   t106-dut2.novalocal   6.3.0-107.r1.el7   Image          Synchronized     21m 19s               0\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Package Based"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"admin@conductor-east-1.RTR_EAST_CONDUCTOR# show assets\nMon 2024-09-09 18:15:20 UTC\n\u2714 Retrieving assets...\n\n==================== ================== ===================== ====================== ============== ============== ================ ========\n Router               Node               Asset Id              SSR Version            Install Type   Status         Time in Status   Errors\n==================== ================== ===================== ====================== ============== ============== ================ ========\n RTR_EAST_COMBO       combo-east-1       t212-dut3.novalocal   6.3.0-107.r1.el7       Package        Synchronized   3d 23h 18m 58s        0\n                      combo-east-2       t212-dut4.novalocal   6.3.0-107.r1.el7       Package        Synchronized   4d 2h 40m 27s         0\n RTR_EAST_CONDUCTOR   conductor-east-1   t212-dut1.novalocal   6.3.0-107.r1.el7       Package        Synchronized   4d 2h 42m 57s         0\n                      conductor-east-2   t212-dut2.novalocal   6.3.0-107.r1.el7       Package        Synchronized   4d 2h 43m 14s         0\n\nCompleted in 0.04 seconds\n"})}),"\n",(0,r.jsx)(n.h2,{id:"high-availability-upgrades",children:"High Availability Upgrades"}),"\n",(0,r.jsxs)(n.p,{children:["In a high availability configuration, the default behavior is to perform a sequenced self-upgrade from the CLI. Executing the ",(0,r.jsx)(n.code,{children:"request system software upgrade router <conductor-router-name>"})," from an HA conductor launches a sequenced self upgrade, one node at a time. In a situation where you prefer to upgrade each node manually, you can target each node directly using ",(0,r.jsx)(n.code,{children:"request system software upgrade router <conductor-router-name> node <conductor-node-name>"}),". When the upgrade is complete on the first node, you may run the command on the second node."]}),"\n",(0,r.jsx)(n.h4,{id:"other-ha-considerations",children:"Other HA Considerations"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"If an HA pair is discovered to have a mismatched software state (image-based and package-based) an Alarm is reported. The software state must be the same for both nodes."}),"\n",(0,r.jsx)(n.li,{children:"Failure of a router to complete the conversion generates a user visible event and records the reasons for the failure on the conductor."}),"\n",(0,r.jsx)(n.li,{children:"Router conversion success generates an event recording the transition on the router."}),"\n",(0,r.jsxs)(n.li,{children:["The image-based and package-based status is visible in the PCLI using ",(0,r.jsx)(n.code,{children:"show assets"}),"."]}),"\n"]}),"\n",(0,r.jsx)(n.h4,{id:"plugin-support",children:"Plugin Support"}),"\n",(0,r.jsx)(n.p,{children:"The conversion/upgrade process preserves the currently installed plugin packages. In cases where the plugin has version dependencies, the plugin is upgraded."})]})}function h(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(l,{...e})}):l(e)}},28453:(e,n,t)=>{t.d(n,{R:()=>o,x:()=>i});var r=t(96540);const s={},a=r.createContext(s);function o(e){const n=r.useContext(a);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:o(e.components),r.createElement(a.Provider,{value:n},e.children)}}}]);