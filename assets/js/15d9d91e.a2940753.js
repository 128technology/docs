"use strict";(self.webpackChunk_128t_docs=self.webpackChunk_128t_docs||[]).push([[370],{3905:function(e,t,n){n.d(t,{Zo:function(){return p},kt:function(){return m}});var i=n(67294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t){if(null==e)return{};var n,i,o=function(e,t){if(null==e)return{};var n,i,o={},r=Object.keys(e);for(i=0;i<r.length;i++)n=r[i],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(i=0;i<r.length;i++)n=r[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var s=i.createContext({}),l=function(e){var t=i.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):a(a({},t),e)),n},p=function(e){var t=l(e.components);return i.createElement(s.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return i.createElement(i.Fragment,{},t)}},u=i.forwardRef((function(e,t){var n=e.components,o=e.mdxType,r=e.originalType,s=e.parentName,p=c(e,["components","mdxType","originalType","parentName"]),u=l(n),m=o,f=u["".concat(s,".").concat(m)]||u[m]||d[m]||r;return n?i.createElement(f,a(a({ref:t},p),{},{components:n})):i.createElement(f,a({ref:t},p))}));function m(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var r=n.length,a=new Array(r);a[0]=u;var c={};for(var s in t)hasOwnProperty.call(t,s)&&(c[s]=t[s]);c.originalType=e,c.mdxType="string"==typeof e?e:o,a[1]=c;for(var l=2;l<r;l++)a[l]=n[l];return i.createElement.apply(null,a)}return i.createElement.apply(null,n)}u.displayName="MDXCreateElement"},93448:function(e,t,n){n.r(t),n.d(t,{assets:function(){return p},contentTitle:function(){return s},default:function(){return m},frontMatter:function(){return c},metadata:function(){return l},toc:function(){return d}});var i=n(87462),o=n(63366),r=(n(67294),n(3905)),a=["components"],c={title:"Microsoft 365",sidebar_label:"Microsoft 365"},s=void 0,l={unversionedId:"howto_ms365",id:"howto_ms365",title:"Microsoft 365",description:"The SSR optimizes Microsoft 365 sessions, allowing you to easily configure the associated services to be delivered using the recommended network connectivity principles. It uses an AppID module for automatic discovery of Microsoft 365 endpoints, and simple service definition.",source:"@site/docs/howto_ms365.md",sourceDirName:".",slug:"/howto_ms365",permalink:"/docs/howto_ms365",draft:!1,tags:[],version:"current",lastUpdatedAt:1705089511,formattedLastUpdatedAt:"Jan 12, 2024",frontMatter:{title:"Microsoft 365",sidebar_label:"Microsoft 365"},sidebar:"docs",previous:{title:"Maintenance Mode",permalink:"/docs/howto_maintenance_mode"},next:{title:"Adding a Trusted Certificate",permalink:"/docs/howto_trusted_ca_certificate"}},p={},d=[{value:"Configuration",id:"configuration",level:2},{value:"Enable Module Learning Mode",id:"enable-module-learning-mode",level:3},{value:"GUI Example",id:"gui-example",level:4},{value:"CLI Example",id:"cli-example",level:4},{value:"Configure Services",id:"configure-services",level:3},{value:"GUI Example",id:"gui-example-1",level:4},{value:"CLI Example",id:"cli-example-1",level:4},{value:"Service Policies",id:"service-policies",level:3},{value:"Access",id:"access",level:4},{value:"Security",id:"security",level:4},{value:"Routing",id:"routing",level:4},{value:"Service Policy",id:"service-policy",level:4},{value:"Verifying Operation",id:"verifying-operation",level:2},{value:"GUI Example",id:"gui-example-2",level:4},{value:"CLI Example",id:"cli-example-2",level:4}],u={toc:d};function m(e){var t=e.components,c=(0,o.Z)(e,a);return(0,r.kt)("wrapper",(0,i.Z)({},u,c,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("p",null,"The SSR optimizes Microsoft 365 sessions, allowing you to easily configure the associated services to be delivered using the recommended ",(0,r.kt)("a",{parentName:"p",href:"https://docs.microsoft.com/en-us/office365/enterprise/office-365-network-connectivity-principles"},"network connectivity principles"),". It uses an ",(0,r.kt)("a",{parentName:"p",href:"/docs/concepts_appid#appid-using-modules"},"AppID module")," for automatic discovery of Microsoft 365 endpoints, and simple service definition."),(0,r.kt)("admonition",{type:"info"},(0,r.kt)("p",{parentName:"admonition"},"Microsoft 365, or M365 is formerly known as Office 365, or O365.")),(0,r.kt)("h2",{id:"configuration"},"Configuration"),(0,r.kt)("p",null,"To configure your router for Microsoft 365 you must enable the router for AppID module learning mode, create Microsoft 365 services, and define associated policies for access, security, and routing."),(0,r.kt)("h3",{id:"enable-module-learning-mode"},"Enable Module Learning Mode"),(0,r.kt)("p",null,"In the router configuration, enable module based application learning mode by adding ",(0,r.kt)("inlineCode",{parentName:"p"},"module"),' to the "Application Identification" settings. SSR software installs a default AppID module for Microsoft 365 applications.'),(0,r.kt)("h4",{id:"gui-example"},"GUI Example"),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"AppId Module Add",src:n(61452).Z,width:"1144",height:"591"})),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"AppId Module Save",src:n(36390).Z,width:"753",height:"358"})),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"AppId Module Added",src:n(12625).Z,width:"884",height:"134"})),(0,r.kt)("h4",{id:"cli-example"},"CLI Example"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"config\n\n    authority\n\n        router   my-router\n            name                        my-router\n\n            application-identification\n                mode  module\n            exit\n        exit\n    exit\nexit\n")),(0,r.kt)("admonition",{type:"important"},(0,r.kt)("p",{parentName:"admonition"},"Once the module AppID learning mode is enabled, the router host will periodically connect to Microsoft's ",(0,r.kt)("inlineCode",{parentName:"p"},"https://endpoints.office.com")," web service to retrieve M365 endpoints. Ensure your router host is able to access the public web service using the Linux kernel route table.")),(0,r.kt)("h3",{id:"configure-services"},"Configure Services"),(0,r.kt)("p",null,"Once module AppID learning mode has been enabled, the following application names will be automatically discovered (see ",(0,r.kt)("a",{parentName:"p",href:"#verifying-operation"},"Verifying Operation")," to confirm successful discovery): "),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Application Name"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"O365-Common")),(0,r.kt)("td",{parentName:"tr",align:null},"Microsoft 365 Common and Office Online")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"O365-Exchange")),(0,r.kt)("td",{parentName:"tr",align:null},"Exchange Online")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"O365-SharePoint")),(0,r.kt)("td",{parentName:"tr",align:null},"SharePoint Online and OneDrive for Business")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"O365-Skype")),(0,r.kt)("td",{parentName:"tr",align:null},"Skype for Business Online and Microsoft Teams")))),(0,r.kt)("p",null,"Create one or more services configured for the module discovered application names."),(0,r.kt)("h4",{id:"gui-example-1"},"GUI Example"),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"M365 Service",src:n(89349).Z,width:"1332",height:"1016"})),(0,r.kt)("h4",{id:"cli-example-1"},"CLI Example"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'config\n\n    authority\n\n        service  M365\n            name                  M365\n            description           "Microsoft 365 Common and Office Online"\n            application-name      O365-Common\n            share-service-routes  false\n        exit\n\n        service  M365-Exchange\n            name                  M365-Exchange\n            description           "Exchange Online"\n            application-name      O365-Exchange\n            share-service-routes  false\n        exit\n\n        service  M365-Sharepoint\n            name                  M365-Sharepoint\n            description           "SharePoint Online and OneDrive for Business"\n            application-name      O365-Sharepoint\n            share-service-routes  false\n        exit\n\n        service  M365-Skype\n            name                  M365-Skype\n            description           "Skype for Business Online and Microsoft Teams"\n            application-name      O365-Skype\n            share-service-routes  false\n        exit\n    exit\nexit\n')),(0,r.kt)("h3",{id:"service-policies"},"Service Policies"),(0,r.kt)("p",null,"With your services for Microsoft 365 added, the final step is to configure the services for which tenants can access Microsoft 365, security policies, routing, and optional service-policy."),(0,r.kt)("h4",{id:"access"},"Access"),(0,r.kt)("p",null,"Define which of your ",(0,r.kt)("a",{parentName:"p",href:"/docs/config_tenants#modeling-your-network-tenancy"},"network tenants")," are allowed to access Microsoft 365 services by adding them to the ",(0,r.kt)("a",{parentName:"p",href:"/docs/config_reference_guide#access-policy-service"},"service access policies"),"."),(0,r.kt)("h4",{id:"security"},"Security"),(0,r.kt)("p",null,"Configure the ",(0,r.kt)("a",{parentName:"p",href:"/docs/config_reference_guide#security"},"security policy")," for the Microsoft 365 services."),(0,r.kt)("admonition",{type:"tip"},(0,r.kt)("p",{parentName:"admonition"},"Microsoft 365 services are designed for direct internet transport, with robust security and encryption built in to each application. As such, a security policy that disables router encryption is typically preferred.")),(0,r.kt)("h4",{id:"routing"},"Routing"),(0,r.kt)("p",null,"Give the Microsoft 365 services appropriate ",(0,r.kt)("a",{parentName:"p",href:"/docs/concepts_glossary#service-routes"},"service routes")," in your overall topology to designate possible routes."),(0,r.kt)("admonition",{type:"tip"},(0,r.kt)("p",{parentName:"admonition"},"In broadband connected branch router scenarios, the optimal route for M365 services will typically be directly out local broadband links. In this case, disabling the sharing of service-routes may be desirable in the service configuration.")),(0,r.kt)("h4",{id:"service-policy"},"Service Policy"),(0,r.kt)("p",null,"By using ",(0,r.kt)("a",{parentName:"p",href:"/docs/bcp_service_and_service_policy_design#service-policy"},"service policy")," associated with your Microsoft 365 services, you can set how your network should treat sessions. This includes QoS, path selection, and failover behavior for Microsoft 365. "),(0,r.kt)("h2",{id:"verifying-operation"},"Verifying Operation"),(0,r.kt)("p",null,'You can verify the discovery by checking the "Applications Seen" on the router page of the GUI, and using the ',(0,r.kt)("inlineCode",{parentName:"p"},"show application names")," in the PCLI."),(0,r.kt)("h4",{id:"gui-example-2"},"GUI Example"),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"Applications Seen",src:n(43806).Z,width:"1334",height:"490"})),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"M365 Applications Seen",src:n(60108).Z,width:"1039",height:"233"})),(0,r.kt)("h4",{id:"cli-example-2"},"CLI Example"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"admin@node1.my-router# show application names\nMon 2020-06-08 03:03:49 UTC\n\nNode: node1\n\n================== =============== ================ ===================== =====================\n Application Name   Session Count   Ip Tuple Count   Date Discovered       Last Updated\n================== =============== ================ ===================== =====================\n O365-Common                    0               25   2020-06-08 02:03:17   2020-06-08 02:03:17\n O365-Exchange                  0               17   2020-06-08 02:03:17   2020-06-08 02:03:17\n O365-SharePoint                0                5   2020-06-08 02:03:17   2020-06-08 02:03:17\n O365-Skype                     0                3   2020-06-08 02:03:17   2020-06-08 02:03:17\n")))}m.isMDXComponent=!0},61452:function(e,t,n){t.Z=n.p+"assets/images/howto_m365_1-1dd1bc8fd944f47ff906abe4313e60e0.png"},36390:function(e,t,n){t.Z=n.p+"assets/images/howto_m365_2-31c75590925065db387d1a5f85473f30.png"},12625:function(e,t,n){t.Z=n.p+"assets/images/howto_m365_3-68683678d0a506f141dc5cf33716e622.png"},43806:function(e,t,n){t.Z=n.p+"assets/images/howto_m365_4-3ab4153dfd852a0c7c3573f8a3a194c9.png"},60108:function(e,t,n){t.Z=n.p+"assets/images/howto_m365_5-8dbbdae27f91c8a8f8c2db75d55235f3.png"},89349:function(e,t,n){t.Z=n.p+"assets/images/howto_m365_6-3c8db6c9ecdd6f074d4b9c306cbfdb91.png"}}]);