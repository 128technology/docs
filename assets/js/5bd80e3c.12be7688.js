"use strict";(self.webpackChunk_128t_docs=self.webpackChunk_128t_docs||[]).push([[5453],{42273:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>r,default:()=>h,frontMatter:()=>i,metadata:()=>a,toc:()=>d});var s=t(74848),o=t(28453);const i={title:"Troubleshooting",sidebar_label:"Troubleshooting"},r=void 0,a={id:"wan_telemetry_troubleshooting",title:"Troubleshooting",description:"Use the following information to help identify or resolve issues configuring WAN Assurance on an SSR.",source:"@site/docs/wan_telemetry_troubleshooting.md",sourceDirName:".",slug:"/wan_telemetry_troubleshooting",permalink:"/docs/wan_telemetry_troubleshooting",draft:!1,unlisted:!1,tags:[],version:"current",lastUpdatedAt:1710187342,formattedLastUpdatedAt:"Mar 11, 2024",frontMatter:{title:"Troubleshooting",sidebar_label:"Troubleshooting"},sidebar:"docs",previous:{title:"Features",permalink:"/docs/wan_telemetry_features"},next:{title:"Configuration Management",permalink:"/docs/config_basics"}},c={},d=[{value:"Show Command",id:"show-command",level:2},{value:"SSR Connection Status",id:"ssr-connection-status",level:2},{value:"On the Conductor GUI",id:"on-the-conductor-gui",level:3},{value:"On the Conductor PCLI",id:"on-the-conductor-pcli",level:3},{value:"Moving a Router",id:"moving-a-router",level:2},{value:"Releasing a Router",id:"releasing-a-router",level:3},{value:"Re-Onboarding a Router",id:"re-onboarding-a-router",level:3},{value:"Using the Conductor UI",id:"using-the-conductor-ui",level:4},{value:"Using the Conductor PCLI",id:"using-the-conductor-pcli",level:4}];function l(e){const n={a:"a",code:"code",h2:"h2",h3:"h3",h4:"h4",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.p,{children:"Use the following information to help identify or resolve issues configuring WAN Assurance on an SSR."}),"\n",(0,s.jsx)(n.h2,{id:"show-command",children:"Show Command"}),"\n",(0,s.jsxs)(n.p,{children:["The ",(0,s.jsx)(n.code,{children:"show plugins state"})," command displays extensive information about the state of the plugin. Use the following command as a starting point for any troubleshooting."]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.code,{children:"show plugins state router <router name> summary 128T-mist-wan-assurance"})}),"\n",(0,s.jsxs)(n.p,{children:["The ",(0,s.jsx)(n.code,{children:"connection"})," column will display the current status of the device connection to the MIST cloud. When the connection is down, it will also display information useful to diagnose the connection issue."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"admin@node1.office# show plugins state summary 128T-mist-wan-assurance\nThu 2022-05-12 22:38:34 EDT\n\u2714 Retrieving state data...\nTarget: node1.office\n\n============ ======================== ============== ================= =================== ============\n Agent        Connection               128T           128T-mist-agent   Device-ID           Interfaces\n============ ======================== ============== ================= =================== ============\n unassigned   down - no DNS response   5.5.0-43.el7   3.1.2666-1.el7    02-00-01-f3-39-eb            4\n\nRetrieved state data.\nCompleted in 1.98 seconds\nadmin@node1.office#\n"})}),"\n",(0,s.jsxs)(n.p,{children:["For additional troubleshooting information use the ",(0,s.jsx)(n.code,{children:"detail"})," commands as shown below"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.code,{children:"show plugins state router <router name> detail 128T-mist-wan-assurance"})}),"\n",(0,s.jsx)(n.h2,{id:"ssr-connection-status",children:"SSR Connection Status"}),"\n",(0,s.jsx)(n.p,{children:"The status of the SSR connection to the Mist cloud and other details can be found on the SSR GUI and PCLI."}),"\n",(0,s.jsx)(n.h3,{id:"on-the-conductor-gui",children:"On the Conductor GUI"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Navigate to Plugins > MIST WAN ASSURANCE > Details."}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"Plugins Context Menu",src:t(80084).A+"",width:"3564",height:"1588"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Select the router from the ",(0,s.jsx)(n.code,{children:"Router Context"})," menu."]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"Plugins Context Menu",src:t(35374).A+"",width:"3046",height:"614"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"The summary output is displayed by default and contains useful information about the device connection to the Mist cloud."}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"Plugins Context Menu",src:t(92024).A+"",width:"3046",height:"614"})}),"\n",(0,s.jsx)(n.h3,{id:"on-the-conductor-pcli",children:"On the Conductor PCLI"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["The ",(0,s.jsx)(n.code,{children:"show mist"})," command can be used to display the summary and detail information about the SSR's connection to the Mist cloud."]}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-console",children:"admin@node1.conductor1# show mist router 128t-east\nWed 2022-07-20 05:33:05 UTC\n\u2714 Retrieving mist state...\nTarget: node1.128t-east\n\n========== ============ ============= ================= ============================= =================== ============\n Agent      Connection   128T          128T-mist-agent   Platform                      Device-ID           Interfaces\n========== ============ ============= ================= ============================= =================== ============\n assigned   up           5.6.1-9.el7   4.0.3330-1.el7    OpenStack Foundation - Nova   02-00-01-c9-90-16            6\n\nRetrieved mist state.\nCompleted in 1.06 seconds\nadmin@node1.conductor1#\n"})}),"\n",(0,s.jsx)(n.h2,{id:"moving-a-router",children:"Moving a Router"}),"\n",(0,s.jsx)(n.p,{children:"In a situation where a router needs to be moved from one organization to another or physically relocated, the router must be released and then re-onboarded."}),"\n",(0,s.jsx)(n.h3,{id:"releasing-a-router",children:"Releasing a Router"}),"\n",(0,s.jsx)(n.p,{children:"To release a router, use the following process from the Mist GUI:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Go to ",(0,s.jsx)(n.strong,{children:"Organization > Inventory"}),"."]}),"\n",(0,s.jsx)(n.li,{children:"Select the checkbox next to the router."}),"\n",(0,s.jsxs)(n.li,{children:["Click on the ",(0,s.jsx)(n.strong,{children:"More"})," drop down that appears on the top of the page."]}),"\n",(0,s.jsxs)(n.li,{children:["Select ",(0,s.jsx)(n.strong,{children:"Release"}),"."]}),"\n",(0,s.jsxs)(n.li,{children:["Click on ",(0,s.jsx)(n.strong,{children:"Release"})," to confirm."]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["After a few minutes the router will be released and stop sending the data to the Mist cloud. Use the information in ",(0,s.jsx)(n.a,{href:"#on-the-conductor-pcli",children:"Viewing the SSR Status"})," to check the current status. A successfully released router will display the following:"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"Plugins Context Menu",src:t(16982).A+"",width:"3046",height:"614"})}),"\n",(0,s.jsx)(n.p,{children:"Once that process is completed, disable the Mist WAN Assurance plugin on the router."}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"Disable MWA Plugin",src:t(82975).A+"",width:"3016",height:"572"})}),"\n",(0,s.jsx)(n.h3,{id:"re-onboarding-a-router",children:"Re-Onboarding a Router"}),"\n",(0,s.jsx)(n.p,{children:"Once the necessary changes have been made to the registration-code and other configuration, the re-onboarding process can begin."}),"\n",(0,s.jsx)(n.h4,{id:"using-the-conductor-ui",children:"Using the Conductor UI"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:"Navigate to Plugins > MIST WAN ASSURANCE > Details."}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"Plugins Context Menu",src:t(80084).A+"",width:"3564",height:"1588"})}),"\n",(0,s.jsxs)(n.ol,{start:"2",children:["\n",(0,s.jsxs)(n.li,{children:["Confirm the registration-code on the router is as expected. This can done via the ",(0,s.jsx)(n.code,{children:"Detail State"})," tab as shown below."]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"Plugins Detail State",src:t(424).A+"",width:"3016",height:"796"})}),"\n",(0,s.jsxs)(n.ol,{start:"3",children:["\n",(0,s.jsx)(n.li,{children:"Re-enable the plugin on the router and commit the configuration."}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"Enable MWA Plugin",src:t(32972).A+"",width:"3016",height:"572"})}),"\n",(0,s.jsxs)(n.ol,{start:"4",children:["\n",(0,s.jsxs)(n.li,{children:["Switch to the ",(0,s.jsx)(n.code,{children:"Command"})," tab, select the router from the ",(0,s.jsx)(n.code,{children:"Router Context"})," menu and select the ",(0,s.jsx)(n.code,{children:"unrelease mist agent"})," command."]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"Plugins Command Context Menu",src:t(12032).A+"",width:"3016",height:"1738"})}),"\n",(0,s.jsxs)(n.ol,{start:"5",children:["\n",(0,s.jsxs)(n.li,{children:["Click on ",(0,s.jsx)(n.code,{children:"Execute"})," to initiate the re-onboarding process using the registration-code currently available on the system."]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"Unreleased",src:t(23303).A+"",width:"3016",height:"796"})}),"\n",(0,s.jsx)(n.h4,{id:"using-the-conductor-pcli",children:"Using the Conductor PCLI"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:"Confirm the registration-code on the router is as expected."}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-console",children:"admin@node1.conductor1# show mist router 128t-east detail\nWed 2022-07-20 05:58:33 UTC\n\u2714 Retrieving mist state...\n\n==============================================================================================================================================================================================================================================================\n node1.128t-east\n==============================================================================================================================================================================================================================================================\n   128T:                                       5.6.1-9\n   128T-mist-agent:                            4.0.3330-1\n   Agent:                                      released\n   Connection:                                 down\n   registration-code:                          eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJvcmdfaWQiOiIwYzE2MGI3Zi0xMDI3LTRjZDEtOTIzYi03NDQ1MzRjNGIwNzAiLCJzdmMiOiIxMjhyb3V0ZXIiLCJwcm92aWRlciI6ImF3cyIsImVudiI6InN0YWdpbmciLCJlcHRlcm1fdXJsIjoid3NzOi8vZXAtdGVyb\n WluYXRvci1zdGFnaW5nLm1pc3RzeXMubmV0L3dzIiwiaWF0IjoxNjU4MjkzMTQ2LCJleHAiOjE2ODk4MjkxNDZ9.LVIW0Gx8Q8IIkp0o1J86ZoW3_FytrRDKJEMQdBqABCD\n   registration-time:                          unknown\n\nRetrieved mist state.\nCompleted in 0.97 seconds\nadmin@node1.conductor1#\n"})}),"\n",(0,s.jsxs)(n.ol,{start:"2",children:["\n",(0,s.jsx)(n.li,{children:"Re-enable the plugin on the router."}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-console",children:"admin@node1.conductor1# config authority router 128t-east mist-wan-assurance enabled true\n"})}),"\n",(0,s.jsxs)(n.ol,{start:"3",children:["\n",(0,s.jsx)(n.li,{children:"Unrelease the router to initiate the re-onboarding process."}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-console",children:"admin@node1.conductor1# unrelease mist agent\nnode   router\nadmin@node1.conductor1# unrelease mist agent router 128t-east node node1\n\u2714 Retrieving...\nTarget: node1.conductor1\n\nUnreleased\n\nSuccessfully retrieved info.\nadmin@node1.conductor1#\n"})}),"\n",(0,s.jsxs)(n.ol,{start:"4",children:["\n",(0,s.jsxs)(n.li,{children:["Once re-onboarded, check the status using the ",(0,s.jsx)(n.code,{children:"show mist"})," command."]}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-console",children:"admin@node1.conductor1# show mist router 128t-east\nWed 2022-07-20 06:01:32 UTC\n\u2714 Retrieving mist state...\nTarget: node1.128t-east\n\n============ ============ ============= ================= ============================= =================== ============\n Agent        Connection   128T          128T-mist-agent   Platform                      Device-ID           Interfaces\n============ ============ ============= ================= ============================= =================== ============\n unassigned   up           5.6.1-9.el7   4.0.3330-1.el7    OpenStack Foundation - Nova   02-00-01-63-0e-65            6\n\nRetrieved mist state.\nCompleted in 0.90 seconds\nadmin@node1.conductor1#\n"})})]})}function h(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(l,{...e})}):l(e)}},82975:(e,n,t)=>{t.d(n,{A:()=>s});const s=t.p+"assets/images/wana_disabled_mwa-c5c8375642c387a2426ff6c6ac8be17c.png"},32972:(e,n,t)=>{t.d(n,{A:()=>s});const s=t.p+"assets/images/wana_enabled_mwa-7d49ab5e80acde7b119b67f9077b6b02.png"},12032:(e,n,t)=>{t.d(n,{A:()=>s});const s=t.p+"assets/images/wana_plugin_command_context-a3dad204cf46cc927be81279036fb5b1.png"},35374:(e,n,t)=>{t.d(n,{A:()=>s});const s=t.p+"assets/images/wana_plugin_context-7f4737ccc464a60d89b1eb256ee83191.png"},80084:(e,n,t)=>{t.d(n,{A:()=>s});const s=t.p+"assets/images/wana_plugin_detail-cf19264e0cff13bd639a5bc0b14f0892.png"},424:(e,n,t)=>{t.d(n,{A:()=>s});const s=t.p+"assets/images/wana_plugin_detail_regcode-c6e45c429f711f180ed658f635350efb.png"},16982:(e,n,t)=>{t.d(n,{A:()=>s});const s=t.p+"assets/images/wana_plugin_released-f2c628b73dac83288279ac6c1043f399.png"},92024:(e,n,t)=>{t.d(n,{A:()=>s});const s=t.p+"assets/images/wana_plugin_state-3467664113fd0f213c20c9af4ae8452c.png"},23303:(e,n,t)=>{t.d(n,{A:()=>s});const s=t.p+"assets/images/wana_unreleased-008c26e8a9020789280d0a4c7ae53e8a.png"},28453:(e,n,t)=>{t.d(n,{R:()=>r,x:()=>a});var s=t(96540);const o={},i=s.createContext(o);function r(e){const n=s.useContext(i);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:r(e.components),s.createElement(i.Provider,{value:n},e.children)}}}]);