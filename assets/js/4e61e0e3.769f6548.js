"use strict";(self.webpackChunk_128t_docs=self.webpackChunk_128t_docs||[]).push([[2870],{77050:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>d,contentTitle:()=>o,default:()=>h,frontMatter:()=>i,metadata:()=>a,toc:()=>l});var t=r(74848),s=r(28453);const i={title:"Legacy Upgrades",sidebar_label:"Legacy Upgrades"},o=void 0,a={id:"upgrade_legacy",title:"Legacy Upgrades",description:"This guide focuses on legacy software upgrades - those prior to version 6.3.0.",source:"@site/docs/upgrade_legacy.md",sourceDirName:".",slug:"/upgrade_legacy",permalink:"/docs/upgrade_legacy",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{title:"Legacy Upgrades",sidebar_label:"Legacy Upgrades"},sidebar:"docs",previous:{title:"Upgrades with Restricted Internet Access",permalink:"/docs/upgrade_restricted_access"},next:{title:"Rollback and Reinstallation",permalink:"/docs/intro_rollback"}},d={},l=[{value:"Version Dependencies",id:"version-dependencies",level:4},{value:"General Dependency Information",id:"general-dependency-information",level:4},{value:"Upgrading Software Versions Prior to 6.3.0",id:"upgrading-software-versions-prior-to-630",level:2},{value:"Using the Web Interface",id:"using-the-web-interface",level:3},{value:"Using the PCLI",id:"using-the-pcli",level:3},{value:"Log into the PCLI",id:"log-into-the-pcli",level:4},{value:"Upgrading Using the Interactive Installer",id:"upgrading-using-the-interactive-installer",level:3}];function c(e){const n={a:"a",admonition:"admonition",code:"code",em:"em",h2:"h2",h3:"h3",h4:"h4",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.p,{children:"This guide focuses on legacy software upgrades - those prior to version 6.3.0."}),"\n",(0,t.jsx)(n.admonition,{type:"note",children:(0,t.jsxs)(n.p,{children:["Please refer to the ",(0,t.jsx)(n.a,{href:"/docs/intro_upgrade_considerations",children:"Upgrade Considerations"})," before proceeding."]})}),"\n",(0,t.jsxs)(n.p,{children:["The SSR conductor or router must have internet access to download the latest software packages; however, we recognize that there are deployments where the SSR does not have internet access. In those cases you can use the SSR conductor as a repository (or proxy) to retrieve or store software images. For information about upgrading offline or air-gap network devices, refer to ",(0,t.jsx)(n.a,{href:"/docs/upgrade_restricted_access",children:"Upgrades with Restricted Internet Access"}),"."]}),"\n",(0,t.jsx)(n.p,{children:"As with any upgrade activity, it is always prudent to create a backup of your current software configuration before initiating any upgrade activity."}),"\n",(0,t.jsx)(n.p,{children:"With software versions prior to 6.3.0, there are three standard ways of upgrading routers:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Using the conductor's ",(0,t.jsx)(n.a,{href:"#using-the-web-interface",children:"Web Interface"})," to initiate the upgrade"]}),"\n",(0,t.jsxs)(n.li,{children:["Using the conductor's ",(0,t.jsx)(n.a,{href:"#using-the-pcli",children:"PCLI"})," to initiate the upgrade"]}),"\n",(0,t.jsxs)(n.li,{children:["Using the ",(0,t.jsx)(n.a,{href:"#upgrading-using-the-interactive-installer",children:"Interactive Installer"})," from the Linux shell"]}),"\n"]}),"\n",(0,t.jsx)(n.admonition,{type:"note",children:(0,t.jsxs)(n.p,{children:["The router upgrade process using the PCLI and the GUI is done in two stages: First, the software is downloaded, then it is installed. Use the ",(0,t.jsx)(n.code,{children:"install128t"})," application steps through both of these processes."]})}),"\n",(0,t.jsxs)(n.p,{children:["Prerequisites for upgrades now include configuring a user with super user (sudo) privileges. ",(0,t.jsx)(n.strong,{children:"SSH Root login is not permitted."})," If the existing version allows SSH Root login, it will be disabled during the upgrade. When a system is installed using the OTP ISO, a ",(0,t.jsx)(n.strong,{children:"t128"})," user is configured with ",(0,t.jsx)(n.code,{children:"sudo"})," privileges."]}),"\n",(0,t.jsx)(n.h4,{id:"version-dependencies",children:"Version Dependencies"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"SSR-6.3.5 Software and Version Compatibility"})}),"\n",(0,t.jsxs)(n.p,{children:["Beginning with SSR-6.3.5, conductor-managed ",(0,t.jsx)(n.strong,{children:"routers"})," running SSR-6.3.5 must be managed by conductors running SSR-6.3.5 or higher software. Internal updates to the software prevent successful management from a lower patch version on the conductor when 6.3.5 is installed on the router. For example:"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Conductor: SSR-6.3.5 / Router: SSR-6.3.5 Compatible"}),"\n",(0,t.jsx)(n.li,{children:"Conductor: SSR-6.3.5+ / Router: SSR-6.3.5 Compatible"}),"\n",(0,t.jsx)(n.li,{children:"Conductor: SSR-6.3.5 / Router: SSR-6.2.6 Compatible"}),"\n",(0,t.jsx)(n.li,{children:"Conductor: SSR-6.3.4 / Router: SSR-6.3.5 Not Compatible"}),"\n",(0,t.jsx)(n.li,{children:"Conductor: SSR-6.2.9 / Router: SSR-6.3.5 Not Compatible"}),"\n"]}),"\n",(0,t.jsx)(n.h4,{id:"general-dependency-information",children:"General Dependency Information"}),"\n",(0,t.jsxs)(n.p,{children:["The conductor ",(0,t.jsx)(n.code,{children:"major.minor.patch"})," version must be greater than or equal to the router version. All ",(0,t.jsx)(n.a,{href:"/docs/about_support_policy",children:"versions currently under support"})," can be run on a router and managed by the conductor, provided that the conductor version is greater. Versions of software not under support ",(0,t.jsx)(n.em,{children:"may"})," work, but are not guaranteed to do so."]}),"\n",(0,t.jsx)(n.p,{children:"Examples:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Conductor running version 6.0.10, managing Routers running version 6.0.5: Supported."}),"\n",(0,t.jsx)(n.li,{children:"Conductor running version 5.6.7, managing Routers running version 5.6.17: Not supported."}),"\n",(0,t.jsx)(n.li,{children:"Conductor running version 6.2.5, managing Routers running version 5.6.17: Supported."}),"\n",(0,t.jsx)(n.li,{children:"Conductor running version 5.6.8, managing Routers running version 6.1.3; Not supported."}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"upgrading-software-versions-prior-to-630",children:"Upgrading Software Versions Prior to 6.3.0"}),"\n",(0,t.jsx)(n.p,{children:"Use the following procedure to upgrade your software versions earlier than 6.3.0."}),"\n",(0,t.jsx)(n.h3,{id:"using-the-web-interface",children:"Using the Web Interface"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["Navigate to the Router page in the Conductor's GUI. Routers that have available upgrades are indicated with the green ",(0,t.jsx)(n.strong,{children:"Upgrade SSR"})," icon (the arrow within a circle) in the router list."]}),"\n",(0,t.jsxs)(n.li,{children:["Click on the ",(0,t.jsx)(n.strong,{children:"Upgrade SSR"})," icon next to your router. A list of upgrade and download options appears. This list is filterable if the list grows large."]}),"\n",(0,t.jsx)(n.li,{children:"Click on the target release in the Available Downloads section of the list."}),"\n",(0,t.jsx)(n.li,{children:"Confirm the operation to begin downloading the software. Clicking on the router in the router list shows download progress."}),"\n",(0,t.jsxs)(n.li,{children:["Once complete, click the ",(0,t.jsx)(n.strong,{children:"Upgrade SSR"})," icon again, and select the target software release from the Available Upgrades list. Confirm this operation to begin the upgrade process."]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"The Automated Provisioner upgrades both nodes in a high availability router in series to minimize/avoid downtime. Despite this, it is still recommended to perform upgrade activity during periods of low traffic or maintenance windows."}),"\n",(0,t.jsx)(n.h3,{id:"using-the-pcli",children:"Using the PCLI"}),"\n",(0,t.jsx)(n.p,{children:"Before upgrading the SSR Software from the PCLI, use the following procedure to stop the the software."}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Launch a Linux shell window."}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Execute the command:"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.code,{children:"sudo systemctl stop 128T"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Verify that the software has stopped by executing the command:"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.code,{children:"sudo systemctl status 128T"})}),"\n",(0,t.jsx)(n.p,{children:"Result: The software is listed as inactive (dead)."}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Stop the salt-minion."}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.code,{children:"sudo systemctl stop salt-minion"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Close the Linux shell."}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"Use the steps below to download and upgrade SSR software if you are running earlier software versions."}),"\n",(0,t.jsx)(n.h4,{id:"log-into-the-pcli",children:"Log into the PCLI"}),"\n",(0,t.jsx)(n.p,{children:"As an administrator-level user, log into the conductor's PCLI."}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["Use the command ",(0,t.jsx)(n.code,{children:"show assets"})," to list the devices managed by this conductor, and the software revision each asset is currently running."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["For a given asset, use the command ",(0,t.jsx)(n.code,{children:"show asset [asset ID]"})," or ",(0,t.jsx)(n.code,{children:"show asset software router [router name]"}),'  to view the available software upgrades for that asset. The list will be in the section labeled "Available for Download" at the end of the output.']}),"\n",(0,t.jsx)(n.admonition,{type:"note",children:(0,t.jsxs)(n.p,{children:["If there are software releases absent from the list that you are confident should appear, use the command ",(0,t.jsx)(n.code,{children:"send command yum-cache-refresh router [router name]"})," to refresh the software list."]})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["Type ",(0,t.jsx)(n.code,{children:"send command download router [your router name] [software version]"}),". You can monitor the progress by using the ",(0,t.jsx)(n.code,{children:"show asset"})," and/or ",(0,t.jsx)(n.code,{children:"show asset [asset ID]"})," command, which will indicate Automated Provisioner status (e.g., ",(0,t.jsx)(n.em,{children:"downloading"}),")."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["Once the download is complete, use the command ",(0,t.jsx)(n.code,{children:"send command upgrade router [your router name]"})," to initiate the upgrade process."]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:["The conductor's ",(0,t.jsx)(n.em,{children:"automated provisioner"})," will upgrade both nodes in a high availability router in series to minimize/avoid downtime. Despite this, it is still recommended to perform upgrade activity during periods of low traffic or maintenance windows."]}),"\n",(0,t.jsx)(n.h3,{id:"upgrading-using-the-interactive-installer",children:"Upgrading Using the Interactive Installer"}),"\n",(0,t.jsx)(n.p,{children:"The Interactive Installer can be used to upgrade a conductor or a router for versions of SSR software prior to 6.3.0, and are performed from a linux shell."}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Launch a Linux command prompt window on the node you wish to upgrade."}),"\n",(0,t.jsxs)(n.admonition,{type:"note",children:[(0,t.jsx)(n.p,{children:"If you are running an older version of the Installer (prior to version 2.7.0), it is strongly recommended that you first upgrade to the latest version of the Installer. If the upgrade is not possible, and you are running an Installer version prior to 2.7.0, use the Screen utility when performing an upgrade in interactive mode to avoid SSH session timeout. Installer versions 2.7.0 and above do not need to use the Screen utility."}),(0,t.jsxs)(n.p,{children:["To upgrade the installer, run ",(0,t.jsx)(n.code,{children:"dnf update 128T-installer"})," from the linux prompt."]})]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Create a screen and attach to it."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"screen -d -m -s <name-of-screen-session>\nscreen -x <name-of-screen-session>\n"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Shut down the salt-minion on the target node using the following command:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"sudo systemctl stop salt-minion\n"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Enter the command to launch the interactive installer wizard."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"sudo install128t\n"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Result"}),": The SSR splash screen appears."]}),"\n",(0,t.jsx)(n.admonition,{type:"note",children:(0,t.jsxs)(n.p,{children:["The ",(0,t.jsx)(n.code,{children:"install128t"})," application checks for an available update. If a newer version is detected, it requests that you update."]})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["Press the ",(0,t.jsx)(n.strong,{children:"enter"})," key to select ",(0,t.jsx)(n.strong,{children:"Begin"})," and start the installation wizard."]}),"\n",(0,t.jsx)(n.admonition,{type:"note",children:(0,t.jsx)(n.p,{children:"Use the spacebar to move between entries in the installer windows."})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["When prompted, select ",(0,t.jsx)(n.strong,{children:"Upgrade"}),"."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"Conductor Upgrade",src:r(80522).A+"",width:"356",height:"297"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Result"}),": The application queries the SSR software repository for the latest software."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Select the desired software version from the list of available options."}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"Version Selection dialog",src:r(76892).A+"",width:"484",height:"396"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Confirm the upgrade to begin the upgrade process."}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"Confirm Upgrade",src:r(27101).A+"",width:"309",height:"197"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["Once the upgrade is complete, press the ",(0,t.jsx)(n.strong,{children:"enter"})," key to select ",(0,t.jsx)(n.strong,{children:"Yes"})," to start your software."]}),"\n",(0,t.jsx)(n.admonition,{type:"note",children:(0,t.jsx)(n.p,{children:"Your output may vary based upon the nature of the upgrade, occasion, various packages, and dependencies that SSR requires as part of the SSR Routing Software upgrade."})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Detach from the Screen utility (if applicable)."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"ctrl+a\nd\n"})}),"\n"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(c,{...e})}):c(e)}},80522:(e,n,r)=>{r.d(n,{A:()=>t});const t=r.p+"assets/images/conductor_upgrade1-14ec81b4bb0b0a1bc21a4fc62c8d5b8c.png"},76892:(e,n,r)=>{r.d(n,{A:()=>t});const t=r.p+"assets/images/conductor_upgrade2_version-780c7446e0b755861ce53dcc2100fc1c.png"},27101:(e,n,r)=>{r.d(n,{A:()=>t});const t=r.p+"assets/images/conductor_upgrade3_confirm-879a8efcf48b449af18989f965db5386.png"},28453:(e,n,r)=>{r.d(n,{R:()=>o,x:()=>a});var t=r(96540);const s={},i=t.createContext(s);function o(e){const n=t.useContext(i);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:o(e.components),t.createElement(i.Provider,{value:n},e.children)}}}]);