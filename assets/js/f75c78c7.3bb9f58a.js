"use strict";(self.webpackChunk_128t_docs=self.webpackChunk_128t_docs||[]).push([[365],{3905:function(e,n,t){t.d(n,{Zo:function(){return d},kt:function(){return u}});var i=t(67294);function a(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function o(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function r(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?o(Object(t),!0).forEach((function(n){a(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):o(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function l(e,n){if(null==e)return{};var t,i,a=function(e,n){if(null==e)return{};var t,i,a={},o=Object.keys(e);for(i=0;i<o.length;i++)t=o[i],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)t=o[i],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var s=i.createContext({}),c=function(e){var n=i.useContext(s),t=n;return e&&(t="function"==typeof e?e(n):r(r({},n),e)),t},d=function(e){var n=c(e.components);return i.createElement(s.Provider,{value:n},e.children)},p={inlineCode:"code",wrapper:function(e){var n=e.children;return i.createElement(i.Fragment,{},n)}},m=i.forwardRef((function(e,n){var t=e.components,a=e.mdxType,o=e.originalType,s=e.parentName,d=l(e,["components","mdxType","originalType","parentName"]),m=c(t),u=a,g=m["".concat(s,".").concat(u)]||m[u]||p[u]||o;return t?i.createElement(g,r(r({ref:n},d),{},{components:t})):i.createElement(g,r({ref:n},d))}));function u(e,n){var t=arguments,a=n&&n.mdxType;if("string"==typeof e||a){var o=t.length,r=new Array(o);r[0]=m;var l={};for(var s in n)hasOwnProperty.call(n,s)&&(l[s]=n[s]);l.originalType=e,l.mdxType="string"==typeof e?e:a,r[1]=l;for(var c=2;c<o;c++)r[c]=t[c];return i.createElement.apply(null,r)}return i.createElement.apply(null,t)}m.displayName="MDXCreateElement"},78343:function(e,n,t){t.r(n),t.d(n,{frontMatter:function(){return l},contentTitle:function(){return s},metadata:function(){return c},toc:function(){return d},default:function(){return m}});var i=t(87462),a=t(63366),o=(t(67294),t(3905)),r=["components"],l={title:"Configuring Domain-based Web Filtering/Routing",sidebar:"Configuring Domain-based Web Filtering/Routing"},s=void 0,c={unversionedId:"config_domain-based_web_filter",id:"config_domain-based_web_filter",title:"Configuring Domain-based Web Filtering/Routing",description:"Configuring Domain-based Web Filtering allows users to create generic services for a broad range of domains that fall into a categories such as \u201cSports\u201d (i.e.; espn.com, nfl.com, nhl.com, etc.) \u201cSocial Media\u201d (Facebook, LinkedIn, etc), \u201cAdult\u201d and others. Categories are populated with known domains associated with the traffic type. Domain learning can be enabled so that the default domains are supplemented with discovered domains in each category. Additionally, users can modify the list of domains in a category.",source:"@site/docs/config_domain-based_web_filter.md",sourceDirName:".",slug:"/config_domain-based_web_filter",permalink:"/docs/config_domain-based_web_filter",tags:[],version:"current",lastUpdatedAt:1646322842,formattedLastUpdatedAt:"3/3/2022",frontMatter:{title:"Configuring Domain-based Web Filtering/Routing",sidebar:"Configuring Domain-based Web Filtering/Routing"},sidebar:"docs",previous:{title:"Management over Forwarding",permalink:"/docs/config_management_over_forwarding"},next:{title:"Configuring Ethernet Over Secure Vector Routing",permalink:"/docs/config_EthoSVR"}},d=[{value:"Domain Categories",id:"domain-categories",children:[{value:"Auto-Update the Domain List",id:"auto-update-the-domain-list",children:[],level:3}],level:2},{value:"Configuring Domain-based Web Filtering",id:"configuring-domain-based-web-filtering",children:[{value:"Create a Parent-level Service",id:"create-a-parent-level-service",children:[],level:3},{value:"Create Child Services",id:"create-child-services",children:[{value:"Create the first service",id:"create-the-first-service",children:[],level:4},{value:"Create the second service, the one to be filtered",id:"create-the-second-service-the-one-to-be-filtered",children:[],level:4}],level:3},{value:"Configure the Tenant",id:"configure-the-tenant",children:[],level:3},{value:"Create the Access Policy",id:"create-the-access-policy",children:[],level:3}],level:2},{value:"Configuring Learning Mode",id:"configuring-learning-mode",children:[],level:2},{value:"Show Commands",id:"show-commands",children:[],level:2}],p={toc:d};function m(e){var n=e.components,l=(0,a.Z)(e,r);return(0,o.kt)("wrapper",(0,i.Z)({},p,l,{components:n,mdxType:"MDXLayout"}),(0,o.kt)("p",null,"Configuring Domain-based Web Filtering allows users to create generic services for a broad range of domains that fall into a categories such as \u201cSports\u201d (i.e.; espn.com, nfl.com, nhl.com, etc.) \u201cSocial Media\u201d (Facebook, LinkedIn, etc), \u201cAdult\u201d and others. Categories are populated with known domains associated with the traffic type. Domain learning can be enabled so that the default domains are supplemented with discovered domains in each category. Additionally, users can modify the list of domains in a category. "),(0,o.kt)("p",null,"Services can be defined based on categories to filter a broad set of related domains. Services can also be assigned to individual domains, and filtering performed in a more targeted manner. "),(0,o.kt)("h2",{id:"domain-categories"},"Domain Categories"),(0,o.kt)("p",null,"Use the ",(0,o.kt)("inlineCode",{parentName:"p"},"show domain-categories")," command to display a list of categories in the CLI. The data is stored in the /etc/128technology/application-categories directory. The default categories available are:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"Node: node1\n================= =============== ===================\n Category          Session Count   Domain-name Count\n================= =============== ===================\n <Uncategorized>             403                  16\n Advertiser                    0                   0\n Arts                          0                   0\n Business                     14                  13\n CDN                           0                   0\n Computers                     1                   1\n Conferencing                  2                   1\n Cybersecurity                 0                   0\n DeviceIoT                     1                   1\n FileSharing                   0                   0\n Hosting                       0                   0\n Mail                          0                   0\n Recreation                    0                   0\n Reference                     0                   0\n Search                        0                   0\n SocialMedia                   0                   0\n SoftwareUpdates               0                   0\n StreamingMedia                0                   0\n Technology                   13                   6\n")),(0,o.kt)("p",null,"To specify a Domain Name Category in the GUI, enter a category name into the Domain Name Category field. "),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"Configuration Fields",src:t(84869).Z})),(0,o.kt)("p",null,"Active categories and domains are displayed on the Applications Seen page available on the Routers page, using the link in the top right corner. "),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"Select Applications Seen",src:t(64114).Z})),(0,o.kt)("p",null,"Adding a new category or domain enters the information to the master list. The category and domain lists are generated when the configuration is committed. As new categories and domains are added, the configuration is updated, but the entire list is not regenerated. "),(0,o.kt)("p",null,"Use the Generate Application Idenfication Categories toggle to generate a set of child services for each category. "),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"Generate Application Identification Categories",src:t(58876).Z})),(0,o.kt)("h3",{id:"auto-update-the-domain-list"},"Auto-Update the Domain List"),(0,o.kt)("p",null,"Application Identification is configured to automatically download updated domain and application datatsets weekly. The defaults (shown below) can be adjusted as necessary using the Application Data Updates panel for each router. "),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"Application Data Updates",src:t(66167).Z})),(0,o.kt)("p",null,"For additional information, see ",(0,o.kt)("a",{parentName:"p",href:"/docs/config_reference_guide#application-identification"},"application-identification.")),(0,o.kt)("h2",{id:"configuring-domain-based-web-filtering"},"Configuring Domain-based Web Filtering"),(0,o.kt)("p",null,"To enable Domain-based Web Filtering, you must configure a parent-level service under which your child service will nest. In many cases, you may have pieces of this procedure already in place, such as  the ",(0,o.kt)("em",{parentName:"p"},"internet")," service configured as an example below. "),(0,o.kt)("p",null,"The high level steps for configuring Domain-based Web Filtering are:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"Create a parent service"),(0,o.kt)("li",{parentName:"ul"},"Create the child service to be filtered"),(0,o.kt)("li",{parentName:"ul"},"Configure a Tenant"),(0,o.kt)("li",{parentName:"ul"},"Create an access policy on the child service to filter traffic ")),(0,o.kt)("h3",{id:"create-a-parent-level-service"},"Create a Parent-level Service"),(0,o.kt)("p",null,"In this example we create a broad service representing the internet."),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"Log in to the Conductor GUI."),(0,o.kt)("li",{parentName:"ol"},"Select Configuration."),(0,o.kt)("li",{parentName:"ol"},"Scroll down to Services."),(0,o.kt)("li",{parentName:"ol"},"Select ADD next to Services."),(0,o.kt)("li",{parentName:"ol"},"Name the service internet, and select SAVE."),(0,o.kt)("li",{parentName:"ol"},"On the Service screen, verify that Enabled is set to true."),(0,o.kt)("li",{parentName:"ol"},"Set Scope to public."),(0,o.kt)("li",{parentName:"ol"},"To generate Application Identification Categories, set the toggle to True."),(0,o.kt)("li",{parentName:"ol"},"Scroll down to Service Addresses and select ADD."),(0,o.kt)("li",{parentName:"ol"},"Enter the IP address 0.0.0.0/0, and select SAVE."),(0,o.kt)("li",{parentName:"ol"},"At the top of the screen, select VALIDATE.")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"config\n    authority\n        service     internet\n            name          internet\n            scope         public\n            address       0.0.0.0/0\n        exit\n    exit\nexit\n")),(0,o.kt)("h3",{id:"create-child-services"},"Create Child Services"),(0,o.kt)("p",null,"The child service classifies the traffic and provides the option to filter different domains and categories. We will create two services, one of which will be filtered out (denied)."),(0,o.kt)("h4",{id:"create-the-first-service"},"Create the first service"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"In the Services window, select ADD."),(0,o.kt)("li",{parentName:"ol"},"Name the first service ",(0,o.kt)("inlineCode",{parentName:"li"},"netflix.internet")),(0,o.kt)("li",{parentName:"ol"},"On the Service screen, verify that Enabled is set to ",(0,o.kt)("strong",{parentName:"li"},"true"),"."),(0,o.kt)("li",{parentName:"ol"},"Set share service routes to ",(0,o.kt)("strong",{parentName:"li"},"true"),"."),(0,o.kt)("li",{parentName:"ol"},"Scroll down to Domain Name and enter the domain name using a wildcard to allow identification of all domain names; ",(0,o.kt)("inlineCode",{parentName:"li"},"*.netflix.com"),"."),(0,o.kt)("li",{parentName:"ol"},"In the Domain Name Category field, click ADD and select/add the domain category, Entertainment.")),(0,o.kt)("h4",{id:"create-the-second-service-the-one-to-be-filtered"},"Create the second service, the one to be filtered"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"In the Services panel, select ADD."),(0,o.kt)("li",{parentName:"ol"},"Create a new service, ",(0,o.kt)("inlineCode",{parentName:"li"},"adult.internet"),"."),(0,o.kt)("li",{parentName:"ol"},"On the Service screen, verify that Enabled is set to ",(0,o.kt)("strong",{parentName:"li"},"true"),"."),(0,o.kt)("li",{parentName:"ol"},"Set Scope to private."),(0,o.kt)("li",{parentName:"ol"},"Scroll down to the Domain Name Category field, click ADD and select/add the domain category, Adult. ")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"config\n    authority\n        service     netflix.internet\n           name         netflix.internet\n           domain-name             *.netflix.com\n           domain-name-category    Entertainment\n        exit\n        service       adult.internet\n           name            adult.internet\n           domain-name-category    Adult \n        exit\n    exit\nexit\n")),(0,o.kt)("h3",{id:"configure-the-tenant"},"Configure the Tenant"),(0,o.kt)("p",null,"A tenant must be configured in order to create an Access Policy. If you have not already configured a tenant for the service, refer to ",(0,o.kt)("a",{parentName:"p",href:"/docs/intro_basic_conductor_config#create-the-tenant"},"Create the Tenant")," in the Conductor Configuration documentation."),(0,o.kt)("h3",{id:"create-the-access-policy"},"Create the Access Policy"),(0,o.kt)("p",null,"Configure the access-policy to deny the relevant tenants."),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"Scroll down to services."),(0,o.kt)("li",{parentName:"ol"},"Select adult.internet."),(0,o.kt)("li",{parentName:"ol"},"In the Basic Information panel, set the Tenant to adult.internet."),(0,o.kt)("li",{parentName:"ol"},"Scroll down to Access Policies and click ADD."),(0,o.kt)("li",{parentName:"ol"},"In the Source field, enter adult.internet (name of the service)."),(0,o.kt)("li",{parentName:"ol"},"In the permission field, select deny."),(0,o.kt)("li",{parentName:"ol"},"Click Validate."),(0,o.kt)("li",{parentName:"ol"},"Return to the Configuration Home screen."),(0,o.kt)("li",{parentName:"ol"},"Click Commit.")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"config\n    authority\n        service    adult.internet\n            name                  adult.internet\n            domain-name-category  Adult\n            access-policy         adult.internet\n                source      adult.internet\n                permission  deny\n            exit\n            access-policy         home\n                source      home\n                permission  deny\n            exit\n        exit\n    exit\nexit\n\n")),(0,o.kt)("h2",{id:"configuring-learning-mode"},"Configuring Learning Mode"),(0,o.kt)("p",null,"Learning mode is used to gather statistics about a domain or category. You can select the type of information to be gathered; Modules, HTTPS, TLS, or All. "),(0,o.kt)("p",null,"To configure Learning Mode via the GUI:"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"Select a router."),(0,o.kt)("li",{parentName:"ol"},"Scroll down to Router Settings and click Application Identification Settings.")),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"Application ID Setting Button",src:t(3893).Z})),(0,o.kt)("ol",{start:3},(0,o.kt)("li",{parentName:"ol"},"Set ",(0,o.kt)("inlineCode",{parentName:"li"},"enabled")," to ",(0,o.kt)("inlineCode",{parentName:"li"},"true"),".")),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"App ID Basic Info",src:t(21128).Z})),(0,o.kt)("ol",{start:4},(0,o.kt)("li",{parentName:"ol"},"Under Application Identification, select ADD."),(0,o.kt)("li",{parentName:"ol"},"Select a type of application to identify. In most cases, selecting ",(0,o.kt)("inlineCode",{parentName:"li"},"all")," will provide the best data set.")),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"App Id Dropdown",src:t(19809).Z})),(0,o.kt)("ol",{start:6},(0,o.kt)("li",{parentName:"ol"},"Validate and Commit the changes. ")),(0,o.kt)("p",null,"If Learning Mode is disabled, statistics are only gathered for categories/domains that are configured in a service."),(0,o.kt)("h2",{id:"show-commands"},"Show Commands"),(0,o.kt)("p",null,"The following show commands can be used from the CLI to display the list of domains and domain categories available and in use for Domain based web Filtering. "),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},"show domain-name"),":"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"admin@node1.test-home# show domain-names\nThu 2021-06-24 22:03:28 EDT\n\nRetrieving from 'node1.test-home'...\nNode: node1.test-home Page 1\n\n=================================== =============== ================= =====================\n Domain                              Session Count   Category          Last Updated\n=================================== =============== ================= =====================\n ps16.pndsn.com                                 44   <Uncategorized>   2021-06-24 21:37:52\n ps17.pndsn.com                                 40   <Uncategorized>   2021-06-24 21:37:52\n ps9.pndsn.com                                  39   <Uncategorized>   2021-06-24 21:37:53\n ps3.pndsn.com                                  36   <Uncategorized>   2021-06-24 21:37:52\n ps14.pndsn.com                                 36   <Uncategorized>   2021-06-24 21:37:52\n ps6.pndsn.com                                  30   <Uncategorized>   2021-06-24 21:37:52\n ps7.pndsn.com                                  20   <Uncategorized>   2021-06-24 22:01:26\n ps4.pndsn.com                                  20   <Uncategorized>   2021-06-24 21:37:52\n ps15.pndsn.com                                 20   <Uncategorized>   2021-06-24 21:37:52\n ps1.pndsn.com                                  20   <Uncategorized>   2021-06-24 21:37:52\n ps2.pndsn.com                                  10   <Uncategorized>   2021-06-24 21:37:52\n ps18.pndsn.com                                 10   <Uncategorized>   2021-06-24 21:38:15\n ps13.pndsn.com                                 10   <Uncategorized>   2021-06-24 21:38:06\n api-ws.mistsys.com                              3   Technology        2021-06-24 21:37:54\n wss-primary.slack.com                           2   Business          2021-06-24 21:37:53\n mtalk.google.com                                2   Conferencing      2021-06-24 07:49:11\n ep-terminator-staging.mistsys.net               2   Technology        2021-06-24 20:44:12\n mistsys.atlassian.net                           2   Technology        2021-06-24 21:37:53\n beacons.gvt2.com                                1   Business          2021-06-24 22:01:15\n *.immedia-semi.com                              1   DeviceIoT         2021-06-23 09:29:52\n status-integration.mistsys.com                  1   Technology        2021-06-24 21:37:55\n ssl.gstatic.com                                 1   Business          2021-06-24 22:00:21\n slackb.com                                      1   Business          2021-06-24 22:00:21\n slack.com                                       1   Business          2021-06-24 21:38:21\n skydrive.wns.windows.com                        1   Business          2021-06-24 21:38:08\n push.services.mozilla.com                       1   Business          2021-06-24 21:37:59\n addon-juniper.goskope.com                       1   <Uncategorized>   2021-06-24 21:37:55\n alive.github.com                                1   Technology        2021-06-24 21:37:54\n beacons.gcp.gvt2.com                            1   Business          2021-06-24 22:00:21\n beacons3.gvt2.com                               1   Business          2021-06-24 22:03:15\n beacons4.gvt2.com                               1   Business          2021-06-24 22:02:15\n courier.push.apple.com                          1   Business          2021-06-24 21:37:53\n gateway-juniper.goskope.com                     1   <Uncategorized>   2021-06-24 21:38:01\n github.com                                      1   Computers         2021-06-24 21:38:32\n gs-loc.apple.com                                1   Business          2021-06-24 21:38:37\n ibm.lakesidesoftware.com                        1   <Uncategorized>   2021-06-24 21:41:54\n lp-push-server-770.lastpass.com                 1   Business          2021-06-24 21:37:57\n\nCompleted in 0.09 seconds\n")),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},"show domain-categories"),": "),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"admin@node1.test-home# show domain-categories\nThu 2021-06-24 22:03:45 EDT\n\u2714 Retrieving domain-name categories...\n\nNode: node1\n================= =============== ===================\n Category          Session Count   Domain-name Count\n================= =============== ===================\n <Uncategorized>             403                  16\n Advertiser                    0                   0\n Arts                          0                   0\n Business                     14                  13\n CDN                           0                   0\n Computers                     1                   1\n Conferencing                  2                   1\n Cybersecurity                 0                   0\n DeviceIoT                     1                   1\n FileSharing                   0                   0\n Hosting                       0                   0\n Mail                          0                   0\n Recreation                    0                   0\n Reference                     0                   0\n Search                        0                   0\n SocialMedia                   0                   0\n SoftwareUpdates               0                   0\n StreamingMedia                0                   0\n Technology                   13                   6\n\nCompleted in 0.08 seconds\n")))}m.isMDXComponent=!0},3893:function(e,n,t){n.Z=t.p+"assets/images/config_app_learning1-72dd58c24b6cbb8d025095b5d9ed16b0.png"},21128:function(e,n,t){n.Z=t.p+"assets/images/config_app_learning2-72167fe1cef84b77b735c18a05195a88.png"},19809:function(e,n,t){n.Z=t.p+"assets/images/config_app_learning3-5159c398e120be2a1b7d9ebd25709713.png"},66167:function(e,n,t){n.Z=t.p+"assets/images/dbwf_app-id_updates-15b4adb6afddc7650eba0cd30d4effa5.png"},64114:function(e,n,t){n.Z=t.p+"assets/images/dbwf_appl_seen-febbfcb5d680ae6ae77e8223f8c18618.png"},84869:function(e,n,t){n.Z=t.p+"assets/images/dbwf_config_fields-26f670d3687b02fd92a5e37b108dba4c.png"},58876:function(e,n,t){n.Z=t.p+"assets/images/dbwf_gen_categories-df0205d4f6502928b225a76dea4b7382.png"}}]);