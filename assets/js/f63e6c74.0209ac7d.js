"use strict";(self.webpackChunk_128t_docs=self.webpackChunk_128t_docs||[]).push([[2404],{3905:function(e,n,t){t.d(n,{Zo:function(){return u},kt:function(){return m}});var r=t(67294);function i(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function o(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function a(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?o(Object(t),!0).forEach((function(n){i(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):o(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function l(e,n){if(null==e)return{};var t,r,i=function(e,n){if(null==e)return{};var t,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||(i[t]=e[t]);return i}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(i[t]=e[t])}return i}var c=r.createContext({}),s=function(e){var n=r.useContext(c),t=n;return e&&(t="function"==typeof e?e(n):a(a({},n),e)),t},u=function(e){var n=s(e.components);return r.createElement(c.Provider,{value:n},e.children)},d={inlineCode:"code",wrapper:function(e){var n=e.children;return r.createElement(r.Fragment,{},n)}},p=r.forwardRef((function(e,n){var t=e.components,i=e.mdxType,o=e.originalType,c=e.parentName,u=l(e,["components","mdxType","originalType","parentName"]),p=s(t),m=i,f=p["".concat(c,".").concat(m)]||p[m]||d[m]||o;return t?r.createElement(f,a(a({ref:n},u),{},{components:t})):r.createElement(f,a({ref:n},u))}));function m(e,n){var t=arguments,i=n&&n.mdxType;if("string"==typeof e||i){var o=t.length,a=new Array(o);a[0]=p;var l={};for(var c in n)hasOwnProperty.call(n,c)&&(l[c]=n[c]);l.originalType=e,l.mdxType="string"==typeof e?e:i,a[1]=l;for(var s=2;s<o;s++)a[s]=t[s];return r.createElement.apply(null,a)}return r.createElement.apply(null,t)}p.displayName="MDXCreateElement"},52054:function(e,n,t){t.r(n),t.d(n,{frontMatter:function(){return l},contentTitle:function(){return c},metadata:function(){return s},toc:function(){return u},default:function(){return p}});var r=t(87462),i=t(63366),o=(t(67294),t(3905)),a=["components"],l={title:"Bidirectional Forwarding Detection (BFD)",sidebar_label:"BFD with BGP and OSPF"},c=void 0,s={unversionedId:"config_bfd",id:"config_bfd",title:"Bidirectional Forwarding Detection (BFD)",description:"This section provides information about using BFD with BGP and OSPF protocols on the Session Smart Networking Platform.",source:"@site/docs/config_bfd.md",sourceDirName:".",slug:"/config_bfd",permalink:"/docs/config_bfd",tags:[],version:"current",lastUpdatedAt:1660943253,formattedLastUpdatedAt:"8/19/2022",frontMatter:{title:"Bidirectional Forwarding Detection (BFD)",sidebar_label:"BFD with BGP and OSPF"},sidebar:"docs",previous:{title:"OSPF",permalink:"/docs/config_ospf"},next:{title:"Dual Node High Availability",permalink:"/docs/config_ha"}},u=[{value:"Overview",id:"overview",children:[],level:2},{value:"Configuration",id:"configuration",children:[],level:2},{value:"Troubleshooting",id:"troubleshooting",children:[{value:"Example Output",id:"example-output",children:[],level:4}],level:2}],d={toc:u};function p(e){var n=e.components,t=(0,i.Z)(e,a);return(0,o.kt)("wrapper",(0,r.Z)({},d,t,{components:n,mdxType:"MDXLayout"}),(0,o.kt)("p",null,"This section provides information about using BFD with BGP and OSPF protocols on the Session Smart Networking Platform."),(0,o.kt)("h2",{id:"overview"},"Overview"),(0,o.kt)("p",null,"BFD can be enabled on the OSPF interface or the BGP neighbor. BFD configuration allows the following BFD parameters to be set: "),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"enable")," (default: false): Enable/disable BFD protocol."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"multiplier")," (default: 3): The number of BFD packets that can be lost without the BFD session declared as down."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"required-min-rx-interval")," (default: 1000): The minimum interval in milliseconds that this system must receive a BFD control packet."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"desired-tx-interval")," (default: 1000): The minimum transmission interval in milliseconds used to send BFD control packets.")),(0,o.kt)("p",null,"For OSPF, the BFD configuration can be created for the given OSPF interface. Once a neighbor is learned on this interface, then a BFD session is created with the same addresses used to create the OSPF adjacency.  "),(0,o.kt)("p",null,"For BGP, the BFD configuration is created for a BGP neighbor. Once the BGP neighbor is learned, then a BGP session is created. BFD uses the same addresses as the BGP adjacency. These can be interface addresses for directly connected BGP neighbors, or loopback addresses. "),(0,o.kt)("p",null,"The BFD peers are automatically removed by the protocols once the BGP/OSPF neighbor is removed. The OSPF/BGP adjacency remains up when BFD is configured for the peer. However, if the BFD configuration is modified while the BFD session is Up, then the OSPF/BGP adjacency will flap."),(0,o.kt)("h2",{id:"configuration"},"Configuration"),(0,o.kt)("p",null,"The following is a simple configuration for OSPF and BGP."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"authority\n    router A\n        routing default-instance\n                  ospf              2\n                      area          0.0.0.0\n                          interface  T217_DUT2 inet20\n                                node       T217_DUT2\n                                interface  inet20\n                                    bfd\n                                        enable               true\n                                        required-min-rx-interval 500\n                                        desired-tx-interval  500\n                                        multiplier           3\n\n           \n            routing-protocol bgp\n                neighbor 1.0.0.11\n                    bfd\n                            enable               true\n                            required-min-rx-interval 500\n                            desired-tx-interval  500\n                            multiplier            5\n\n")),(0,o.kt)("p",null,"BFD can also be enabled in the VRF."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"authority\n    router A\n        routing default-instance\n           vrf vrfA\n                      ospf              2\n                          area          0.0.0.0\n                              interface  T217_DUT2 inet30\n                                    node       T217_DUT2\n                                    interface  inet30\n                                        bfd\n                                            enable               true\n                                            required-min-rx-interval 500\n                                            desired-tx-interval  500\n                                            multiplier           3\n\n                routing-protocol bgp\n                    neighbor 1.0.0.11\n                        bfd\n                                   enable               true\n                                   required-min-rx-interval 500\n                                   desired-tx-interval  500\n                                   multiplier           3\n")),(0,o.kt)("h2",{id:"troubleshooting"},"Troubleshooting"),(0,o.kt)("p",null,"The following ",(0,o.kt)("inlineCode",{parentName:"p"},"show")," commands are available through the SSR PCLI. Additionally, the  BFD status is available in the GUI. "),(0,o.kt)("p",null,"The following show commands are also available for insight into the configuration:"),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},"show bfd [vrf <name>] [peer <ip>] [<verbosity>]")),(0,o.kt)("h4",{id:"example-output"},"Example Output"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"# show bfd\nTue 2022-02-01 15:31:46 UTC\n\n======= =========== ========== ======= =============\n Vrf     Peer        Local      State   Uptime\n======= =========== ========== ======= =============\n         16.0.0.3    16.0.0.2   up      15h 54m 2s\n music   11.1.20.4   g20        up      37m 29s\n         11.1.10.4   g10        up      15h 58m 52s\n\n\n# show bfd vrf music peer 11.1.20.4\nTue 2022-02-01 15:41:16 UTC\n\n======= =========== ======= ======= ========\n Vrf     Peer        Local   State   Uptime\n======= =========== ======= ======= ========\n music   11.1.20.4   g20     up      19s\n\n\n# show bfd detail\nTue 2022-02-01 15:39:13 UTC\n\n==========================================\n Information\n==========================================\n Item:\n   Remote Detect Multiplier:   3\n   Remote Receive Interval:    1000\n   Remote:                     1167833603\n   Vrf:                        default\n   Id:                         3654638929\n   Receive Interval:           1000\n   Remote Transmit Interval:   1000\n   Multihop:                   True\n   Detect Multiplier:          3\n   Passive Mode:               False\n   Status:                     up\n   Remote Echo Interval:       50\n   Local:                      16.0.0.2\n   Remote Diagnostic:          ok\n   Peer:                       16.0.0.3\n   Echo Interval:              0\n   Uptime:                     57689\n   Minimum Ttl:                252\n   Diagnostic:                 ok\n   Transmit Interval:          1000\n Item:\n   Remote Detect Multiplier:   3\n   Remote:                     3892773233\n   Interface:                  g20\n   Remote Receive Interval:    1000\n   Vrf:                        music\n   Id:                         927933835\n   Receive Interval:           1000\n   Remote Transmit Interval:   1000\n   Multihop:                   False\n   Detect Multiplier:          3\n   Passive Mode:               False\n   Status:                     up\n   Remote Echo Interval:       50\n   Remote Diagnostic:          ok\n   Peer:                       11.1.20.4\n   Echo Interval:              0\n   Uptime:                     2696\n   Diagnostic:                 ok\n   Transmit Interval:          1000\n Item:\n   Remote Detect Multiplier:   3\n   Remote:                     3305953639\n   Interface:                  g10\n   Remote Receive Interval:    1000\n   Vrf:                        default\n   Id:                         1713249686\n   Receive Interval:           1000\n   Remote Transmit Interval:   1000\n   Multihop:                   False\n   Detect Multiplier:          3\n   Passive Mode:               False\n   Status:                     up\n   Remote Echo Interval:       50\n   Remote Diagnostic:          ok\n   Peer:                       11.1.10.4\n   Echo Interval:              0\n   Uptime:                     57979\n   Diagnostic:                 ok\n   Transmit Interval:          1000\n\n")))}p.isMDXComponent=!0}}]);