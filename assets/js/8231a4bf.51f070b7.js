"use strict";(self.webpackChunk_128t_docs=self.webpackChunk_128t_docs||[]).push([[6750],{33223:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>d,contentTitle:()=>r,default:()=>h,frontMatter:()=>s,metadata:()=>a,toc:()=>l});var o=t(74848),i=t(28453);const s={title:"Factory Reset",sidebars_label:"Factory Reset"},r=void 0,a={id:"config-factory-reset",title:"Factory Reset",description:"The SSR software, SSR1x0, SSR1x00, and SSR4x0 series provide the ability to reset to factory defaults. The SSR software and SSR1x0/1x00 devices use a software reset to return to the original factory defaults, and remove customer configurations.",source:"@site/docs/config-factory-reset.md",sourceDirName:".",slug:"/config-factory-reset",permalink:"/docs/config-factory-reset",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{title:"Factory Reset",sidebars_label:"Factory Reset"},sidebar:"docs",previous:{title:"Enhanced Security Key Management",permalink:"/docs/enhanced-sec-key-mgmt"},next:{title:"Intrusion Detection and Prevention",permalink:"/docs/concepts_ssr_idp"}},d={},l=[{value:"SSR400 and SSR440 Factory Reset",id:"ssr400-and-ssr440-factory-reset",level:2},{value:"Reboot",id:"reboot",level:3},{value:"Reset to the Rescue Configuration",id:"reset-to-the-rescue-configuration",level:3},{value:"Factory Reset",id:"factory-reset",level:3},{value:"SSR400 and SSR 440 Zeroization",id:"ssr400-and-ssr-440-zeroization",level:3},{value:"Software Factory Reset",id:"software-factory-reset",level:2},{value:"Additional Security - Zeroization Process",id:"additional-security---zeroization-process",level:3},{value:"Create a Golden Reset Configuration",id:"create-a-golden-reset-configuration",level:2},{value:"Endpoint:",id:"endpoint",level:4},{value:"Purpose:",id:"purpose",level:4},{value:"Authentication &amp; Authorization:",id:"authentication--authorization",level:4},{value:"Parameters:",id:"parameters",level:4},{value:"Behavior:",id:"behavior",level:4},{value:"Response:",id:"response",level:4},{value:"Error Responses:",id:"error-responses",level:4}];function c(e){const n={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",h4:"h4",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.p,{children:"The SSR software, SSR1x0, SSR1x00, and SSR4x0 series provide the ability to reset to factory defaults. The SSR software and SSR1x0/1x00 devices use a software reset to return to the original factory defaults, and remove customer configurations."}),"\n",(0,o.jsx)(n.p,{children:"The SSR400 and SSR440 provides software-activated reset as well as a reset button on the device. With the reset button, you have the option of resetting to a previously defined golden configuration, or reset to the factory configuration and perform a secure zeroization."}),"\n",(0,o.jsx)(n.p,{children:"Use the information below to determine the best option for your deployment."}),"\n",(0,o.jsx)(n.h2,{id:"ssr400-and-ssr440-factory-reset",children:"SSR400 and SSR440 Factory Reset"}),"\n",(0,o.jsx)(n.p,{children:"The SSR400 and SSR440 devices are equipped with a reset switch to perform the following actions:"}),"\n",(0,o.jsxs)(n.ol,{children:["\n",(0,o.jsxs)(n.li,{children:["Press and hold for up to 4 seconds to ",(0,o.jsx)(n.strong,{children:"reboot"})," the device."]}),"\n",(0,o.jsxs)(n.li,{children:["Press and hold for up to 15 seconds initiates a reset to a ",(0,o.jsx)(n.strong,{children:"rescue, or golden"}),", configuration."]}),"\n",(0,o.jsxs)(n.li,{children:["Press and hold for up to 30 seconds initiates a reset to the ",(0,o.jsx)(n.strong,{children:"factory default"})," configuration."]}),"\n"]}),"\n",(0,o.jsx)(n.p,{children:"Holding the reset button for longer than 30 seconds cancels any of the button press actions described above."}),"\n",(0,o.jsx)(n.h3,{id:"reboot",children:"Reboot"}),"\n",(0,o.jsxs)(n.p,{children:["This action is the standard system reboot, often performed as part of troubleshooting. Hold the ",(0,o.jsx)(n.strong,{children:"Reset"})," button for up to 4 seconds to reboot."]}),"\n",(0,o.jsx)(n.h3,{id:"reset-to-the-rescue-configuration",children:"Reset to the Rescue Configuration"}),"\n",(0,o.jsxs)(n.p,{children:["Press and hold the ",(0,o.jsx)(n.strong,{children:"Reset"})," button for more than 5 seconds but less than 15 to load and commit the rescue configuration. The rescue, or golden configuration is a router-only configuration, and is used as a manual fall back if the device configuration becomes corrupt or is unable to establish communications with the network."]}),"\n",(0,o.jsx)(n.p,{children:"Note that if a golden configuration has not been set, holding the reset button for 5-15 seconds does nothing."}),"\n",(0,o.jsxs)(n.p,{children:["The rescue, or golden configuration is set via API at onboarding. For information about using the API to generate a golden configuration, see ",(0,o.jsx)(n.a,{href:"#create-a-golden-reset-configuration",children:"Create a Golden Reset Configuration"}),". It should be noted that in an HA configuration, if one node is reset to the golden config, the other node (standby node) will receive the same golden config from it's HA peer."]}),"\n",(0,o.jsx)(n.h3,{id:"factory-reset",children:"Factory Reset"}),"\n",(0,o.jsxs)(n.p,{children:["Press and hold the ",(0,o.jsx)(n.strong,{children:"Reset"})," button for up to 30 seconds to initiate a reset to the factory default configuration."]}),"\n",(0,o.jsx)(n.p,{children:"This process deletes all configurations on the device, including the backup configurations and rescue configuration, and loads and commits the original factory configuration. It also removes all data files, including customized configuration and log files, by unlinking the files from their directories. The command removes all user-created files from the system, including passwords, secrets, and private keys for SSH, certificates, local encryption, local authentication, IPsec, RADIUS, TACACS+, and others."}),"\n",(0,o.jsxs)(n.p,{children:["A log file of the platform cleanup operation is written out to ",(0,o.jsx)(n.code,{children:"/tmp"})," while the ",(0,o.jsx)(n.code,{children:"reset factory-default"})," command is being run. After the device is scrubbed, the log file is migrated to ",(0,o.jsx)(n.code,{children:"/var/log"})," for inspection."]}),"\n",(0,o.jsx)(n.admonition,{type:"note",children:(0,o.jsx)(n.p,{children:"Factory reset does not revert the device to the software version installed during manufacture. The device remains at the current software version."})}),"\n",(0,o.jsx)(n.h3,{id:"ssr400-and-ssr-440-zeroization",children:"SSR400 and SSR 440 Zeroization"}),"\n",(0,o.jsxs)(n.p,{children:["The following procedure may be used as a last resort recovery method when ",(0,o.jsx)(n.strong,{children:"both"})," the ",(0,o.jsx)(n.a,{href:"/docs/sec-disable-ports#disable-serial-console-port",children:"Serial Console Port"})," and ",(0,o.jsx)(n.a,{href:"/docs/sec-disable-ports#disable-firmware-recovery",children:"Firmware Recovery"})," have been set as ",(0,o.jsx)(n.strong,{children:"disabled"}),". This process zeroizes the device, and requires a new software installation."]}),"\n",(0,o.jsxs)(n.ol,{children:["\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:"Power off the system."}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:"Press and hold the Reset switch."}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:"Power on the system. Do not release the Reset switch. When the switch is detected, the LED will fade to Red."}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:"Continue to hold the Reset switch for 10 seconds. The LED will slowly fade from red to black."}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(n.admonition,{type:"important",children:(0,o.jsx)(n.p,{children:"If you release the Reset switch during the 10 seconds of red to black fade, the system will simply reboot without zeroization."})}),"\n",(0,o.jsxs)(n.ol,{start:"5",children:["\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:"The LED will turn white, and fade to black."}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:"Release the Reset switch."}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:"The LED will slowly fade white to black every two seconds until the zeroization is complete."}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(n.admonition,{type:"important",children:(0,o.jsx)(n.p,{children:"DO NOT reboot during this process. The zeroization will not complete."})}),"\n",(0,o.jsxs)(n.ol,{start:"8",children:["\n",(0,o.jsx)(n.li,{children:"When the LED has stopped the slow white to black fade, all software, data and configuration have been erased and will shut down. You can then power up the system."}),"\n"]}),"\n",(0,o.jsx)(n.admonition,{type:"note",children:(0,o.jsxs)(n.p,{children:["The device has now been zeroized, and has no configuration. The SSR OS must be reinstalled from a USB. See ",(0,o.jsx)(n.a,{href:"/docs/intro_installation_univ-iso",children:"SSR Installation"})," to begin this process."]})}),"\n",(0,o.jsx)(n.h2,{id:"software-factory-reset",children:"Software Factory Reset"}),"\n",(0,o.jsx)(n.p,{children:"SSR Software Factory reset removes system files and zero-writes unallocated data for increased security. Once initiated, the system stops all running processes and restores the system to the factory default configuration."}),"\n",(0,o.jsxs)(n.p,{children:["The ",(0,o.jsx)(n.code,{children:"restore system factory-default"})," command performs the following steps:"]}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"Reset the device configuration to the factory defaults found on the device hard drive."}),"\n",(0,o.jsx)(n.li,{children:"Commit the configuration."}),"\n",(0,o.jsx)(n.li,{children:"Reboot the device."}),"\n"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{children:"restore system factory-default [force] [router <router>] [node <node>] [<mode>]\n"})}),"\n",(0,o.jsx)(n.p,{children:"This process deletes all configurations on the device, including the backup configurations and rescue configuration, and loads and commits the original factory configuration. It also removes all data files, including customized configuration and log files, by unlinking the files from their directories. The command removes all user-created files from the system, including passwords, secrets, and private keys for SSH, certificates, local encryption, local authentication, IPsec, RADIUS, TACACS+, and others."}),"\n",(0,o.jsxs)(n.p,{children:["A log file of the platform cleanup operation is written out to ",(0,o.jsx)(n.code,{children:"/tmp"})," while the ",(0,o.jsx)(n.code,{children:"reset factory-default"})," command is being run. After the device is scrubbed, the log file is migrated to ",(0,o.jsx)(n.code,{children:"/var/log"})," for inspection."]}),"\n",(0,o.jsx)(n.h3,{id:"additional-security---zeroization-process",children:"Additional Security - Zeroization Process"}),"\n",(0,o.jsx)(n.p,{children:"When equipment is discarded or removed from its operational environment, the following process can be used to ensure there is no unauthorized access possible to sensitive residual information (e.g. cryptographic keys, keying material, PINs, passwords, etc.) on SSR network equipment."}),"\n",(0,o.jsx)(n.p,{children:"This process is to be used with SSR Software and SSR1x0 and SSR1x00 devices."}),"\n",(0,o.jsxs)(n.p,{children:["For the certified SSR platforms, all software and configuration reside on the SSD hard drive ",(0,o.jsx)(n.code,{children:"/dev/sda"}),". Use the following procedure to zeroize/erase the SSD hard drive."]}),"\n",(0,o.jsxs)(n.ol,{children:["\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:"Log in to the local serial console as the root user"}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:"Enter the following to gracefully shut down SSR service:"}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.code,{children:"systemctl stop 128T"})}),"\n",(0,o.jsxs)(n.ol,{start:"3",children:["\n",(0,o.jsx)(n.li,{children:"Enter the following command to enter single-user mode:"}),"\n"]}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.code,{children:"systemctl emergency"})}),"\n",(0,o.jsxs)(n.ol,{start:"4",children:["\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:"Re-enter the root password when prompted"}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:"Enter the following command to zeroize the SSD hard drive:"}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.code,{children:"dd if=/dev/zero of=/dev/sda bs=1M conv=fsync status=progress "})}),"\n",(0,o.jsxs)(n.p,{children:["This process may take 30 minutes or more and will report ",(0,o.jsx)(n.strong,{children:"No space left on device"})," when complete."]}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.img,{alt:"Uninstall and wipe SSD",src:t(55095).A+"",width:"657",height:"218"})}),"\n",(0,o.jsxs)(n.ol,{start:"6",children:["\n",(0,o.jsx)(n.li,{children:"Power off the system."}),"\n"]}),"\n",(0,o.jsx)(n.p,{children:"The system is wiped of all information, and is no longer operational as an SSR. If the system is to be reused in future, perform the ISO installation process."}),"\n",(0,o.jsx)(n.h2,{id:"create-a-golden-reset-configuration",children:"Create a Golden Reset Configuration"}),"\n",(0,o.jsx)(n.p,{children:"The following API allows an administrator the ability to create a configuration snapshot to be used as a golden configuration for routers should they experience a catastrophic failure or become corrupt. This configuration is generated at the router level, and then imported by the Chassis Manager during a reset operation."}),"\n",(0,o.jsx)(n.h4,{id:"endpoint",children:"Endpoint:"}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.code,{children:"POST /api/v1/config/export-golden-config"})}),"\n",(0,o.jsx)(n.h4,{id:"purpose",children:"Purpose:"}),"\n",(0,o.jsx)(n.p,{children:"Exports the current configuration (running or candidate) to a predefined golden config file that can be later imported."}),"\n",(0,o.jsx)(n.h4,{id:"authentication--authorization",children:"Authentication & Authorization:"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"Requires authentication"}),"\n",(0,o.jsx)(n.li,{children:"Requires WRITE permission on the entire config resource"}),"\n",(0,o.jsx)(n.li,{children:"Can be handled by inactive nodes (will be redirected to active node)\nRequest Body (JSON):"}),"\n"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{children:'{\n  "datastore": "running" | "candidate"\n}\n'})}),"\n",(0,o.jsx)(n.h4,{id:"parameters",children:"Parameters:"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["datastore (required, string): Specifies which configuration datastore to export","\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"running"}),": Export the currently active running configuration"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"candidate"}),": Export the current candidate configuration"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(n.h4,{id:"behavior",children:"Behavior:"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["Automatically uses the filename ",(0,o.jsx)(n.code,{children:"_golden-config"})," (predefined, not user-specified)"]}),"\n",(0,o.jsx)(n.li,{children:"Always overwrites any existing golden config file"}),"\n",(0,o.jsx)(n.li,{children:"The export is directed to the active node"}),"\n",(0,o.jsx)(n.li,{children:"Creates a configuration export file to be imported later"}),"\n"]}),"\n",(0,o.jsx)(n.h4,{id:"response",children:"Response:"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"Success (200 OK):"}),"\n"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{children:'{\n  "export-path": "/path/to/_golden-config",\n  "exportPath": "/path/to/_golden-config"\n}\n'})}),"\n",(0,o.jsx)(n.p,{children:"Note: Both export-path (kebab-case) and exportPath (camelCase) are provided for backward compatibility."}),"\n",(0,o.jsx)(n.h4,{id:"error-responses",children:"Error Responses:"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["400 Bad Request: Invalid datastore value; must be ",(0,o.jsx)(n.code,{children:"running"})," or ",(0,o.jsx)(n.code,{children:"candidate"})]}),"\n",(0,o.jsx)(n.li,{children:"401 Unauthorized: Authentication required"}),"\n",(0,o.jsx)(n.li,{children:"403 Forbidden: Insufficient permissions (requires WRITE access to entire config)"}),"\n",(0,o.jsx)(n.li,{children:"404 Not Found: Configuration not found or other export errors"}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(c,{...e})}):c(e)}},55095:(e,n,t)=>{t.d(n,{A:()=>o});const o=t.p+"assets/images/cc_fips_uninstall-5bd7e7b834f7b4617486ef57d44657be.png"},28453:(e,n,t)=>{t.d(n,{R:()=>r,x:()=>a});var o=t(96540);const i={},s=o.createContext(i);function r(e){const n=o.useContext(s);return o.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:r(e.components),o.createElement(s.Provider,{value:n},e.children)}}}]);