"use strict";(self.webpackChunk_128t_docs=self.webpackChunk_128t_docs||[]).push([[5676],{72192:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>d,contentTitle:()=>a,default:()=>h,frontMatter:()=>r,metadata:()=>i,toc:()=>c});var o=t(74848),s=t(28453);const r={title:"Forwarding Plane Separation",sidebar_label:"Forwarding Planes"},a=void 0,i={id:"concepts_network_planes",title:"Forwarding Plane Separation",description:"A common concept in high-level network architecture is the notion of several distinct planes of the network: forwarding plane, control plane, and management plane. The management plane of the network is made up of the systems required to operate, administer, monitor, and maintain the network. The nodes in a management plane may include monitoring servers, data collection servers, authorized administrator PC's, and servers hosting the control plane of the network being managed.",source:"@site/docs/concepts_network_planes.md",sourceDirName:".",slug:"/concepts_network_planes",permalink:"/docs/concepts_network_planes",draft:!1,unlisted:!1,tags:[],version:"current",lastUpdatedAt:1710187342,formattedLastUpdatedAt:"Mar 11, 2024",frontMatter:{title:"Forwarding Plane Separation",sidebar_label:"Forwarding Planes"},sidebar:"docs",previous:{title:"Learning VRF Routes",permalink:"/docs/concepts_learning_VRF_routes"},next:{title:"SSR Metadata",permalink:"/docs/concepts_metadata"}},d={},c=[{value:"Tenancy",id:"tenancy",level:2},{value:"Services",id:"services",level:2},{value:"SSR Nodes",id:"ssr-nodes",level:2},{value:"Routing",id:"routing",level:2},{value:"Summary",id:"summary",level:2}];function l(e){const n={a:"a",admonition:"admonition",code:"code",h2:"h2",li:"li",p:"p",pre:"pre",ul:"ul",...(0,s.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.p,{children:"A common concept in high-level network architecture is the notion of several distinct planes of the network: forwarding plane, control plane, and management plane. The management plane of the network is made up of the systems required to operate, administer, monitor, and maintain the network. The nodes in a management plane may include monitoring servers, data collection servers, authorized administrator PC's, and servers hosting the control plane of the network being managed."}),"\n",(0,o.jsx)(n.p,{children:"While many clouds and data center environments enjoy the luxury of a cleanly separate network forwarding plane to connect these management plane systems, this is not common other networks such as a WAN. In these environments the management of the network must be carried out within it's own network forwarding plane. This describes a practice for SSR networks to give the management plane first-class citizenship within the forwarding plane. It describes the management plane systems as a proper network tenant having requisite services with routing, inclusive of the Linux servers hosting the control plane for SSR nodes."}),"\n",(0,o.jsx)(n.h2,{id:"tenancy",children:"Tenancy"}),"\n",(0,o.jsxs)(n.p,{children:["Every endpoint on an SSR network is given tenancy, and the endpoints that make up management plane are no exception. When network management is carried out within the forwarding plane it should be given it's own proper tenant, in order to cleanly segment it from other endpoints. For example, the following would establish a tenant called ",(0,o.jsx)(n.code,{children:"OAM"})," for the authority. Endpoints anywhere in the network belonging to the management plane that will need to send sessions, such as administrator PC's, monitoring servers, and SSR node hosts, can be given ",(0,o.jsx)(n.code,{children:"OAM"})," tenancy:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{children:'tenant             OAM\n    name         OAM\n    description  "Network Operations, Administration, and Management"\nexit\n'})}),"\n",(0,o.jsx)(n.h2,{id:"services",children:"Services"}),"\n",(0,o.jsx)(n.p,{children:"There are often many services required within the management plane of a network. This includes services for things like DNS, NTP, SSH/HTTPS element management, software distribution servers, IPFIX collectors, syslog receivers, and so on. Each one of these should be modeled with proper services providing access from the management tenant."}),"\n",(0,o.jsxs)(n.p,{children:["Because every SSR node host may be the target of management sessions, each node must be given a service such as the following. For simple IP address management (IPAM) and routing, ideally contiguous blocks of addresses can be allocated for SSR hosts. In this example, we'll assume that ",(0,o.jsx)(n.code,{children:"10.128.0.0/16"})," is reserved in IPAM for SSR node hosts."]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{children:'service            mgmt-router1-node1\n    name            mgmt-router1-node1\n    service-group   OAM\n    description     "Router node management"\n    security        no-encryption\n    address         10.128.0.1\n\n    access-policy   OAM\n        source  OAM\n    exit\nexit\n'})}),"\n",(0,o.jsx)(n.h2,{id:"ssr-nodes",children:"SSR Nodes"}),"\n",(0,o.jsx)(n.p,{children:"The Linux kernel of every SSR node in the network will be the host of inbound sessions to a management plane service, and will originate outbound sessions to other management plane services. For certain procedures, like inventory discovery, some management plane systems may use the source address of an inbound connection as a key to send outbound sessions back to the address. Because of this, sessions should be free of any source or destination NAT whenever possible."}),"\n",(0,o.jsxs)(n.p,{children:["The following configuration on an SSR node would provide it with a host Kernel Network Interface (KNI) for attachment to the management plane. It is made the default route in the kernel route table, given management plane tenancy for outbound sessions, and set up with the Linux side of the KNI having the address corresponding to the management plane service for inbound sessions to the node. Review the ",(0,o.jsx)(n.a,{href:"/docs/concepts_linux_host_networking",children:"Host Services"})," configuration guide for more details."]}),"\n",(0,o.jsx)(n.admonition,{type:"note",children:(0,o.jsxs)(n.p,{children:["In the SSR configuration of a host KNI, you are describing the SSR forwarding plane side of the KNI. The configuration of the address in the ",(0,o.jsx)(n.code,{children:"gateway"})," setting is automatically given to the Linux side of the KNI. In other words, the service address for inbound sessions to the node should be set to the ",(0,o.jsx)(n.code,{children:"gateway"})," in the address configuration for the SSR KNI."]})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{children:'device-interface       mgmt-loopback\n    name                  mgmt-loopback\n    description           "Management plane interface"\n    type                  host\n\n    network-interface     mgmt-loopback\n        name                    mgmt-loopback\n        description             "Management plane interface"\n        default-route           true\n        tenant                  OAM\n\n        management-vector\n            priority  100\n        exit\n\n        address                 10.128.0.0\n            ip-address     10.128.0.0\n            prefix-length  31\n            gateway        10.128.0.1\n        exit\n    exit\nexit\n'})}),"\n",(0,o.jsxs)(n.p,{children:["In order to optimize address utilization, the pool of addresses which are allocated for use as SSR node management services, can be configured as KNI gateways with their ",(0,o.jsx)(n.code,{children:"/31"})," complement as the SSR forwarding plane address. For example, the allocation of ",(0,o.jsx)(n.code,{children:"10.128.0.2"})," - ",(0,o.jsx)(n.code,{children:"10.128.0.3"})," to a set of nodes could have addresses configured like this:"]}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["Node1 with a management service address ",(0,o.jsx)(n.code,{children:"10.128.128.2"}),":"]}),"\n"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{children:"address            10.128.128.3\n    ip-address     10.128.128.3\n    prefix-length  31\n    gateway        10.128.128.2\nexit\n"})}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["Node2 with management service address ",(0,o.jsx)(n.code,{children:"10.128.128.3"}),":"]}),"\n"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{children:"address            10.128.128.2\n    ip-address     10.128.128.2\n    prefix-length  31\n    gateway        10.128.128.3\nexit\n"})}),"\n",(0,o.jsx)(n.h2,{id:"routing",children:"Routing"}),"\n",(0,o.jsx)(n.p,{children:"Throughout the topology of SSRs, management services must be distributed using STEP and routed using Secure Vector Routing. This means that static service routes are created where the services need to egress, and dynamically routed from wherever they ingress."}),"\n",(0,o.jsx)(n.p,{children:"For SSR node management services, this would mean that each router would be provisioned with a service route like the one below:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{children:"service-route         static-mgmt-router-node\n    name          static-mgmt-router-node\n    service-name  mgmt-router-node\n\n    next-hop      node1 mgmt-loopback\n        node-name   node1\n        interface   mgmt-loopback\n    exit\nexit\n"})}),"\n",(0,o.jsx)(n.p,{children:"Where SSRs are interconnected with other external routing domains, the service addresses for SSR node management may need to be advertised using another routing protocol such as BGP or OSPF. This ensures that they have a route for packets which are part of forward flows on sessions going to SSR node management services, and reverse flows for sessions originating from SSR host nodes."}),"\n",(0,o.jsx)(n.h2,{id:"summary",children:"Summary"}),"\n",(0,o.jsx)(n.p,{children:"Simple and effective management of a network is a key to deployment success. With this practice of management built into the forwarding plane of an SSR network, management services, including the SSR node hosts themselves, can be consistently accessed with all the benefits that SSR networking provides. Network administrators, operations personnel, monitoring systems, and SSR hosts themselves are given tenancy for secure access to the services they need."})]})}function h(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(l,{...e})}):l(e)}},28453:(e,n,t)=>{t.d(n,{R:()=>a,x:()=>i});var o=t(96540);const s={},r=o.createContext(s);function a(e){const n=o.useContext(r);return o.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:a(e.components),o.createElement(r.Provider,{value:n},e.children)}}}]);