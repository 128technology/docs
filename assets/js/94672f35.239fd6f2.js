"use strict";(self.webpackChunk_128t_docs=self.webpackChunk_128t_docs||[]).push([[8221],{32308:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>a,default:()=>g,frontMatter:()=>c,metadata:()=>o,toc:()=>d});var i=n(74848),r=n(28453);const c={title:"Signing and Importing Webserver Certificates",sidebar_label:"Signing and Importing Webserver Certificates"},a=void 0,o={id:"config_webserver_certs",title:"Signing and Importing Webserver Certificates",description:"Imported webserver certificates are validated against trusted certificates configured using trusted-ca-certificate. Use the following information to create, sign, and import the certificates to the webserver.",source:"@site/docs/config_webserver_certs.md",sourceDirName:".",slug:"/config_webserver_certs",permalink:"/docs/config_webserver_certs",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{title:"Signing and Importing Webserver Certificates",sidebar_label:"Signing and Importing Webserver Certificates"},sidebar:"docs",previous:{title:"Configuring Syslog Over TLS",permalink:"/docs/config_syslog_tls"},next:{title:"Adding a Trusted Certificate",permalink:"/docs/howto_trusted_ca_certificate"}},s={},d=[{value:"Configure a Trusted Certificate",id:"configure-a-trusted-certificate",level:3},{value:"Generate the Signing Request",id:"generate-the-signing-request",level:3},{value:"Import the Certificate",id:"import-the-certificate",level:3}];function l(e){const t={code:"code",h3:"h3",p:"p",pre:"pre",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(t.p,{children:["Imported webserver certificates are validated against trusted certificates configured using ",(0,i.jsx)(t.code,{children:"trusted-ca-certificate"}),". Use the following information to create, sign, and import the certificates to the webserver."]}),"\n",(0,i.jsx)(t.h3,{id:"configure-a-trusted-certificate",children:"Configure a Trusted Certificate"}),"\n",(0,i.jsx)(t.p,{children:"Certificates are pasted in as a multi-line config."}),"\n",(0,i.jsxs)(t.p,{children:["Configure a root certificate named ",(0,i.jsx)(t.code,{children:"ca_root"})," and paste the certificate file content into the command:"]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{children:"admin@conductor-node-1.Conductor# config authority trusted-ca-certificate ca_root\nadmin@conductor-node-1.Conductor (trusted-ca-certificate[name=ca_root])# content\nEnter plain for content (Press CTRL-D to finish):\n<paste-cert-file-content-here>\n"})}),"\n",(0,i.jsx)(t.h3,{id:"generate-the-signing-request",children:"Generate the Signing Request"}),"\n",(0,i.jsxs)(t.p,{children:["Use the ",(0,i.jsx)(t.code,{children:"create certificate request webserver"})," command to generate the certificate signing request."]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{children:"admin@t327-dut1.cond# create certificate request webserver\nCountry name (2 letter code): US\nState or province name (full name): Massachusetts\nLocality name (eg: city): Westford\nOrganization name (eg: company): Juniper\nOrganization unit (eg: engineering): engineering\nCommon name: www.router.com\nEmail address: bob@juniper.net\nSubject Alternative Name - DNS (fully qualified domain name): www.router.com\nSubject Alternative Name - IP Address: 1.1.1.1\n\nRequest successfully generated:\n\n-----BEGIN CERTIFICATE REQUEST-----\nMIIDLDCCAhQCAQAwgZkxFzAVBgNVBAMMDnd3dy5yb3V0ZXIuY29tMQswCQYDVQQG\nEwJVUzERMA8GA1UEBwwIV2VzdGZvcmQxEDAOBgNVBAoMB0p1bmlwZXIxFDASBgNV\n... <text removed for brevity>\n.\n.\n.\n-----END CERTIFICATE REQUEST-----\n"})}),"\n",(0,i.jsx)(t.h3,{id:"import-the-certificate",children:"Import the Certificate"}),"\n",(0,i.jsxs)(t.p,{children:["After the certificate is signed and returned, it is imported into the SSR for use by the webserver using the ",(0,i.jsx)(t.code,{children:"import certificate webserver"})," command. It is validated against any trusted certificates entered using ",(0,i.jsx)(t.code,{children:"trusted-ca-certificate"}),"."]}),"\n",(0,i.jsx)(t.p,{children:"The following example shows a valid certificate being imported:"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{children:"admin@t327-dut1.cond# import certificate webserver\nEnter the end point certificate in PEM format (Press CTRL-D to finish):\n-----BEGIN CERTIFICATE-----\nMIIDHTCCAgWgAwIBAgICL/AwDQYJKoZIhvcNAQELBQAwDzENMAsGA1UEAwwEMTI4\nVDAiGA8yMDI0MDYwNjEyMzIzMVoYDzIwMjUwNjA3MTIzMjMxWjAPMQ0wCwYDVQQD\n...\nRaIliPRAdN85EXDiAP68ytg5D2ZzxCpmRvj4AiFI3JOc\n-----END CERTIFICATE-----\n\n-----BEGIN PRIVATE KEY-----\nMIIEvgIBADANBgkqhkiG9w0BAQEFAASCBKgwggSkAgEAAoIBAQCo4PCT4Wp89t5P\n53ZJtfgKwdV/CfAi3uXAfWmdluKlXjarlgTc6rgX8wGNSRj5/AajEUU6Z68DaejR\n...\nKBs2Hz/E/goCvyEqNaJOix+l\n-----END PRIVATE KEY-----\n                          \nadmin@t327-dut1.cond# import certificate webserver\nEnter the end point certificate in PEM format (Press CTRL-D to finish):\n-----BEGIN CERTIFICATE-----\nMIIDHTCCAgWgAwIBAgICL/AwDQYJKoZIhvcNAQELBQAwDzENMAsGA1UEAwwEMTI4\nVDAiGA8yMDI0MDYwNjEyMzIzMVoYDzIwMjUwNjA3MTIzMjMxWjAPMQ0wCwYDVQQD\n...\nRaIliPRAdN85EXDiAP68ytg5D2ZzxCpmRvj4AiFI3JOc\n-----END CERTIFICATE-----\n\n-----BEGIN PRIVATE KEY-----\nMIIEvgIBADANBgkqhkiG9w0BAQEFAASCBKgwggSkAgEAAoIBAQCo4PCT4Wp89t5P\n53ZJtfgKwdV/CfAi3uXAfWmdluKlXjarlgTc6rgX8wGNSRj5/AajEUU6Z68DaejR\n...\nKBs2Hz/E/goCvyEqNaJOix+l\n-----END PRIVATE KEY-----\n                          \n\u2714 Importing...\nCertificate imported successfully\nWould you like to add the certificate to your configuration? [y/N]: y\nWhich router is this certificate for? (Select all if it applies to the entire authority) [all]: all\n% Warning:\n1. certificate contains the following issues: does not have the extendKeyUsage extension\n\n\n    config\n        authority\n            client-certificate webserver\n                content\n\n2. certificate contains the following issues: does not have the extendKeyUsage extension\n\n\n    config\n        authority\n            client-certificate conductor-webserver\n                content\n\nCertificate imported successfully\nWould you like to clean up the temporary certificate and key files? [Y/n]: Y\n"})}),"\n",(0,i.jsx)(t.p,{children:"The following example shows an invalid self-signed certificate being imported:"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{children:"admin@t327-dut1.cond# import certificate webserver\nEnter the end point certificate in PEM format (Press CTRL-D to finish):\n-----BEGIN CERTIFICATE-----\nMIIDHTCCAgWgAwIBAgICL/AwDQYJKoZIhvcNAQELBQAwDzENMAsGA1UEAwwEMTI4\nVDAiGA8yMDI0MDYwNjEyMzIzMVoYDzIwMjUwNjA3MTIzMjMxWjAPMQ0wCwYDVQQD\n...\nRaIliPRAdN85EXDiAP68ytg5D2ZzxCpmRvj4AiFI3JOc\n-----END CERTIFICATE-----\n\n-----BEGIN PRIVATE KEY-----\nMIIEvgIBADANBgkqhkiG9w0BAQEFAASCBKgwggSkAgEAAoIBAQCo4PCT4Wp89t5P\n53ZJtfgKwdV/CfAi3uXAfWmdluKlXjarlgTc6rgX8wGNSRj5/AajEUU6Z68DaejR\n...\nKBs2Hz/E/goCvyEqNaJOix+l\n-----END PRIVATE KEY-----\n                                                                                                                                                                                                                                                                                 \n\u26a0 Importing...\ncertificate contains the following issues: certificate is self-signed\n/usr/lib/128technology/unzip/pcli/runfiles/pypi__36__cryptography_40_0_2/cryptography/x509/base.py:576: CryptographyDeprecationWarning: Parsed a negative serial number, which is disallowed by RFC 5280.\n  return rust_x509.load_pem_x509_certificates(data)\nCould not validate certificate chain against a trusted anchor.\nWould you like to import anyways? [y/N]: y\nCertificate imported successfully\n"})}),"\n",(0,i.jsx)(t.p,{children:"The imported certificate is validated against the configured trusted root certificates and checked for insecure algorithms and invalid configurations. Bypassing or disabling these validations will result in a non-compliant configuration."})]})}function g(e={}){const{wrapper:t}={...(0,r.R)(),...e.components};return t?(0,i.jsx)(t,{...e,children:(0,i.jsx)(l,{...e})}):l(e)}},28453:(e,t,n)=>{n.d(t,{R:()=>a,x:()=>o});var i=n(96540);const r={},c=i.createContext(r);function a(e){const t=i.useContext(c);return i.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function o(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:a(e.components),i.createElement(c.Provider,{value:t},e.children)}}}]);