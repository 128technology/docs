"use strict";(self.webpackChunk_128t_docs=self.webpackChunk_128t_docs||[]).push([[7391],{87203:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>a,default:()=>h,frontMatter:()=>s,metadata:()=>o,toc:()=>c});var r=t(74848),i=t(28453);const s={title:"Monitoring Head End Routers",sidebar_label:"Monitoring Head End Routers"},a=void 0,o={id:"bcp_monitoring_headends",title:"Monitoring Head End Routers",description:"Best Practices: Monitoring Head End Routers",source:"@site/docs/bcp_monitoring_headends.md",sourceDirName:".",slug:"/bcp_monitoring_headends",permalink:"/docs/bcp_monitoring_headends",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{title:"Monitoring Head End Routers",sidebar_label:"Monitoring Head End Routers"},sidebar:"docs",previous:{title:"LTE Peering",permalink:"/docs/bcp_lte_peering"},next:{title:"Per Adjacency Traffic Engineering",permalink:"/docs/bcp_per-adjacency_traffic_engineering"}},l={},c=[{value:"Best Practices: Monitoring Head End Routers",id:"best-practices-monitoring-head-end-routers",level:2},{value:"Platform Fundamentals",id:"platform-fundamentals",level:3},{value:"SSR Software Fundamentals",id:"ssr-software-fundamentals",level:3}];function d(e){const n={a:"a",code:"code",em:"em",h2:"h2",h3:"h3",li:"li",p:"p",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.h2,{id:"best-practices-monitoring-head-end-routers",children:"Best Practices: Monitoring Head End Routers"}),"\n",(0,r.jsx)(n.p,{children:"While every network implementation has its own unique characteristics, there are some attributes that are common to all network topologies \u2013\xa0particularly those built with the Session Smart Router. This Best Practices document lists some foundational metrics and data to monitor for system performance and health, and is intended as a baseline upon which network administrators can build."}),"\n",(0,r.jsxs)(n.p,{children:["Juniper provides a ",(0,r.jsx)(n.a,{href:"/docs/plugin_monitoring_agent",children:"Monitoring Agent plugin"})," that dramtically simplifies the data collection process. This is generally preferred to legacy data collection techniques (e.g., SNMP) as it is much more scalable and has a variety of flexible output formats."]}),"\n",(0,r.jsx)(n.h3,{id:"platform-fundamentals",children:"Platform Fundamentals"}),"\n",(0,r.jsx)(n.p,{children:"Each SSR is running on a computer, and that computer may be either physical or virtual. It is important to monitor various attributes of the underlying platform to ensure a healthy, stable platform. This includes:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"CPU utilization"}),'. An SSR running as a head end will "pin" a number of CPU cores for its packet forwarding engine. The number of cores is established at the time the software is installed, using a platform assessment algorithm, but may be modified by a user using the ',(0,r.jsx)(n.code,{children:"forwarding-core-count"})," configuration option within the SSR data model."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Memory"}),". The SSR should have a fairly predictable pattern of memory utilization. There may be periodic peaks of activity as various system processes run; e.g., database downsampling, resynchronizing with a peer, applying configuration, etc."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Disk"}),". All SSR log files will rotate through a fixed number of iterations (twenty five, including the active log). Thus the disk utilization should stay relatively constant."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"System sensors"}),". This includes things such as the platform temperature, fan speeds, etc. (physical machines only). All computers have onboard temperature sensors, report fan RPM, among other metrics. These should be monitored to ensure proper operating conditions per the manufacturer's guidelines."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Link state"}),". One of the fundamentals for monitoring any network device, knowing when links are up or down is a critical piece of information."]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"ssr-software-fundamentals",children:"SSR Software Fundamentals"}),"\n",(0,r.jsx)(n.p,{children:"Generally, each head end router connects to dozens or hundreds of branch routers, and frequently over multiple transport circuits. The primary focus for monitoring a head end router is to ensure that is fit for aggregating and forwarding traffic to and from the branch routers. The important metrics to consider are:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"RIB size"}),". The SSR's Routing Information Base (RIB) is the accumulation of all routes that the device uses for making traffic forwarding decisions. These are acquired through configuration or through routing protocols. In general, a head end router's RIB should have a predictable number of routes. Variability in the number of RIB entries is due to routing changes, configuration changes, or peer availability."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Session count"}),". As a head end router processes traffic, this will create sessions in the router's ",(0,r.jsx)(n.em,{children:"session table"}),". In general, the volume of traffic a router processes should be periodic; for example, in a retail deployment the traffic patterns should ebb and flow with each retail location's hours of operation. While every network will have different periodic frequencies, virtually all networks will process traffic in a fairly predictable pattern. Large spikes in sessions can be due to misbehaving or misconfigured devices, upstream servers that are not responsive to client requests, security scanning software, or denial of services attack."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Session arrival/session departure rates"}),". As with session counts, session arrival and departure rates are typically predictably periodic for most deployments. When there is a sharp increase in the rate of session arrivals, it generally means a network scan or denial of service attack is underway. When there is a sharp increase in the rate of session departures, it may mean there is a problem with a particular application or network path."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Interface bandwidth"}),". Another fundamental property of any network appliance, understanding the bandwidth utilization on all interfaces will help identify potential sources of congestion."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Peer path flaps"}),'. A "peer path" is a BFD-validated path used for ',(0,r.jsx)(n.em,{children:"Secure Vector Routes"})," between SSR peers. Head end systems are aggregation points for many peer paths from branch locations; any network disruption at or near the head end will cause large numbers of peer path flaps. The number of peer path flaps in a steady state network should ideally be as close to zero as possible."]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},28453:(e,n,t)=>{t.d(n,{R:()=>a,x:()=>o});var r=t(96540);const i={},s=r.createContext(i);function a(e){const n=r.useContext(s);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:a(e.components),r.createElement(s.Provider,{value:n},e.children)}}}]);