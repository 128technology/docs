"use strict";(self.webpackChunk_128t_docs=self.webpackChunk_128t_docs||[]).push([[4932],{3905:function(e,t,n){n.d(t,{Zo:function(){return u},kt:function(){return m}});var r=n(67294);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var c=r.createContext({}),l=function(e){var t=r.useContext(c),n=t;return e&&(n="function"==typeof e?e(t):a(a({},t),e)),n},u=function(e){var t=l(e.components);return r.createElement(c.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},d=r.forwardRef((function(e,t){var n=e.components,i=e.mdxType,o=e.originalType,c=e.parentName,u=s(e,["components","mdxType","originalType","parentName"]),d=l(n),m=i,f=d["".concat(c,".").concat(m)]||d[m]||p[m]||o;return n?r.createElement(f,a(a({ref:t},u),{},{components:n})):r.createElement(f,a({ref:t},u))}));function m(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var o=n.length,a=new Array(o);a[0]=d;var s={};for(var c in t)hasOwnProperty.call(t,c)&&(s[c]=t[c]);s.originalType=e,s.mdxType="string"==typeof e?e:i,a[1]=s;for(var l=2;l<o;l++)a[l]=n[l];return r.createElement.apply(null,a)}return r.createElement.apply(null,n)}d.displayName="MDXCreateElement"},24233:function(e,t,n){n.r(t),n.d(t,{assets:function(){return u},contentTitle:function(){return c},default:function(){return m},frontMatter:function(){return s},metadata:function(){return l},toc:function(){return p}});var r=n(87462),i=n(63366),o=(n(67294),n(3905)),a=["components"],s={title:"LTE Peering",sidebar_label:"LTE Peering"},c=void 0,l={unversionedId:"bcp_lte_peering",id:"bcp_lte_peering",title:"LTE Peering",description:'It is quite common for SSRs to use LTE interfaces as a "last resort" transport when primary circuits are down, congested, or experiencing issues. This document recommends various configuration settings to strike a balance between performance and bandwidth usage for LTE interfaces, to get the most benefit from them when peering over LTE.',source:"@site/docs/bcp_lte_peering.md",sourceDirName:".",slug:"/bcp_lte_peering",permalink:"/docs/bcp_lte_peering",draft:!1,tags:[],version:"current",lastUpdatedAt:1693340537,formattedLastUpdatedAt:"Aug 29, 2023",frontMatter:{title:"LTE Peering",sidebar_label:"LTE Peering"},sidebar:"docs",previous:{title:"ExpressRoute QoS Configuration",permalink:"/docs/bcp_qos_msft_expressroute"},next:{title:"Monitoring Head End Routers",permalink:"/docs/bcp_monitoring_headends"}},u={},p=[{value:"Overview",id:"overview",level:2},{value:"Configuration Sample",id:"configuration-sample",level:2},{value:"Notes about the Configuration",id:"notes-about-the-configuration",level:2}],d={toc:p};function m(e){var t=e.components,n=(0,i.Z)(e,a);return(0,o.kt)("wrapper",(0,r.Z)({},d,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("p",null,'It is quite common for SSRs to use LTE interfaces as a "last resort" transport when primary circuits are down, congested, or experiencing issues. This document recommends various configuration settings to strike a balance between performance and bandwidth usage for LTE interfaces, to get the most benefit from them when peering over LTE.'),(0,o.kt)("admonition",{type:"note"},(0,o.kt)("p",{parentName:"admonition"},"This document is intended for customers that use LTE interfaces as a last resort transport, not for those using it as a primary transport.")),(0,o.kt)("h2",{id:"overview"},"Overview"),(0,o.kt)("p",null,"LTE interfaces have two material differences when compared to most wireline interfaces:"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"Most wireless providers employ ",(0,o.kt)("em",{parentName:"li"},"Carrier-Grade NAT")," equipment on their LTE network, which can cause impact to long-lived sessions between peers if there are periods of inactivity. Furthermore, it typically results in a private IP address being issued via DHCP to the LTE modem, which affects the directionality of session setup."),(0,o.kt)("li",{parentName:"ol"},"LTE services are typically sold using bandwidth-based service plans. Thus, additional overhead used for machine-to-machine communications costs real money.")),(0,o.kt)("p",null,"In this document, we provide a configuration fragment that illustrates how to tune your LTE interface to provide connectivity with minimal overhead."),(0,o.kt)("h2",{id:"configuration-sample"},"Configuration Sample"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"    neighborhood           LTE\n        name               LTE\n        peer-connectivity  outbound-only\n        topology           spoke\n        vector             lte\n\n        bfd\n            state                enabled\n            desired-tx-interval  60000\n            authentication-type  sha256\n            multiplier           3\n            link-test-interval   120\n            link-test-length     10\n            dscp                 0\n        exit\n\n        udp-transform\n            mode  always-transform\n            nat-keep-alive-mode     enabled\n            nat-keep-alive-timeout  30\n        exit\n\n        path-mtu-discovery\n            enabled  true\n            interval 600\n        exit\n    exit\n")),(0,o.kt)("h2",{id:"notes-about-the-configuration"},"Notes about the Configuration"),(0,o.kt)("p",null,"A ",(0,o.kt)("a",{parentName:"p",href:"https://en.wikipedia.org/wiki/Carrier-grade_NAT"},"Carrier-grade NAT"),", which is indistinguishable from an enterprise-grade (or consumer) NAT from an SSR configuration perspective, requires certain configuration considerations. First, as seen in the configuration fragment above, it is important to set the ",(0,o.kt)("inlineCode",{parentName:"p"},"peer-connectivity")," to ",(0,o.kt)("inlineCode",{parentName:"p"},"outbound-only"),'. This will guarantee that any traffic originating at a peer and destined for the LTE device will be created "inside out" from the NAT\'s perspective. '),(0,o.kt)("p",null,"The ",(0,o.kt)("inlineCode",{parentName:"p"},"bfd")," configuration is dilated to use ",(0,o.kt)("inlineCode",{parentName:"p"},"60000")," milliseconds as its interval. This configuration is empirically observed to work on most U.S. LTE provider networks \u2013 the Carrier-grade NAT devices present in the United States typically use NAT bindings longer than one minute. This value may need adjustment in your local region, if you experience difficulties in establishing sessions toward SSRs over LTE networks."),(0,o.kt)("admonition",{type:"important"},(0,o.kt)("p",{parentName:"admonition"},"These BFD keepalive messages are small and therefore do not consume much bandwidth. However, on interfaces where every byte counts against your monthly bandwidth allocation, it is important to keep these settings as conservative as you can to maintain a stable connection.")),(0,o.kt)("p",null,"Last, the ",(0,o.kt)("inlineCode",{parentName:"p"},"udp-transform")," configuration element in the neighborhood is configured with its ",(0,o.kt)("inlineCode",{parentName:"p"},"mode")," set to ",(0,o.kt)("inlineCode",{parentName:"p"},"always-transform"),". Because we can presume that the Carrier-grade NAT exists, we do not need to test for it using our detection mechanism. This reduces unnecessary overhead on the path."))}m.isMDXComponent=!0}}]);