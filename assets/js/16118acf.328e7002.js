"use strict";(self.webpackChunk_128t_docs=self.webpackChunk_128t_docs||[]).push([[7325],{3905:function(e,t,n){n.d(t,{Zo:function(){return d},kt:function(){return u}});var a=n(67294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var l=a.createContext({}),p=function(e){var t=a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},d=function(e){var t=p(e.components);return a.createElement(l.Provider,{value:t},e.children)},c={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},m=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,o=e.originalType,l=e.parentName,d=s(e,["components","mdxType","originalType","parentName"]),m=p(n),u=r,h=m["".concat(l,".").concat(u)]||m[u]||c[u]||o;return n?a.createElement(h,i(i({ref:t},d),{},{components:n})):a.createElement(h,i({ref:t},d))}));function u(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=n.length,i=new Array(o);i[0]=m;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s.mdxType="string"==typeof e?e:r,i[1]=s;for(var p=2;p<o;p++)i[p]=n[p];return a.createElement.apply(null,i)}return a.createElement.apply(null,n)}m.displayName="MDXCreateElement"},956:function(e,t,n){n.r(t),n.d(t,{frontMatter:function(){return s},contentTitle:function(){return l},metadata:function(){return p},toc:function(){return d},default:function(){return m}});var a=n(87462),r=n(63366),o=(n(67294),n(3905)),i=["components"],s={title:"Upgrading the SSR Networking Platform",sidebar_label:"Upgrading"},l=void 0,p={unversionedId:"intro_upgrading",id:"intro_upgrading",title:"Upgrading the SSR Networking Platform",description:"If you are upgrading to version 5.3 or higher of the SSR software, please refer to the Upgrade Considerations before proceeding.",source:"@site/docs/intro_upgrading.md",sourceDirName:".",slug:"/intro_upgrading",permalink:"/docs/intro_upgrading",tags:[],version:"current",lastUpdatedAt:1643292726,formattedLastUpdatedAt:"1/27/2022",frontMatter:{title:"Upgrading the SSR Networking Platform",sidebar_label:"Upgrading"},sidebar:"docs",previous:{title:"Upgrade Considerations",permalink:"/docs/intro_upgrade_considerations"},next:{title:"Rollback",permalink:"/docs/intro_rollback"}},d=[{value:"Version Dependencies",id:"version-dependencies",children:[],level:3},{value:"Stopping the 128T Routing Software",id:"stopping-the-128t-routing-software",children:[],level:3},{value:"Upgrading using the Conductor&#39;s PCLI",id:"upgrading-using-the-conductors-pcli",children:[],level:2},{value:"Upgrading using the Conductor&#39;s GUI",id:"upgrading-using-the-conductors-gui",children:[],level:2},{value:"Upgrading using the Interactive Installer",id:"upgrading-using-the-interactive-installer",children:[],level:2},{value:"Routers with Restricted Internet Access",id:"routers-with-restricted-internet-access",children:[],level:2}],c={toc:d};function m(e){var t=e.components,n=(0,r.Z)(e,i);return(0,o.kt)("wrapper",(0,a.Z)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,o.kt)("div",{parentName:"div",className:"admonition-heading"},(0,o.kt)("h5",{parentName:"div"},(0,o.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,o.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,o.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),(0,o.kt)("div",{parentName:"div",className:"admonition-content"},(0,o.kt)("p",{parentName:"div"},"If you are upgrading to version 5.3 or higher of the SSR software, please refer to the ",(0,o.kt)("a",{parentName:"p",href:"/docs/intro_upgrade_considerations"},"Upgrade Considerations")," before proceeding."))),(0,o.kt)("p",null,"Your SSR router or conductor must have internet access to download the latest software packages; for deployments where the SSR router does not have internet access, you can use the SSR conductor as a repository (or proxy) to retrieve software images. As with any upgrade activity, it is always prudent to create a backup of your current software configuration before initiating any upgrade activity."),(0,o.kt)("p",null,"There are three standard ways of upgrading routers:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"Using the conductor's PCLI to initiate the upgrade"),(0,o.kt)("li",{parentName:"ul"},"Using the conductor's GUI to initiate the upgrade"),(0,o.kt)("li",{parentName:"ul"},"Manually upgrading a router by invoking the ",(0,o.kt)("inlineCode",{parentName:"li"},"install128t")," application from the Linux shell")),(0,o.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,o.kt)("div",{parentName:"div",className:"admonition-heading"},(0,o.kt)("h5",{parentName:"div"},(0,o.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,o.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,o.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),(0,o.kt)("div",{parentName:"div",className:"admonition-content"},(0,o.kt)("p",{parentName:"div"},"The router upgrade process using the PCLI and the GUI is done in two stages: First, the software is downloaded, then it is installed. Use the ",(0,o.kt)("inlineCode",{parentName:"p"},"install128t")," application steps through both of these processes."))),(0,o.kt)("p",null,"Prerequisites for upgrades now include configuring a user with super user (sudo) privileges. ",(0,o.kt)("strong",{parentName:"p"},"SSH Root login is not permitted."),' If the existing version allows SSH Root login, it will be disabled during the upgrade. When a system is installed using the OTP ISO, a "t128" user is configured with sudo privileges. '),(0,o.kt)("h3",{id:"version-dependencies"},"Version Dependencies"),(0,o.kt)("p",null,"The conductor ",(0,o.kt)("inlineCode",{parentName:"p"},"major.minor")," version must be greater than or equal to the router version. The router version can not exceed the conductors ",(0,o.kt)("inlineCode",{parentName:"p"},"major.minor")," version, but it can have a greater patch version. All ",(0,o.kt)("a",{parentName:"p",href:"/docs/about_support_policy"},"versions currently under support")," can be run on a router and managed by the conductor, provided that the conductor version is greater. Versions of software not under support ",(0,o.kt)("em",{parentName:"p"},"may")," work, but are not guaranteed to do so.  "),(0,o.kt)("p",null,"Examples:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"Conductor running version 5.3.0, managing Routers running version 5.1.1: Supported."),(0,o.kt)("li",{parentName:"ul"},"Conductor running version 5.2.0, managing Routers running version 5.2.2: Supported."),(0,o.kt)("li",{parentName:"ul"},"Conductor running version 5.2.1, managing Routers running version 4.5.13: Supported."),(0,o.kt)("li",{parentName:"ul"},"Conductor running version 4.5.13, managing Routers running version 4.2.9: Not supported, but may work.")),(0,o.kt)("h3",{id:"stopping-the-128t-routing-software"},"Stopping the 128T Routing Software"),(0,o.kt)("p",null,"Before upgrading the 128T Routing Software, use the following procedure to stop the the software."),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Launch a Linux shell window.")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Execute the command: "),(0,o.kt)("p",{parentName:"li"},(0,o.kt)("inlineCode",{parentName:"p"},"sudo systemctl stop 128T"))),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Verify that the software has stopped by executing the command:"),(0,o.kt)("p",{parentName:"li"},(0,o.kt)("inlineCode",{parentName:"p"},"sudo systemctl status 128T")),(0,o.kt)("p",{parentName:"li"},"Result: The software is listed as inactive (dead).")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Stop the salt-minion."),(0,o.kt)("p",{parentName:"li"},(0,o.kt)("inlineCode",{parentName:"p"},"sudo systemctl stop salt-minion"))),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Close the Linux shell."))),(0,o.kt)("h2",{id:"upgrading-using-the-conductors-pcli"},"Upgrading using the Conductor's PCLI"),(0,o.kt)("p",null,"For routers managed by an SSR Conductor, upgrades can be initiated via the SSR conductor's PCLI. This upgrade process is completed in two stages: ",(0,o.kt)("em",{parentName:"p"},"download")," followed by ",(0,o.kt)("em",{parentName:"p"},"upgrade"),"."),(0,o.kt)("p",null,"As an administrator-level user, log into the conductor's PCLI."),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Use the command ",(0,o.kt)("inlineCode",{parentName:"p"},"show assets")," to list the devices managed by this conductor, and the software revision each asset is currently running.")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"For a given asset, use the command ",(0,o.kt)("inlineCode",{parentName:"p"},"show asset [asset ID]")," or ",(0,o.kt)("inlineCode",{parentName:"p"},"show asset software router [router name]"),'  to view the available software upgrades for that asset. The list will be in the section labeled "Available for Download" at the end of the output.'),(0,o.kt)("div",{parentName:"li",className:"admonition admonition-note alert alert--secondary"},(0,o.kt)("div",{parentName:"div",className:"admonition-heading"},(0,o.kt)("h5",{parentName:"div"},(0,o.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,o.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,o.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),(0,o.kt)("div",{parentName:"div",className:"admonition-content"},(0,o.kt)("p",{parentName:"div"},"If there are software releases absent from the list that you are confident should appear, use the command ",(0,o.kt)("inlineCode",{parentName:"p"},"send command yum-cache-refresh router [router name]")," to refresh the software list.")))),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Type ",(0,o.kt)("inlineCode",{parentName:"p"},"send command download router [your router name] [software version]"),". You can monitor the progress by using the ",(0,o.kt)("inlineCode",{parentName:"p"},"show asset")," and/or ",(0,o.kt)("inlineCode",{parentName:"p"},"show asset [asset ID]")," command, which will indicate Automated Provisioner status (e.g., ",(0,o.kt)("em",{parentName:"p"},"downloading"),").")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Once the download is complete, use the command ",(0,o.kt)("inlineCode",{parentName:"p"},"send command upgrade router [your router name]")," to initiate the upgrade process."))),(0,o.kt)("p",null,"The conductor's ",(0,o.kt)("em",{parentName:"p"},"automated provisioner")," will upgrade both nodes in a high availability router in series to minimize/avoid downtime. Despite this, it is still recommended to perform upgrade activity during periods of low traffic or maintenance windows."),(0,o.kt)("h2",{id:"upgrading-using-the-conductors-gui"},"Upgrading using the Conductor's GUI"),(0,o.kt)("p",null,"Similar to the process for upgrading using the PCLI, the upgrade process using the GUI is done in two stages: ",(0,o.kt)("em",{parentName:"p"},"download")," and ",(0,o.kt)("em",{parentName:"p"},"upgrade"),"."),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"Navigate to the Router page in the Conductor's GUI. Routers that have available upgrades will indicate as such using an upgrade badge in the router list."),(0,o.kt)("li",{parentName:"ol"},"Click on the Upgrade SSR icon (the arrow within a circle) next to your router. Result: a list of upgrade and download options appears. This list is filterable if the list of available options grows large."),(0,o.kt)("li",{parentName:"ol"},"Click on the target release in the Available Downloads section of the list. You will be asked to confirm the operation.",(0,o.kt)("br",null),"Result: the SSR will begin downloading the software. Click on the router in the router list to monitor its progress."),(0,o.kt)("li",{parentName:"ol"},"Once complete, click the Upgrade SSR icon again, and select the target software release from the Available Upgrades list. You will again be asked to confirm this operation.",(0,o.kt)("br",null),"Result: the router will now begin the upgrade process.")),(0,o.kt)("p",null,"The Automated Provisioner will upgrade both nodes in a high availability router in series to minimize/avoid downtime. Despite this, it is still recommended to perform upgrade activity during periods of low traffic or maintenance windows."),(0,o.kt)("h2",{id:"upgrading-using-the-interactive-installer"},"Upgrading using the Interactive Installer"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Launch a Linux command prompt window on the node you wish to upgrade."),(0,o.kt)("div",{parentName:"li",className:"admonition admonition-note alert alert--secondary"},(0,o.kt)("div",{parentName:"div",className:"admonition-heading"},(0,o.kt)("h5",{parentName:"div"},(0,o.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,o.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,o.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),(0,o.kt)("div",{parentName:"div",className:"admonition-content"},(0,o.kt)("p",{parentName:"div"},"To avoid SSH session timeout during installation, it is strongly recommended to use the Screen utility when performing an upgrade in interactive mode.")))),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Create a screen and attach to it."),(0,o.kt)("pre",{parentName:"li"},(0,o.kt)("code",{parentName:"pre"},"screen -d -m -s <name-of-screen-session>\nscreen -x <name-of-screen-session>\n"))),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Shut down the salt-minion on the target node using the following command:"),(0,o.kt)("pre",{parentName:"li"},(0,o.kt)("code",{parentName:"pre"},"sudo systemctl stop salt-minion\n"))),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Enter the command to launch the interactive installer wizard."),(0,o.kt)("pre",{parentName:"li"},(0,o.kt)("code",{parentName:"pre"},"sudo install128t\n")),(0,o.kt)("p",{parentName:"li"},(0,o.kt)("strong",{parentName:"p"},"Result"),": \xa0The SSR splash screen appears."),(0,o.kt)("div",{parentName:"li",className:"admonition admonition-note alert alert--secondary"},(0,o.kt)("div",{parentName:"div",className:"admonition-heading"},(0,o.kt)("h5",{parentName:"div"},(0,o.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,o.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,o.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),(0,o.kt)("div",{parentName:"div",className:"admonition-content"},(0,o.kt)("p",{parentName:"div"},"The ",(0,o.kt)("inlineCode",{parentName:"p"},"install128t")," application will check to see if it has an update available, and will ask that you upgrade if it detects a newer version is available.")))),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Press the ",(0,o.kt)("strong",{parentName:"p"},"enter")," key to select ",(0,o.kt)("strong",{parentName:"p"},"Begin")," and start the installation wizard.")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"When prompted, select ",(0,o.kt)("strong",{parentName:"p"},"Upgrade"),".",(0,o.kt)("br",null),(0,o.kt)("strong",{parentName:"p"},"Result"),": The application queries 128 Technology's software repository for new software.")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Select the desired software version from the list of available options.")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Once the upgrade is complete, press the ",(0,o.kt)("strong",{parentName:"p"},"enter")," key to select ",(0,o.kt)("strong",{parentName:"p"},"Yes")," to start your software."),(0,o.kt)("div",{parentName:"li",className:"admonition admonition-note alert alert--secondary"},(0,o.kt)("div",{parentName:"div",className:"admonition-heading"},(0,o.kt)("h5",{parentName:"div"},(0,o.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,o.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,o.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),(0,o.kt)("div",{parentName:"div",className:"admonition-content"},(0,o.kt)("p",{parentName:"div"},"Your output may vary based upon the nature of the upgrade, occasion, various packages, and dependencies that SSR requires as part of the SSR Routing Software upgrade.")))),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Detach from the Screen utility."),(0,o.kt)("pre",{parentName:"li"},(0,o.kt)("code",{parentName:"pre"},"ctrl+a\nd\n")))),(0,o.kt)("h2",{id:"routers-with-restricted-internet-access"},"Routers with Restricted Internet Access"),(0,o.kt)("p",null,"The standard upgrade workflow is for individual instances of SSR software to download software upgrades directly from mirror servers hosted and managed by Juniper on the public internet. Occasionally, SSR routers are deployed in locations with restricted or no access to the internet. In this case, you can configure the routers to retrieve software from a conductor."),(0,o.kt)("p",null,"Within a given router's configuration, at ",(0,o.kt)("inlineCode",{parentName:"p"},"router > system > software-update > repository"),", you can configure the ",(0,o.kt)("inlineCode",{parentName:"p"},"source-type")," setting to one of three values:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},(0,o.kt)("inlineCode",{parentName:"p"},"conductor-only"),": The router retrieves software versions only from the conductor."),(0,o.kt)("div",{parentName:"li",className:"admonition admonition-note alert alert--secondary"},(0,o.kt)("div",{parentName:"div",className:"admonition-heading"},(0,o.kt)("h5",{parentName:"div"},(0,o.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,o.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,o.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),(0,o.kt)("div",{parentName:"div",className:"admonition-content"},(0,o.kt)("p",{parentName:"div"},"The conductor(s) require internet access, and the routers must be able to resolve internet hosted repositories.")))),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},(0,o.kt)("inlineCode",{parentName:"p"},"prefer-conductor"),": The router will retrieve software versions from the conductor, and fall back to using the internet")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},(0,o.kt)("inlineCode",{parentName:"p"},"internet-only")," (default): The router will use Juniper's publicly hosted repositories for retrieving sofwtare images"))),(0,o.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,o.kt)("div",{parentName:"div",className:"admonition-heading"},(0,o.kt)("h5",{parentName:"div"},(0,o.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,o.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,o.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),(0,o.kt)("div",{parentName:"div",className:"admonition-content"},(0,o.kt)("p",{parentName:"div"},"Because this is a router setting, your collection of routers can each use different preferences. For example, a router on the internet can use a Juniper repository, but another router managed by the same conductor sitting in an isolated environment can use the conductor."))),(0,o.kt)("p",null,"For routers that have no access to the internet, set ",(0,o.kt)("inlineCode",{parentName:"p"},"router > system > software-update > repository > offline-mode")," to ",(0,o.kt)("inlineCode",{parentName:"p"},"true"),". This overrides the ",(0,o.kt)("inlineCode",{parentName:"p"},"source-type")," leaf."),(0,o.kt)("p",null,"The ",(0,o.kt)("inlineCode",{parentName:"p"},"import iso")," command is used to import packages contained within an SSR ISO onto a local yum repository, allowing the SSR to be upgraded without connecting to 128 Technology servers. "),(0,o.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,o.kt)("div",{parentName:"div",className:"admonition-heading"},(0,o.kt)("h5",{parentName:"div"},(0,o.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,o.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,o.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),(0,o.kt)("div",{parentName:"div",className:"admonition-content"},(0,o.kt)("p",{parentName:"div"},"In an HA setup, when using offline-mode for routers to access the software from the conductors, the ISO must be imported to both conductors before performing the upgrade."))),(0,o.kt)("p",null,"The ",(0,o.kt)("a",{parentName:"p",href:"/docs/cli_reference#import-iso"},"import iso")," command allows a user to specify the exact ",(0,o.kt)("inlineCode",{parentName:"p"},"filepath")," to the ISO, or to specify ",(0,o.kt)("inlineCode",{parentName:"p"},"hunt")," which searches the disk for a file that matches the pattern ",(0,o.kt)("inlineCode",{parentName:"p"},"128T*.iso")," (except in the following directories ",(0,o.kt)("inlineCode",{parentName:"p"},"/boot"),", ",(0,o.kt)("inlineCode",{parentName:"p"},"/dev"),", ",(0,o.kt)("inlineCode",{parentName:"p"},"/proc"),", and ",(0,o.kt)("inlineCode",{parentName:"p"},"/sys"),")."),(0,o.kt)("p",null,"This feature works on either the Conductor or the Routers. It can be combined with the Conductor Hosted Repos feature where the ISO is imported to the Conductor and then the Routers use the Conductor as the yum repository to download SSR packages."),(0,o.kt)("p",null,"Once the local software repository has been updated with the software from the ISO, the upgrade can proceed using your preferred method."))}m.isMDXComponent=!0}}]);