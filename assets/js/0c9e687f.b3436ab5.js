"use strict";(self.webpackChunk_128t_docs=self.webpackChunk_128t_docs||[]).push([[8771],{36586:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>a,contentTitle:()=>c,default:()=>u,frontMatter:()=>o,metadata:()=>s,toc:()=>l});var i=n(74848),r=n(28453);const o={title:"Configuring Syslog Over TLS",sidebar_label:"Configuring Syslog Over TLS"},c=void 0,s={id:"config_syslog_tls",title:"Configuring Syslog Over TLS",description:"Syslog over TLS allows the secure transportation of system log messages from the syslog client to the syslog server. TLS uses certificates to authenticate and encrypt the communication.",source:"@site/docs/config_syslog_tls.md",sourceDirName:".",slug:"/config_syslog_tls",permalink:"/docs/config_syslog_tls",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{title:"Configuring Syslog Over TLS",sidebar_label:"Configuring Syslog Over TLS"},sidebar:"docs",previous:{title:"Configuring RADIUS over TLS",permalink:"/docs/config_radsec"},next:{title:"Signing and Importing Webserver Certificates",permalink:"/docs/config_webserver_certs"}},a={},l=[{value:"Syslog over TLS Configuration - Existing Certificate",id:"syslog-over-tls-configuration---existing-certificate",level:2},{value:"1. Configure the Trusted CA Certificate.",id:"1-configure-the-trusted-ca-certificate",level:4},{value:"2. Configure a Client Certificate to be used for the Syslog Client.",id:"2-configure-a-client-certificate-to-be-used-for-the-syslog-client",level:4},{value:"3. Configure the Syslog Server at the Authority level to use the configured client certificate.",id:"3-configure-the-syslog-server-at-the-authority-level-to-use-the-configured-client-certificate",level:4},{value:"Syslog over TLS Configuration - Generate Certificate",id:"syslog-over-tls-configuration---generate-certificate",level:2},{value:"1. Generate the Signing Request",id:"1-generate-the-signing-request",level:4},{value:"2. Configure the Trusted CA Certificate",id:"2-configure-the-trusted-ca-certificate",level:4},{value:"3. Import the Client Certificate",id:"3-import-the-client-certificate",level:4},{value:"4. Configure the Device to Accept the Client Certificate",id:"4-configure-the-device-to-accept-the-client-certificate",level:4}];function d(e){const t={admonition:"admonition",code:"code",h2:"h2",h4:"h4",p:"p",pre:"pre",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(t.p,{children:"Syslog over TLS allows the secure transportation of system log messages from the syslog client to the syslog server. TLS uses certificates to authenticate and encrypt the communication."}),"\n",(0,i.jsx)(t.h2,{id:"syslog-over-tls-configuration---existing-certificate",children:"Syslog over TLS Configuration - Existing Certificate"}),"\n",(0,i.jsx)(t.p,{children:"Use the following information to configure Syslog over TLS using an existing certificate."}),"\n",(0,i.jsx)(t.h4,{id:"1-configure-the-trusted-ca-certificate",children:"1. Configure the Trusted CA Certificate."}),"\n",(0,i.jsx)(t.p,{children:"The trusted CA certificate is necessary to validate the incoming client certificate. Certificates are pasted in as a multi-line config."}),"\n",(0,i.jsxs)(t.p,{children:["Create a root certificate named ",(0,i.jsx)(t.code,{children:"ca_root"})," and paste the certificate file content into the command:"]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{children:"admin@conductor-node-1.Conductor# config authority trusted-ca-certificate ca_root\nadmin@conductor-node-1.Conductor (trusted-ca-certificate[name=ca_root])# content\nEnter plain for content (Press CTRL-D to finish):\n<paste-cert-file-content-here>\n"})}),"\n",(0,i.jsx)(t.admonition,{type:"note",children:(0,i.jsxs)(t.p,{children:["The ",(0,i.jsx)(t.code,{children:"trusted-ca-certificate"})," is a list and may contain different CA roots used for different certificates. In that case, naming them all ",(0,i.jsx)(t.code,{children:"ca_root"})," would not be suitable. In that case, choose a name that is meaningful to the user and CA, eg: ",(0,i.jsx)(t.code,{children:"globalsign_root"}),"."]})}),"\n",(0,i.jsx)(t.h4,{id:"2-configure-a-client-certificate-to-be-used-for-the-syslog-client",children:"2. Configure a Client Certificate to be used for the Syslog Client."}),"\n",(0,i.jsxs)(t.p,{children:["Repeat the previous step to create a client certificate named ",(0,i.jsx)(t.code,{children:"syslog"}),"."]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{children:"admin@conductor-node-1.Conductor# config authority client-certificate syslog\nadmin@conductor-node-1.Conductor (client-certificate[name=syslog])# content\nEnter plain for content (Press CTRL-D to finish):\n<paste-cert-file-content-here>\n"})}),"\n",(0,i.jsx)(t.h4,{id:"3-configure-the-syslog-server-at-the-authority-level-to-use-the-configured-client-certificate",children:"3. Configure the Syslog Server at the Authority level to use the configured client certificate."}),"\n",(0,i.jsxs)(t.p,{children:["The following configuration example will add a syslog server named ",(0,i.jsx)(t.code,{children:"syslog"})," that will use the previously configured client certificate."]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{children:"*admin@t327-dut1.cond# configure authority router cond system syslog server 192.168.1.100 6514\n*admin@t327-dut1.cond (server[ip-address=192.168.1.100][port=6514])# up\n*admin@t327-dut1.cond (syslog)# client-certificate-name syslog\n*admin@t327-dut1.cond (syslog)# protocol tls\n*admin@t327-dut1.cond (syslog)# ocsp strict\n*admin@t327-dut1.cond (syslog)# facility any\n*admin@t327-dut1.cond (syslog)# severity info\n*admin@t327-dut1.cond (syslog)# top\n"})}),"\n",(0,i.jsxs)(t.p,{children:["To complete the process, ",(0,i.jsx)(t.code,{children:"validate"})," and ",(0,i.jsx)(t.code,{children:"commit"})," the changes. After the confiuration changes have been committed, the SSR will send the syslog to 192.168.1.100:6514 over TLS."]}),"\n",(0,i.jsx)(t.h2,{id:"syslog-over-tls-configuration---generate-certificate",children:"Syslog over TLS Configuration - Generate Certificate"}),"\n",(0,i.jsx)(t.p,{children:"Use the following examples to generate a client certificate for use on the device."}),"\n",(0,i.jsx)(t.h4,{id:"1-generate-the-signing-request",children:"1. Generate the Signing Request"}),"\n",(0,i.jsxs)(t.p,{children:["Use the ",(0,i.jsx)(t.code,{children:"create certificate request client"})," command to generate the signing request."]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{children:"admin@conductor-node-1.Conductor# create certificate request client syslog\nCountry name (2 letter code): US\nState or province name (full name): MA\nLocality name (eg: city): Westford\nOrganization name (eg: company): Juniper\nOrganization unit (eg: engineering):\nCommon name: dut1\nEmail address:\nSubject Alternative Name - DNS (fully qualified domain name):\nSubject Alternative Name - IP Address:\n% Error: Could not create request: Subject Alternative Name (DNS or IP address) is required\nadmin@conductor-node-1.Conductor# create certificate request client syslog\nCountry name (2 letter code): US\nState or province name (full name): MA\nLocality name (eg: city): Westford\nOrganization name (eg: company): Juniper\nOrganization unit (eg: engineering):\nCommon name: dut1\nEmail address:\nSubject Alternative Name - DNS (fully qualified domain name): dut1\nSubject Alternative Name - IP Address: 10.27.32.203\n\nRequest successfully generated:\n\n-----BEGIN CERTIFICATE REQUEST-----\nMIIC1jCCAb4CAQAwTjENMAsGA1UEAwwEZHV0MTELMAkGA1UEBhMCVVMxETAPBgNV\nBAcMCFdlc3Rmb3JkMRAwDgYDVQQKDAdKdW5pcGVyMQswCQYDVQQIDAJNQTCCASIw\nDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBAJ8WwHXP/z49sFsxpN5L9THO5y8N\nf/as8Nn6XUyG86YyxcR5IYL5gKR5//EunoVjLAUCHgBqxwaUa3enhNEQS97N4Bcs\nE7YygMkI7oAnHCioslB+x2Am/xKPRosh3s50fIN3mY409/byMGipfGcyNlMn8XbS\nXF/zmGBI1/4aRbeqL5VMDPO+9DNRxXMgqBs2y48WanGvZeZTP5B/sSczlhOSxHnu\nDxNYQ7+rZs9NpKzktCXOSA8nszHp5PNCWsa8tVNQvyhAqboTGrXQZhjZRWzg3nzS\n.\n.\n.\nwp4dOHuKsnf+ZsfNK4AGUYdh3qEa1/xJxyug1R3AGjItbkUzbJpR6hp7B0YYWV87\nQALMf6F0SKBDXg++\n-----END CERTIFICATE REQUEST-----\n"})}),"\n",(0,i.jsx)(t.h4,{id:"2-configure-the-trusted-ca-certificate",children:"2. Configure the Trusted CA Certificate"}),"\n",(0,i.jsx)(t.p,{children:"The trusted CA certificate is necessary to validate the incoming client certificate. Certificates are pasted in as a multi-line config."}),"\n",(0,i.jsxs)(t.p,{children:["Create a root certificate named ",(0,i.jsx)(t.code,{children:"ca_root"})," and paste the certificate file content into the command:"]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{children:"admin@conductor-node-1.Conductor# configure authority trusted-ca-certificate ca_root\n*admin@conductor-node-1.Conductor (trusted-ca-certificate[name=ca_root])# content\nEnter plain for content (Press CTRL-D to finish):\n-----BEGIN CERTIFICATE-----\nMIIDlDCCAnygAwIBAgIVAJHxzhL42q7io2PBDPR+TCeBsyQgMA0GCSqGSIb3DQEB\nCwUAMFExCzAJBgNVBAYTAlVTMRYwFAYDVQQIDA1NYXNzYWNodXNldHRzMREwDwYD\nVQQKDAhUZXN0IEluYzEXMBUGA1UEAwwOY2EuZXhhbXBsZS5jb20wHhcNMjQxMDIy\nMTYzODI1WhcNMjUxMDIyMTYzODI1WjBRMQswCQYDVQQGEwJVUzEWMBQGA1UECAwN\nTWFzc2Fja/m1nIs+rY0Fs1LIyWA1kswIVGVzdCBJbmMxFzAVBgNVBAMMDmNhLmV4\nYW1wbGUuY29tMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAqn81ZnhT\nzAPiXOdzJVRdy6GGQJKodQ89/hxZ3oHAFN/7QhknXyWnfz3heShEAw5xdL3PV230\n.\n.\n.\nqynFiqlV0UDGgH+e8hCp41Seva5vBGYvwMVHPU80rhoAsTh1BNpM1r9xbvDQs5ui\n3QyeFCt/O0A=\n-----END CERTIFICATE-----\n"})}),"\n",(0,i.jsx)(t.h4,{id:"3-import-the-client-certificate",children:"3. Import the Client Certificate"}),"\n",(0,i.jsxs)(t.p,{children:["After the certificate is signed and returned, it is imported into the SSR for use by the client using the ",(0,i.jsx)(t.code,{children:"import certificate client"}),"  command. It is validated against any trusted certificates entered using ",(0,i.jsx)(t.code,{children:"trusted-ca-certificate"}),"."]}),"\n",(0,i.jsx)(t.p,{children:"The following example shows an valid self-signed certificate being imported:"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{children:"admin@conductor-node-1.Conductor# import certificate client syslog\nEnter the end point certificate in PEM format (Press CTRL-D to finish):\n-----BEGIN PRIVATE KEY-----\nMIIEvQIBADANBgkqhkiG9w0BAQEFAASCBKcwggSjAgEAAoIBAQDFrn/2q4mijt14\ngjmN2agDfu6sykg4OJ2NDy4IRrBYilExRJHllAndtc04rp7EQ544Z+/J/dNJrmXK\nGnHvm/Rg0UdKnbFrw5aentpx3rFefdaf8nlJLW5rFH1wxDqUhE+y5q+s+8k3ESt0\n9L/26OxTQP11t5Vh/BEkK5iVHLDBGyHntUvEnM5tFWL7+NvefhuZ6McvY7GPDR8c\nbkuNHXlv9laeXQlI6IiiYum8waQDnJBGEx2wPTUguZJWP0YgxLinKiCDIINNEf+Y\ndGqxf7I/yKn1gH+Swh0sAYn33651EaGAzjMHYhmpPVR0K9IAPbyGucK0aOriJqZ5\n91wL39G5AgMBAAECggEAE2/xDSQYyG8bv7muRxBbwNw+Q6cwKrcGZtRTRmUM+ee/\nzAReBCDmR3KU1zn0SoALkqhFn6rhl6EaSSEIivLeuJZbWC7hPyNgMACWohOvhQcC\n.\n.\n.\nWiYWxHz5Q4wUxV5uTJR3Jq5rzcHr1shyVDT+aFf9tyNdcLFfbziZ1y/EfAPkOOoH\njLD4SXCWbmRxHYVMn3yhqK4=\n-----END PRIVATE KEY-----\n \n-----BEGIN CERTIFICATE-----\nMIIDpDCCAoygAwIBAgIVAL1k460IeyrQWoU82ZVHZ2asUrTuMA0GCSqGSIb3DQEB\nCwUAMFExCzAJBgNVBAYTAlVTMRYwFAYDVQQIDA1NYXNzYWNodXNldHRzMREwDwYD\nVQQKDAhUZXN0IEluYzEXMBUGA1UEAwwOY2EuZXhhbXBsZS5jb20wHhcNMjQxMDIy\nMTYzODI4WhcNMjUwMTIwMTYzODI4WjBVMQswCQYDVQQGEwJVUzEWMBQGA1UECAwN\nTWFzc2FjaHVzZXR031sTH3nuMB3r+h0uSHa1Lc0un+/xGzAZBgNVBAMMEmNsaWVu\ndC5leGFtcGxlLmNvbTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBAMWu\nf/ariaKO3XiCOY3ZqAN+7qzKSDg4nY0PLghGsFiKUTFEkeWUCd21zTiunsRDnjhn\n.\n.\n.\nzTwd4+soylkHxCW2zZ50lUUqqNt1nSIcVF2V3qqxRZXZcJtN5y9+brpc9Z8eiXys\n9cgLsL60tukLdwxH5S6gAw/MSm6ABYjdv\n-----END CERTIFICATE-----\n                                                                                                                                                                                                                                                                                \n/usr/lib/128technology/unzip/pcli/runfiles/pypi__36__cryptography_40_0_2/cryptography/x509/base.py:576: CryptographyDeprecationWarning: Parsed a negative serial number, which is disallowed by RFC 5280.\n  return rust_x509.load_pem_x509_certificates(data)\n\u2714 Importing...\nCertificate imported successfully\nWould you like to add the certificate to your configuration? [y/N]: y\nWhich router is this certificate for? (Select all if it applies to the entire authority) [all]: all\n\nCertificate imported successfully\nWould you like to clean up the temporary certificate and key files? [Y/n]: Y\n"})}),"\n",(0,i.jsx)(t.h4,{id:"4-configure-the-device-to-accept-the-client-certificate",children:"4. Configure the Device to Accept the Client Certificate"}),"\n",(0,i.jsx)(t.p,{children:"Use the following example command to configure your device to accept the certificate."}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsx)(t.code,{children:" configure authority router ComboWest node combo-west radius client-certificate-name syslog"})})]})}function u(e={}){const{wrapper:t}={...(0,r.R)(),...e.components};return t?(0,i.jsx)(t,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},28453:(e,t,n)=>{n.d(t,{R:()=>c,x:()=>s});var i=n(96540);const r={},o=i.createContext(r);function c(e){const t=i.useContext(o);return i.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function s(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:c(e.components),i.createElement(o.Provider,{value:t},e.children)}}}]);