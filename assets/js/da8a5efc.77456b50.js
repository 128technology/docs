"use strict";(self.webpackChunk_128t_docs=self.webpackChunk_128t_docs||[]).push([[6516],{58161:(n,e,o)=>{o.r(e),o.d(e,{assets:()=>c,contentTitle:()=>s,default:()=>u,frontMatter:()=>r,metadata:()=>a,toc:()=>l});var t=o(74848),i=o(28453);const r={title:"STEP High Availability",sidebar_label:"STEP High Availability"},s=void 0,a={id:"config_step_ha",title:"STEP High Availability",description:"Version History",source:"@site/docs/config_step_ha.md",sourceDirName:".",slug:"/config_step_ha",permalink:"/docs/config_step_ha",draft:!1,unlisted:!1,tags:[],version:"current",lastUpdatedAt:1710939338,formattedLastUpdatedAt:"Mar 20, 2024",frontMatter:{title:"STEP High Availability",sidebar_label:"STEP High Availability"},sidebar:"docs",previous:{title:"Configuring STEP",permalink:"/docs/config_STEP"},next:{title:"Using the STEP GUI",permalink:"/docs/howto_STEP_GUI"}},c={},l=[{value:"Version History",id:"version-history",level:4},{value:"STEP Repository High Availability",id:"step-repository-high-availability",level:2},{value:"STEP Router High Availability",id:"step-router-high-availability",level:2}];function d(n){const e={a:"a",code:"code",h2:"h2",h4:"h4",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,i.R)(),...n.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(e.h4,{id:"version-history",children:"Version History"}),"\n",(0,t.jsxs)(e.table,{children:[(0,t.jsx)(e.thead,{children:(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.th,{children:"Release"}),(0,t.jsx)(e.th,{children:"Modification"})]})}),(0,t.jsx)(e.tbody,{children:(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:"5.6.0"}),(0,t.jsx)(e.td,{children:"STEP HA introduced"})]})})]}),"\n",(0,t.jsx)(e.h2,{id:"step-repository-high-availability",children:"STEP Repository High Availability"}),"\n",(0,t.jsx)(e.p,{children:"To achieve STEP repository high availability, the conductor is placed in an HA configuration. Each of the two conductor nodes hosts a STEP repository, and both nodes are active. All routers in the authority are connected to both repositories. Each router sends and recieves STEP router document updates from both repositories, providing redundancy in case one of the repositories becomes unavailable. Each router uses existing secure communication channels to the conductor nodes to exchange STEP information."}),"\n",(0,t.jsxs)(e.p,{children:["To configure STEP repository High Availability, ",(0,t.jsx)(e.a,{href:"/docs/config_STEP#enable-step",children:"enable STEP"})," on each conductor, and then specify the IP addresses of both conductor nodes as STEP repositories:"]}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{children:'config\n    authority\n        step-repo          192.168.1.11\n            address      192.168.1.11\n            description  "STEP repository on conductor node 1\u201d\n        exit\n        step-repo          192.168.1.4\n            address      192.168.1.4\n            description  "STEP repository on conductor node 2"\n        exit\n\n'})}),"\n",(0,t.jsx)(e.p,{children:"STEP repositories on systems other than the conductor nodes are not supported at this time."}),"\n",(0,t.jsxs)(e.p,{children:["To verify that a given router has established connectivity to its repositories, use the ",(0,t.jsx)(e.code,{children:"show step clients"})," command:"]}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{children:"admin@dut3.Blackall# show step clients\nusage: clients [rows <rows>] [<verbosity>]\n\nShow STEP clients\n\nkeyword arguments:\nrows    The number of items to display at once [type: int or 'all'] (default: 50)\n\npositional arguments:\nverbosity    detail | summary (default: summary)\n\n\nadmin@dut3.Blackall# show step clients\nFri 2022-04-15 21:20:46 UTC\n\n================= ================= =========== ================= ============== ================= ========== =================\n Repository        Uptime            Documents   Last Received     Num Received   Last Sent         Num Sent   Num Disconnects\n================= ================= =========== ================= ============== ================= ========== =================\n 127.0.1.2:15555   0 days 22:29:57   None        0 days  0:00:41           1391   0 days  0:01:23        465                 2\n 127.0.1.3:15555   0 days 22:27:15   None        0 days  0:00:41           1393   0 days  0:01:23        465                 1\n\n\u2714 Retrieving step information...\nCompleted in 0.46 seconds\n\n\nadmin@dut3.Blackall# show step clients detail\nFri 2022-04-15 21:23:34 UTC\n\n=======================================================\n Information\n=======================================================\n Item:\n   Last Client Disconnect Time:   2022-04-14T22:48:26Z\n   Connected:                     True\n   Last Client Connect Time:      2022-04-14T22:50:50Z\n   Num Updates Received:          1394\n   Num Router Documents:          None\n   Num Client Connects:           3\n   Num Client Disconnects:        2\n   Num Updates Sent:              466\n   Last Update Received Time:     2022-04-15T21:23:06Z\n   Name:                          Blackall_dut3_Step_0\n   Last Update Sent Time:         2022-04-15T21:22:24Z\n   Repository:                    127.0.1.2:15555\n Item:\n   Last Client Disconnect Time:   2022-04-14T22:51:35Z\n   Connected:                     True\n   Last Client Connect Time:      2022-04-14T22:53:32Z\n   Num Updates Received:          1396\n   Num Router Documents:          None\n   Num Client Connects:           2\n   Num Client Disconnects:        1\n   Num Updates Sent:              466\n   Last Update Received Time:     2022-04-15T21:23:06Z\n   Name:                          Blackall_dut3_Step_1\n   Last Update Sent Time:         2022-04-15T21:22:24Z\n   Repository:                    127.0.1.3:15555\n\n\u2714 Retrieving step information...\nCompleted in 0.06 seconds\n\n"})}),"\n",(0,t.jsx)(e.h2,{id:"step-router-high-availability",children:"STEP Router High Availability"}),"\n",(0,t.jsxs)(e.p,{children:["Starting with release 5.6, routers in an HA configuration (two router nodes) are supported with STEP. This does not require any router specific configuration. Configuring the STEP repository (or two repositories in the case of an HA conductor) at the authority level enables STEP for all routers in the authority, whether they are HA routers or not.\nOn an HA router, the STEP client functionality is integrated into the ",(0,t.jsx)(e.code,{children:"routingManager"})," process and thus is performed on the router node that is the primary node for the ",(0,t.jsx)(e.code,{children:"routingManager"})," process. Use the ",(0,t.jsx)(e.code,{children:"show system processes"})," command to identify the primary node :"]}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{children:"admin@dut5.Townsville# show system processes node all\nFri 2022-04-15 21:35:09 UTC\n\u2714 Retrieving system processes...\n\n================= ============================= ========= ========= =======\n Node              Process                       Status    Primary   Role\n================= ============================= ========= ========= =======\n dut5.Townsville   accessManager                 running             combo\n dut5.Townsville   analyticsReporter             running             combo\n dut5.Townsville   applicationFrameworkManager   running             combo\n dut5.Townsville   configDirector                running   Y         combo\n dut5.Townsville   conflux                       running             combo\n dut5.Townsville   databaseQueryCoordinator      running             combo\n dut5.Townsville   dnsManager                    running   Y         combo\n dut5.Townsville   dynamicPeerUpdateManager      running   Y         combo\n dut5.Townsville   highway                       running             combo\n dut5.Townsville   nfxChassisMonitor             running             combo\n dut5.Townsville   nodeMonitor                   running             combo\n dut5.Townsville   redisServerManager            running   Y         combo\n dut5.Townsville   routingManager                running   Y         combo\n dut5.Townsville   secureCommunicationManager    running             combo\n dut5.Townsville   securityKeyManager            running   Y         combo\n dut5.Townsville   snmpTrapAgent                 running             combo\n dut5.Townsville   stateMonitor                  running             combo\n dut5.Townsville   systemServicesCoordinator     running             combo\n dut6.Townsville   accessManager                 running             combo\n dut6.Townsville   analyticsReporter             running             combo\n dut6.Townsville   applicationFrameworkManager   running             combo\n dut6.Townsville   configDirector                running   N         combo\n dut6.Townsville   conflux                       running             combo\n dut6.Townsville   databaseQueryCoordinator      running             combo\n dut6.Townsville   dnsManager                    running   N         combo\n dut6.Townsville   dynamicPeerUpdateManager      running   N         combo\n dut6.Townsville   highway                       running             combo\n dut6.Townsville   nfxChassisMonitor             running             combo\n dut6.Townsville   nodeMonitor                   running             combo\n dut6.Townsville   redisServerManager            running   N         combo\n dut6.Townsville   routingManager                running   N         combo\n dut6.Townsville   secureCommunicationManager    running             combo\n dut6.Townsville   securityKeyManager            running   N         combo\n dut6.Townsville   snmpTrapAgent                 running             combo\n dut6.Townsville   stateMonitor                  running             combo\n dut6.Townsville   systemServicesCoordinator     running             combo\n\nCompleted in 0.16 seconds\n\n"})}),"\n",(0,t.jsx)(e.p,{children:"When the node hosting the primary routingManager fails, the other node becomes primary and connects to the STEP repositories."})]})}function u(n={}){const{wrapper:e}={...(0,i.R)(),...n.components};return e?(0,t.jsx)(e,{...n,children:(0,t.jsx)(d,{...n})}):d(n)}},28453:(n,e,o)=>{o.d(e,{R:()=>s,x:()=>a});var t=o(96540);const i={},r=t.createContext(i);function s(n){const e=t.useContext(r);return t.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function a(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(i):n.components||i:s(n.components),t.createElement(r.Provider,{value:e},n.children)}}}]);