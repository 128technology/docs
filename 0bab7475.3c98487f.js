(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{217:function(e,n,t){"use strict";t.d(n,"a",(function(){return p})),t.d(n,"b",(function(){return m}));var r=t(0),a=t.n(r);function i(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function o(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function c(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?o(Object(t),!0).forEach((function(n){i(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):o(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function s(e,n){if(null==e)return{};var t,r,a=function(e,n){if(null==e)return{};var t,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)t=i[r],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)t=i[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var d=a.a.createContext({}),l=function(e){var n=a.a.useContext(d),t=n;return e&&(t="function"==typeof e?e(n):c(c({},n),e)),t},p=function(e){var n=l(e.components);return a.a.createElement(d.Provider,{value:n},e.children)},u={inlineCode:"code",wrapper:function(e){var n=e.children;return a.a.createElement(a.a.Fragment,{},n)}},b=a.a.forwardRef((function(e,n){var t=e.components,r=e.mdxType,i=e.originalType,o=e.parentName,d=s(e,["components","mdxType","originalType","parentName"]),p=l(t),b=r,m=p["".concat(o,".").concat(b)]||p[b]||u[b]||i;return t?a.a.createElement(m,c(c({ref:n},d),{},{components:t})):a.a.createElement(m,c({ref:n},d))}));function m(e,n){var t=arguments,r=n&&n.mdxType;if("string"==typeof e||r){var i=t.length,o=new Array(i);o[0]=b;var c={};for(var s in n)hasOwnProperty.call(n,s)&&(c[s]=n[s]);c.originalType=e,c.mdxType="string"==typeof e?e:r,o[1]=c;for(var d=2;d<i;d++)o[d]=t[d];return a.a.createElement.apply(null,o)}return a.a.createElement.apply(null,t)}b.displayName="MDXCreateElement"},57:function(e,n,t){"use strict";t.r(n),t.d(n,"frontMatter",(function(){return o})),t.d(n,"metadata",(function(){return c})),t.d(n,"rightToc",(function(){return s})),t.d(n,"default",(function(){return l}));var r=t(2),a=t(6),i=(t(0),t(217)),o={title:"Configuring Service and Topology Exchange Protocol (STEP)",sidebar_label:"Configuring Service and Topology Exchange Protocol (STEP)"},c={unversionedId:"config_STEP",id:"config_STEP",isDocsHomePage:!1,title:"Configuring Service and Topology Exchange Protocol (STEP)",description:"Use the information in this section to enable routers to connect to the STEP repository on the conductor and build their STEP documents. Additionally, information about configuring reporting parameters, and using the show commands to view STEP details is provided.",source:"@site/docs/config_STEP.md",slug:"/config_STEP",permalink:"/docs/config_STEP",version:"current",lastUpdatedAt:1620133048,sidebar_label:"Configuring Service and Topology Exchange Protocol (STEP)",sidebar:"docs",previous:{title:"Static Hostname Mappings",permalink:"/docs/config_static_hostname_mapping"},next:{title:"Tenants",permalink:"/docs/config_tenants"}},s=[{value:"Enable STEP",id:"enable-step",children:[{value:"Configuring Peer Path Advertisement Settings",id:"configuring-peer-path-advertisement-settings",children:[]},{value:"Router District Settings",id:"router-district-settings",children:[]}]},{value:"Configurable Parameters",id:"configurable-parameters",children:[]},{value:"Show Commands",id:"show-commands",children:[]}],d={rightToc:s};function l(e){var n=e.components,t=Object(a.a)(e,["components"]);return Object(i.b)("wrapper",Object(r.a)({},d,t,{components:n,mdxType:"MDXLayout"}),Object(i.b)("p",null,"Use the information in this section to enable routers to connect to the STEP repository on the conductor and build their STEP documents. Additionally, information about configuring reporting parameters, and using the show commands to view STEP details is provided. "),Object(i.b)("h2",{id:"enable-step"},"Enable STEP"),Object(i.b)("p",null,"The STEP repository is located on the Conductor, and the repository process runs by default. Using the ",Object(i.b)("inlineCode",{parentName:"p"},"step-repo")," command to assign the IP Address allows the routers to connect to the repository and build the STEP document. Use the following commands to enable the STEP repository on the Conductor. "),Object(i.b)("pre",null,Object(i.b)("code",Object(r.a)({parentName:"pre"},{}),'config authority\n    step-repo 11.1.1.1\n        address 11.1.1.1\n        description "STEP Repository on the Conductor"\n    exit\n')),Object(i.b)("h3",{id:"configuring-peer-path-advertisement-settings"},"Configuring Peer Path Advertisement Settings"),Object(i.b)("p",null,"The weighted moving average and reporting delay parameters can be configured per neighborhood:"),Object(i.b)("pre",null,Object(i.b)("code",Object(r.a)({parentName:"pre"},{}),"config\n  authority\n    router        NorthEast\n        node                  node1\n            device-interface          wan3\n                network-interface  wan3\n                    neighborhood           broadband\n\n                        step-peer-path-advertisement\n                            sla-metrics\n                                moving-average-sample-size  3\n\n                                significance-threshold\n                                    min-loss     0.1\n                                    min-latency  5\n                                    min-jitter   2\n                                exit\n\n                                increase-report-delay       1\n                                    percentage  1\n                                    delay       1800\n                                exit\n                                increase-report-delay       10\n                                    percentage  10\n                                    delay       240\n                                exit\n                                increase-report-delay       20\n                                    percentage  20\n                                    delay       150\n                                exit\n                                increase-report-delay       50\n                                    percentage  50\n                                    delay       30\n                                exit\n                                increase-report-delay       100\n                                    percentage  100\n                                    delay       15\n                                exit\n                                increase-report-delay       200\n                                    percentage  200\n                                    delay       1\n                                exit\n\n                                decrease-report-delay       1\n                                    percentage  1\n                                    delay       1800\n                                exit\n                                decrease-report-delay       10\n                                    percentage  10\n                                    delay       240\n                                exit\n                                decrease-report-delay       50\n                                    percentage  50\n                                    delay       15\n                                exit\n")),Object(i.b)("p",null,"Any auto-generated adjacency in the neighborhood reflects the same configuration values:"),Object(i.b)("pre",null,Object(i.b)("code",Object(r.a)({parentName:"pre"},{}),"config\n  authority\n    router        NorthEast\n        node                  node1\n            device-interface          wan3\n                network-interface  wan3\n                    adjacency              10.0.3.23 West\n\n                        step-peer-path-advertisement\n                            sla-metrics\n                                moving-average-sample-size  3\n\n                                significance-threshold\n                                    min-loss     0.1\n                                    min-latency  5\n                                    min-jitter   2\n                                exit\n\n                                increase-report-delay       1\n                                    percentage  1\n                                    delay       1800\n                                exit\n                                increase-report-delay       10\n                                    percentage  10\n                                    delay       240\n                                exit\n                                increase-report-delay       20\n                                    percentage  20\n                                    delay       150\n                                exit\n                                increase-report-delay       50\n                                    percentage  50\n                                    delay       30\n                                exit\n                                increase-report-delay       100\n                                    percentage  100\n                                    delay       15\n                                exit\n                                increase-report-delay       200\n                                    percentage  200\n                                    delay       1\n                                exit\n\n                                decrease-report-delay       1\n                                    percentage  1\n                                    delay       1800\n                                exit\n                                decrease-report-delay       10\n                                    percentage  10\n                                    delay       240\n                                exit\n                                decrease-report-delay       50\n                                    percentage  50\n                                    delay       15\n                                exit\n")),Object(i.b)("p",null,"Note that the effective values are those in the adjacency. The adjacency configuration may be auto-generated or manually configured. The values configured in the neighborhood have no direct effect on the router behavior, they only provide the input for instantiating adjacency objects."),Object(i.b)("p",null,"If ",Object(i.b)("inlineCode",{parentName:"p"},"moving-average-sample-size")," or ",Object(i.b)("inlineCode",{parentName:"p"},"significance-threshold")," is not configured, the default values will be used. Likewise, if ",Object(i.b)("inlineCode",{parentName:"p"},"increase-report-delay")," or ",Object(i.b)("inlineCode",{parentName:"p"},"decrease-report-delay")," is not configured, the default configuration is in effect."),Object(i.b)("h3",{id:"router-district-settings"},"Router District Settings"),Object(i.b)("p",null,"The rate limit parameters for peer path SLA updates to the STEP router document can be configured for each router. The router can use different values on a per-district basis:"),Object(i.b)("pre",null,Object(i.b)("code",Object(r.a)({parentName:"pre"},{}),"config\n    authority\n        router        NorthEast\n            district-settings     default-district\n                district-name                 default-district\n\n                step-peer-path-sla-metrics-advertisement\n                    update-rate-limit        180\n                    minimum-update-interval  30\n                    update-burst-size        2\n                exit\n            exit\n")),Object(i.b)("p",null,"Only the default district parameters have any effect. If no ",Object(i.b)("inlineCode",{parentName:"p"},"district-settings")," are configured, or if any of the ",Object(i.b)("inlineCode",{parentName:"p"},"step-peer-path-advertisement")," values are not provided, the default values will be used."),Object(i.b)("h2",{id:"configurable-parameters"},"Configurable Parameters"),Object(i.b)("pre",null,Object(i.b)("code",Object(r.a)({parentName:"pre"},{}),"step peer path advertisement\n    sla-metrics\n        moving average sample size\n        significance threshold\n            min-loss\n            min-latency\n            min-jitter\n        increase report delay\n            percentage\n            delay\n        decrease-report-delay\n            percentage\n            delay\n")),Object(i.b)("p",null,"See ",Object(i.b)("a",Object(r.a)({parentName:"p"},{href:"/docs/config_reference_guide#step-peer-path-advertisement-adjacency"}),"step-peer-path-advertisement (adjacency)")," for configuration details. "),Object(i.b)("pre",null,Object(i.b)("code",Object(r.a)({parentName:"pre"},{}),"district-settings\n    default-district\n    district-name\n    step-peer-path-sla-metrics-advertisement\n        update-rate-limit\n        minimum-update-interval\n        update-burst-size        \n")),Object(i.b)("p",null,"See ",Object(i.b)("a",Object(r.a)({parentName:"p"},{href:"/docs/config_reference_guide#step-peer-path-advertisement-district"}),"step-peer-path-advertisement (district)")," for configuration details."),Object(i.b)("h2",{id:"show-commands"},"Show Commands"),Object(i.b)("p",null,"The following show commands provide a view into the STEP functionality."),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"show step lsdb"))),Object(i.b)("pre",null,Object(i.b)("code",Object(r.a)({parentName:"pre"},{}),"admin@T197_DUT5.Site5# show step lsdb\nThu 2020-12-17 19:04:42 UTC\n\nRetrieving from 'Site5'...\n\n================== ===============\n District           Originator\n================== ===============\n default-district   Site4\n default-district   Site5\n default-district   Datacenter\n\n")),Object(i.b)("p",null,"For additional information, see ",Object(i.b)("a",Object(r.a)({parentName:"p"},{href:"/docs/cli_reference#show-step-lsdb"}),"show step lsdb"),"."),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"show step routes"))),Object(i.b)("pre",null,Object(i.b)("code",Object(r.a)({parentName:"pre"},{}),"admin@T197_DUT5.Site5# show step routes\nThu 2020-12-17 19:26:56 UTC\n\nRetrieving from 'T197_DUT5.Site5'...\n\n=========== ===================== =============\n Node Name   Service               IP Prefix\n=========== ===================== =============\n T197_DUT5   site4-LAN             10.4.0.0/16\n\n")),Object(i.b)("p",null,"For additional information, see ",Object(i.b)("a",Object(r.a)({parentName:"p"},{href:"/docs/cli_reference#show-step-routes"}),"show step routes"),". "))}l.isMDXComponent=!0}}]);