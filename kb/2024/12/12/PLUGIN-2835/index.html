<!doctype html>
<html lang="en" dir="ltr" class="blog-wrapper blog-post-page plugin-blog plugin-id-default" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.1.1">
<title data-rh="true">IPSec algorithms dh2 (modp1024) and dh22 are being deprecated | SSN Docs</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://docs.128technology.com/kb/2024/12/12/PLUGIN-2835"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docusaurus_tag" content="default"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docsearch:docusaurus_tag" content="default"><meta data-rh="true" property="og:title" content="IPSec algorithms dh2 (modp1024) and dh22 are being deprecated | SSN Docs"><meta data-rh="true" name="description" content="To implement IPsec, SSR leverages a third-party client called libreswan. The client periodically deprecates weak algorithms from its code base such as dh2 (a.k.a modp1024) and dh22. While the SSR supports these algorithms, it is very likely that these algorithms will be deprecated in the near future. The article is meant to raise awareness of this upcoming change and provide instruction to proactively modify configuration to avoid outages."><meta data-rh="true" property="og:description" content="To implement IPsec, SSR leverages a third-party client called libreswan. The client periodically deprecates weak algorithms from its code base such as dh2 (a.k.a modp1024) and dh22. While the SSR supports these algorithms, it is very likely that these algorithms will be deprecated in the near future. The article is meant to raise awareness of this upcoming change and provide instruction to proactively modify configuration to avoid outages."><meta data-rh="true" property="og:type" content="article"><meta data-rh="true" property="article:published_time" content="2024-12-12T00:00:00.000Z"><meta data-rh="true" property="article:tag" content="ipsec-client"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://docs.128technology.com/kb/2024/12/12/PLUGIN-2835"><link data-rh="true" rel="alternate" href="https://docs.128technology.com/kb/2024/12/12/PLUGIN-2835" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.128technology.com/kb/2024/12/12/PLUGIN-2835" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/kb/rss.xml" title="SSR Knowledge Base Articles RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/kb/atom.xml" title="SSR Knowledge Base Articles Atom Feed">
<link rel="alternate" type="application/json" href="/kb/feed.json" title="SSR Knowledge Base Articles JSON Feed"><link rel="stylesheet" href="/assets/css/styles.df1c9d6e.css">
<script src="/assets/js/runtime~main.050f9505.js" defer="defer"></script>
<script src="/assets/js/main.520036c5.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.png" alt="Juniper Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/logo_dark.png" alt="Juniper Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate"></b></a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/docs/intro_getting_started">Docs</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/kb">Knowledge Base</a><a href="https://community.juniper.net/answers/communities/community-home?CommunityKey=310d1a41-12fa-4627-9a99-880145a7c87c" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Community<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://www.juniper.net/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Company<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20" aria-hidden="true"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="container margin-vert--lg"><div class="row"><main class="col col--9 col--offset-1" itemscope="" itemtype="https://schema.org/Blog"><article itemprop="blogPost" itemscope="" itemtype="https://schema.org/BlogPosting"><meta itemprop="description" content="To implement IPsec, SSR leverages a third-party client called libreswan. The client periodically deprecates weak algorithms from its code base such as dh2 (a.k.a modp1024) and dh22. While the SSR supports these algorithms, it is very likely that these algorithms will be deprecated in the near future. The article is meant to raise awareness of this upcoming change and provide instruction to proactively modify configuration to avoid outages."><header><h1 class="title_f1Hy" itemprop="headline">IPSec algorithms dh2 (modp1024) and dh22 are being deprecated</h1><div class="container_mt6G margin-vert--md"><time datetime="2024-12-12T00:00:00.000Z" itemprop="datePublished">December 12, 2024</time></div></header><div id="__blog-post-container" class="markdown" itemprop="articleBody"><p>To implement IPsec, SSR leverages a third-party client called <code>libreswan</code>. The client periodically deprecates weak algorithms from its code base such as dh2 (a.k.a <code>modp1024</code>) and dh22. While the SSR supports these algorithms, it is very likely that these algorithms will be deprecated in the near future. The article is meant to raise awareness of this upcoming change and provide instruction to proactively modify configuration to avoid outages.</p>
<p><strong>Issue ID:</strong> PLUGIN-2835.</p>
<p><strong>Last Updated:</strong> 2024-12-12</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="problem">Problem<a href="#problem" class="hash-link" aria-label="Direct link to Problem" title="Direct link to Problem">​</a></h3>
<p>When upgrading to a version of IPsec plugin with the weak ciphers removed, SSR will stop offering these ciphers in its IPsec negotiation with the far end. As a result, the tunnel connection will break and will not be able to be formed again. You can verify this break in the following ways.</p>
<ol>
<li>Check the output of the <code>show plugin state</code> command to inspect the status of the tunnel:</li>
</ol>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">========================================</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> combo-west:rem1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">========================================</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> Type:                host</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> Forwarding:          true</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> Mode:                host</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> MAC Address:         76:78:79:fc:eb:69</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> Admin Status:        up</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> Operational Status:  down</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> Redundancy Status:   non-redundant</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> Speed:               0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> Duplex:              unknown</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> in-octets:                     1962932</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> in-unicast-pkts:                 32710</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> in-errors:                           0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> out-octets:                    1373442</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> out-unicast-pkts:                32701</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> out-errors:                          6</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> IPSec:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     rem1:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">         Tunnel Status:Down</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">         Tunnel Details:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">             Name:    ipsec-client-tunnel-primary-rem1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">             Remote Host:172.16.4.3</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">         Down Reason: Tunnel settings mismatch</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The above output shows the <code>Tunnel Status: Down</code>. Because the SSR no longer uses the weak ciphers, a <code>Tunnel settings mismatch</code> is identified as the cause.</p>
<ol start="2">
<li>In the <code>128t-ipsec@*</code> service, the log indicates the following:</li>
</ol>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">received unauthenticated v2N_NO_PROPOSAL_CHOSEN - ignored</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Please see the <a href="#solution">Solution</a> for remediation steps.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="severity">Severity<a href="#severity" class="hash-link" aria-label="Direct link to Severity" title="Direct link to Severity">​</a></h3>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>Details</summary><div><div class="collapsibleContent_i85q"><p>The potential impact of a software defect if encountered. Severity levels are:</p><ul>
<li>Critical: Could severely affect service, capacity/traffic, and maintenance capabilities. May have a prolonged impact to the entire system.</li>
<li>Major: Could seriously affect system operation, maintenance, administration and related tasks.</li>
<li>Minor: Would not significantly impair the functioning or affect service.</li>
</ul></div></div></details>
<p>Minor</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="status">Status<a href="#status" class="hash-link" aria-label="Direct link to Status" title="Direct link to Status">​</a></h3>
<p>In Progress</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="resolved-in">Resolved In<a href="#resolved-in" class="hash-link" aria-label="Direct link to Resolved In" title="Direct link to Resolved In">​</a></h3>
<p>128T-ipsce-client-4.1.0</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="product">Product<a href="#product" class="hash-link" aria-label="Direct link to Product" title="Direct link to Product">​</a></h3>
<p>SSR Routers</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="functional-area">Functional Area<a href="#functional-area" class="hash-link" aria-label="Direct link to Functional Area" title="Direct link to Functional Area">​</a></h3>
<p>IPsec</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="solution">Solution<a href="#solution" class="hash-link" aria-label="Direct link to Solution" title="Direct link to Solution">​</a></h3>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>Details</summary><div><div class="collapsibleContent_i85q"><p>Juniper may provide a method to temporarily circumvent a problem; workarounds do not exist for all issues.</p></div></div></details>
<p>Starting with the 128T-ipsec-client-4.1.0 version of the plugin, two changes are being made to support this remediation effort.</p>
<ol>
<li>
<p>A new warning message has been added for conifgurations that rely on <code>dh2</code> and <code>dh22</code> algorithms. The warning message is visible when running <code>validate</code> or <code>commit</code> on the conductor.</p>
</li>
<li>
<p>Existing versions of IPsec plugin only support configuration specifying a single combination of IKE and IPsec algorithms. Beginning with <code>128T-ipsec-client-4.1.0</code>, support has been added to allow multiple ciphers to be configured for IKE and IPsec. The following is an example configuration:</p>
</li>
</ol>
<div class="language-config codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-config codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">    ipsec-profile primary</span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#bfc7d5"><span class="token plain">        name primary</span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#bfc7d5"><span class="token plain">        ike-encryption           aes256</span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#bfc7d5"><span class="token plain">        ike-digest               sha2</span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#bfc7d5"><span class="token plain">        ike-modp                 modp1024</span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#bfc7d5"><span class="token plain">        authentication-protocol  esp</span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#bfc7d5"><span class="token plain">        phase2-encryption        aes_gcm128</span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#bfc7d5"><span class="token plain">        phase2-digest            sha2</span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#bfc7d5"><span class="token plain">        phase2-modp              modp1024</span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#bfc7d5"><span class="token plain">        ...</span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#bfc7d5"><span class="token plain">        additional-ike-algorithms algo1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            name algo1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            encryption aes128</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            digest sha2</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            modp modp2048</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        additional-ike-algorithms algo2</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            name algo2</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            encryption aes256</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            digest sha2</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            modp dh19</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    exit</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The two solutions to remediate the weak algorithms are:</p>
<ol>
<li>While running the existing plugin version, replace the weak cipher with a stronger one from the supported list.</li>
</ol>
<ul>
<li>
<p>Chose a new stronger cipher supported by the server.</p>
</li>
<li>
<p>Replace the weak cipher with the stronger cipher selected from the list.</p>
<p>This config change will trigger a restart of the tunnels for new connections to be formed. Here&#x27;s an example of sample configuration change.</p>
<p>Before:</p>
</li>
</ul>
<div class="language-config codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-config codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">    ipsec-profile primary</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        name primary</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        ike-encryption           aes256</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        ike-digest               sha2</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        ike-modp                 modp1024</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        authentication-protocol  esp</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        phase2-encryption        aes_gcm128</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        phase2-digest            sha2</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        phase2-modp              modp1024</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        ...</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    exit</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>After:</p>
<div class="language-config codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-config codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">    ipsec-profile primary</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        name primary</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        ike-encryption           aes256</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        ike-digest               sha2</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        ike-modp                 modp1024</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        authentication-protocol  esp</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        phase2-encryption        aes_gcm128</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        phase2-digest            sha2</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        phase2-modp              modp1024</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        ...</span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#bfc7d5"><span class="token plain">        additional-ike-algorithms algo1</span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#bfc7d5"><span class="token plain">            name algo1</span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#bfc7d5"><span class="token plain">            encryption aes128</span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#bfc7d5"><span class="token plain">            digest sha2</span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#bfc7d5"><span class="token plain">            modp modp2048</span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#bfc7d5"><span class="token plain">        exit</span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#bfc7d5"><span class="token plain">        additional-ike-algorithms algo2</span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#bfc7d5"><span class="token plain">            name algo2</span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#bfc7d5"><span class="token plain">            encryption aes256</span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#bfc7d5"><span class="token plain">            digest sha2</span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#bfc7d5"><span class="token plain">            modp dh19</span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#bfc7d5"><span class="token plain">        exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    exit</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ol start="2">
<li>Upgrade to the IPsec plugin version <code>4.1.0</code> and configure additional supported ciphers on the server side</li>
</ol>
<p>The SSR offers all the supported ciphers and identifies the ciphers supported on the server. It is recommended to remove the weak ciphers from the configuration once replacements have been made.</p>
<p>Remediating the configuration of weak ciphers ahead of their deprecation allows a seamless transition when upgrading to a new version of SSR software.</p></div><footer class="row docusaurus-mt-lg blogPostFooterDetailsFull_mRVl"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/kb/tags/ipsec-client">ipsec-client</a></li></ul></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Blog post page navigation"><a class="pagination-nav__link pagination-nav__link--next" href="/kb/2024/11/06/PLUGIN-2776"><div class="pagination-nav__sublabel">Older Post</div><div class="pagination-nav__label">Change in behavior for Salt states for 5.6.16+, 6.1.12+, 6.2.8+, 6.3.x-r2+</div></a></nav></main><div class="col col--2"><div class="tableOfContents_bqdL thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#problem" class="table-of-contents__link toc-highlight">Problem</a></li><li><a href="#severity" class="table-of-contents__link toc-highlight">Severity</a></li><li><a href="#status" class="table-of-contents__link toc-highlight">Status</a></li><li><a href="#resolved-in" class="table-of-contents__link toc-highlight">Resolved In</a></li><li><a href="#product" class="table-of-contents__link toc-highlight">Product</a></li><li><a href="#functional-area" class="table-of-contents__link toc-highlight">Functional Area</a></li><li><a href="#solution" class="table-of-contents__link toc-highlight">Solution</a></li></ul></div></div></div></div></div><footer class="footer"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 Juniper Networks, Inc.</div></div></div></footer></div>
</body>
</html>