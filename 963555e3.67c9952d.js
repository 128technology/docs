(window.webpackJsonp=window.webpackJsonp||[]).push([[99],{155:function(e,r,o){"use strict";o.r(r),o.d(r,"frontMatter",(function(){return l})),o.d(r,"metadata",(function(){return i})),o.d(r,"rightToc",(function(){return c})),o.d(r,"default",(function(){return b}));var t=o(2),n=o(6),a=(o(0),o(224)),l={title:"Understanding Logs on the 128T",sidebar_label:"Logs"},i={unversionedId:"ts_logs",id:"ts_logs",isDocsHomePage:!1,title:"Understanding Logs on the 128T",description:"Logs 128T are stored in 4 principal locations: /var/log/128technology/, /var/log/install128t/, /var/log/salt/ and in the journal.",source:"@site/docs/ts_logs.md",slug:"/ts_logs",permalink:"/docs/ts_logs",version:"current",lastUpdatedAt:1628886151,sidebar_label:"Logs",sidebar:"docs",previous:{title:"Forwarding Plane Resource Pools",permalink:"/docs/ts_forwarding_resource_pools"},next:{title:"MAC Address Uniqueness on 128T",permalink:"/docs/ts_mac_uniqueness"}},c=[],s={rightToc:c};function b(e){var r=e.components,o=Object(n.a)(e,["components"]);return Object(a.b)("wrapper",Object(t.a)({},s,o,{components:r,mdxType:"MDXLayout"}),Object(a.b)("p",null,"Logs 128T are stored in 4 principal locations: ",Object(a.b)("inlineCode",{parentName:"p"},"/var/log/128technology/"),", ",Object(a.b)("inlineCode",{parentName:"p"},"/var/log/install128t/"),", ",Object(a.b)("inlineCode",{parentName:"p"},"/var/log/salt/")," and in the journal."),Object(a.b)("ul",null,Object(a.b)("li",{parentName:"ul"},Object(a.b)("inlineCode",{parentName:"li"},"/var/log/128technology/"),", as the name suggests, contains the majority of the logs related to 128T application processing."),Object(a.b)("li",{parentName:"ul"},"128T utilizes ",Object(a.b)("a",Object(t.a)({parentName:"li"},{href:"https://docs.saltproject.io"}),"Salt Stack")," for life cycle management and Dev Ops automation. Salt-related log files are contained within their default directory of ",Object(a.b)("inlineCode",{parentName:"li"},"/var/log/salt/"),"."),Object(a.b)("li",{parentName:"ul"},"The 128T-installer is a separate application that is used for installing and upgrading the 128T.  Any logs related to installation, initialization, upgrade, or rollback will be contained within the ",Object(a.b)("inlineCode",{parentName:"li"},"/var/log/install128t/")," directory."),Object(a.b)("li",{parentName:"ul"},"The journal contains logs from processes that are managed by systemd and not by the 128T process manager.  In order to view logs related to these processes, you can execute ",Object(a.b)("inlineCode",{parentName:"li"},"journalctl -u <process>"),". 128T-related processes that are managed by systemd are:",Object(a.b)("ul",{parentName:"li"},Object(a.b)("li",{parentName:"ul"},Object(a.b)("inlineCode",{parentName:"li"},"128TWeb")),Object(a.b)("li",{parentName:"ul"},Object(a.b)("inlineCode",{parentName:"li"},"nginx")),Object(a.b)("li",{parentName:"ul"},Object(a.b)("inlineCode",{parentName:"li"},"128TWebAuth")),Object(a.b)("li",{parentName:"ul"},Object(a.b)("inlineCode",{parentName:"li"},"mars")),Object(a.b)("li",{parentName:"ul"},Object(a.b)("inlineCode",{parentName:"li"},"salt-ssh")),Object(a.b)("li",{parentName:"ul"},Object(a.b)("inlineCode",{parentName:"li"},"PCLILogger"))))),Object(a.b)("p",null,"An example listing of the ",Object(a.b)("inlineCode",{parentName:"p"},"/var/log/128technology/")," directory can be seen here:"),Object(a.b)("pre",null,Object(a.b)("code",Object(t.a)({parentName:"pre"},{}),"[root@branch-1-router ~]# ls -al /var/log/128technology/\ntotal 2252560\ndrwxrwxrwx+  5 root  root     53248 Apr  2 13:30 .\ndrwxr-xr-x. 19 root  root      4096 Apr  1 03:18 ..\n-rwxrwxrwx+  1 root  root   7118857 Mar 27  2018 128-server.log\n-rwxrwxrwx+  1 root  root     51066 Mar 21  2018 128T.1.pcap\n-rwxrwxrwx+  1 root  root        24 Mar 19  2018 128T.2.pcap\n-rw-rw-rw-+  1 root  root  10000293 Nov 20 01:46 128T_lan.1.pcap\n-rw-rw-rw-+  1 root  root  10000728 Nov 20 01:46 128T_lan.2.pcap\n-rw-rw-rw-+  1 root  root   5482123 Nov 20 01:46 128T_lan.pcap\n-rwxrwxrwx+  1 root  root        24 Mar 27  2018 128T.pcap\n-rw-rw-rw-+  1 root  root  10000310 Nov 20 01:38 128T_wan.1.pcap\n-rw-rw-rw-+  1 root  root  10001413 Nov 20 01:38 128T_wan.2.pcap\n-rw-rw-rw-+  1 root  root  10000535 Nov 20 01:38 128T_wan.3.pcap\n-rw-rw-rw-+  1 root  root   5826182 Nov 20 01:38 128T_wan.pcap\n-rw-rw-rw-+  1 root  root     20682 Feb 19 22:31 accessManager.1.log\n-rw-rw-rw-+  1 root  root     14551 Mar 27 00:21 accessManager.log\n-rw-rw-rw-+  1 root  root     20701 Feb 19 22:31 analyticsReporter.1.log\n-rw-rw-rw-+  1 root  root     10111 Mar 25 19:59 analyticsReporter.log\n-rw-rw-rw-+  1 root  root     30557 Feb 19 22:31 applicationFrameworkManager.1.log\n-rw-rw-rw-+  1 root  root      3501 Nov 18 02:23 applicationFrameworkManager.2.log\napplicationFrameworkManager.log\ndrwxrwxrwx+  2 root  root      4096 Feb 21 00:00 audit\n-rw-rw-rw-+  1 root  root      1985 Feb 21 00:00 auditdReceiver.1.log\n-rw-rw-rw-+  1 root  root      1507 Feb 21 00:00 auditdReceiver.log\n-rw-rw-rw-+  1 root  root     21835 Feb 19 22:31 conflux.1.log\n-rw-rw-rw-+  1 root  root     13422 Mar 27 00:26 conflux.log\n-rw-rw-rw-+  1 root  root      8130 Mar 25 19:59 databaseQueryCoordinator.log\ndrwxrwxrwx+  3 root  root      4096 Nov 19 01:17 dhcp\n-rw-rw-rw-+  1 root  root   2807247 Apr  2 14:49 dnsManager.log\n-rw-rw-rw-+  1 root  root      7645 Mar 25 19:59 dynamicPeerUpdateManager.log\n-rw-rw-rw-+  1 root  root       863 Feb 19 17:15 flpp.1.log\n-rw-rw-rw-+  1 root  root       863 Feb 21 00:00 flpp.log\n-rw-rw-rw-+  1 root  root    237234 Feb 20 23:57 highway.1.log\n-rw-rw-rw-+  1 root  root    345109 Mar  7 20:01 highwayExceptions.pcap\n-rw-rw-rw-+  1 root  root   2495651 Apr  2 14:41 highway.log\n-rw-rw-rw-+  1 root  root       863 Feb 21 00:00 highwayPlatform.log\n-rw-rw-rw-+  1 root  root      2944 Feb 23 12:50 hostedApplications\n-rw-rw-rw-+  1 root  root      2100 Feb 20 23:59 influx_clean.log\n-rw-rw-rw-+  1 root  root   6811683 Apr  2 14:51 influxdb_http.log\n-rw-rw-rw-+  1 root  root   2780652 Apr  2 14:50 influxdb.log\n-rw-rw-rw-+  1 root  root  11662771 Jul 29  2019 journalctl.log\n-rw-rw-rw-+  1 root  root    106811 Feb 19 22:31 nodeMonitor.1.log\n-rw-rw-rw-+  1 root  root     13956 Apr  1 21:03 nodeMonitor.log\n-rw-rw-rw-+  1 admin 128t      1811 Mar 27 00:12 pcli.1.log\n-rw-rw-rw-+  1 admin 128t      1676 Mar 27 00:19 pcli.log\n-rw-rw-rw-+  1 admin 128t      6218 Mar 27 00:19 pdmTransportAgent.log\n-rw-rw-rw-+  1 root  root    119488 Apr  1 21:04 persistentDataManager.log\n-rw-rw-rw-+  1 root  root     68943 Apr  2 10:59 processes.log\n-rw-rw-rw-+  1 root  root     15187 Mar 25 19:59 processManager.log\n-rw-rw-rw-+  1 root  root      1196 Feb 17 12:58 quickassist_install.log\n-rwxrwxrwx+  1 root  root   1016971 Feb 21 00:00 redis.log\n-rw-rw-rw-+  1 root  root      8991 Mar 25 19:59 redisServerManager.log\ndrwxrwxrwx+  2 root  root      4096 Mar  5  2018 routing\nroutingEngineProcesses.log\n-rw-rw-rw-+  1 root  root   5958945 Apr  2 14:48 routingManager.log\n-rw-rw-rw-+  1 root  root    254101 Nov 19 00:27 runtimeStatsFlOnConfig.log\n-rw-rw-rw-+  1 root  root    619642 Mar 25 19:59 runtimeStatsHwmOnConfig.log\n-rw-rw-rw-+  1 root  root     15953 Mar 25 19:59 secureCommunicationManager.log\n-rw-rw-rw-+  1 root  root     10193 Mar 25 19:59 securityKeyManager.log\n-rw-rw-rw-+  1 root  root   8118256 Apr  1 22:41 serviceArea.log\n-rw-rw-rw-+  1 root  root      8005 Mar 25 19:59 snmpTrapAgent.log\n-rw-rw-rw-+  1 root  root    662881 Apr  2 14:01 stateMonitor.log\n-rw-rw-rw-+  1 root  root      8048 Mar 25 19:59 systemServicesCoordinator.log\n-rw-rw-rw-+  1 root  root       672 Feb 21 00:00 tank_clean.log\n-rw-rw-rw-+  1 root  root      4893 Feb 20 23:59 tunnelProcesses.log\n-rwxrwxrwx+  1 root  root   2201622 Feb 17 13:03 web-server.log\n-rw-rw-rw-+  1 root  root        83 Feb 20 23:59 yin-and-friends.log\n-rw-rw-rw-+  1 root  root   2907035 Apr  2 13:59 zookeeperServer.log\n")),Object(a.b)("p",null,"You may have noticed that some log files are approximately 10MB large and others that have a ",Object(a.b)("inlineCode",{parentName:"p"},"file-name.#.log")," format.  128T rotates logs when it starts and if a log file reaches 10MB in size. There are a maximum number of 25 rotated files per process before the oldest one gets deleted."),Object(a.b)("p",null,"Each process that runs on a 128T writes to its own log. You can view the processes on your 128T by issuing the command ",Object(a.b)("inlineCode",{parentName:"p"},"show system processes")," in the PCLI:"),Object(a.b)("pre",null,Object(a.b)("code",Object(t.a)({parentName:"pre"},{}),"admin@branchoffice1.seattlesite1# show system processes\nMon 2018-09-10 20:10:28 UTC\n\n=============== ============================= ========= ========= =======\n Node            Process                       Status    Primary   Role\n=============== ============================= ========= ========= =======\n branchoffice1   accessManager                 running             combo\n branchoffice1   analyticsReporter             running             combo\n branchoffice1   applicationFrameworkManager   running             combo\n branchoffice1   conflux                       running             combo\n branchoffice1   databaseQueryCoordinator      running             combo\n branchoffice1   dnsManager                    running             combo\n branchoffice1   dynamicPeerUpdateManager      running             combo\n branchoffice1   highway                       running             combo\n branchoffice1   nodeMonitor                   running             combo\n branchoffice1   persistentDataManager         running             combo\n branchoffice1   redisServerManager            running             combo\n branchoffice1   routingManager                running             combo\n branchoffice1   secureCommunicationManager    running             combo\n branchoffice1   securityKeyManager            running             combo\n branchoffice1   snmpTrapAgent                 running             combo\n branchoffice1   stateMonitor                  running             combo\n branchoffice1   systemServicesCoordinator     running             combo\n\nCompleted in 0.10 seconds\n")),Object(a.b)("p",null,"The log that is currently being written to is the log that does not have a number added to its name. For example, highway.log is the current highway log while highway.1.log is the most recently rotated highway log. "),Object(a.b)("p",null,"To rotate all your logs, issue:"),Object(a.b)("pre",null,Object(a.b)("code",Object(t.a)({parentName:"pre"},{}),"admin@branchoffice1.seattlesite1# rotate log\n")),Object(a.b)("p",null,"Or if you want to rotate a specific process log file, issue:"),Object(a.b)("pre",null,Object(a.b)("code",Object(t.a)({parentName:"pre"},{}),"admin@branchoffice1.seattlesite1# rotate log node <node name> <process name>\n")),Object(a.b)("p",null,"To change your logging level, issue the command:"),Object(a.b)("pre",null,Object(a.b)("code",Object(t.a)({parentName:"pre"},{}),"admin@branchoffice1.seattlesite1# set log level <log-level>\n")),Object(a.b)("p",null,"If you want to change the log level for a single process, then issue:"),Object(a.b)("pre",null,Object(a.b)("code",Object(t.a)({parentName:"pre"},{}),"admin@branchoffice1.seattlesite1# set log level node <node name> <log-level> <process name>\n")),Object(a.b)("p",null,"Log levels are:"),Object(a.b)("ul",null,Object(a.b)("li",{parentName:"ul"},"fatal"),Object(a.b)("li",{parentName:"ul"},"error"),Object(a.b)("li",{parentName:"ul"},"warning"),Object(a.b)("li",{parentName:"ul"},"info"),Object(a.b)("li",{parentName:"ul"},"debug"),Object(a.b)("li",{parentName:"ul"},"trace")),Object(a.b)("p",null,"To go back to the default log level, then issue:"),Object(a.b)("pre",null,Object(a.b)("code",Object(t.a)({parentName:"pre"},{}),"admin@branchoffice1.seattlesite1# set log level configured\n")),Object(a.b)("p",null,"You can change your default log level by configuring under your router's system settings:"),Object(a.b)("pre",null,Object(a.b)("code",Object(t.a)({parentName:"pre"},{}),"admin@branchoffice1.seattlesite1# configure authority router <router name> system log-level <log-level>\n")),Object(a.b)("p",null,"To write messages to all logs:"),Object(a.b)("pre",null,Object(a.b)("code",Object(t.a)({parentName:"pre"},{}),'admin@branchoffice1.seattlesite1# write log "this is a test"\nLog message successfully written\nadmin@branchoffice1.seattlesite1# quit\n\n[t128@branch-1-router ~]$ tail -50 /var/log/128technology/highway.log \n...\nMay 22 23:22:51.385 [USER| -- ] INFO  (highwayManagerPo) this is a test\n\n[t128@branch-1-router ~]$ tail -50 /var/log/128technology/nodeMonitor.log \n...\nMay 22 23:22:51.384 [USER| -- ] INFO  (node  ) this is a test\n')),Object(a.b)("p",null,"To write messages to a certain process log:"),Object(a.b)("pre",null,Object(a.b)("code",Object(t.a)({parentName:"pre"},{}),'admin@branchoffice1.seattlesite1# write log node branchoffice1 "this is a test HighwayManager" highway\nLog message successfully written\nadmin@branchoffice1.seattlesite1# quit\n\n[t128@branch-1-router ~]$ tail -50 /var/log/128technology/highway.log \n\u2026\nMay 22 23:22:51.385 [USER| -- ] INFO  (highwayManagerPo) this is a test\nMay 22 23:31:01.288 [USER| -- ] INFO  (highwayManagerPo) this is a test HighwayManager\n[t128@branch-1-router ~]$ tail -50 /var/log/128technology/nodeMonitor.log \n...\nMay 22 23:22:51.384 [USER| -- ] INFO  (node  ) this is a test\n')),Object(a.b)("p",null,"When working with the 128T Support Team, you may be asked to bundle your logs. This is easy with the built-in 128T log compression utility: "),Object(a.b)("pre",null,Object(a.b)("code",Object(t.a)({parentName:"pre"},{}),"admin@branchoffice1.seattlesite1# save tech-support-info\nRetrieving Tech Support Info...\n/var/log/128technology/tech-support-info.tar.gz\nadmin@branchoffice1.seattlesite1# quit\n[t128@branch-1-router ~]$ ls -alrt /var/log/128technology/tech-support-info*\n-rw-r--r-- 1 root root   727891 Sep 12 20:11 /var/log/128technology/tech-support-info.log\n-rw-r--r-- 1 root root 2198659 Sep 12 20:11 /var/log/128technology/tech-support-info.tar.gz\n")),Object(a.b)("p",null,"This command bundles all the log files and other system environment properties that may be needed to diagnose issues related to 128T, and compresses them into a file in ",Object(a.b)("inlineCode",{parentName:"p"},"/var/log/128technology/"),"."))}b.isMDXComponent=!0},224:function(e,r,o){"use strict";o.d(r,"a",(function(){return p})),o.d(r,"b",(function(){return u}));var t=o(0),n=o.n(t);function a(e,r,o){return r in e?Object.defineProperty(e,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[r]=o,e}function l(e,r){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);r&&(t=t.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),o.push.apply(o,t)}return o}function i(e){for(var r=1;r<arguments.length;r++){var o=null!=arguments[r]?arguments[r]:{};r%2?l(Object(o),!0).forEach((function(r){a(e,r,o[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):l(Object(o)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(o,r))}))}return e}function c(e,r){if(null==e)return{};var o,t,n=function(e,r){if(null==e)return{};var o,t,n={},a=Object.keys(e);for(t=0;t<a.length;t++)o=a[t],r.indexOf(o)>=0||(n[o]=e[o]);return n}(e,r);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(t=0;t<a.length;t++)o=a[t],r.indexOf(o)>=0||Object.prototype.propertyIsEnumerable.call(e,o)&&(n[o]=e[o])}return n}var s=n.a.createContext({}),b=function(e){var r=n.a.useContext(s),o=r;return e&&(o="function"==typeof e?e(r):i(i({},r),e)),o},p=function(e){var r=b(e.components);return n.a.createElement(s.Provider,{value:r},e.children)},g={inlineCode:"code",wrapper:function(e){var r=e.children;return n.a.createElement(n.a.Fragment,{},r)}},w=n.a.forwardRef((function(e,r){var o=e.components,t=e.mdxType,a=e.originalType,l=e.parentName,s=c(e,["components","mdxType","originalType","parentName"]),p=b(o),w=t,u=p["".concat(l,".").concat(w)]||p[w]||g[w]||a;return o?n.a.createElement(u,i(i({ref:r},s),{},{components:o})):n.a.createElement(u,i({ref:r},s))}));function u(e,r){var o=arguments,t=r&&r.mdxType;if("string"==typeof e||t){var a=o.length,l=new Array(a);l[0]=w;var i={};for(var c in r)hasOwnProperty.call(r,c)&&(i[c]=r[c]);i.originalType=e,i.mdxType="string"==typeof e?e:t,l[1]=i;for(var s=2;s<a;s++)l[s]=o[s];return n.a.createElement.apply(null,l)}return n.a.createElement.apply(null,o)}w.displayName="MDXCreateElement"}}]);