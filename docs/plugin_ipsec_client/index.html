<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.64">
<link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-167298415-2","auto"),ga("set","anonymizeIp",!0),ga("send","pageview")</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
<link rel="search" type="application/opensearchdescription+xml" title="128T Docs" href="/opensearch.xml"><title data-react-helmet="true">IPsec Client plugin | 128T Docs</title><meta data-react-helmet="true" name="docsearch:version" content="current,latest"><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:title" content="IPsec Client plugin | 128T Docs"><meta data-react-helmet="true" name="description" content="The 128T-ipsec-client plugin provides a way to send and encrypt traffic to IPsec endpoints through the 128T router. It is possible to configure the plugin for each router to have multiple destination IPsec endpoints and thus the 128T will failover between them. This is accomplished by performing a Service Function Chain (SFC) with Libreswan, a third-party IPsec client. By enabling this plugin, you can provide IPsec tunnel connectivity to third party providers from your 128T router."><meta data-react-helmet="true" property="og:description" content="The 128T-ipsec-client plugin provides a way to send and encrypt traffic to IPsec endpoints through the 128T router. It is possible to configure the plugin for each router to have multiple destination IPsec endpoints and thus the 128T will failover between them. This is accomplished by performing a Service Function Chain (SFC) with Libreswan, a third-party IPsec client. By enabling this plugin, you can provide IPsec tunnel connectivity to third party providers from your 128T router."><meta data-react-helmet="true" property="og:url" content="https://docs.128technology.com/docs/plugin_ipsec_client"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="true"><link data-react-helmet="true" rel="canonical" href="https://docs.128technology.com/docs/plugin_ipsec_client"><link rel="stylesheet" href="/styles.b64930b1.css">
<link rel="preload" href="/styles.75c4618c.js" as="script">
<link rel="preload" href="/runtime~main.d29cf640.js" as="script">
<link rel="preload" href="/main.2cd7b9df.js" as="script">
<link rel="preload" href="/1.a2d28e4b.js" as="script">
<link rel="preload" href="/2.76740694.js" as="script">
<link rel="preload" href="/166.58a01472.js" as="script">
<link rel="preload" href="/169.89c9a299.js" as="script">
<link rel="preload" href="/935f2afb.2b540f84.js" as="script">
<link rel="preload" href="/17896441.a2671929.js" as="script">
<link rel="preload" href="/ab8ea87d.e50c6e46.js" as="script">
</head>
<body>
<script>!function(){function e(e){document.documentElement.setAttribute("data-theme",e)}var t=function(){var e=null;try{e=localStorage.getItem("theme")}catch(e){}return e}();null!==t?e(t):window.matchMedia("(prefers-color-scheme: dark)").matches?e("dark"):(window.matchMedia("(prefers-color-scheme: light)").matches,e("light"))}()</script><div id="__docusaurus">
<nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/"><img class="navbar__logo" src="/img/logo.svg" alt="Juniper Logo"><strong class="navbar__title">Session Smart</strong></a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/docs/intro_getting_started">Docs</a><a href="https://community.128technology.com/home" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Interchange</a><a href="https://www.128technology.com/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Company</a><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span><span class="DocSearch-Button-Key">âŒ˜</span><span class="DocSearch-Button-Key">K</span></button></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img class="navbar__logo" src="/img/logo.svg" alt="Juniper Logo"><strong class="navbar__title">Session Smart</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/intro_getting_started">Docs</a></li><li class="menu__list-item"><a href="https://community.128technology.com/home" target="_blank" rel="noopener noreferrer" class="menu__link">Interchange</a></li><li class="menu__list-item"><a href="https://www.128technology.com/" target="_blank" rel="noopener noreferrer" class="menu__link">Company</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_2gpo"><div class="docSidebarContainer_3_JD" role="complementary"><div class="sidebar_2urC"><div class="menu menu--responsive menu_5FrY"><button aria-label="Open Menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_Dm3K" xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 32 32" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">About</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/about_128t">128T</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/about_svr_savings">Secure Vector Routing Savings</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/about_releases">128T Releases</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/about_support_policy">Software Support Policy</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/about_supported_platforms">Platform Support Policy</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/about_supported_drivers">Supported NICs and Drivers</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/about_certified_platforms">Certified Plus Platforms</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/about_security_policy">Security Policy</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/about_services_description">Services Description</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/CONTRIBUTING">Contributing</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Introduction</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/intro_getting_started">Getting Started with the 128T Networking Platform</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Deployment Considerations</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/intro_system_reqs">System Requirements</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Installation Process</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/intro_installation">Installation Overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/intro_downloading_iso">Downloading ISOs</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/intro_creating_bootable_usb">Creating Bootable USB</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/intro_installation_bootable_media">Conductor Interactive Installation</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/intro_basic_conductor_config">Configure the Conductor</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/intro_basic_router_config">Basic Router Configuration</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/intro_otp_iso_install">Router Installation Using OTP</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/intro_install_quickstart_otpiso">QuickStart from the OTP ISO</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Cloud Installations</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/intro_installation_aws">Installing from the AWS Marketplace</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/intro_installation_quickstart_aws">QuickStart Installation in AWS</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/intro_installation_azure">Installing in Azure</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/intro_initialize_HA_conductor">Conductor High Availability for Cloud Deployments</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Supporting Information - Appendix</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/intro_installation_installer">Manually Installing the 128T</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/legacy_OTP_install">Installing Using the Pre-5.0 Interactive ISO</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/intro_upgrade_considerations">Upgrade Considerations</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/intro_upgrading">Upgrading</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/intro_rollback">Rollback</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Concepts</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/concepts_application_discovery">Application Discovery</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/concepts_appid">Application Identification</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/concepts_EthOverSVR">Ethernet Over Secure Vector Routing</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/concepts_ha_theoryofoperation">HA - Theory of Operation</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/concepts_interface_types">Interface Types</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/concepts_kni">Kernel Network Interfaces</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/concepts_linux_host_networking">Linux Host Networking</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/concepts_learning_VRF_routes">Learning VRF Routes</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/concepts_network_planes">Forwarding Planes</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/concepts_metadata">128T Metadata</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/concepts_metrics">Metrics</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/concepts_machine_communication">Machine Communication</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/concepts_pcli">PCLI</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/concepts_session_timer">Session Timers</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/concepts_STEP">Service and Topology Exchange Protocol (STEP)</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/concepts_waypoint_ports">Waypoints</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/concepts_glossary">Glossary</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Administration</a><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Configuration</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config_basics">Configuration Management</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config_access_mgmt">Access Management</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config_asset_connection_resiliency">Asset Connection Resiliency</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config_bgp">Configuring BGP</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config_vrf_learning">VRF Learning via BGP</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config_reference_guide">Element Reference</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config_audit_event">Audit Events</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config_dhcp">DHCP</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config_dns_proxy">DNS Proxy</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config_ldap">LDAP</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config_management_over_forwarding">Management over Forwarding</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config_domain-based_web_filter">Configuring Domain-based Web Filtering/Routing</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config_EthoSVR">Configuring Ethernet Over Secure Vector Routing</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config_service_health">Service Health Learning and Fault Avoidance</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config_gre_tunnel">Native GRE Tunnels</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config_in-memory_metrics">In-Memory Metrics</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config_ha">High Availability</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config_dual_router_ha">High Availability (Dual Router)</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config_non_forwarding_ha_interfaces">Non-forwarding HA Interfaces</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config_adding_interfaces_to_ha_team">Adding Interfaces to HA Team Interface</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config_transition_standalone_to_ha">Transitioning a Conductor from Standalone to HA</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config_nat">NAT</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config_ospf">OSPF</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config_rate_limiting">Rate Limiting</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config_RBAC">Configuring Role-Based Access Control</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config_snmp">SNMP</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config_snmp_metrics">SNMP: User defined metrics</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config_static_hostname_mapping">Static Hostname Mappings</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config_STEP">Configuring Service and Topology Exchange Protocol (STEP)</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config_tenants">Tenants</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config_templates">Configuration Templates</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Security</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/sec_adaptive_encrypt">Adaptive Encryption</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">How To</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/howto_conductor_migration">Conductor Migration</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/howto_extend_gui_nav">Extending GUI Nav</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/howto_lte">LTE and Dual LTE Configuration</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/howto_config_PPPoE">Configuring Dual PPPoE</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/howto_maintenance_mode">Maintenance Mode</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/howto_ms365">Microsoft 365</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/howto_trusted_ca_certificate">Adding a Trusted Certificate</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/howto_tune_bfd">Tuning BFD</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Troubleshooting</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/ts_applications">Application Troubleshooting</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/ts_ap_duplicate_assets">AP: Duplicate Asset ID Error</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/ts_ap_salt_minion">AP: Salt Minion</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/ts_cpu_spikes">CPU Spikes</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/ts_connecting_to_routers">Connecting to Routers</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/ts_forwarding_resource_pools">Forwarding Plane Resource Pools</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/ts_logs">Logs</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/ts_mac_uniqueness">MAC Address Uniqueness</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/ts_packet_capture">Packet Capture</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/ts_t1_troubleshooting">T1 Troubleshooting</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/ts_troubleshooting_vrf">Troubleshooting VRF</a></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Events</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/events_overview">Alarm and Events</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/events_alarms">Alarms</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/events_events">Events</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Best Practices</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/bcp_att_avpn_configuration">AT&amp;T AVPN Configuration</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/bcp_using_128T_as_ntp_server">Branch NTP Service</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/bcp_conductor_deployment">Conductor Deployment</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/bcp_qos_msft_expressroute">ExpressRoute QoS Configuration</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/bcp_lte_peering">LTE Peering</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/bcp_monitoring_headends">Monitoring Head End Routers</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/bcp_salt_pillars">Saltstack at Scale With 128T</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/bcp_sdwan_design_guide">SD-WAN Design Guide</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/bcp_service_and_service_policy_design">Service and Service Policy Design</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/bcp_service-policy_defaults">Service Policy Baseline Defaults</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/bcp_tenants">Tenancy Design</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">CLI Reference</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/cli_reference">Command Line Reference</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/cli_stats_reference">Show Stats Reference</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Installer/Initializer Reference</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/installer_cli_reference">Installer Command Line Reference</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/installer_preferences">Installer Preferences File Reference</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/initializer_cli_reference">Initializer Command Line Reference</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/initializer_preferences">Initializer Preferences File Reference</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Plugins</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/plugin_intro">Introduction</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/plugin_bgp_community_services">BGP Community Services</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/plugin_aws_tgw_connect">AWS Transit Gateway Connect</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/plugin_cloud_ha">Cloud HA</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/plugin_dns_app_id">DNS App Id</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/plugin_dns_cache">DNS Cache</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/plugin_gre">GRE</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/plugin_icmp_reachability_detection">ICMP Reachability Detection</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/docs/plugin_ipsec_client">IPsec Client</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/plugin_loopback_static_routes">Loopback Static Routes</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/plugin_m800_watchdog">M800 Watchdog</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/plugin_monitoring_agent">Monitoring Agent</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/plugin_mosh">Mosh</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/plugin_set_hostname">Set Hostname</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/plugin_sip_alg">SIP ALG</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/plugin_wireguard">Wireguard</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/plugin_kni_namespace_scripts">KNI Namespace Scripts</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">REST APIs</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/api_rest_4.2.0">128T-4.2.0</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Release Notes</a><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">128T</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/release_notes_128t_5.3">5.3</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/release_notes_128t_5.2">5.2</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/release_notes_128t_5.1">5.1</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/release_notes_128t_5.0">5.0</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/release_notes_128t_4.5">4.5</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/release_notes_128t_4.4">4.4</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/release_notes_128t_4.3">4.3</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/release_notes_128t_4.2">4.2</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/release_notes_128t_4.1">4.1</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/release_notes_128t_4.0">4.0</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">128T Installer</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/release_notes_128t_installer_3.0">3.0</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/release_notes_128t_installer_2.7">2.7</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/release_notes_128t_installer_2.6">2.6</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/release_notes_128t_installer_2.5">2.5</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/release_notes_128t_installer_2.4">2.4</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/release_notes_128t_installer_2.3">2.3</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/release_notes_128t_installer_2.2">2.2</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/release_notes_128t_installer_2.1">2.1</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">128T SIP ALG</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/release_notes_128t_sip_alg_2.1">2.1</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">128T ZScaler</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/release_notes_128t_zscaler_1.1">1.1</a></li></ul></li></ul></li></ul></div></div></div><main class="docMainContainer_3EyW"><div class="container padding-vert--lg docItemWrapper_1EkI"><div class="row"><div class="col docItemCol_2ASc"><div class="docItemContainer_3QWW"><article><header><h1 class="docTitle_1Lrw">IPsec Client plugin</h1></header><div class="markdown"><p>The 128T-ipsec-client plugin provides a way to send and encrypt traffic to IPsec endpoints through the 128T router. It is possible to configure the plugin for each router to have multiple destination IPsec endpoints and thus the 128T will failover between them. This is accomplished by performing a <a href="/docs/plugin_intro#service-function-chaining">Service Function Chain (SFC)</a> with Libreswan, a third-party IPsec client. By enabling this plugin, you can provide IPsec tunnel connectivity to third party providers from your 128T router.</p><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>The instructions for installing and managing the plugin can be found <a href="/docs/plugin_intro#installation-and-management">here</a>.</p></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="configuration"></a>Configuration<a aria-hidden="true" tabindex="-1" class="hash-link" href="#configuration" title="Direct link to heading">#</a></h2><p>In the below configuration examples, there are two of each plugin configuration element. The first has all configuration elements explicitly configured with the defaults if applicable and the other is the bare minimum using all of the default values. The values enclosed in <code>&lt;&gt;</code> are fields that didnâ€™t have default values specified by the plugin. If any of these optional, non-defaulted fields are unspecified, then they will use the Libreswan defaults which can be found <a href="https://libreswan.org/man/ipsec.conf.5.html" target="_blank" rel="noopener noreferrer">here</a>. The values enclosed in <code>[]</code> are fields that didn&#x27;t have default values specified by the plugin and will not be included in the generated 128T configuration.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="profiles"></a>Profiles<a aria-hidden="true" tabindex="-1" class="hash-link" href="#profiles" title="Direct link to heading">#</a></h3><p>Profiles are reusable IPsec settings that can be used across multiple nodes in a router and multiple IPsec endpoint <code>remote</code>s.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">router</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   ipsec-profile gateway1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">       name gateway1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">       ike-encryption aes128</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">       ike-digest sha1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">       ike-modp modp1024</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">       ike-v2 insist</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">       authentication-protocol esp</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">       phase2-encryption null</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">       phase2-digest md5</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">       phase2-modp modp1024</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">       ike-lifetime 1h</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">       connection-lifetime 8h</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">       ike-retransmit-interval &lt;ike-retransmit-interval&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">       compress false</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">       perfect-forward-secrecy false</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">       dpddelay &lt;dpddelay&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">       dpdtimeout &lt;dpdtimeout&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">       dpdaction restart</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">       local-id &lt;local-id&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">       metric &lt;metric&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">       mtu &lt;mtu&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">       pre-shared-key psk1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   exit</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   ipsec-profile gateway2</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">       name gateway2</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">       pre-shared-key psk2</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   exit</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">exit</span></div></div></div></div></div><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>This plugin can only connect to IPsec endpoints that support pre-shared key authentication.</p></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="clients"></a>Clients<a aria-hidden="true" tabindex="-1" class="hash-link" href="#clients" title="Direct link to heading">#</a></h3><p>Clients are a collection of remote endpoints which can be used for failover purposes.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">node</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    ipsec-client client1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        name client1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        enabled true</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        tenant t1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        remote c1gateway1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            name c1gateway1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            host gateway1.com</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            profile gateway1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            vector-name [vector-name]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            tenant [tenant]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            subnet &lt;subnet&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            remote-id &lt;remote-id&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        exit</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        remote c1gateway2</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            name gateway2</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            host gateway2.com</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            profile gateway2</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        exit</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    exit</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">exit</span></div></div></div></div></div><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>Only one <code>ipsec-client</code> can be configured per node, but two <code>remote</code>s can be configured per client.</p></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="generated-128t-configuration"></a>Generated 128T Configuration<a aria-hidden="true" tabindex="-1" class="hash-link" href="#generated-128t-configuration" title="Direct link to heading">#</a></h3><p>A KNI per remote is created with the name of the <code>remote</code> and a single egress KNI is created with the name of the <code>ipsec-client</code>.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="user-specific-128t-configuration"></a>User-Specific 128T Configuration<a aria-hidden="true" tabindex="-1" class="hash-link" href="#user-specific-128t-configuration" title="Direct link to heading">#</a></h3><p>To allow the maximum flexibility on getting the traffic into the plugin&#x27;s network namespace and getting the traffic out, we rely on the user to configure those means (usually through services and service routes).</p><p>You will need to have the IPsec endpoint bound traffic sent into the KNIs with the names of the <code>remote</code>s. You can use builtin 128T failover techniques due to the KNIs being reported operationally down when the corresponding tunnel is down. You will also need to configure a way for the traffic to be routed towards the IPsec endpoint after being encrypted. All of this encrypted traffic will be assigned to the <code>tenant</code> configured under <code>ipsec-client</code>.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="complete-example-configuration"></a>Complete Example Configuration<a aria-hidden="true" tabindex="-1" class="hash-link" href="#complete-example-configuration" title="Direct link to heading">#</a></h3><p>Below is an example of a complete, but minimal configuration entered by the user.</p><div class="admonition admonition-warning alert alert--danger"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"></path></svg></span>warning</h5></div><div class="admonition-content"><p>This example configuration is good to understand all of the concepts but should not be used on a system as is.</p></div></div><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">config</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    authority</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        tenant ipsec</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        exit</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        tenant lan</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        exit</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        service         cleartext</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            name            cleartext</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            address         1.1.1.0/24</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            access-policy   lan</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                source      lan</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                permission  allow</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            exit</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        exit</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        service         ipsec</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            name           ipsec</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            address        172.16.4.3</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            access-policy  ipsec</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                source      ipsec</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                permission  allow</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            exit</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        exit</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        router               router1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            ipsec-profile         primary</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                name                 primary</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                pre-shared-key       somekey1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            exit</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            ipsec-profile         secondary</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                name                 secondary</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                pre-shared-key       somekey2</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            exit</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            node node1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                device-interface          lan</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                    name               lan</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                    network-interface  lanintf</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                        name          lanintf</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                        tenant        lan</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                        address       172.16.1.2</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                            ip-address     172.16.1.2</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                            prefix-length  24</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                            gateway        2.2.2.1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                        exit</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                    exit</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                exit</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                device-interface          wan</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                    name               wan</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                    network-interface  wanintf</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                        name          wanintf</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                        address       172.16.3.2</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                            ip-address     172.16.3.2</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                            prefix-length  24</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                            gateway        172.16.3.5</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                        exit</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                    exit</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                exit</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                ipsec-client              client1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                    name     client1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                    enabled  true</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                    tenant   ipsec</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                    remote   rem1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                        name     rem1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                        host     172.16.4.3</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                        profile  primary</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                    exit</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                    remote   rem2</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                        name     rem2</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                        host     172.16.5.4</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                        profile  secondary</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                    exit</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                exit</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            exit</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            service-route         rem1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                name          rem1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                service-name  cleartext</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                next-hop      router1 rem1-intf</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                    node-name   router1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                    interface   rem1-intf</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                    gateway-ip  169.254.129.6</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                exit</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            exit</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            service-route         rem2</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                name          rem2</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                service-name  cleartext</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                next-hop      router1 rem2-intf</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                    node-name   router1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                    interface   rem2-intf</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                    gateway-ip  169.254.129.10</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                exit</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            exit</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            service-route         ipsec</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                name          ipsec</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                service-name  ipsec</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                next-hop      router1 wanintf</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                    node-name   router1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                    interface   wanintf</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                    gateway-ip  172.16.3.5</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                exit</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            exit</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        exit</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    exit</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">exit</span></div></div></div></div></div><p>Upon commit, the plugin will generate other configuration as shown below:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">config</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    authority</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        router router1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            node node1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                device-interface          client1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                    name               client1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                    description        &quot;Auto-generated host interface for use with ipsec-client&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                    type               host</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                    network-namespace  client1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                    network-interface  client1-intf</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                        name       client1-intf</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                        type       external</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                        tenant     ipsec</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                        address    169.254.129.1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                            ip-address     169.254.129.1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                            prefix-length  30</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                            gateway        169.254.129.2</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                        exit</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                    exit</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                exit</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                device-interface          rem1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                    name               rem1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                    description        &quot;Auto-generated host interface for use with ipsec-client&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                    type               host</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                    network-namespace  client1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                    network-interface  rem1-intf</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                        name       rem1-intf</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                        type       external</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                        tenant     _internal_</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                        address    169.254.129.5</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                            ip-address     169.254.129.5</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                            prefix-length  30</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                            gateway        169.254.129.6</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                        exit</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                    exit</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                exit</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                device-interface          rem2</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                    name               rem2</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                    description        &quot;Auto-generated host interface for use with ipsec-client&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                    type               host</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                    network-namespace  client1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                    network-interface  rem2-intf</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                        name       rem2-intf</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                        type       external</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                        tenant     _internal_</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                        address    169.254.129.9</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                            ip-address     169.254.129.9</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                            prefix-length  30</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                            gateway        169.254.129.10</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                        exit</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                    exit</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                exit</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            exit</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        exit</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    exit</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">exit</span></div></div></div></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="thirdparty-software--licenses"></a>Thirdparty Software &amp; Licenses<a aria-hidden="true" tabindex="-1" class="hash-link" href="#thirdparty-software--licenses" title="Direct link to heading">#</a></h2><ul><li>Libreswan v3.23-5.el7_5 (GNU GPLv2)</li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="troubleshooting"></a>Troubleshooting<a aria-hidden="true" tabindex="-1" class="hash-link" href="#troubleshooting" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="data-model"></a>Data Model<a aria-hidden="true" tabindex="-1" class="hash-link" href="#data-model" title="Direct link to heading">#</a></h3><p>If the data model doesnâ€™t appear in the PCLI or GUI, make sure that you have restarted the 128T service.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="logging"></a>Logging<a aria-hidden="true" tabindex="-1" class="hash-link" href="#logging" title="Direct link to heading">#</a></h3><p>The <code>/var/log/128technology/persistentDataManager.log</code> file at trace level will hold whether the configuration generation was run as well as output and return code.
The <code>/var/log/128technology/automatedProvisioner.log</code> file at trace level will hold whether the pillar generation was run as well as output and return code.
Configuration and pillar generation logs can be found on the conductor under <code>/var/log/128technology/plugins/ipsec-client-config-generation.log</code> and <code>/var/log/128technology/plugins/ipsec-client-pillar-generation.log</code> respectively.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="salt"></a>Salt<a aria-hidden="true" tabindex="-1" class="hash-link" href="#salt" title="Direct link to heading">#</a></h3><p>Salt status can be found on the conductor by utilizing the PCLIâ€™s <code>show assets</code> and <code>show assets &lt;asset-id&gt;</code> commands.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="pcli-enhancements"></a>PCLI Enhancements<a aria-hidden="true" tabindex="-1" class="hash-link" href="#pcli-enhancements" title="Direct link to heading">#</a></h3><p>To check the status of the IPsec tunnels for a given ingress KNI, extra IPsec tunnel related output will be found in the <code>show device-interface</code> command.</p><p>Example output for a healthy tunnel:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">admin@combo-west.RTR_WEST_COMBO# show device-interface name rem2</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Tue 2020-06-30 16:44:39 UTC</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">=========================================================</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> combo-west:rem2</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">=========================================================</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> Type:                host</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> Forwarding:          true</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> Mode:                host</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> MAC Address:         22:ee:4e:b6:37:a8</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> Admin Status:        up</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> Operational Status:  up</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> Redundancy Status:   non-redundant</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> Speed:               1000</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> Duplex:              full</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> in-octets:                        9992</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> in-unicast-pkts:                   161</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> in-errors:                           0</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> out-octets:                       6986</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> out-unicast-pkts:                  161</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> out-errors:                         11</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> IPSec:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     Tunnel Status:   Up</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     Tunnel Details:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">         Name:        ipsec-client-tunnel-secondary-rem2</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">         Remote id:   172.16.5.4</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">         SA creation time:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">           2020-06-30 16:37:50</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">         In bytes:    0</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">         Out bytes:   336</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     SA Count:        1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Completed in 0.12 seconds</span></div></div></div></div></div><p>Example output for a tunnel that is down:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">========================================</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> combo-west:rem1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">========================================</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> Type:                host</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> Forwarding:          true</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> Mode:                host</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> MAC Address:         76:78:79:fc:eb:69</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> Admin Status:        up</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> Operational Status:  down</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> Redundancy Status:   non-redundant</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> Speed:               0</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> Duplex:              unknown</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> in-octets:                     1962932</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> in-unicast-pkts:                 32710</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> in-errors:                           0</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> out-octets:                    1373442</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> out-unicast-pkts:                32701</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> out-errors:                          6</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> IPSec:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   Tunnel Status:     Down</span></div></div></div></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="systemd-services"></a>Systemd Services<a aria-hidden="true" tabindex="-1" class="hash-link" href="#systemd-services" title="Direct link to heading">#</a></h3><p>To check the status of the IPsec client service on the router, you can run <code>show system services</code> which will show all 128T related services running on the specified node. The one for this plugin is named <code>128t-ipsec</code>.</p><p>To verify that the services are running properly on the 128T router:</p><ul><li><code>systemctl status 128t-ipsec@&lt;client&gt;.service</code></li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="failover-alarms"></a>Failover Alarms<a aria-hidden="true" tabindex="-1" class="hash-link" href="#failover-alarms" title="Direct link to heading">#</a></h3><p>If a tunnel goes down, we set the corresponding ingress KNI to be operationally down. An alarm will be created when this happens.</p><p>Example output when the tunnel for <code>rem1</code> goes down:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-admin@combo-west.RTR_WEST_COMBO# codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">Tue 2020-06-30 16:42:50 UTC</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">============== ===================== ========== ============= =========== ==================================</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> ID             Time                  Severity   Source        Category    Message</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">============== ===================== ========== ============= =========== ==================================</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> combo-west:8   2020-06-30 16:32:42   critical   unavailable   interface   Intf rem1 (4) operationally down</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">There are 0 shelved alarms</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Completed in 0.10 seconds</span></div></div></div></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="release-notes"></a>Release Notes<a aria-hidden="true" tabindex="-1" class="hash-link" href="#release-notes" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="release-220-310"></a>Release 2.2.0, 3.1.0<a aria-hidden="true" tabindex="-1" class="hash-link" href="#release-220-310" title="Direct link to heading">#</a></h3><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="new-features-and-improvements"></a>New Features and Improvements<a aria-hidden="true" tabindex="-1" class="hash-link" href="#new-features-and-improvements" title="Direct link to heading">#</a></h4><ul><li><strong>PLUGIN-1289</strong> Ability to provision custom MSS on the remote tunnel interfaces</li></ul><p>The feature adds support for configuring a custom MSS value on the remote IPSec tunnel interface. The new configuration can be found under <code>router &gt; node &gt; ipsec-client &gt; remote &gt; enforced-mss</code>. The configuration follows the same format as the <a href="/docs/config_reference_guide/#network-interface">network-interface &gt; enforced-mss</a>.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="release-107-207-210-302"></a>Release 1.0.7, 2.0.7, 2.1.0, 3.0.2<a aria-hidden="true" tabindex="-1" class="hash-link" href="#release-107-207-210-302" title="Direct link to heading">#</a></h3><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="issues-fixed"></a>Issues Fixed<a aria-hidden="true" tabindex="-1" class="hash-link" href="#issues-fixed" title="Direct link to heading">#</a></h4><ul><li><p><strong>PLUGIN-1092</strong> IPSec left and right subnet configuration does not always work correctly</p><p><em><strong>Resolution:</strong></em> The non-default left and right subnet configuration is correctly translated to corresponding libreswan configuration.</p></li><li><p><strong>PLUGIN-1103</strong> IPSec remote host does not appear as link on the GUI</p><p><em><strong>Resolution:</strong></em> The GUI presentation model was updated to include the missing key field.</p></li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="release-301"></a>Release 3.0.1<a aria-hidden="true" tabindex="-1" class="hash-link" href="#release-301" title="Direct link to heading">#</a></h3><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="issues-fixed-1"></a>Issues Fixed<a aria-hidden="true" tabindex="-1" class="hash-link" href="#issues-fixed-1" title="Direct link to heading">#</a></h4><ul><li><strong>PLUGIN-1092</strong> Added fix for local and remote subnet configuration option to allow a single value or a list of values.</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="release-300"></a>Release 3.0.0<a aria-hidden="true" tabindex="-1" class="hash-link" href="#release-300" title="Direct link to heading">#</a></h3><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="issues-fixed-2"></a>Issues Fixed<a aria-hidden="true" tabindex="-1" class="hash-link" href="#issues-fixed-2" title="Direct link to heading">#</a></h4><ul><li><strong>PLUGIN-768</strong> Support the IPSec client plugin in 128T versions <code>5.1.0</code> and greater.</li><li><strong>PLUGIN-611</strong> Added support for plugin state. Plugin state information can be accessed on the PCLI using <code>show plugins state [router &lt;router&gt;] [node &lt;node&gt;] [{detail | summmary}] 128T-ipsec-client</code></li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="release-106-206"></a>Release 1.0.6, 2.0.6<a aria-hidden="true" tabindex="-1" class="hash-link" href="#release-106-206" title="Direct link to heading">#</a></h3><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="issues-fixed-3"></a>Issues Fixed<a aria-hidden="true" tabindex="-1" class="hash-link" href="#issues-fixed-3" title="Direct link to heading">#</a></h4><ul><li><strong>PLUGIN-1057</strong> Ensure all critical IPsec client directories are created during installation of the plugin.</li><li><strong>PLUGIN-1053</strong> Added an inactive IPsec client plugin state to allow seamless migration from zscaler. The inactive state is achieved by excluding <code>ipsec-client</code> from the configuration.</li><li><strong>PLUGIN-1046</strong> Provide IPsec client auto-upgrade capability while crossing the 128T version <code>4.3.0</code> boundary.</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="release-105-205"></a>Release 1.0.5, 2.0.5<a aria-hidden="true" tabindex="-1" class="hash-link" href="#release-105-205" title="Direct link to heading">#</a></h3><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="issues-fixed-4"></a>Issues Fixed<a aria-hidden="true" tabindex="-1" class="hash-link" href="#issues-fixed-4" title="Direct link to heading">#</a></h4><ul><li><strong>PLUGIN-994</strong> The <code>ipsec-client &gt; remote-id</code> configuration is not being used correctly when generating the libreswan config.</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="release-104-204"></a>Release 1.0.4, 2.0.4<a aria-hidden="true" tabindex="-1" class="hash-link" href="#release-104-204" title="Direct link to heading">#</a></h3><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="issues-fixed-5"></a>Issues Fixed<a aria-hidden="true" tabindex="-1" class="hash-link" href="#issues-fixed-5" title="Direct link to heading">#</a></h4><ul><li><strong>PLUGIN-384</strong> Added an MTU configuration option to the ipsec profile.</li><li><strong>PLUGIN-333</strong> The <code>plugin-network</code> ip prefix setting in the configuration was ignored and would instead use the default ip prefix setting.</li><li><strong>PLUGIN-336</strong> Using the <code>vector-name</code> configuration option would generate invalid configuration.</li><li><strong>PLUGIN-400</strong> Added a local subnet configuration option and enhanced the remote subnet configuration option to allow a list of values.</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="release-101-201"></a>Release 1.0.1, 2.0.1<a aria-hidden="true" tabindex="-1" class="hash-link" href="#release-101-201" title="Direct link to heading">#</a></h3><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="issues-fixed-6"></a>Issues Fixed<a aria-hidden="true" tabindex="-1" class="hash-link" href="#issues-fixed-6" title="Direct link to heading">#</a></h4><ul><li><strong>PLUGIN-47</strong> Created generic IPsec client plugin to provide connectivity to remote ipsec endpoints. This version supports a single client with up to two remote endpoints.</li></ul></div></article><div class="margin-vert--xl"><div class="row"><div class="col"></div><div class="col text--right"><em><small>Last updated on <time datetime="2021-09-08T00:21:02.000Z" class="docLastUpdatedAt_217_">9/8/2021</time></small></em></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/plugin_icmp_reachability_detection"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« ICMP Reachability Detection Plugin</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/plugin_loopback_static_routes"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Loopback Static Routes Plugin Â»</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_3SO_"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#configuration" class="table-of-contents__link">Configuration</a><ul><li><a href="#profiles" class="table-of-contents__link">Profiles</a></li><li><a href="#clients" class="table-of-contents__link">Clients</a></li><li><a href="#generated-128t-configuration" class="table-of-contents__link">Generated 128T Configuration</a></li><li><a href="#user-specific-128t-configuration" class="table-of-contents__link">User-Specific 128T Configuration</a></li><li><a href="#complete-example-configuration" class="table-of-contents__link">Complete Example Configuration</a></li></ul></li><li><a href="#thirdparty-software--licenses" class="table-of-contents__link">Thirdparty Software &amp; Licenses</a></li><li><a href="#troubleshooting" class="table-of-contents__link">Troubleshooting</a><ul><li><a href="#data-model" class="table-of-contents__link">Data Model</a></li><li><a href="#logging" class="table-of-contents__link">Logging</a></li><li><a href="#salt" class="table-of-contents__link">Salt</a></li><li><a href="#pcli-enhancements" class="table-of-contents__link">PCLI Enhancements</a></li><li><a href="#systemd-services" class="table-of-contents__link">Systemd Services</a></li><li><a href="#failover-alarms" class="table-of-contents__link">Failover Alarms</a></li></ul></li><li><a href="#release-notes" class="table-of-contents__link">Release Notes</a><ul><li><a href="#release-220-310" class="table-of-contents__link">Release 2.2.0, 3.1.0</a></li><li><a href="#release-107-207-210-302" class="table-of-contents__link">Release 1.0.7, 2.0.7, 2.1.0, 3.0.2</a></li><li><a href="#release-301" class="table-of-contents__link">Release 3.0.1</a></li><li><a href="#release-300" class="table-of-contents__link">Release 3.0.0</a></li><li><a href="#release-106-206" class="table-of-contents__link">Release 1.0.6, 2.0.6</a></li><li><a href="#release-105-205" class="table-of-contents__link">Release 1.0.5, 2.0.5</a></li><li><a href="#release-104-204" class="table-of-contents__link">Release 1.0.4, 2.0.4</a></li><li><a href="#release-101-201" class="table-of-contents__link">Release 1.0.1, 2.0.1</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container"><div class="text--center"><div>Copyright Â© 2021 Juniper Networks, Inc.</div></div></div></footer></div>
<script src="/styles.75c4618c.js"></script>
<script src="/runtime~main.d29cf640.js"></script>
<script src="/main.2cd7b9df.js"></script>
<script src="/1.a2d28e4b.js"></script>
<script src="/2.76740694.js"></script>
<script src="/166.58a01472.js"></script>
<script src="/169.89c9a299.js"></script>
<script src="/935f2afb.2b540f84.js"></script>
<script src="/17896441.a2671929.js"></script>
<script src="/ab8ea87d.e50c6e46.js"></script>
</body>
</html>