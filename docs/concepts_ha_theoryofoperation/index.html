<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-concepts_ha_theoryofoperation">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.3.1">
<title data-rh="true">High Availability - Theory of Operation | SSN Docs</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://docs.128technology.com/docs/concepts_ha_theoryofoperation"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="High Availability - Theory of Operation | SSN Docs"><meta data-rh="true" name="description" content="This document describes the most common set of deployment models for taking two instances of SSR routing software (referred to as “nodes”) and deploying those nodes together to provide high availability. The SSR routing software presents several deployment options for high availability, including:"><meta data-rh="true" property="og:description" content="This document describes the most common set of deployment models for taking two instances of SSR routing software (referred to as “nodes”) and deploying those nodes together to provide high availability. The SSR routing software presents several deployment options for high availability, including:"><link data-rh="true" rel="icon" href="/img/favicon.png"><link data-rh="true" rel="canonical" href="https://docs.128technology.com/docs/concepts_ha_theoryofoperation"><link data-rh="true" rel="alternate" href="https://docs.128technology.com/docs/concepts_ha_theoryofoperation" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.128technology.com/docs/concepts_ha_theoryofoperation" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.8e1fdc51.css">
<link rel="preload" href="/assets/js/runtime~main.737fa250.js" as="script">
<link rel="preload" href="/assets/js/main.b845ed4e.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.png" alt="Juniper Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/logo_dark.png" alt="Juniper Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate"></b></a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/docs/intro_getting_started">Docs</a><a href="https://community.juniper.net/answers/communities/community-home?CommunityKey=310d1a41-12fa-4627-9a99-880145a7c87c" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Community<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://www.juniper.net/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Company<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="searchBox_ZlJk"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/about_128t">About</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/intro_getting_started">Introduction</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/intro_system_reqs">Deployment Considerations</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/intro_installation">Installation Process</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/install_conductor_overview">Conductor Installation</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/intro_installation_bootable_media">Router Installation</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/intro_installation_image">Image-Based Installation</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/supported_cloud_platforms">Cloud Installations</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/intro_upgrade_considerations">Upgrades and Rollback</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/intro_installation_installer">Supporting Install Information - Appendix</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/docs/concepts_application_discovery">Concepts</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/concepts_application_discovery">Application Discovery</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/concepts_appid">Application Identification</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/concepts_EthOverSVR">Ethernet Over Secure Vector Routing</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/concepts_ha_theoryofoperation">HA - Theory of Operation</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/concepts_interface_types">Interface Types</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/concepts_kni">Kernel Network Interfaces</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/concepts_linux_host_networking">Linux Host Networking</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/concepts_learning_VRF_routes">Learning VRF Routes</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/concepts_network_planes">Forwarding Planes</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/concepts_metadata">SSR Metadata</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/concepts_metrics">Metrics</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/concepts_machine_communication">Machine Communication</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/concepts_pcli">PCLI</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/concepts_session_timer">Session Timers</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/concepts_STEP">Service and Topology Exchange Protocol (STEP)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/concepts_waypoint_ports">Waypoints</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/concepts_glossary">Glossary</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/wan_overview">WAN Assurance</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/config_basics">Administration</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/events_overview">Events</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/bcp_att_avpn_configuration">Best Practices</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/cli_reference">CLI and Element Reference</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/installer_cli_reference">Installer/Initializer Reference</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/plugin_intro">Plugins</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/release_notes_128t_6.1">Release Notes</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Concepts</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">HA - Theory of Operation</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>High Availability - Theory of Operation</h1></header><p>This document describes the most common set of deployment models for taking two instances of SSR routing software (referred to as “nodes”) and deploying those nodes together to provide high availability. The SSR routing software presents several deployment options for high availability, including:</p><ul><li><strong>Dual node high availability</strong>: where two nodes form one logical router, with shared state and a &quot;fabric&quot; backplane between them.</li><li><strong>Dual router high availability</strong>: where two nodes form two logical routers, with no shared state. This is a familiar approach to administrators accustomed to deploying pairs of legacy routing platforms.</li></ul><p>This document will describe the benefits and caveats of each of these models, as well as delving into other architectural decisions that should be considered when deploying highly available systems.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="intended-audience">Intended Audience<a href="#intended-audience" class="hash-link" aria-label="Direct link to Intended Audience" title="Direct link to Intended Audience">​</a></h2><p>This document is intended for network architects, and is to be used as a guideline during the network design phase of deployment.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="introduction">Introduction<a href="#introduction" class="hash-link" aria-label="Direct link to Introduction" title="Direct link to Introduction">​</a></h2><p>High availability (or “HA”) is the practice of deploying additional network elements for traffic resiliency, to account for link or system downtime. In general, we encourage the deployment of highly available routers and conductors, as this will provide service continuity in the event of network failures, software faults, or hardware downtime (both scheduled and unscheduled).</p><div class="theme-admonition theme-admonition-note alert alert--secondary admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_S0QG"><p>There are other types of protection afforded SSR-powered networks, including path protection (via peer path selection) and link impairment protection (via session resiliency features, packet duplication, packet retransmitions, etc.), but these are not a consequence of supplying two nodes to mitigate the impact of failures.</p></div></div><p>This document will define the terms used to describe the SSR’s implementation of high availability, describe the various configurable elements associated with high availability, and how they can be set and/or tuned in order to afford maximal protection against failures. It also presents various common topologies, to assist in selecting the best model for any given deployment.</p><p>In general, the configurations presented in this document will be presented in a “vanilla” fashion – without undue service configuration, tenant configuration, traffic policies, etc. – except where necessary to illustrate specific use cases relevant to high availability behavior.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="theory-of-operation">Theory of Operation<a href="#theory-of-operation" class="hash-link" aria-label="Direct link to Theory of Operation" title="Direct link to Theory of Operation">​</a></h2><p>Deploying a highly available solution offers protection from failures or maintenance operations that could impact service. Generally speaking, the protections that high availability offers can be grouped in to several categories:</p><ul><li><strong>Software protection</strong>: the software components on a node can stop (due to upgrade, software fault, reboot, etc.) the companion components on a highly available counterpart can resume operation.</li><li><strong>Hardware protection</strong>: the platform on which the software runs can stop (due to replacement, hardware failure, power failure, etc.) while the companion highly available platform assumes control of all shared interfaces. Note that for the purposes of this document, Virtual Machines (VM) will be treated as hardware components unless specifically called out otherwise.</li><li><strong>Link protection</strong>: a single link can fail and not interrupt service, if there are shared forwarding interfaces and/or fabric interfaces (more on this later).</li></ul><p>The SSR offers all three types of protections listed above in each of its HA models. It does so by deploying two nodes that operate in concert (as either one logical router or as two logical routers) to provide service continuity in the event of failure. Each of the nodes contains a full set of software processes necessary for forwarding traffic, running routing protocols, communicating with its peers and management systems, etc. This allows an SSR to run independently in the event that its HA counterpart is unavailable.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="dual-node-high-availability">Dual Node High Availability<a href="#dual-node-high-availability" class="hash-link" aria-label="Direct link to Dual Node High Availability" title="Direct link to Dual Node High Availability">​</a></h3><p>The <em>dual node high availability</em> design is a longstanding deployment model supported by the SSR. In this design two nodes share one common set of state; because the SSR is stateful (i.e., it retains some residual information about each active session for the lifetime of that session) it must share this information with its counterpart to protect active sessions in the event of any impairment. This model is exemplified by using a <em>redundancy link</em>, a dedicated connection between the two systems where session state is exchanged.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="redundancy-link">Redundancy Link<a href="#redundancy-link" class="hash-link" aria-label="Direct link to Redundancy Link" title="Direct link to Redundancy Link">​</a></h4><p>Configured within the SSR software (and implemented as a <em>team interface</em> in Linux), this is typically implemented as a cross connect cable between two colocated systems. The &quot;cross connect cable&quot; is a logical concept and also includes connections between virtual machines. Also, the cross connect cable may be implemented between geographically diverse locations.</p><p>For more information about configuring redundant interfaces see <a href="/docs/config_non_forwarding_ha_interfaces">Non-forwarding HA Interfaces</a>.</p><p>the SSR configuration model only supports one redundancy link to be configured. However, it is possible to configure a second redundancy link manually. For instructions, refer to the guide <a href="/docs/config_adding_interfaces_to_ha_team">Adding Interfaces to HA Team Interface</a> for configuring additional redundancy links.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="about-state-synchronization">About State Synchronization<a href="#about-state-synchronization" class="hash-link" aria-label="Direct link to About State Synchronization" title="Direct link to About State Synchronization">​</a></h4><p>This state sharing occurs via a high-performance database that is available to both nodes. As sessions are established through an SSR node, the receiving node consults this database to determine whether this session had previously been established via its counterpart. If it does not find any information, it processes this session as new, and it inserts state information into the shared database. In this way, session continuity is preserved irrespective of which node is active at the outset of an established session.</p><p>For SSR routers, session state synchronization for a session will occur only after a number of packets have been exchanged bi-directionally. This is to avoid the overhead of state synchronization for short-lived sessions (fewer than twelve packets), where a client reinitiating the session anew is as efficient as recovery.</p><p>Conductors also leverage the redundancy link for state synchronization, to checkpoint the status of connected systems, configuration updates, and alarms.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="leader-election">Leader Election<a href="#leader-election" class="hash-link" aria-label="Direct link to Leader Election" title="Direct link to Leader Election">​</a></h4><p>In addition to state synchronization, the SSR software also uses the redundancy link for <em>leader election</em> – the term used to describe the negotiation between the two systems for determining which is more fit for active duty. Because the SSR software is comprised of a number of discrete software processes (daemons), there are actually multiple &quot;leaders&quot; for each dual node HA system simultaneously. Below is the sample output of the command <code>show system processes node all</code> from a highly available system:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">admin@BEACON00128A.BEACON00128# show sys proc node all</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Fri 2020-02-28 10:47:26 UTC</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">============== ============================= ========= ========= =======</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> Node           Process                       Status    Primary   Role</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">============== ============================= ========= ========= =======</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> BEACON00128A   accessManager                 running             combo</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> BEACON00128A   analyticsReporter             running             combo</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> BEACON00128A   applicationFrameworkManager   running             combo</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> BEACON00128A   conflux                       running             combo</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> BEACON00128A   databaseQueryCoordinator      running             combo</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> BEACON00128A   dynamicPeerUpdateManager      running   N         combo</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> BEACON00128A   fastLane                      running             combo</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> BEACON00128A   highwayManager                running             combo</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> BEACON00128A   nodeMonitor                   running             combo</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> BEACON00128A   persistentDataManager         running             combo</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> BEACON00128A   redisServerManager            running   N         combo</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> BEACON00128A   routingManager                running   Y         combo</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> BEACON00128A   secureCommunicationManager    running             combo</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> BEACON00128A   securityKeyManager            running   N         combo</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> BEACON00128A   snmpTrapAgent                 running             combo</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> BEACON00128A   stateMonitor                  running             combo</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> BEACON00128A   systemServicesCoordinator     running             combo</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> BEACON00128B   accessManager                 running             combo</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> BEACON00128B   analyticsReporter             running             combo</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> BEACON00128B   applicationFrameworkManager   running             combo</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> BEACON00128B   conflux                       running             combo</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> BEACON00128B   databaseQueryCoordinator      running             combo</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> BEACON00128B   dynamicPeerUpdateManager      running   Y         combo</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> BEACON00128B   fastLane                      running             combo</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> BEACON00128B   highwayManager                running             combo</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> BEACON00128B   nodeMonitor                   running             combo</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> BEACON00128B   persistentDataManager         running             combo</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> BEACON00128B   redisServerManager            running   Y         combo</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> BEACON00128B   routingManager                running   N         combo</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> BEACON00128B   secureCommunicationManager    running             combo</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> BEACON00128B   securityKeyManager            running   Y         combo</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> BEACON00128B   snmpTrapAgent                 running             combo</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> BEACON00128B   stateMonitor                  running             combo</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> BEACON00128B   systemServicesCoordinator     running             combo</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This is a list of the system processes that make up an SSR. (There is a similar, but different set that exists on an SSR conductor.) The fourth column in the output shows whether a process is primary (has leadership) or not. As you can see in this output, it is not unusual for one node to be leader for some processes and not others; for example, <code>BEACON00128A</code> is the leader for <code>routingManager</code>, whereas <code>BEACON00128B</code> is the leader for <code>securityKeyManager</code>.</p><p>Each of the processes indicated with a <code>Y</code> or <code>N</code> undergo leader election and remain in constant communication with one another, whereas the processes that do not have any indicator will run on both systems autonomously. Failure events will oftentimes re-trigger a leader election process to ensure the fittest system is in control.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="dual-router-high-availability">Dual Router High Availability<a href="#dual-router-high-availability" class="hash-link" aria-label="Direct link to Dual Router High Availability" title="Direct link to Dual Router High Availability">​</a></h3><p>The <em>dual router high availability</em> design is where two individual SSR software instances are coupled together to provide continuity in the event of a failure. While there is no state synchronized between the two devices (since there is no redundancy link), they are redundant to one another by upstream SSR devices detecting a failure and routing around it. Note that &quot;detecting a failure&quot; entails routing protocol convergence and/or SVR path failure determination.</p><p>The dual router high availability design has some distinct advantages over the dual node design:</p><ul><li>Fewer port requirements.</li><li>Fewer moving parts. Because there is no dependency on synchronizing a shared database, electing leaders between paired nodes, or sharing state, the implementation is more resilient.</li></ul><p>It does come with some tradeoffs, however:</p><ul><li>More rigid restrictions on the network topology (IGP/EGP).</li><li>Certain SSR features are not usable and/or must be disabled, notably source NAT and TCP state enforcement.</li><li>Shared interfaces cannot be used.</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="terminology">Terminology<a href="#terminology" class="hash-link" aria-label="Direct link to Terminology" title="Direct link to Terminology">​</a></h2><p><strong>Dual Node High Availability</strong>: a deployment model where two instances (nodes) of SSR software are coupled as a single, logical router.</p><p><strong>Dual Router High Availability</strong>: a deployment model where two instances (nodes) of SSR software are coupled as distinct, single node routers.</p><p><strong>Fabric link</strong>: a connection between two nodes in a dual node high availability deployment. This link is used for forwarding traffic between the two nodes, analogous to a backplane &quot;fabric&quot; on a chassis-based router. This is also sometimes referred to as an <em>inter-node link</em> or a &quot;dogleg.&quot;</p><p><strong>Inter-router link</strong>: a connection between two routers in a dual router high availability deployment. This link is used for forwarding traffic between the two routers much in the same way as a fabric link does between nodes. Generally we run iBGP as an IGP over this inter-router link.</p><p><strong>Redundancy link</strong>: a connection between two nodes in a dual node high availability deployment, used exclusively for synchronizing state between them. (No traffic is forwarded on this link.)</p><p><strong>Redundancy group</strong>: a configuration construct for combining interfaces into a collection that <em>shares fate</em>, such that if one interface goes down, the other interface(s) in the group are administratively failed over along with it. This is useful in deployments where two nodes are configured as mirror images of one another in an &quot;active/standby&quot; configuration.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="modeling">Modeling<a href="#modeling" class="hash-link" aria-label="Direct link to Modeling" title="Direct link to Modeling">​</a></h2><p>In general terms, high availability is an expense incurred to guard against failure scenarios; typically, high availability models are <em>not</em> intended to protect against all possible failure scenarios, but the most common ones (e.g., software failure, hardware failure, circuit failure). It is impractical, and in some cases impossible, to guard against multiple concurrent failures. Thus, a tolerance profile should be constructed to include the failure scenarios that are most common, most impactful, or both.</p><p>When deploying a high availability SSR router, there are several options available depending on (Ethernet) port availability, and the tolerance profile. The two main considerations when designing a high availability SSR are interface failure protections and platform protections (inclusive of hardware and software).</p><p>Interface protections allow for service continuity when an interface fails, or is otherwise disabled. Each interface that is to be protected has presence on both nodes in an HA couplet, which will have ramifications on the hardware platform that is selected. In a simple example, two nodes each have a single LAN and WAN interface, and these are protected. Adding a second WAN provider will incur an additional Ethernet interface on one node, but protecting it requires an additional Ethernet interface on its counterpart. Alternatively, you could deploy two independent WAN connections on each node (e.g., ISP 1 and ISP 2 on one node, ISP 3 and ISP 4 on the other node) and consume the same number of ports, but without any specific protection around any interface or ISP failure.</p><p>While the SSR platform affords you many flexibilities in your modeling, let&#x27;s start with some simple assumptions and build upon them.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="activestandby-model">Active/Standby Model<a href="#activestandby-model" class="hash-link" aria-label="Direct link to Active/Standby Model" title="Direct link to Active/Standby Model">​</a></h3><p>The simplest model is the active/standby model, where both nodes are configured as mirror images of one another. The LAN and WAN interfaces are protected, and there is a redundancy link between the two nodes to synchronize state. In this model, you will need to configure a set of <code>redundancy-group</code> configurations, one for each node.</p><p>This configuration protects against a LAN interface failure, a WAN interface failure, and a platform failure.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="activestandby-model-with-fabric-interface">Active/Standby Model with Fabric Interface<a href="#activestandby-model-with-fabric-interface" class="hash-link" aria-label="Direct link to Active/Standby Model with Fabric Interface" title="Direct link to Active/Standby Model with Fabric Interface">​</a></h3><p>This model builds upon the previous by adding a fabric interface. The fabric interface between the nodes gives them a path to reach the active LAN or WAN interface, should packets arrive that need forwarding but the local LAN/WAN interface is unusable.</p><p>In the Active/Standby Model with Fabric Interface, the <code>redundancy-group</code> configuration is no longer mandatory; it can be used to govern administrative preference over which node in a pair is active when all interfaces are usable across the router. A <code>redundancy-group</code> can also be used to put both LAN and WAN traffic on a single node when there is only one interface impaired, but this is strictly administrative preference.</p><p>This model is advantaged over the standard active/standby model, in that it protects against the failure mode where dissimilar links are down on each system (e.g., the LAN interface on node 1 is down and the WAN interface on node 2 is down). This comes at the cost of one additional Ethernet port on each node, to account for the fabric link.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="activeactive-model">Active/Active Model<a href="#activeactive-model" class="hash-link" aria-label="Direct link to Active/Active Model" title="Direct link to Active/Active Model">​</a></h3><p>The Active/Active model is one where each node in the router has (at least) one unique interface per node that is not represented on its counterpart. Generally speaking, this model has a protected LAN interface and dissimilar WAN interfaces (e.g., node 1 uses ISP 1, node 2 uses ISP 2). Just as with the Active/Standby model, you can elect to add a fabric interface – and in fact it is quite common to do so. (Without a fabric interface, only one ISP can be used at a time and it is arguably equivalent to an Active/Standby model.) With a fabric interface in place, the router will use the appropriate egress ISP based on the policies provisioned in the SSR, assuming all ISPs are active, which may mean that traffic arrives on one node and egresses via a separate node.</p><p>This model is advantaged over Active/Standby in that you get the benefit of &quot;SD-WAN,&quot; able to leverage the best ISP path for a given type of traffic at any point in time. Yet if any platform failure occurs, each node has the ability to continue processing traffic to the array of ISPs available to it.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="activeactive-with-no-shared-interfaces">Active/Active with no Shared Interfaces<a href="#activeactive-with-no-shared-interfaces" class="hash-link" aria-label="Direct link to Active/Active with no Shared Interfaces" title="Direct link to Active/Active with no Shared Interfaces">​</a></h4><p>There are certain features which may be unavailable when not using shared interfaces, including:</p><ul><li><em>source-nat</em> – when there&#x27;s no shared interface, there&#x27;s no way to synchronize dynamically allocated source ports.</li><li><em>transport-state-enforcement</em> – this feature will not work without synchronizing data between systems.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="hybrid-models">Hybrid Models<a href="#hybrid-models" class="hash-link" aria-label="Direct link to Hybrid Models" title="Direct link to Hybrid Models">​</a></h3><p>Hybrid models include multiple LAN interfaces and multiple WAN interfaces, some or all of which may be protected. (These deployments may include <code>redundancy-group</code> configurations, to ensure the coupled interfaces are always co-active on the same node.) Hybrid models should include a fabric interface between the nodes.</p><p>This model is used when there are multiple LAN interfaces, and one or more need protection. It requires the maximum number of Ethernet interfaces, and is the most complex configuration model.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"></div><div class="col lastUpdated_vwxv"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2023-11-03T17:18:22.000Z">Nov 3, 2023</time></b></span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/concepts_EthOverSVR"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Ethernet Over Secure Vector Routing</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/concepts_interface_types"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Interface Types</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#intended-audience" class="table-of-contents__link toc-highlight">Intended Audience</a></li><li><a href="#introduction" class="table-of-contents__link toc-highlight">Introduction</a></li><li><a href="#theory-of-operation" class="table-of-contents__link toc-highlight">Theory of Operation</a><ul><li><a href="#dual-node-high-availability" class="table-of-contents__link toc-highlight">Dual Node High Availability</a></li><li><a href="#dual-router-high-availability" class="table-of-contents__link toc-highlight">Dual Router High Availability</a></li></ul></li><li><a href="#terminology" class="table-of-contents__link toc-highlight">Terminology</a></li><li><a href="#modeling" class="table-of-contents__link toc-highlight">Modeling</a><ul><li><a href="#activestandby-model" class="table-of-contents__link toc-highlight">Active/Standby Model</a></li><li><a href="#activestandby-model-with-fabric-interface" class="table-of-contents__link toc-highlight">Active/Standby Model with Fabric Interface</a></li><li><a href="#activeactive-model" class="table-of-contents__link toc-highlight">Active/Active Model</a></li><li><a href="#hybrid-models" class="table-of-contents__link toc-highlight">Hybrid Models</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2023 Juniper Networks, Inc.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.737fa250.js"></script>
<script src="/assets/js/main.b845ed4e.js"></script>
</body>
</html>