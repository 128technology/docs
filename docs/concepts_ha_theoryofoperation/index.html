<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="generator" content="Docusaurus v2.0.0-alpha.55">
<link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-167298415-2","auto"),ga("set","anonymizeIp",!0),ga("send","pageview")</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
<link rel="search" type="application/opensearchdescription+xml" title="128T Docs" href="/opensearch.xml"><title data-react-helmet="true">High Availability - Theory of Operation | 128T Docs</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:title" content="High Availability - Theory of Operation | 128T Docs"><meta data-react-helmet="true" name="description" content="This document describes the most common set of deployment models for taking two instances of 128T routing software (referred to as “nodes”) and deploying those nodes together to provide high availability. The 128T routing software presents several deployment options for high availability, including:"><meta data-react-helmet="true" property="og:description" content="This document describes the most common set of deployment models for taking two instances of 128T routing software (referred to as “nodes”) and deploying those nodes together to provide high availability. The 128T routing software presents several deployment options for high availability, including:"><meta data-react-helmet="true" property="og:url" content="https://docs.128technology.com/docs/concepts_ha_theoryofoperation"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://docs.128technology.com/docs/concepts_ha_theoryofoperation"><link rel="stylesheet" href="/styles.3f8d667f.css">
<link rel="preload" href="/styles.527dc50e.js" as="script">
<link rel="preload" href="/runtime~main.0de728dc.js" as="script">
<link rel="preload" href="/main.d4cd6cbd.js" as="script">
<link rel="preload" href="/1.0dd6af2c.js" as="script">
<link rel="preload" href="/2.0c81630d.js" as="script">
<link rel="preload" href="/118.297be77b.js" as="script">
<link rel="preload" href="/20ac7829.37cee2be.js" as="script">
<link rel="preload" href="/18f2e2f8.7c2b9b2d.js" as="script">
</head>
<body>
<div id="__docusaurus">
<nav class="navbar navbar--light navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/"><img class="navbar__logo" src="/img/128t_black.png" alt="128 Technology Logo"><strong class="navbar__title"></strong></a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/docs/intro_getting_started">Docs</a><a target="_blank" rel="noopener noreferrer" href="https://community.128technology.com/home" class="navbar__item navbar__link">Interchange</a><a target="_blank" rel="noopener noreferrer" href="https://www.128technology.com/" class="navbar__item navbar__link">Company</a><div class="navbar__search"><span aria-label="expand searchbar" role="button" class="search-icon" tabindex="0"></span><input type="search" id="search_input_react" placeholder="Search" aria-label="Search" class="navbar__search-input search-bar"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img class="navbar__logo" src="/img/128t_black.png" alt="128 Technology Logo"><strong class="navbar__title"></strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/intro_getting_started">Docs</a></li><li class="menu__list-item"><a target="_blank" rel="noopener noreferrer" href="https://community.128technology.com/home" class="menu__link">Interchange</a></li><li class="menu__list-item"><a target="_blank" rel="noopener noreferrer" href="https://www.128technology.com/" class="menu__link">Company</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_1kjD"><div class="docSidebarContainer_1cYp"><div class="sidebar_1kLs"><div class="menu menu--responsive menu_w2sC"><button aria-label="Open Menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_2vk4" xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 32 32" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">About</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/about_128t">128T</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/about_releases">128T Releases</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/about_support_policy">Support Policy</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/about_security_policy">Security Policy</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/CONTRIBUTING">Contributing</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Introduction</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/intro_getting_started">Getting Started</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/intro_downloading_iso">Downloading ISOs</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/intro_installation">Installation</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/intro_installation_installer">Installing 128T</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/intro_installation_bootable_media">Installing From ISO</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/intro_installation_aws">Installing in AWS</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/intro_installation_otp_iso">Installing From OTP ISO</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/intro_installation_quickstart_aws">QuickStart installation in AWS</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/intro_installation_azure">Installing in Azure</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/intro_ztp">QuickStart</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/intro_creating_bootable_usb">Creating Bootable USB</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/intro_upgrading">Upgrading</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/intro_rollback">Rollback</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Concepts</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/concepts_application_discovery">Application Discovery</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/concepts_appid">Application Identification</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/docs/concepts_ha_theoryofoperation">HA - Theory of Operation</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/concepts_interface_types">Interface Types</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/concepts_kni">Kernel Network Interfaces</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/concepts_linux_host_networking">Linux Host Networking</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/concepts_network_planes">Forwarding Planes</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/concepts_metadata">128T Metadata</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/concepts_metrics">Metrics</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/concepts_machine_communication">Machine Communication</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/concepts_pcli">PCLI</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/concepts_session_timer">Session Timers</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/concepts_glossary">Glossary</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Administration</a><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Configuration</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config_basics">Basics</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config_bgp">BGP</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config_reference_guide">Element Reference</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config_audit_log">Audit Log</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config_dhcp">DHCP</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config_dns_proxy">DNS Proxy</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config_ldap">LDAP</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config_ha">High Availability</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config_non_forwarding_ha_interfaces">Non-forwarding HA Interfaces</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config_adding_interfaces_to_ha_team">Adding Interfaces to HA Team Interface</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config_transition_standalone_to_ha">Transitioning a Conductor from Standalone to HA</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config_nat">NAT</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config_ospf">OSPF</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config_snmp">SNMP</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config_snmp_metrics">SNMP: User defined metrics</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config_tenants">Tenants</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config_templates">Configuration Templates</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">How To</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/howto_conductor_migration">Conductor Migration</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/howto_lte">LTE</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/howto_maintenance_mode">Maintenance Mode</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/howto_ms365">Microsoft 365</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/howto_trusted_ca_certificate">Adding a Trusted Certificate</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/howto_tune_bfd">Tuning BFD</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Troubleshooting</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/ts_applications">Application Troubleshooting</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/ts_ap_salt_minion">AP: Salt Minion</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/ts_cpu_spikes">CPU Spikes</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/ts_connecting_to_routers">Connecting to Routers</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/ts_forwarding_resource_pools">Forwarding Plane Resource Pools</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/ts_logs">Logs</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/ts_mac_uniqueness">MAC Address Uniqueness</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/ts_packet_capture">PCLI Packet Capture</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/ts_t1_troubleshooting">T1 Troubleshooting</a></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Events</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/events_overview">Alarm and Events</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/events_alarms">Alarms</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/events_events">Events</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Best Practices</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/bcp_att_avpn_configuration">AT&amp;T AVPN Configuration</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/bcp_conductor_deployment">Conductor Deployment</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/bcp_lte_peering">LTE Peering</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/bcp_monitoring_headends">Monitoring Head End Routers</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/bcp_salt_pillars">Saltstack at Scale With 128T</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/bcp_sdwan_design_guide">SD-WAN Design Guide</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/bcp_service_and_service_policy_design">Service and Service Policy Design</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/bcp_service-policy_defaults">Service Policy Baseline Defaults</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/bcp_tenants">Tenancy Design</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">CLI Reference</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/cli_reference">Command Line Reference</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Plugins</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/plugin_intro">Introduction</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/plugin_monitoring_agent">Monitoring</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/plugin_dns_app_id">DNS App Id</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/plugin_dns_cache">DNS Cache</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/plugin_gre">GRE</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/plugin_ipsec_client">IPsec Client</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/plugin_loopback_static_routes">Loopback Static Routes</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/plugin_mosh">Mosh</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/plugin_sip_alg">SIP ALG</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/plugin_kni_namespace_scripts">KNI Namespace Scripts</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">REST APIs</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/api_rest_4.2.0">128T-4.2.0</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Release Notes</a><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">128T</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/release_notes_128t_4.4">4.4</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/release_notes_128t_4.3">4.3</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/release_notes_128t_4.2">4.2</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/release_notes_128t_4.1">4.1</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/release_notes_128t_4.0">4.0</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">128T Installer</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/release_notes_128t_installer_2.6">2.6</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/release_notes_128t_installer_2.5">2.5</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/release_notes_128t_installer_2.4">2.4</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/release_notes_128t_installer_2.3">2.3</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/release_notes_128t_installer_2.2">2.2</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/release_notes_128t_installer_2.1">2.1</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">128T Monitoring Agent</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/release_notes_monitoring_agent_2.1">2.1</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/release_notes_monitoring_agent_2.0">2.0</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/release_notes_monitoring_agent_1.2">1.2</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/release_notes_monitoring_agent_1.1">1.1</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">128T SIP ALG</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/release_notes_128t_sip_alg_2.1">2.1</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">128T ZScaler</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/release_notes_128t_zscaler_1.1">1.1</a></li></ul></li></ul></li></ul></div></div></div><main class="docMainContainer_FFX1"><div class="container padding-vert--lg docItemWrapper_1cc7"><div class="row"><div class="col docItemCol_2GOA"><div class="docItemContainer_2cwg"><article><header><h1 class="docTitle_1vWb">High Availability - Theory of Operation</h1></header><div class="markdown"><p>This document describes the most common set of deployment models for taking two instances of 128T routing software (referred to as “nodes”) and deploying those nodes together to provide high availability. The 128T routing software presents several deployment options for high availability, including:</p><ul><li><strong>Dual node high availability</strong>: where two nodes form one logical router, with shared state and a &quot;fabric&quot; backplane between them.</li><li><strong>Dual router high availability</strong>: where two nodes form two logical routers, with no shared state. This is a familiar approach to administrators accustomed to deploying pairs of legacy routing platforms.</li></ul><p>This document will describe the benefits and caveats of each of these models, as well as delving into other architectural decisions that should be considered when deploying highly available systems.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="intended-audience"></a>Intended Audience<a aria-hidden="true" tabindex="-1" class="hash-link" href="#intended-audience" title="Direct link to heading">#</a></h2><p>This document is intended for network architects, and is to be used as a guideline during the network design phase of deployment.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="introduction"></a>Introduction<a aria-hidden="true" tabindex="-1" class="hash-link" href="#introduction" title="Direct link to heading">#</a></h2><p>High availability (or “HA”) is the practice of deploying additional network elements for traffic resiliency, to account for link or system downtime. In general, 128 Technology, Inc. encourages the deployment of highly available routers and conductors, as this will provide service continuity in the event of network failures, software faults, or hardware downtime (both scheduled and unscheduled).</p><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>There are other types of protection afforded 128T-powered networks, including path protection (via peer path selection) and link impairment protection (via session resiliency features, packet duplication, packet retransmitions, etc.), but these are not a consequence of supplying two nodes to mitigate the impact of failures.</p></div></div><p>This document will define the terms used to describe the 128T router’s implementation of high availability, describe the various configurable elements associated with high availability, and how they can be set and/or tuned in order to afford maximal protection against failures. It also presents various common topologies, to assist in selecting the best model for any given deployment.</p><p>In general, the configurations presented in this document will be presented in a “vanilla” fashion – without undue service configuration, tenant configuration, traffic policies, etc. – except where necessary to illustrate specific use cases relevant to high availability behavior.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="theory-of-operation"></a>Theory of Operation<a aria-hidden="true" tabindex="-1" class="hash-link" href="#theory-of-operation" title="Direct link to heading">#</a></h2><p>Deploying a highly available solution offers protection from failures or maintenance operations that could impact service. Generally speaking, the protections that high availability offers can be grouped in to several categories:</p><ul><li><strong>Software protection</strong>: the software components on a node can stop (due to upgrade, software fault, reboot, etc.) the companion components on a highly available counterpart can resume operation.</li><li><strong>Hardware protection</strong>: the platform on which the software runs can stop (due to replacement, hardware failure, power failure, etc.) while the companion highly available platform assumes control of all shared interfaces. Note that for the purposes of this document, Virtual Machines (VM) will be treated as hardware components unless specifically called out otherwise.</li><li><strong>Link protection</strong>: a single link can fail and not interrupt service, if there are shared forwarding interfaces and/or fabric interfaces (more on this later).</li></ul><p>The 128T offers all three types of protections listed above in each of its HA models. It does so by deploying two nodes that operate in concert (as either one logical router or as two logical routers) to provide service continuity in the event of failure. Each of the nodes contains a full set of software processes necessary for forwarding traffic, running routing protocols, communicating with its peers and management systems, etc. This allows a 128T to run independently in the event that its HA counterpart is unavailable.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="dual-node-high-availability"></a>Dual Node High Availability<a aria-hidden="true" tabindex="-1" class="hash-link" href="#dual-node-high-availability" title="Direct link to heading">#</a></h3><p>The <em>dual node high availability</em> design is a longstanding deployment model supported by the 128T. In this design two nodes share one common set of state; because the 128T is stateful (i.e., it retains some residual information about each active session for the lifetime of that session) it must share this information with its counterpart to protect active sessions in the event of any impairment. This model is exemplified by using a <em>redundancy link</em>, a dedicated connection between the two systems where session state is exchanged.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="redundancy-link"></a>Redundancy Link<a aria-hidden="true" tabindex="-1" class="hash-link" href="#redundancy-link" title="Direct link to heading">#</a></h4><p>Configured within the 128T software (and implemented as a <em>team interface</em> in Linux), this is typically implemented as a cross connect cable between two colocated systems. The &quot;cross connect cable&quot; is a logical concept and also includes connections between virtual machines. Also, the cross connect cable may be implemented between geographically diverse locations.</p><p>For more information about configuring redundant interfaces see <a href="/docs/config_non_forwarding_ha_interfaces">Non-forwarding HA Interfaces</a>.</p><p>The 128T configuration model only supports one redundancy link to be configured. However, it is possible to configure a second redundancy link manually. For instructions, refer to the guide <a href="/docs/config_adding_interfaces_to_ha_team">Adding Interfaces to HA Team Interface</a> for configuring additional redundancy links.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="about-state-synchronization"></a>About State Synchronization<a aria-hidden="true" tabindex="-1" class="hash-link" href="#about-state-synchronization" title="Direct link to heading">#</a></h4><p>This state sharing occurs via a high-performance database that is available to both nodes. As sessions are established through a 128T node, the receiving node consults this database to determine whether this session had previously been established via its counterpart. If it does not find any information, it processes this session as new, and it inserts state information into the shared database. In this way, session continuity is preserved irrespective of which node is active at the outset of an established session.</p><p>For 128T routers, session state synchronization for a session will occur only after a number of packets have been exchanged bi-directionally. This is to avoid the overhead of state synchronization for short-lived sessions (fewer than twelve packets), where a client reinitiating the session anew is as efficient as recovery.</p><p>128T conductors also leverage the redundancy link for state synchronization, to checkpoint the status of connected systems, configuration updates, and alarms.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="leader-election"></a>Leader Election<a aria-hidden="true" tabindex="-1" class="hash-link" href="#leader-election" title="Direct link to heading">#</a></h4><p>In addition to state synchronization, the 128T software also uses the redundancy link for <em>leader election</em> – the term used to describe the negotiation between the two systems for determining which is more fit for active duty. Because the 128T software is comprised of a number of discrete software processes (daemons), there are actually multiple &quot;leaders&quot; for each dual node HA system simultaneously. Below is the sample output of the command <code>show system processes node all</code> from a highly available system:</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">admin@BEACON00128A.BEACON00128# show sys proc node all</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Fri 2020-02-28 10:47:26 UTC</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">============== ============================= ========= ========= =======</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> Node           Process                       Status    Primary   Role</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">============== ============================= ========= ========= =======</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> BEACON00128A   accessManager                 running             combo</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> BEACON00128A   analyticsReporter             running             combo</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> BEACON00128A   applicationFrameworkManager   running             combo</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> BEACON00128A   conflux                       running             combo</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> BEACON00128A   databaseQueryCoordinator      running             combo</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> BEACON00128A   dynamicPeerUpdateManager      running   N         combo</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> BEACON00128A   fastLane                      running             combo</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> BEACON00128A   highwayManager                running             combo</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> BEACON00128A   nodeMonitor                   running             combo</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> BEACON00128A   persistentDataManager         running             combo</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> BEACON00128A   redisServerManager            running   N         combo</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> BEACON00128A   routingManager                running   Y         combo</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> BEACON00128A   secureCommunicationManager    running             combo</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> BEACON00128A   securityKeyManager            running   N         combo</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> BEACON00128A   snmpTrapAgent                 running             combo</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> BEACON00128A   stateMonitor                  running             combo</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> BEACON00128A   systemServicesCoordinator     running             combo</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> BEACON00128B   accessManager                 running             combo</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> BEACON00128B   analyticsReporter             running             combo</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> BEACON00128B   applicationFrameworkManager   running             combo</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> BEACON00128B   conflux                       running             combo</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> BEACON00128B   databaseQueryCoordinator      running             combo</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> BEACON00128B   dynamicPeerUpdateManager      running   Y         combo</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> BEACON00128B   fastLane                      running             combo</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> BEACON00128B   highwayManager                running             combo</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> BEACON00128B   nodeMonitor                   running             combo</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> BEACON00128B   persistentDataManager         running             combo</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> BEACON00128B   redisServerManager            running   Y         combo</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> BEACON00128B   routingManager                running   N         combo</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> BEACON00128B   secureCommunicationManager    running             combo</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> BEACON00128B   securityKeyManager            running   Y         combo</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> BEACON00128B   snmpTrapAgent                 running             combo</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> BEACON00128B   stateMonitor                  running             combo</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> BEACON00128B   systemServicesCoordinator     running             combo</span></div></div></div></div></div><p>This is a list of the system processes that make up a 128T router. (There is a similar, but different set that exists on a 128T conductor.) The fourth column in the output shows whether a process is primary (has leadership) or not. As you can see in this output, it is not unusual for one node to be leader for some processes and not others; for example, <code>BEACON00128A</code> is the leader for <code>routingManager</code>, whereas <code>BEACON00128B</code> is the leader for <code>securityKeyManager</code>.</p><p>Each of the processes indicated with a <code>Y</code> or <code>N</code> undergo leader election and remain in constant communication with one another, whereas the processes that do not have any indicator will run on both systems autonomously. Failure events will oftentimes re-trigger a leader election process to ensure the fittest system is in control.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="dual-router-high-availability"></a>Dual Router High Availability<a aria-hidden="true" tabindex="-1" class="hash-link" href="#dual-router-high-availability" title="Direct link to heading">#</a></h3><p>The <em>dual router high availability</em> design is where two individual 128T software instances are coupled together to provide continuity in the event of a failure. While there is no state synchronized between the two devices (since there is no redundancy link), they are redundant to one another by upstream 128T devices detecting a failure and routing around it. Note that &quot;detecting a failure&quot; entails routing protocol convergence and/or SVR path failure determination.</p><p>The dual router high availability design has some distinct advantages over the dual node design:</p><ul><li>Fewer port requirements.</li><li>Fewer moving parts. Because there is no dependency on synchronizing a shared database, electing leaders between paired nodes, or sharing state, the implementation is more resilient.</li></ul><p>It does come with some tradeoffs, however:</p><ul><li>More rigid restrictions on the network topology (IGP/EGP).</li><li>Certain 128T features are not usable and/or must be disabled, notably source NAT and TCP state enforcement.</li><li>Shared interfaces cannot be used.</li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="terminology"></a>Terminology<a aria-hidden="true" tabindex="-1" class="hash-link" href="#terminology" title="Direct link to heading">#</a></h2><p><strong>Dual Node High Availability</strong>: a deployment model where two instances (nodes) of 128T software are coupled as a single, logical router.</p><p><strong>Dual Router High Availability</strong>: a deployment model where two instances (nodes) of 128T software are coupled as distinct, single node routers.</p><p><strong>Fabric link</strong>: a connection between two nodes in a dual node high availability deployment. This link is used for forwarding traffic between the two nodes, analogous to a backplane &quot;fabric&quot; on a chassis-based router. This is also sometimes referred to as an <em>inter-node link</em> or a &quot;dogleg.&quot;</p><p><strong>Inter-router link</strong>: a connection between two routers in a dual router high availability deployment. This link is used for forwarding traffic between the two routers much in the same way as a fabric link does between nodes. Generally we run iBGP as an IGP over this inter-router link.</p><p><strong>Redundancy link</strong>: a connection between two nodes in a dual node high availability deployment, used exclusively for synchronizing state between them. (No traffic is forwarded on this link.)</p><p><strong>Redundancy group</strong>: a configuration construct for combining interfaces into a collection that <em>shares fate</em>, such that if one interface goes down, the other interface(s) in the group are administratively failed over along with it. This is useful in deployments where two nodes are configured as mirror images of one another in an &quot;active/standby&quot; configuration.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="modeling"></a>Modeling<a aria-hidden="true" tabindex="-1" class="hash-link" href="#modeling" title="Direct link to heading">#</a></h2><p>In general terms, high availability is an expense incurred to guard against failure scenarios; typically, high availability models are <em>not</em> intended to protect against all possible failure scenarios, but the most common ones (e.g., software failure, hardware failure, circuit failure). It is impractical, and in some cases impossible, to guard against multiple concurrent failures. Thus, a tolerance profile should be constructed to include the failure scenarios that are most common, most impactful, or both.</p><p>When deploying a high availability 128T router, there are several options available depending on (Ethernet) port availability, and the tolerance profile. The two main considerations when designing a high availability 128T router are interface failure protections and platform protections (inclusive of hardware and software).</p><p>Interface protections allow for service continuity when an interface fails, or is otherwise disabled. Each interface that is to be protected has presence on both nodes in an HA couplet, which will have ramifications on the hardware platform that is selected. In a simple example, two nodes each have a single LAN and WAN interface, and these are protected. Adding a second WAN provider will incur an additional Ethernet interface on one node, but protecting it requires an additional Ethernet interface on its counterpart. Alternatively, you could deploy two independent WAN connections on each node (e.g., ISP 1 and ISP 2 on one node, ISP 3 and ISP 4 on the other node) and consume the same number of ports, but without any specific protection around any interface or ISP failure.</p><p>While the 128T platform affords you many flexibilities in your modeling, let&#x27;s start with some simple assumptions and build upon them.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="activestandby-model"></a>Active/Standby Model<a aria-hidden="true" tabindex="-1" class="hash-link" href="#activestandby-model" title="Direct link to heading">#</a></h3><p>The simplest model is the active/standby model, where both nodes are configured as mirror images of one another. The LAN and WAN interfaces are protected, and there is a redundancy link between the two nodes to synchronize state. In this model, you will need to configure a set of <code>redundancy-group</code> configurations, one for each node.</p><p>This configuration protects against a LAN interface failure, a WAN interface failure, and a platform failure.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="activestandby-model-with-fabric-interface"></a>Active/Standby Model with Fabric Interface<a aria-hidden="true" tabindex="-1" class="hash-link" href="#activestandby-model-with-fabric-interface" title="Direct link to heading">#</a></h3><p>This model builds upon the previous by adding a fabric interface. The fabric interface between the nodes gives them a path to reach the active LAN or WAN interface, should packets arrive that need forwarding but the local LAN/WAN interface is unusable.</p><p>In the Active/Standby Model with Fabric Interface, the <code>redundancy-group</code> configuration is no longer mandatory; it can be used to govern administrative preference over which node in a pair is active when all interfaces are usable across the router. A <code>redundancy-group</code> can also be used to put both LAN and WAN traffic on a single node when there is only one interface impaired, but this is strictly administrative preference.</p><p>This model is advantaged over the standard active/standby model, in that it protects against the failure mode where dissimilar links are down on each system (e.g., the LAN interface on node 1 is down and the WAN interface on node 2 is down). This comes at the cost of one additional Ethernet port on each node, to account for the fabric link.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="activeactive-model"></a>Active/Active Model<a aria-hidden="true" tabindex="-1" class="hash-link" href="#activeactive-model" title="Direct link to heading">#</a></h3><p>The Active/Active model is one where each node in the router has (at least) one unique interface per node that is not represented on its counterpart. Generally speaking, this model has a protected LAN interface and dissimilar WAN interfaces (e.g., node 1 uses ISP 1, node 2 uses ISP 2). Just as with the Active/Standby model, you can elect to add a fabric interface – and in fact it is quite common to do so. (Without a fabric interface, only one ISP can be used at a time and it is arguably equivalent to an Active/Standby model.) With a fabric interface in place, the router will use the appropriate egress ISP based on the policies provisioned in the 128T, assuming all ISPs are active, which may mean that traffic arrives on one node and egresses via a separate node.</p><p>This model is advantaged over Active/Standby in that you get the benefit of &quot;SD-WAN,&quot; able to leverage the best ISP path for a given type of traffic at any point in time. Yet if any platform failure occurs, each node has the ability to continue processing traffic to the array of ISPs available to it.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="activeactive-with-no-shared-interfaces"></a>Active/Active with no Shared Interfaces<a aria-hidden="true" tabindex="-1" class="hash-link" href="#activeactive-with-no-shared-interfaces" title="Direct link to heading">#</a></h4><p>There are certain features which may be unavailable when not using shared interfaces, including:</p><ul><li><em>source-nat</em> – when there&#x27;s no shared interface, there&#x27;s no way to synchronize dynamically allocated source ports.</li><li><em>transport-state-enforcement</em> – this feature will not work without synchronizing data between systems.</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="hybrid-models"></a>Hybrid Models<a aria-hidden="true" tabindex="-1" class="hash-link" href="#hybrid-models" title="Direct link to heading">#</a></h3><p>Hybrid models include multiple LAN interfaces and multiple WAN interfaces, some or all of which may be protected. (These deployments may include <code>redundancy-group</code> configurations, to ensure the coupled interfaces are always co-active on the same node.) Hybrid models should include a fabric interface between the nodes.</p><p>This model is used when there are multiple LAN interfaces, and one or more need protection. It requires the maximum number of Ethernet interfaces, and is the most complex configuration model.</p></div></article><div class="margin-vert--xl"><div class="row"><div class="col"></div><div class="col text--right"><em><small>Last updated on <time datetime="2020-04-15T20:25:48.000Z" class="docLastUpdatedAt_1sqk">4/15/2020</time></small></em></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/concepts_appid"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">« Application Identification</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/concepts_interface_types"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Interface Types »</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_TbNY"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#intended-audience" class="table-of-contents__link">Intended Audience</a></li><li><a href="#introduction" class="table-of-contents__link">Introduction</a></li><li><a href="#theory-of-operation" class="table-of-contents__link">Theory of Operation</a><ul><li><a href="#dual-node-high-availability" class="table-of-contents__link">Dual Node High Availability</a></li><li><a href="#dual-router-high-availability" class="table-of-contents__link">Dual Router High Availability</a></li></ul></li><li><a href="#terminology" class="table-of-contents__link">Terminology</a></li><li><a href="#modeling" class="table-of-contents__link">Modeling</a><ul><li><a href="#activestandby-model" class="table-of-contents__link">Active/Standby Model</a></li><li><a href="#activestandby-model-with-fabric-interface" class="table-of-contents__link">Active/Standby Model with Fabric Interface</a></li><li><a href="#activeactive-model" class="table-of-contents__link">Active/Active Model</a></li><li><a href="#hybrid-models" class="table-of-contents__link">Hybrid Models</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container"><div class="text--center"><div>Copyright © 2020 128 Technology, Inc.</div></div></div></footer></div>
<script src="/styles.527dc50e.js"></script>
<script src="/runtime~main.0de728dc.js"></script>
<script src="/main.d4cd6cbd.js"></script>
<script src="/1.0dd6af2c.js"></script>
<script src="/2.0c81630d.js"></script>
<script src="/118.297be77b.js"></script>
<script src="/20ac7829.37cee2be.js"></script>
<script src="/18f2e2f8.7c2b9b2d.js"></script>
</body>
</html>