<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-bcp_dhcp_relay_overview">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.3.1">
<title data-rh="true">DHCP Relay Best Practices | SSN Docs</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://docs.128technology.com/docs/bcp_dhcp_relay_overview"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="DHCP Relay Best Practices | SSN Docs"><meta data-rh="true" name="description" content="The purpose of a DHCP relay is to forward incoming requests from DHCP clients to a DHCP server. Normally, a client can talk directly to a DHCP server; especially on a single subnet. However, in the case where the server and clients are not on the same subnet, a DCHP relay agent can be deployed to mediate these requests. The SSR can accommodate this type of DHCP relay services."><meta data-rh="true" property="og:description" content="The purpose of a DHCP relay is to forward incoming requests from DHCP clients to a DHCP server. Normally, a client can talk directly to a DHCP server; especially on a single subnet. However, in the case where the server and clients are not on the same subnet, a DCHP relay agent can be deployed to mediate these requests. The SSR can accommodate this type of DHCP relay services."><link data-rh="true" rel="icon" href="/img/favicon.png"><link data-rh="true" rel="canonical" href="https://docs.128technology.com/docs/bcp_dhcp_relay_overview"><link data-rh="true" rel="alternate" href="https://docs.128technology.com/docs/bcp_dhcp_relay_overview" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.128technology.com/docs/bcp_dhcp_relay_overview" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.8e1fdc51.css">
<link rel="preload" href="/assets/js/runtime~main.9025d2fb.js" as="script">
<link rel="preload" href="/assets/js/main.bc3caea8.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.png" alt="Juniper Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/logo_dark.png" alt="Juniper Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate"></b></a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/docs/intro_getting_started">Docs</a><a href="https://community.juniper.net/answers/communities/community-home?CommunityKey=310d1a41-12fa-4627-9a99-880145a7c87c" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Community<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://www.juniper.net/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Company<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="searchBox_ZlJk"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/about_128t">About</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/intro_getting_started">Introduction</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/intro_system_reqs">Deployment Considerations</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/intro_installation">Installation Process</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/install_conductor_overview">Conductor Installation</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/intro_installation_bootable_media">Router Installation</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/intro_installation_image">Image-Based Installation</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/supported_cloud_platforms">Cloud Installations</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/intro_upgrade_considerations">Upgrades and Rollback</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/intro_installation_installer">Supporting Install Information - Appendix</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/concepts_application_discovery">Concepts</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/wan_overview">WAN Assurance</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/config_basics">Administration</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/events_overview">Events</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/docs/bcp_att_avpn_configuration">Best Practices</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/bcp_att_avpn_configuration">AT&amp;T AVPN Configuration</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/bcp_using_128T_as_ntp_server">Branch NTP Service</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/bcp_dhcp_relay_overview">DHCP Relay Best Practices</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/bcp_qos_msft_expressroute">ExpressRoute QoS Configuration</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/bcp_lte_peering">LTE Peering</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/bcp_monitoring_headends">Monitoring Head End Routers</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/bcp_per-adjacency_traffic_engineering">Per Adjacency Traffic Engineering</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/bcp_salt_pillars">Saltstack at Scale With SSR</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/bcp_sdwan_design_guide">SD-WAN Design Guide</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/bcp_service_and_service_policy_design">Service and Service Policy Design</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/bcp_service-policy_defaults">Service Policy Baseline Defaults</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/bcp_tenants">Tenancy Design</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/cli_reference">CLI and Element Reference</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/installer_cli_reference">Installer/Initializer Reference</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/plugin_intro">Plugins</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/release_notes_128t_6.1">Release Notes</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Best Practices</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">DHCP Relay Best Practices</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>DHCP Relay Best Practices</h1></header><p>The purpose of a DHCP relay is to forward incoming requests from DHCP clients to a DHCP server. Normally, a client can talk directly to a DHCP server; especially on a single subnet. However, in the case where the server and clients are not on the same subnet, a DCHP relay agent can be deployed to mediate these requests. The SSR can accommodate this type of DHCP relay services.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="requirements">Requirements<a href="#requirements" class="hash-link" aria-label="Direct link to Requirements" title="Direct link to Requirements">​</a></h3><p>To configure DHCP relay on the SSR, the following requirements must be met or available.</p><ul><li>IP address of the DHCP server which manages the DHCP address pool.</li><li>The DHCP server must be accessible from the SSR.</li><li>A unique tenant must be configured for the DHCP relay to flag requests observed by the SSR.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="design-types">Design Types<a href="#design-types" class="hash-link" aria-label="Direct link to Design Types" title="Direct link to Design Types">​</a></h3><p>The following standard design models for DHCP Relay are addressed in this guide:</p><ul><li><a href="#dhcp-relay-with-svr">DHCP relay with SVR</a></li><li><a href="#dhcp-relay-and-multiple-dhcp-servers">DHCP relay with SVR and multiple DHCP servers</a></li><li><a href="#dhcp-relay-with-bgp-over-svr">DHCP relay with BGP over SVR</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="architecture">Architecture<a href="#architecture" class="hash-link" aria-label="Direct link to Architecture" title="Direct link to Architecture">​</a></h3><p>A high-level overview of the architecture used for testing is shown in the diagram below.</p><p><img loading="lazy" alt="DHCP Test Architecture" src="/assets/images/dhcp_relay_arch-f7ff65e65489d9559496eab006599bdf.jpg" width="360" height="300" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="site-types">Site Types<a href="#site-types" class="hash-link" aria-label="Direct link to Site Types" title="Direct link to Site Types">​</a></h3><p>The following characteristics define the common models where DHCP Relay is deployed:</p><ul><li>Enterprise DC to Branch relay (DHCP server lives on the DC LAN)</li><li>Branch to Branch relay (DHCP server lives on one of the branch LANs)</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="dhcp-relay-with-svr">DHCP Relay with SVR<a href="#dhcp-relay-with-svr" class="hash-link" aria-label="Direct link to DHCP Relay with SVR" title="Direct link to DHCP Relay with SVR">​</a></h2><p>Most basic deployments utilize DHCP relay with SVR only, where DHCP relay is implemented in its simplest form. The key elements to configure are tenants, services, and service-routes. The final step is to tag the branch office’s network interface with the tenant. This will be the interface receiving DHCP broadcasts.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="tenant">Tenant<a href="#tenant" class="hash-link" aria-label="Direct link to Tenant" title="Direct link to Tenant">​</a></h3><p>A unique tenant and service must be designed as shown below. This tenant will be used to tag and identify DHCP request session on the ingress interface and associated them with the dhcp-relay service.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">config</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    authority</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        tenant dhcp.demo </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            name dhcp.demo</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        exit </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="service">Service<a href="#service" class="hash-link" aria-label="Direct link to Service" title="Direct link to Service">​</a></h3><p>A service is created with <code>application-type dhcp-relay</code>. A unique tenant must be applied to the access policy to allow the SSR to process DHCP requests.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">config</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    authority</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        service     dhcp_relay</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            name            dhcp_relay</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            security        internal</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            access-policy   dhcp.demo</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                source      dhcp.demo</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            application-type    dhcp-relay</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="service-route">Service Route<a href="#service-route" class="hash-link" aria-label="Direct link to Service Route" title="Direct link to Service Route">​</a></h3><p>A service-route is configured on the Branch1 or Enterprise DC routers referencing the DHCP relay service, with a <code>service-agent next-hop</code> pointing to the IP address of the DHCP server (<code>nat-target</code> in the example below).</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">config</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    authority</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        router      Branch1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            name        Branch1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            service-route        dhcp_relay_service-route</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                name             dhcp_relay_service-route</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                service-name     dhcp-relay</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                nat-target       172.16.1.3</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                next-hop         node1 lan1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    node-name    node1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    interface    node1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">exit</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="network-interface">Network Interface<a href="#network-interface" class="hash-link" aria-label="Direct link to Network Interface" title="Direct link to Network Interface">​</a></h3><p>On the router processing the DHCP relay requests (Branch 2), the unique tenant created must be applied to the network-interface receiving the DHCP broadcasts. These DHCP request broadcasts are tagged by the tenant and associated with the <code>dhcp-relay</code> service. After the association is made, the SSR will convert the broadcast into a unicast and forward it to the IP of the DHCP servers.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">config</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    authority</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        router    Branch2</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            name    Branch2</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            node    node1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                name                node1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                device-interface    blue-lan1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    name                blue-lan1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    pci-address         0000:00:04.0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    network-interface   lan1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                        name                     lan1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                        global-id                6</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                        tenant                   dhcp.demo</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                        inter-router-security    internal</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                        source-nat               true</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                        address                  172.26.2.25</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                            ip-address           172.26.2.25</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                            prefix-length        24</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                            gateway              172.26.2.1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                        exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    exit</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="sample-configuration">Sample Configuration<a href="#sample-configuration" class="hash-link" aria-label="Direct link to Sample Configuration" title="Direct link to Sample Configuration">​</a></h3><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">config</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    authority</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        router              Branch1 </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            name                Branch1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            node        node1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                name            node1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                asset-id        t220-dut1.openstacklocal</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                device-interface    wan-eth0 </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    name                wan-eth0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    pci-address         0000:00:03.0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    network-interface   wan</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                        name                wan</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                        global-id           1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                        conductor           true</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                        default-route       true</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                        neighborhood    Broadband </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                            name            Broadband</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                            topology        mesh </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                        exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                        inter-router-security   internal </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                        source-nat              true</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                        management              true</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                        management-vector </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                            name        mgmt </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                            priority    5</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                        exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                        address         192.168.1.9</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                            ip-address      192.168.1.9</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                            prefix-length   24</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                            gateway         192.168.1.1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                        exit </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                device-interface    red-lan1 </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    name                red-lan1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    pci-address         0000:00:04.0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    network-interface   lan1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                        name                lan1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                        global-id           6</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                        tenant              lan</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                        inter-router-security   internal</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                        source-nat          true</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                        address             172.16.1.15</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                            ip-address          172.16.1.15</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                            prefix-length       24</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                            gateway             172.16.1.1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                        exit </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                exit </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            service-route   dhcp-relay_route</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                name            dhcp-relay_route </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                service-name    dhcp_relay</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                nat-target      172.16.1.3</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                next-hop        node1 lan1 </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    node-name       node1 </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    interface       lan1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                exit </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        router    Branch2</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            name    Branch2</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            node    node1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                name                node1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                device-interface    blue-lan1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    name                blue-lan1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    pci-address         0000:00:04.0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    network-interface   lan1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                        name                     lan1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                        global-id                6</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                        tenant                   dhcp.demo</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                        inter-router-security    internal</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                        address                  172.26.2.25</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                            ip-address           172.26.2.25</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                            prefix-length        24</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                            gateway              172.26.2.1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                            exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                        exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        tenant  lan</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            name    lan</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        tenant  dhcp.demo</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            name    dhcp.demo</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        service     internet</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            name    internet</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            address     0.0.0.0/0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            access-policy   lan</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                source          lan</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        service     dhcp_relay</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            name        dhcp_relay</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            security    internal</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            access-policy   dhcp.demo</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                source          dhcp.demo</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            service-policy      dhcp_relay</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            application-type    dhcp-relay</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">exit</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="dhcp-relay-and-multiple-dhcp-servers">DHCP Relay and Multiple DHCP Servers<a href="#dhcp-relay-and-multiple-dhcp-servers" class="hash-link" aria-label="Direct link to DHCP Relay and Multiple DHCP Servers" title="Direct link to DHCP Relay and Multiple DHCP Servers">​</a></h2><p>To achieve redundancy, more than one DHCP server is deployed. <strong>The SSR accommodates multiple severs by configuring additional service-route elements referencing the same service.</strong> When ingress traffic on the SSR is tagged by the network-interface with the tenant associated with <code>dhcp_relay</code> service, the SSR broadcasts DHCP requests to all next-hops within the service-route&#x27;s next-hop. </p><p>The fastest server wins.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="adding-service-routes">Adding Service-Routes<a href="#adding-service-routes" class="hash-link" aria-label="Direct link to Adding Service-Routes" title="Direct link to Adding Service-Routes">​</a></h3><p>Building upon the earlier configuration and the information above, all that is needed to add additional DHCP servers is an additional <strong>service-route</strong> for each DHCP server. In our example configuration, we will be adding a second service route (<code>dhcp-relay_route2</code>) to the Branch1 router with the new DHCP Server IP address - <code>nat-target</code> 172.16.1.4.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">config</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    authority</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        router      Branch1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            name        Branch1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            service-route        dhcp-relay_route1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                name             dhcp-relay_route1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                service-name     dhcp-relay</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                nat-target       172.16.1.3</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                next-hop         node1 lan1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    node-name    node1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    interface    lan1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            service-route        dhcp-relay_route2</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                name             dhcp-relay_route2</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                service-name     dhcp-relay</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                nat-target       172.16.1.4</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                next-hop         node1 lan1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    node-name    node1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    interface    lan1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">exit</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="sample-configuration-1">Sample Configuration<a href="#sample-configuration-1" class="hash-link" aria-label="Direct link to Sample Configuration" title="Direct link to Sample Configuration">​</a></h3><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">config</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    authority</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        router              Branch1 </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            name                Branch1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            node    node1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                name    node1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                asset-id    t220-dut1.openstacklocal</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                device-interface    wan-eth0 </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    name                wan-eth0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    pci-address         0000:00:03.0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    network-interface   wan</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                        name                wan</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                        global-id           1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                        conductor           true</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                        default-route       true</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                        neighborhood    Broadband </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                            name            Broadband</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                            topology        mesh </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                        exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                        inter-router-security   internal </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                        source-nat              true</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                        management              true</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                        management-vector </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                            name        mgmt </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                            priority    5</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                        exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                        address         192.168.1.9</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                            ip-address      192.168.1.9</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                            prefix-length   24</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                            gateway         192.168.1.1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                        exit </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                device-interface    red-lan1 </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    name            red-lan1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    pci-address     0000:00:04.0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    network-interface   lan1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                        name                lan1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                        global-id           6</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                        tenant              lan</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                        inter-router-security       internal</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                        source-nat          true</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                        address             172.16.1.15</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                            ip-address      172.16.1.15</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                            prefix-length   24</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                            gateway         172.16.1.1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                        exit </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                exit </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                service-route   dhcp-relay_route1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    name            dhcp-relay_route1 </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    service-name    dhcp_relay</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    nat-target      172.16.1.3</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    next-hop        node1 lan1 </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                        node-name       node1 </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                        interface       lan1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    exit </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                service-route   dhcp-relay_route2</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    name            dhcp-relay_route2 </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    service-name    dhcp_relay</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    nat-target      172.16.1.4</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    next-hop        node1 lan1 </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                        node-name       node1 </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                        interface       lan1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    exit </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        router    Branch2</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            name    Branch2</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            node    node1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                name                node1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                device-interface    blue-lan1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    name                blue-lan1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    pci-address         0000:00:04.0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    network-interface   lan1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                        name                     lan1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                        global-id                6</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                        tenant                   dhcp.demo</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                        inter-router-security    internal</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                        source-nat               true</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                        address                  172.26.2.25</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                            ip-address           172.26.2.25</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                            prefix-length        24</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                            gateway              172.26.2.1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                            exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                        exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        tenant  lan</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            name    lan</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        tenant  dhcp.demo</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            name    dhcp.demo</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        service     internet</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            name        internet</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            address     0.0.0.0/0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            access-policy   lan</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                source      lan</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        service         local-lan-summary_router1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            name        local-lan-summary_router1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            security    internal</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            address     172.16.1.12/32</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            access-policy   lan </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                source      lan</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            exit </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        service     local-lan-summary_router3</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            name        local-lan-summary_router3</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            security    internal</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            address     172.16.1.12/32</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            access-policy   wan </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                source      wan</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            exit </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        service     dhcp_relay</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            name        dhcp_relay</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            security    internal</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            access-policy   dhcp.demo</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                source      dhcp.demo</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            service-policy      dhcp_relay</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            application-type    dhcp-relay</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">exit</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="dhcp-relay-with-bgp-over-svr">DHCP Relay with BGP over SVR<a href="#dhcp-relay-with-bgp-over-svr" class="hash-link" aria-label="Direct link to DHCP Relay with BGP over SVR" title="Direct link to DHCP Relay with BGP over SVR">​</a></h2><p>By default, the SSR will auto-generate service-routes and services for each DHCP server. This is good for SVR without BGP. To make DHCP relay work with BGP over SVR, we need to make additional changes to the auto-generated configuration <strong>after</strong> the auto-generation of configuration objects is complete. </p><p>Please review DHCP Relay with SVR for tenant and network-interface configurations.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="service-1">Service<a href="#service-1" class="hash-link" aria-label="Direct link to Service" title="Direct link to Service">​</a></h3><p>Configure the <code>dhcp-relay</code> service with <code>application-type dhcp-relay</code> and add the tenants to which this applies. Finally, set <code>share-service-route</code> to <code>false</code>.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">config</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    authority</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        service     dhcp_relay</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            name            dhcp_relay</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            security        service-sec</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            access-policy   dhcp.demo</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                source      dhcp.demo</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            share-service-routes false</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            application-type    dhcp-relay</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">exit</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="service-routes">Service Routes<a href="#service-routes" class="hash-link" aria-label="Direct link to Service Routes" title="Direct link to Service Routes">​</a></h3><p>On the Branch 1 SSR Router:</p><ol><li>Create a <code>service-route</code> for this service with a <code>nat-target</code> of the DHCP server, and perform a commit. The conductor auto-generates an additional DHCP service.</li></ol><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">config</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    authority</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        router      Branch1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            name        Branch1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            service-route        dhcp_relay_service-route</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                name             dhcp_relay_service-route</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                service-name     dhcp-relay</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                nat-target       172.16.1.3</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                next-hop         node1 lan1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    node-name    node1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    interface    lan1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">exit</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="2"><li><strong>Change the configuration of the auto-generated DHCP service</strong> to <code>generated=false</code> and <code>share-service-routes=false</code>.</li></ol><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">config</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    authority</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        service _dhcp_relay_5_172.16.1.3</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            name                _dhcp_relay_5_172.16.1.3</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            description         &quot;Auto generated DHCP relay service for DHCP server 172.16.1.3&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            enabled             true</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            scope               private</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            tap-multiplexing    false</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            transport   udp</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                protocol        udp</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                port-range      67</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    start-port  67</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    end-port        67</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            address                     172.16.1.3/32</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            generate-categories         false</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            access-policy-generated     false</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            access-policy               dhcp.demo</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                source                  dhcp.demo</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                permission              allow</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            share-service-routes        false</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            source-nat                  disabled</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            application-type            generic</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            fqdn-resolution-type        v4</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            session-record</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                include-hierarchical-services   true</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            generated       false</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">exit</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="3"><li>Go into the auto-generated service-route and change <code>generated</code> to <code>false</code>, change type to <code>use-learned-routes</code>, and perform one last commit.</li></ol><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">config</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    authority</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        router  Branch1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            name        Branch1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            service-route       _dhcp_relay_dhcp_relay_service-route</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                name            _dhcp_relay_dhcp_relay_service-route</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                service-name    _dhcp_relay_5_172.16.1.3</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                enable-failover false</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                generated       false</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                use-learned-routes</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">exit</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="4"><li>RIB/FIB should show the service for BGP as the path for <code>dhcp_relay</code>. In this case, the SSR on Branch2 has a path for <code>dhcp_relay</code> to the SSR on Branch1 over BGP.</li></ol><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ribfibbgp-show-commands">RIB/FIB/BGP Show Commands<a href="#ribfibbgp-show-commands" class="hash-link" aria-label="Direct link to RIB/FIB/BGP Show Commands" title="Direct link to RIB/FIB/BGP Show Commands">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="ssr-branch-1">SSR Branch 1<a href="#ssr-branch-1" class="hash-link" aria-label="Direct link to SSR Branch 1" title="Direct link to SSR Branch 1">​</a></h4><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">admin@node1.Branch1# show bgp summary</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Thu 2022-03-31 20:24:49 UTC</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">IPv4 Unicast Summary:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">BGP router identifier 2.2.2.1, local AS number 64512 vrf-id 0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">BGP table version 3</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">RIB entries 5, using 960 bytes of memory</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Peers 2, using 43 KiB of memory</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Neighbor    V       AS      MsgRcvd     MsgSent     TblVer  InQ     OutQ    Up/Down     State/PfxRcd    PfxSnt</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">2.2.2.2     4    64513        18087       19383          0    0        0    6d01h18m               0         3</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">2.2.2.4     4    64514        17219       17221          0    0        0    5d23h27m               0         3</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Total number of neighbors 2</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Completed in 0.20 seconds</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">admin@node1.Branch1# show bgp</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Thu 2022-03-31 20:24:51 UTC</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">BGP table version is 3, local router ID is 2.2.2.1, vrf id 0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Default local pref 100, local AS 64512</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Status codes: s suppressed, d damped, h history, * valid, &gt; best, = multipath,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">              i internal, r RIB-failure, S Stale, R Removed</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Nexthop codes: @NNN nexthop&#x27;s vrf id, &lt; announce-nh-self</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Origin codes: i - IGP, e - EGP, ? - incomplete</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    Network         Next Hop    Metric  LocPrf Weight Path</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">*&gt;  2.2.2.1/32      0.0.0.0          0          32768   ?</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">*&gt;  172.16.1.0/24   0.0.0.0          0          32768   ?</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">*&gt;  192.168.1.0/24  0.0.0.0          0          32768   ?</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Displayed 3 routes and 3 total paths</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Completed in 0.22 seconds</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">admin@node1.Branch1# show fib service-name _bgp_Branch1_R1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Thu 2022-03-31 20:31:42 UTC</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Entry Count: 109</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Capacity: 23387</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">============ ====== ======= =============== ===== ================= ============= ======== ======</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">IP Prefix     Port   Proto   Tenant          VRF    Service         Next Hops     Vector    Cost</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">============ ====== ======= =============== ===== ================= ============= ======== ======</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">2.2.2.1/32    179     TCP   _bgp_speaker_     -   _bgp_Branch1_R1   0-None.4095     -        0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Completed in 0.05 seconds</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">admin@node1.Branch1# show fib service-name _dhcp_relay_5_172.16.1.3</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Thu 2022-03-31 20:31:45 UTC</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Entry Count: 109</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Capacity: 23387</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">=============== ====== ======= ========= ===== ========================== =========== ======== ======</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">IP Prefix       Port    Proto   Tenant    VRF   Service                   Next Hops   Vector   Cost</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">=============== ====== ======= ========= ===== ========================== =========== ======== ======</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">172.16.1.3/32    67      UDP   dhcp.demo   -    _dhcp_relay_5_172.16.1.3    1-2.0        -       0</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="ssr-branch-2">SSR Branch 2<a href="#ssr-branch-2" class="hash-link" aria-label="Direct link to SSR Branch 2" title="Direct link to SSR Branch 2">​</a></h4><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">Default local pref 100, local AS 64514</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Status codes: s suppressed, d damped, h history, * valid, &gt; best, = multipath,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">              i internal, r RIB-failure, S Stale, R Removed</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Nexthop codes: @NNN nexthop&#x27;s vrf id, &lt; announce-nh-self</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Origin codes: i - IGP, e - EGP, ? - incomplete</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    Network         Next Hop    Metric  LocPrf Weight Path</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">*&gt;  2.2.2.1/32      2.2.2.1          0       0  64512  ?</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">*&gt;  172.16.1.0/24   2.2.2.1          0       0  64512  ?</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">*&gt;  192.168.1.0/24  2.2.2.1          0       0  64512  ?</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Displayed 3 routes and 3 total paths</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Completed in 0.40 seconds</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">admin@node1.Branch2# show bgp summary</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Thu 2022-03-31 20:32:25 UTC</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">IPv4 Unicast Summary:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">BGP router identifier 2.2.2.4, local AS number 64514 vrf-id 0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">BGP table version 3</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">RIB entries 5, using 960 bytes of memory</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Peers 1, using 21KiB of memory</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Neighbor    V       AS      MsgRcvd     MsgSent     TblVer  InQ     OutQ    Up/Down     State/PfxRcd    PfxSnt</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">2.2.2.1     4       64512   17236       17234            0   0        0     5d23h35m        3               3</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Total number of neighbors 1 Completed in 0.18 seconds</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">admin@node1.Branch2# show fib service-name _dhcp_relay_5_172.16.1.3 Thu 2022-03-31 20:32:38 UTC</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Entry Count: 112</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Capacity:   23387</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">=============== ====== ======= ========= ===== ========================== =========== ======== ======</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">IP Prefix       Port    Proto   Tenant    VRF   Service                   Next Hops   Vector   Cost</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">=============== ====== ======= ========= ===== ========================== =========== ======== ======</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">172.16.1.3/32    67     UDP     dhcp.demo  -    _dhcp_relay_5_172.16.1.3  192.168.1.9    -       0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Completed in 0.15 seconds</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">admin@node1.Branch2# show fib service-name _bgp_Branch1_R1 Thu 2022-03-31 20:33:05 UTC</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Entry Count: 112</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Capacity:   23387</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">=============== ====== ======= ============= ===== ========================== =========== ======== ======</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">IP Prefix       Port    Proto   Tenant       VRF    Service                   Next Hops   Vector   Cost</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">=============== ====== ======= ============= ===== ========================== =========== ======== ======</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">2.2.2.1/32      179     TCP    _bgp_speaker_   -    _bgp_Branch1_R1           192.168.1.9    -        0</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="sample-configuration-2">Sample Configuration<a href="#sample-configuration-2" class="hash-link" aria-label="Direct link to Sample Configuration" title="Direct link to Sample Configuration">​</a></h3><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">config</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    authority</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        service         dhcp_relay</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            name            dhcp_relay</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            access-policy   dhcp.demo</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                source      dhcp.demo</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            share-service-routes    false</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            application-type        dhcp-relay</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">config</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    authority</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        service         _dhcp_relay_5_172.16.1.3</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            name            _dhcp_relay_5_172.16.1.3</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            description     &quot;Auto generated DHCP relay service for DHCP server 172.16.1.3&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            enabled         true</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            scope           private</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            tap-multiplexing    false</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            transport       udp</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                protocol    udp</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                port-range  67</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    start-port  67</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    end-port    67</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            address     172.16.1.3/32</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            generate-categories     false</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            access-policy-generated false</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            access-policy       dhcp.demo</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                source          dhcp.demo</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                permission      allow</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            share-service-routes    false</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            source-nat              disabled</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            application-type generic</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            fqdn-resolution-type    v4</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            session-record</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                include-hierarchical-services   true</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            generated       false</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">config</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    authority</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        router      Branch1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            name            Branch1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            service-route   dhcp_relay_service-route</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                name            dhcp_relay_service-route</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                service-name    dhcp_relay</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                nat-target      172.16.1.3</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                next-hop        node1 lan1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    node-name   node1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    interface   lan1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">config</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    authority</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        router  Branch1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            name    Branch1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            service-route   _dhcp_relay_dhcp_relay_service-route</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                name            _dhcp_relay_dhcp_relay_service-route</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                service-name    _dhcp_relay_5_172.16.1.3</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                enable-failover false</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                generated       false</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                use-learned-routes</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                reachability-detection</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    enabled             false</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    detection-window    5</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">exit</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"></div><div class="col lastUpdated_vwxv"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2023-09-25T14:32:58.000Z">Sep 25, 2023</time></b></span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/bcp_using_128T_as_ntp_server"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Branch NTP Service</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/bcp_qos_msft_expressroute"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">ExpressRoute QoS Configuration</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#requirements" class="table-of-contents__link toc-highlight">Requirements</a></li><li><a href="#design-types" class="table-of-contents__link toc-highlight">Design Types</a></li><li><a href="#architecture" class="table-of-contents__link toc-highlight">Architecture</a></li><li><a href="#site-types" class="table-of-contents__link toc-highlight">Site Types</a></li><li><a href="#dhcp-relay-with-svr" class="table-of-contents__link toc-highlight">DHCP Relay with SVR</a><ul><li><a href="#tenant" class="table-of-contents__link toc-highlight">Tenant</a></li><li><a href="#service" class="table-of-contents__link toc-highlight">Service</a></li><li><a href="#service-route" class="table-of-contents__link toc-highlight">Service Route</a></li><li><a href="#network-interface" class="table-of-contents__link toc-highlight">Network Interface</a></li><li><a href="#sample-configuration" class="table-of-contents__link toc-highlight">Sample Configuration</a></li></ul></li><li><a href="#dhcp-relay-and-multiple-dhcp-servers" class="table-of-contents__link toc-highlight">DHCP Relay and Multiple DHCP Servers</a><ul><li><a href="#adding-service-routes" class="table-of-contents__link toc-highlight">Adding Service-Routes</a></li><li><a href="#sample-configuration-1" class="table-of-contents__link toc-highlight">Sample Configuration</a></li></ul></li><li><a href="#dhcp-relay-with-bgp-over-svr" class="table-of-contents__link toc-highlight">DHCP Relay with BGP over SVR</a><ul><li><a href="#service-1" class="table-of-contents__link toc-highlight">Service</a></li><li><a href="#service-routes" class="table-of-contents__link toc-highlight">Service Routes</a></li><li><a href="#ribfibbgp-show-commands" class="table-of-contents__link toc-highlight">RIB/FIB/BGP Show Commands</a></li><li><a href="#sample-configuration-2" class="table-of-contents__link toc-highlight">Sample Configuration</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2023 Juniper Networks, Inc.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.9025d2fb.js"></script>
<script src="/assets/js/main.bc3caea8.js"></script>
</body>
</html>