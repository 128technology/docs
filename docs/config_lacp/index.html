<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-config_lacp">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.3.1">
<title data-rh="true">Link Aggregation and LACP | SSN Docs</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://docs.128technology.com/docs/config_lacp"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Link Aggregation and LACP | SSN Docs"><meta data-rh="true" name="description" content="This feature is currently in Beta. Support for LAG has been added for a limited number of use cases. Please refer to the Caveats section for details."><meta data-rh="true" property="og:description" content="This feature is currently in Beta. Support for LAG has been added for a limited number of use cases. Please refer to the Caveats section for details."><link data-rh="true" rel="icon" href="/img/favicon.png"><link data-rh="true" rel="canonical" href="https://docs.128technology.com/docs/config_lacp"><link data-rh="true" rel="alternate" href="https://docs.128technology.com/docs/config_lacp" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.128technology.com/docs/config_lacp" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.8e1fdc51.css">
<link rel="preload" href="/assets/js/runtime~main.93016332.js" as="script">
<link rel="preload" href="/assets/js/main.31b03ced.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.png" alt="Juniper Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/logo_dark.png" alt="Juniper Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate"></b></a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/docs/intro_getting_started">Docs</a><a href="https://community.juniper.net/answers/communities/community-home?CommunityKey=310d1a41-12fa-4627-9a99-880145a7c87c" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Community<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://www.juniper.net/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Company<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="searchBox_ZlJk"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/about_128t">About</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/intro_getting_started">Introduction</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/intro_system_reqs">Deployment Considerations</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/intro_installation">Installation Process</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/install_conductor_overview">Conductor Installation</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/intro_installation_bootable_media">Router Installation</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/intro_installation_image">Image-Based Installation</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/supported_cloud_platforms">Cloud Installations</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/intro_upgrade_considerations">Upgrades and Rollback</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/intro_installation_installer">Supporting Install Information - Appendix</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/concepts_application_discovery">Concepts</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/wan_overview">WAN Assurance</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/docs/config_basics">Administration</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/config_basics">Configuration</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" tabindex="0" href="/docs/howto_tune_bfd">Optimizing Routing Protocols</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/howto_tune_bfd">Tuning BFD</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/config_session_optimization">TCP Session Optimization</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/config_bgp">BGP</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/config_vrf_route_leaking">VRF Route Leaking</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/config_ospf">OSPF</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/config_bfd">BFD with BGP and OSPF</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/config_multicast">Multicast</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/config_lacp">Link Aggregation and LACP</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/config_dhcp">DHCP</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/config_ha">High Availability</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/config_access_mgmt">Access Management and Authentication</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/config_ntp_auth">NTP</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/sec_adaptive_encrypt">Security</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/concepts_ssr_idp">Intrusion Detection and Prevention</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/config_STEP">Service and Topology Exchange Protocol (STEP)</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/how_to_use_app_summary">How To</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/ts_applications">Troubleshooting</a></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/events_overview">Events</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/bcp_att_avpn_configuration">Best Practices</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/cli_reference">CLI and Element Reference</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/installer_cli_reference">Installer/Initializer Reference</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/plugin_intro">Plugins</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/release_notes_128t_6.2">Release Notes</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Administration</span><meta itemprop="position" content="1"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Optimizing Routing Protocols</span><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Link Aggregation and LACP</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Link Aggregation and LACP</h1></header><div class="theme-admonition theme-admonition-important alert alert--info admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_S0QG"><p>This feature is currently in Beta. Support for LAG has been added for a limited number of use cases. Please refer to the <a href="#caveats">Caveats</a> section for details.</p></div></div><p>A Link Aggregation Group (LAG) enables the grouping Ethernet interfaces to form a single link layer interface. LAGs are formed by connecting multiple ports in parallel between two devices. As more links are added between the two devices, bandwidth expands. Traffic is automatically load-balanced, and in a network failure scenario, there is link-level redundancy. </p><p>LACP is the protocol that defines how the group of interfaces operates. LACP enables dynamic LAG, allowing the exchange of information between the members of the LAG network, monitoring bundle endpoints, and adding or removing new or unused individual links.  </p><p>A Link Aggregation Group (LAG) that does not have LACP enabled operates as a static LAG, where the interfaces do not communicate state information.</p><p>For a deeper look at LAG and LACP, see <a href="https://www.juniper.net/documentation/us/en/software/junos/interfaces-ethernet-switches/topics/topic-map/switches-interface-aggregated.html" target="_blank" rel="noopener noreferrer">Aggregated Ethernet Interfaces</a>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="how-it-works">How It Works<a href="#how-it-works" class="hash-link" aria-label="Direct link to How It Works" title="Direct link to How It Works">​</a></h2><p>The LAG is created by defining a device interface as a <code>bond</code>. The <code>bond</code> interface is configured with a network-interface. Members of the <code>bond</code> are configured as ethernet device interfaces, and have the <code>parent-bond</code> setting defined as the <code>bond</code> device interface. <code>bond</code> members (the device interfaces) are not allowed to be configured with their own network-interfaces.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="requirements">Requirements<a href="#requirements" class="hash-link" aria-label="Direct link to Requirements" title="Direct link to Requirements">​</a></h3><p>LAG/LACP has the following requirements:</p><ul><li>LAG/LACP must be configured on the devices on each end of the link.</li><li>A <code>bond</code> must have between 1 and 8 members. Members are device-interfaces that reference the <code>bond</code> interface as their <code>parent-bond</code>.</li><li>All members of the <code>bond</code> must be of the type <code>ethernet</code>.</li><li>All members of the <code>bond</code> must be the same speed and support full duplex.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="supported-platforms">Supported Platforms<a href="#supported-platforms" class="hash-link" aria-label="Direct link to Supported Platforms" title="Direct link to Supported Platforms">​</a></h3><p>LAG is currently supported on the following platforms:</p><ul><li>SSR120</li><li>SSR130</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="caveats">Caveats<a href="#caveats" class="hash-link" aria-label="Direct link to Caveats" title="Direct link to Caveats">​</a></h3><p>The following caveats have been identified:</p><ul><li>Dynamic reconfiguration is not currently supported. Changes in LAG configuration require a 128T service restart and may result in service disruption. Any changes to LAG configuration should be performed during a maintenance window.</li><li>High Availability has not been fully tested, and may not be fully functional. <ul><li>VRRP with LAG is not supported</li><li>Shared physical addresses are not allowed.</li></ul></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="configuring-lag-and-lacp">Configuring LAG and LACP<a href="#configuring-lag-and-lacp" class="hash-link" aria-label="Direct link to Configuring LAG and LACP" title="Direct link to Configuring LAG and LACP">​</a></h2><p>LACP is enabled by default on the <code>bond</code> device interface, and must be configured on each end of the link. The following device interface configuration shows a <code>bond</code> interface and <code>lacp-enabled</code> as true (default). The interfaces that are part of the LAG are configured as ethernet interfaces and the <code>parent-bond</code> is identified as the name of the <code>bond</code> interface. </p><div class="theme-admonition theme-admonition-important alert alert--info admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_S0QG"><p>Please note that after any changes to the LAG configuration, you must restart the 128T service. </p></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="configuration-using-the-pcli">Configuration using the PCLI<a href="#configuration-using-the-pcli" class="hash-link" aria-label="Direct link to Configuration using the PCLI" title="Direct link to Configuration using the PCLI">​</a></h3><ol><li>Create the LAG by configuring the <code>bond</code> device-interface.<ul><li>Name the interface</li><li>Set the <code>type</code> to <code>bond</code></li><li><code>lacp-enable</code> is enabled by default</li></ul></li></ol><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">              device-interface  bond0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    name               bond0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    type               bond</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    bond-settings</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                        lacp-enable  true</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    exit  </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="2"><li>Configure the network interface used by the LAG.</li></ol><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    network-interface  bond-nw</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                        name       bond-nw</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                        global-id  1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                        tenant     red</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                        address    1.1.1.1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                            ip-address     1.1.1.1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                            prefix-length  24</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                            gateway        1.1.1.100</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                        exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">             exit</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="3"><li>Configure at least one device interface to be part of the LAG.<ul><li>Be sure to configure the <code>parent-bond</code> with the device name of the <code>bond</code> interface.</li><li>The only configuration allowed on the bond-members are <code>pci-address</code> and <code>parent-bond</code>. All other settings must be configured on the <code>bond</code> interface.</li></ul></li></ol><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">             device-interface  ge-0-1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    name         ge-0-1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    type         ethernet</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    pci-address  0000:04:00.0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    parent-bond  bond0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">             exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">             device-interface  ge-0-0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    name         ge-0-0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    type         ethernet</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    pci-address  0000:04:00.1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    parent-bond  bond0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">             exit</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="configuration-using-the-gui">Configuration Using the GUI<a href="#configuration-using-the-gui" class="hash-link" aria-label="Direct link to Configuration Using the GUI" title="Direct link to Configuration Using the GUI">​</a></h3><p>These same settings are accessed from the GUI at the Authority &gt; Router &gt; Node &gt; Device Interface level. </p><ol><li>Create the LAG by configuring the <code>bond</code> device-interface.<ul><li>Name the interface</li><li>Set the <code>type</code> to <code>bond</code></li><li><code>lacp-enable</code> is enabled by default</li></ul></li></ol><p><img loading="lazy" alt="Configuring the Bond Interface" src="/assets/images/config_lacp_bond-ff176107c84562222564005232136d04.png" width="2160" height="940" class="img_ev3q"></p><ol start="2"><li>Configure the network interface used by the LAG.</li></ol><p><img loading="lazy" alt="Configure the Network Interface" src="/assets/images/config_lacp_network-intf-bond-802042de65cd09e94dc73209408ee49c.png" width="2086" height="1080" class="img_ev3q"></p><ol start="3"><li>Configure at least one device interface to be part of the LAG.<ul><li>Be sure to configure the <code>parent-bond</code> with the device name of the <code>bond</code> interface.</li><li>The only configuration allowed on the bond-members are <code>pci-address</code> and <code>parent-bond</code>. All other settings must be configured on the <code>bond</code> interface.</li></ul></li></ol><p><img loading="lazy" alt="Configure LAG devices" src="/assets/images/config_lacp_dev-inf-parent-bond-afb19c5262f07fc2828cf1aae439dffb.png" width="1066" height="1896" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="configuring-lldp">Configuring LLDP<a href="#configuring-lldp" class="hash-link" aria-label="Direct link to Configuring LLDP" title="Direct link to Configuring LLDP">​</a></h3><p>LLDP allows other devices in the network to discover the SSR. It is not required for LAG, but when enabled it provides information about the LAG interface in the network. It should be noted that when enabled as part of LAG, it is configured for the entirety of the <code>bond</code>, not on the individual interfaces within the group. For additional information about using the LLDP command, see <a href="/docs/config_reference_guide#lldp"><code>lldp</code></a></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">              device-interface  bond0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    name               bond0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    type               bond</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    bond-settings</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                        lacp-enable  true</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    lldp mode        enabled</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            exit         </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><img loading="lazy" alt="Configuring LLDP mode" src="/assets/images/config_lldp_lacp-51004b03c300bf9e9f9861eb8cb51bd0.png" width="2084" height="1100" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="show-commands">Show Commands<a href="#show-commands" class="hash-link" aria-label="Direct link to Show Commands" title="Direct link to Show Commands">​</a></h3><p>Use the <code>show device-interface name &lt;name&gt;</code> command to troubleshoot or view the status of the LAG/LACP interface.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">admin@sn2028220232.router# show device-interface name bond0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Mon 2023-06-26 19:03:32 UTC</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Retrieving device interface information...</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">=======================================================================================================</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> sn2028220232:bond0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">=======================================================================================================</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> Type:                bond</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> Forwarding:          true</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> MAC Address:         90:ec:77:32:e3:f6</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> Admin Status:        up</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> Operational Status:  up</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> Provisional Status:  up</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> Redundancy Status:   non-redundant</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> Speed:               2 Gb/s</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> Duplex:              full</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> in-octets:                    73018210</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> in-unicast-pkts:                 86729</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> in-errors:                           0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> out-octets:                    5611232</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> out-unicast-pkts:                45281</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> out-errors:                          0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> Bond Information:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   mode:                       LACP</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   device_port:                1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   dpdk_port:                  3</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   member_count:               2</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   active_members:             2</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   xmit_policy:                LAYER34</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   bond_members:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">       aggregator_port_id:     1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">       selection:              SELECTED</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">       actor_detail_info:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        system_priority:      65535</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">         system_mac_address:   90:ec:77:32:e3:f6</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">         port_key:             17</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">         port_priority:        255</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">         port_number:          2</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">         port_state:           ACTIVE, TIMEOUT, AGGREGATION, SYNCHRONIZATION, COLLECTING, DISTRIBUTING</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">       partner_detail_info:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">         system_priority:      127</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">         system_mac_address:   88:0a:a3:e6:5d:d4</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">         port_key:             1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">         port_priority:        127</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">         port_number:          1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">         port_state:           ACTIVE, TIMEOUT, AGGREGATION, SYNCHRONIZATION, COLLECTING, DISTRIBUTING</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">       aggregator_port_id:     1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">       selection:              SELECTED</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">       actor_detail_info:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">         system_priority:      65535</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">         system_mac_address:   90:ec:77:32:e3:f5</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">         port_key:             17</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">         port_priority:        255</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">         port_number:          1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">         port_state:           ACTIVE, TIMEOUT, AGGREGATION, SYNCHRONIZATION, COLLECTING, DISTRIBUTING</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">       partner_detail_info:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">         system_priority:      127</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">         system_mac_address:   88:0a:a3:e6:5d:d4</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">         port_key:             1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">         port_priority:        127</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">         port_number:          2</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">         port_state:           ACTIVE, TIMEOUT, AGGREGATION, SYNCHRONIZATION, COLLECTING, DISTRIBUTING</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> Plugin Info:         unavailable</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Completed in 0.18 seconds</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"></div><div class="col lastUpdated_vwxv"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2024-01-22T17:32:16.000Z">Jan 22, 2024</time></b></span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/config_multicast"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Multicast</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/config_dhcp"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">DHCP</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#how-it-works" class="table-of-contents__link toc-highlight">How It Works</a><ul><li><a href="#requirements" class="table-of-contents__link toc-highlight">Requirements</a></li><li><a href="#supported-platforms" class="table-of-contents__link toc-highlight">Supported Platforms</a></li><li><a href="#caveats" class="table-of-contents__link toc-highlight">Caveats</a></li></ul></li><li><a href="#configuring-lag-and-lacp" class="table-of-contents__link toc-highlight">Configuring LAG and LACP</a><ul><li><a href="#configuration-using-the-pcli" class="table-of-contents__link toc-highlight">Configuration using the PCLI</a></li><li><a href="#configuration-using-the-gui" class="table-of-contents__link toc-highlight">Configuration Using the GUI</a></li><li><a href="#configuring-lldp" class="table-of-contents__link toc-highlight">Configuring LLDP</a></li><li><a href="#show-commands" class="table-of-contents__link toc-highlight">Show Commands</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2024 Juniper Networks, Inc.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.93016332.js"></script>
<script src="/assets/js/main.31b03ced.js"></script>
</body>
</html>