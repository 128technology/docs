<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="generator" content="Docusaurus">


<title data-react-helmet="true">Border Gateway Protocol (BGP) | 128T Docs</title>

<meta data-react-helmet="true" http-equiv="x-ua-compatible" content="ie=edge"><meta data-react-helmet="true" property="og:title" content="128T Docs"><meta data-react-helmet="true" name="twitter:card" content="summary"><meta data-react-helmet="true" name="description" content="Border Gateway Protocol, a.k.a, BGP is a standard exterior gateway protocol developed for exchanging routing and reachability information between Autonomous Systems, a collection of IP routing prefixes managed by a single administrative entity. BGP makes routing decisions based on paths and network policies and is mainly used by Service Providers. BGP can also be used for routing within an autonomous system using its flavor iBGP, which is less popular than other IGP protocols such as OSPF, EIGRP, etc."><meta data-react-helmet="true" property="og:description" content="Border Gateway Protocol, a.k.a, BGP is a standard exterior gateway protocol developed for exchanging routing and reachability information between Autonomous Systems, a collection of IP routing prefixes managed by a single administrative entity. BGP makes routing decisions based on paths and network policies and is mainly used by Service Providers. BGP can also be used for routing within an autonomous system using its flavor iBGP, which is less popular than other IGP protocols such as OSPF, EIGRP, etc."><meta data-react-helmet="true" property="og:url" content="https://docs.128technology.com/docs/howto_bgp">

<link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico">


<link rel="stylesheet" href="/styles.7d43a3e9.css">


<link rel="preload" href="/styles.f2b4486f.js" as="script">

<link rel="preload" href="/runtime~main.25f276b4.js" as="script">

<link rel="preload" href="/main.8ba51e6d.js" as="script">

<link rel="preload" href="/1.6fd3e54f.js" as="script">

<link rel="preload" href="/2.6c31914b.js" as="script">

<link rel="preload" href="/84.b2761997.js" as="script">

<link rel="preload" href="/20ac7829.73cfd23a.js" as="script">

<link rel="preload" href="/17896441.b4439569.js" as="script">

<link rel="preload" href="/4a5a5e2a.0c48f0d3.js" as="script">

</head>
<body>

<div id="__docusaurus">
<nav class="navbar navbar--light navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a aria-current="page" class="navbar__brand active" href="/"><img class="navbar__logo" src="/img/128t_black.png" alt="128 Technology Logo"><strong class="navbar__title"></strong></a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/docs/intro_getting_started">Docs</a><a class="navbar__item navbar__link" target="_blank" rel="noopener noreferrer" href="https://community.128technology.com/home">Interchange</a><a class="navbar__item navbar__link" target="_blank" rel="noopener noreferrer" href="https://www.128technology.com/">Company</a><div class="navbar__search"><span aria-label="expand searchbar" role="button" class="search-icon" tabindex="0"></span><input type="search" id="search_input_react" placeholder="Search" aria-label="Search" class="navbar__search-input search-bar"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a aria-current="page" class="navbar__brand active" href="/"><img class="navbar__logo" src="/img/128t_black.png" alt="128 Technology Logo"><strong class="navbar__title"></strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/intro_getting_started">Docs</a></li><li class="menu__list-item"><a class="menu__link" target="_blank" rel="noopener noreferrer" href="https://community.128technology.com/home">Interchange</a></li><li class="menu__list-item"><a class="menu__link" target="_blank" rel="noopener noreferrer" href="https://www.128technology.com/">Company</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_1kjD"><div class="docSidebarContainer_1cYp"><div class="sidebar_1kLs"><div class="sidebarLogo_3ono"><img src="/img/128t_black.png" alt="128 Technology Logo"><strong></strong></div><div class="menu menu--responsive menu_w2sC"><button aria-label="Open Menu" class="button button--secondary button--sm menu__button" type="button"><svg class="sidebarMenuIcon_2vk4" xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 32 32" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">About</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/about_128t">128T</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/CONTRIBUTING">Contributing</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Introduction</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/intro_getting_started">Getting Started</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/intro_downloading_iso">Downloading ISOs</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/intro_installation">Installation</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/intro_installation_installer">Installing 128T</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/intro_installation_bootable_media">Installing From ISO</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/intro_installation_aws">Installing in AWS</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/intro_ztp">QuickStart</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/intro_creating_bootable_usb">Creating Bootable USB</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/intro_upgrading">Upgrading</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/intro_rollback">Rollback</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Concepts</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/concepts_application_discovery">Application Discovery</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/concepts_ha_theoryofoperation">HA - Theory of Operation</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/concepts_interface_types">Interface Types</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/concepts_linux_host_networking">Linux Host Networking</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/concepts_network_planes">Forwarding Planes</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/concepts_metrics">Metrics</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/concepts_machine_communication">Machine Communication</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/concepts_pcli">PCLI</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/concepts_session_timer">Session Timers</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/concepts_glossary">Glossary</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Administration</a><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Configuration</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/config_basics">Basics</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/config_audit_log">Audit Log</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/config_dns_proxy">DNS Proxy</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/config_ldap">LDAP</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/config_ha">High Availability</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/config_non_forwarding_ha_interfaces">Non-forwarding HA Interfaces</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/config_adding_interfaces_to_ha_team">Adding Interfaces to HA Team Interface</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/config_transition_standalone_to_ha">Transitioning a Conductor from Standalone to HA</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/config_nat">NAT</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/config_ospf">OSPF</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/config_snmp">SNMP</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/config_snmp_metrics">SNMP: User defined metrics</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/config_tenants">Tenants</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/config_templates">Configuration Templates</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">How To</a><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active" href="/docs/howto_bgp">BGP</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/howto_conductor_migration">Conductor Migration</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/howto_lte">LTE</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/howto_maintenance_mode">Maintenance Mode</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/howto_trusted_ca_certificate">Adding a Trusted Certificate</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/howto_tune_bfd">Tuning BFD</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Troubleshooting</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/ts_applications">Application Troubleshooting</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/ts_ap_salt_minion">AP: Salt Minion</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/ts_cpu_spikes">CPU Spikes</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/ts_connecting_to_routers">Connecting to Routers</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/ts_forwarding_resource_pools">Forwarding Plane Resource Pools</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/ts_logs">Logs</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/ts_mac_uniqueness">MAC Address Uniqueness</a></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Events</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/events_overview">Alarm and Events</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/events_alarms">Alarms</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/events_events">Events</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Best Practices</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/bcp_conductor_deployment">Conductor Deployment</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/bcp_lte_peering">LTE Peering</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/bcp_service_and_service_policy_design">Service and Service Policy Design</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/bcp_tenants">Tenancy Design</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">CLI Reference</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/cli_reference">Command Line Reference</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Plugins</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/plugin_monitoring_agent">Monitoring</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/plugin_gre">GRE Plugin</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">REST APIs</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/api_rest_4.2.0">128T-4.2.0</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Release Notes</a><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">128T</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/release_notes_128t_4.3">4.3</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/release_notes_128t_4.2">4.2</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/release_notes_128t_4.1">4.1</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/release_notes_128t_4.0">4.0</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">128T Installer</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/release_notes_128t_installer_2.4">2.4</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/release_notes_128t_installer_2.3">2.3</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/release_notes_128t_installer_2.2">2.2</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/release_notes_128t_installer_2.1">2.1</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">128T IPSEC Client</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/release_notes_128t_ipsec_client_2.0">2.0</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/release_notes_128t_ipsec_client_1.0">1.0</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">128T SIP ALG</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/release_notes_128t_sip_alg_2.1">2.1</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">128T ZScaler</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/release_notes_128t_zscaler_1.1">1.1</a></li></ul></li></ul></li></ul></div></div></div><main class="docMainContainer_FFX1"><div class="padding-vert--lg"><div class="container"><div class="row"><div class="col docItemCol_2GOA"><div class="docItemContainer_2cwg"><article><header><h1 class="docTitle_1vWb">Border Gateway Protocol (BGP)</h1></header><div class="markdown"><p>Border Gateway Protocol, a.k.a, BGP is a standard exterior gateway protocol developed for exchanging routing and reachability information between Autonomous Systems, a collection of IP routing prefixes managed by a single administrative entity. BGP makes routing decisions based on paths and network policies and is mainly used by Service Providers. BGP can also be used for routing within an autonomous system using its flavor iBGP, which is less popular than other IGP protocols such as OSPF, EIGRP, etc.</p><p>Learning routes from BGP simplifies enterprise configuration and integration with Secure Vector Routing. BGP over SVR enables easy distribution of service route information when traffic between 128T peers flows through the internet and adds the security of SVR to the BGP peering.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="prerequisites"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#prerequisites" title="Direct link to heading">#</a>Prerequisites</h2><p>This section presumes that the reader has a running 128T system and wants to add configuration to support and configure BGP. The running 128T system includes configuration for basic platform functionality (e.g., router, node, device-interface, network-interface) and basic routing configuration (e.g., tenants, services, etc.). Refer to the 128T <a href="concepts_glossary">data model</a> and the <a href="cli_reference">Configuration Guide</a> for a better understanding about 128T networking.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="bgp-configuration-when-peer-is-non-128t"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#bgp-configuration-when-peer-is-non-128t" title="Direct link to heading">#</a>BGP Configuration when peer is non-128T</h2><p>The BGP configuration exists in the routing configuration container in the 128T data model. For any routing configuration, static or dynamic, a default routing instance called <code>default-instance</code>, must be defined in the 128T configuration template.
Assuming that BGP is configured on the peering router with router ID 1.1.1.1 as AS 6000 and the 128T router as the BGP peer, we can configure BGP on our 128T using the following commands:</p><div class="mdxCodeBlock_iHAB"><pre class="prism-code language-undefined codeBlock_19pQ"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><code class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">admin@branchoffice1.seattlesite1# config auth admin@branchoffice1.seattlesite1 (authority)# router seattlesite1 admin@branchoffice1.seattlesite1 (router[name=seattlesite1])# routing default-instance</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">admin@branchoffice1.seattlesite1 (routing[type=default-instance])# routing-protocol bgp</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">admin@branchoffice1.seattlesite1 (routing-protocol[type=bgp])# local-as 100</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">admin@branchoffice1.seattlesite1 (routing-protocol[type=bgp])# router-id 1.1.1.128</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">admin@branchoffice1.seattlesite1 (routing-protocol[type=bgp])# address-family ipv4-unicast</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">admin@branchoffice1.seattlesite1 (address-family[afi-safi=ipv4-unicast])# exit</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">admin@branchoffice1.seattlesite1 (routing-protocol[type=bgp])# neighbor 1.1.1.1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">admin@branchoffice1.seattlesite1 (neighbor[neighbor-address=1.1.1.1])# neighbor-as 6000</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">admin@branchoffice1.seattlesite1 (neighbor[neighbor-address=1.1.1.1])# address-family ipv4-unicast</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">admin@branchoffice1.seattlesite1 (address-family[afi-safi=ipv4-unicast])# next-hop-self true</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">admin@branchoffice1.seattlesite1 (address-family[afi-safi=ipv4-unicast])#exit admin@branchoffice1.seattlesite1 (neighbor[neighbor-address=1.1.1.1])# exit</span></div></code></pre></div><p>Under the default routing instance, specify the routing protocol as BGP using <code>routing-protocol bgp</code>. Once inside the routing-protocol element, specify the <code>local-as &lt;as number&gt;</code> and the <code>router-id &lt;loopback ip&gt;</code>. Now, specify the address family as <code>ipv4-unicast</code>.</p><p>Next, configure the neighbor by specifying the neighbor address using <code>neighbor &lt;loopback ip&gt;</code> and the <code>neighbor-as &lt;as number&gt;</code>. Under the neighbor element configure the address family using <code>address-family ipv4-unicast</code> and enable <code>next-hop-self</code> as <code>true</code>.</p><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><div class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></div>note</h5></div><div class="admonition-content"><p>During advertisement, the non-directly connected routers to an external peer need to learn how to reach an advertised route. To provide this information to the non-directly connected as well as iBGP peers, <strong>next-hop-self</strong> command is used.</p></div></div><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><div class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></div>note</h5></div><div class="admonition-content"><p>For BGP neighbor configuration, the <code>local-as</code> command (under the neighbor instance) can be leveraged when you want to use a specific AS number for your router while peering with that particular neighbor. Note that this AS number <strong>cannot</strong>  be the same as the actual AS number that is configured directly under the routing-protocol instance.</p></div></div><div class="mdxCodeBlock_iHAB"><pre class="prism-code language-undefined codeBlock_19pQ"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><code class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">admin@branchoffice1.seattlesite1# config auth admin@branchoffice1.seattlesite1 (authority)# router seattlesite1 admin@branchoffice1.seattlesite1 (router[name=seattlesite1])# routing default-instance</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">admin@branchoffice1.seattlesite1 (routing[type=default-instance])# routing-protocol bgp</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">admin@branchoffice1.seattlesite1 (routing-protocol[type=bgp])# local-as 100 admin@branchoffice1.seattlesite1 (routing-protocol[type=bgp])# router-id 1.1.1.128</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">admin@branchoffice1.seattlesite1 (routing-protocol[type=bgp])# address-family ipv4-unicast</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">admin@branchoffice1.seattlesite1 (address-family[afi-safi=ipv4-unicast])# exit</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">admin@branchoffice1.seattlesite1 (routing-protocol[type=bgp])# neighbor 1.1.1.1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">admin@branchoffice1.seattlesite1 (neighbor[neighbor-address=1.1.1.1])# neighbor-as 6000</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">admin@branchoffice1.seattlesite1 (neighbor[neighbor-address=1.1.1.1])# local-as 62000</span></div></code></pre></div><p>Go up to the protocol level and issue a <code>show</code> command to view the BGP config prior to committing any changes. An example BGP configuration might look like:</p><div class="mdxCodeBlock_iHAB"><pre class="prism-code language-undefined codeBlock_19pQ"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><code class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">admin@branchoffice1.seattlesite1 (routing-protocol[type=bgp])# show</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">type            bgp</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">local-as        100</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">router-id       1.1.1.128</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">address-family  ipv4-unicast</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    afi-safi           ipv4-unicast</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">exit</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">neighbor        1.1.1.1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    neighbor-address   1.1.1.1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    neighbor-as        6000</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    shutdown           false</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    address-family     ipv4-unicast</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        afi-safi       ipv4-unicast</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        next-hop-self  true</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    exit</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">exit</span></div></code></pre></div><p>To advertise routes to BGP, configure the network to be advertised under the address-family of the router. You may also apply a policy to the advertised route using <code>policy &lt;&gt;</code> command.</p><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><div class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></div>note</h5></div><div class="admonition-content"><p>You can configure the policies directly under the authority level routing configuration, i.e., <code>config &gt; authority &gt; routing &gt; filters/policies</code>. You must create a filter to match the desired traffic and then create a policy based on that filter. Refer to the <em>filters/policies guide</em> for detailed information.</p></div></div><div class="mdxCodeBlock_iHAB"><pre class="prism-code language-undefined codeBlock_19pQ"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><code class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">admin@branchoffice1.seattlesite1# config auth admin@branchoffice1.seattlesite1 (authority)# router seattlesite1 admin@branchoffice1.seattlesite1 (router[name=seattlesite1])# routing default-instance</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">admin@branchoffice1.seattlesite1 (routing[type=default-instance])# routing- protocol bgp</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">admin@branchoffice1.seattlesite1 (routing-protocol[type=bgp])# address- family ipv4-unicast</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">admin@branchoffice1.seattlesite1 (address-family[afi-safi=ipv4-unicast])# network 172.16.255.0/30</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">admin@branchoffice1.seattlesite1 (network[network- address=172.16.255.0/30])# policy allow</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">admin@branchoffice1.seattlesite1 (network[network- address=172.16.255.0/30])# exit</span></div></code></pre></div><p>To redistribute connected, static, service and/or OSPF routes specifying <code>redistribute &lt;connected/static/service/ospf&gt;</code> within the routing protocol element of the default- routing instance.</p><div class="mdxCodeBlock_iHAB"><pre class="prism-code language-undefined codeBlock_19pQ"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><code class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">admin@branchoffice1.seattlesite1# config auth admin@branchoffice1.seattlesite1 (authority)# router seattlesite1 admin@branchoffice1.seattlesite1 (router[name=seattlesite1])# routing default-instance</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">admin@branchoffice1.seattlesite1 (routing[type=default-instance])# routing-protocol bgp</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">admin@branchoffice1.seattlesite1 (routing-protocol[type=bgp])# redistribute connected</span></div></code></pre></div><p>While configuring iBGP, you may need to enable the <em><strong>Route Reflector</strong></em> option to facilitate easy learning of routes. Your 128T can be configured as a route reflector client for a particular neighbor under the specific neighbor configuration.</p><div class="mdxCodeBlock_iHAB"><pre class="prism-code language-undefined codeBlock_19pQ"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><code class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">admin@branchoffice1.seattlesite1# config auth admin@branchoffice1.seattlesite1 (authority)# router seattlesite1 admin@branchoffice1.seattlesite1 (router[name=seattlesite1])# routing default-instance</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">admin@branchoffice1.seattlesite1 (routing[type=default-instance])# routing-protocol bgp</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">admin@branchoffice1.seattlesite1 (routing-protocol[type=bgp])# neighbor 1.1.1.1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">admin@branchoffice1.seattlesite1 (neighbor[neighbor-address=1.1.1.1])# address-family ipv4-unicast</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">dmin@branchoffice1.seattlesite1 (address-family[afi-safi=ipv4-unicast])# route-reflector client true</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">dmin@branchoffice1.seattlesite1 (address-family[afi-safi=ipv4-unicast])# exit</span></div></code></pre></div><div class="mdxCodeBlock_iHAB"><pre class="prism-code language-undefined codeBlock_19pQ"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><code class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">admin@branchoffice1.seattlesite1 (address-family[afi-safi=ipv4-unicast])# show</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">afi-safi         ipv4-unicast</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">next-hop-self    true</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">route-reflector</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    client  true</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">exit</span></div></code></pre></div><p>When configuring iBGP, the <em><strong>Confederation</strong></em> feature may come in handy when dealing with an enormous autonomous system. This feature allows you to break up the AS into smaller sub-autonomous systems. Confederation can be directly configured under the routing protocol element. Here, 65535 is the <em><strong>confederation identifier AS number</strong></em> and, 1100 and 2200 are the <em><strong>member AS</strong></em> numbers of that confederation AS.</p><div class="mdxCodeBlock_iHAB"><pre class="prism-code language-undefined codeBlock_19pQ"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><code class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">admin@branchoffice1.seattlesite1# config auth admin@branchoffice1.seattlesite1 (authority)# router seattlesite1 admin@branchoffice1.seattlesite1 (router[name=seattlesite1])# routing default-instance</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">admin@branchoffice1.seattlesite1 (routing[type=default-instance])# routing-protocol bgp</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">*admin@branchoffice1.seattlesite1 (routing-protocol[type=bgp])# confederation identifier 65535</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">*admin@branchoffice1.seattlesite1 (routing-protocol[type=bgp])# confederation member-as 1100</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">*admin@branchoffice1.seattlesite1 (routing-protocol[type=bgp])# confederation member-as 2200</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">*admin@branchoffice1.seattlesite1 (routing-protocol[type=bgp])# exit</span></div></code></pre></div><div class="mdxCodeBlock_iHAB"><pre class="prism-code language-undefined codeBlock_19pQ"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><code class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">*admin@branchoffice1.seattlesite1 (routing-protocol[type=bgp])# show</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">type.           bgp</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">local-as        100</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">router-id       10.128.128.2</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">confederation</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    identifier  65535</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    member-as   1100</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    member-as   2200</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">exit</span></div></code></pre></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="bgp-over-svr"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#bgp-over-svr" title="Direct link to heading">#</a>BGP over SVR</h2><p>BGP over SVR can be used when peering with a 128T. This provides the benefit of Secure Vector Routing for all BGP traffic flowing to-and-from the 128T peers. To begin configuring BGP over SVR, ensure that the running 128T system has configuration for basic platform functionality.</p><p>Next, we need to configure a <em>routing interface</em>, which is similar to a loopback interface on traditional routers. Unlike normal loopback BGP peering, this IP address does not need to be routable on the transport network as it will never see the wire. A BGP peer will be created on this interface. The conductor will then trigger on this and configure a few more pieces (autogenerated) to activate BGP over SVR, such as:</p><ul><li><em>bgp_speaker</em> tenant</li><li>Auto-generated BGP services and service routes</li><li>Router Peers</li></ul><p>Those peerings will then be protected by SVR.</p><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><div class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></div>note</h5></div><div class="admonition-content"><p>One must use a conductor for BGP over SVR as a manual configuration is unsupported.</p></div></div><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><div class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></div>note</h5></div><div class="admonition-content"><p>If the WAN interface of your 128T or the interface facing the 128T-BGP peer is already part of a neighborhood, then ensure that their topology type (<code>network-interface &gt; neighborhoods &gt; topology</code>) is such that it allows the routers to form peering relationships for the auto-generated peer service routes, e.g., <code>mesh-mesh</code>, <code>mesh-hub</code>, <code>mesh-spoke</code> or <code>hub-spoke</code>. More information on neighborhoods can be found in the <a href="/docs/concepts_glossary#neighborhoods">glossary</a></p></div></div><p>Next, configure a BGP instance with the router’s local AS and a router ID that matches the self-routing interface IP. For each BGP over SVR peer, use a neighbor address of the neighbor routing interface IP address. Next, configure the normal BGP peer configuration options such as the timers and address families that are needed. In address-family IPv4-unicast <code>next-hop-self</code> must be set to <code>true</code>.</p><p>If BGP over SVR is with eBGP, set the <code>multihop ttl</code> to at least 2.</p><p>Configuration Template:</p><div class="mdxCodeBlock_iHAB"><pre class="prism-code language-undefined codeBlock_19pQ"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><code class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">config</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  authority</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    router &lt;router name&gt; routing default-instance</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      type default-instance</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      interface rtg-int</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        name rtg-int</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        ip-address &lt;self rtg-int ip&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      exit</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      routing-protocol bgp</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        type bgp</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        local-as &lt;local as&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        router-id &lt;self rtg-int ip&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        neighbor &lt;neighbor rtg-int ip&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          neighbor-address &lt;neighbor rtg-int ip&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          neighbor-as &lt;neighbor as&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          timers</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            hold-time 9</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            keepalive-interval 3</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          exit</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          address-family ipv4-unicast</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            afi-safi ipv4-unicast</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            next-hop-self true</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          exit</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          transport</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            local-address</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">              routing-interface rtg-int</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            exit</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          exit</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          multihop</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            ttl 255</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          exit</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        exit</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      exit</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    exit</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  exit</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">exit</span></div></code></pre></div><p>Sample Configuration:</p><div class="mdxCodeBlock_iHAB"><pre class="prism-code language-undefined codeBlock_19pQ"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><code class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">admin@branchoffice1.seattlesite1# config auth admin@branchoffice1.seattlesite1 (authority)# router seattlesite1 admin@branchoffice1.seattlesite1 (router[name=seattlesite1])# routing default-instance</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">admin@branchoffice1.seattlesite1 (routing[type=default-instance])# interface bgp-int-seattle</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">admin@branchoffice1.seattlesite1 (interface[name=bgp-int-seattle])# ip- address 10.128.128.2</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">admin@branchoffice1.seattlesite1 (interface[name=bgp-int-seattle])# exit admin@branchoffice1.seattlesite1 (routing[type=default-instance])# routing-protocol bgp</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">admin@branchoffice1.seattlesite1 (routing-protocol[type=bgp])# local-as 100 admin@branchoffice1.seattlesite1 (routing-protocol[type=bgp])# router-id 10.128.128.2</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">admin@branchoffice1.seattlesite1 (routing-protocol[type=bgp])# address- family ipv4-unicast</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">admin@branchoffice1.seattlesite1 (address-family[afi-safi=ipv4-unicast])# exit</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">admin@branchoffice1.seattlesite1 (routing-protocol[type=bgp])# neighbor 10.128.128.1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">admin@branchoffice1.seattlesite1 (neighbor[neighbor-address=10.128.128.1])# neighbor-as 300</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">admin@branchoffice1.seattlesite1 (neighbor[neighbor-address=10.128.128.1])# address-family ipv4-unicast</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">admin@branchoffice1.seattlesite1 (address-family[afi-safi=ipv4-unicast])# next-hop-self true</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">admin@branchoffice1.seattlesite1 (address-family[afi-safi=ipv4-unicast])# exit</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">admin@branchoffice1.seattlesite1 (neighbor[neighbor-address=10.128.128.1])# transport</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">admin@branchoffice1.seattlesite1 (transport)# local-address admin@branchoffice1.seattlesite1 (local-address)# routing-interface bgp-int-seattle</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">admin@branchoffice1.seattlesite1 (local-address)# exit admin@branchoffice1.seattlesite1 (transport)# exit admin@branchoffice1.seattlesite1 (neighbor[neighbor-address=10.128.128.1])# multihop</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">admin@branchoffice1.seattlesite1 (multihop)# ttl 5 admin@branchoffice1.seattlesite1 (multihop)# exit admin@branchoffice1.seattlesite1 (neighbor[neighbor-address=10.128.128.1])# exit</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">admin@branchoffice1.seattlesite1 (routing-protocol[type=bgp])# exit admin@branchoffice1.seattlesite1 (routing[type=default-instance])# exit admin@branchoffice1.seattlesite1 (router[name=seattlesite1])# exit admin@branchoffice1.seattlesite1 (authority)# exit admin@branchoffice1.seattlesite1#</span></div></code></pre></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="bgp-verification"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#bgp-verification" title="Direct link to heading">#</a>BGP Verification</h2><p>Issue the command <code>show bgp</code> on your router:</p><div class="mdxCodeBlock_iHAB"><pre class="prism-code language-undefined codeBlock_19pQ"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><code class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">admin@branchoffice1.seattlesite1# show bgp</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Wed 2019-02-20 23:14:58 UTC</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">BGP table version is 12, local router ID is 10.128.128.2, vrf id 0</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Status codes:  s suppressed, d damped, h history, * valid, &gt; best, = multipath,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">               i internal, r RIB-failure, S Stale, R Removed</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Nexthop codes: @NNN nexthop&#x27;s vrf id, &lt; announce-nh-self</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Origin codes: i - IGP, e - EGP, ? - incomplete</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   Network          Next Hop            Metric LocPrf Weight Path</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   10.128.128.2/32  10.128.128.3                           0 200 300 ?</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   10.128.128.3/32  10.128.128.3                           0 200 300 ?</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   128.128.128.1/32 10.128.128.3                           0 200 300 ?</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   128.128.128.128/32</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                    10.128.128.3                           0 200 300 ?</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   172.16.128.2/32  10.128.128.3                           0 200 300 ?</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   172.16.255.0/30  0.0.0.0                  0         32768 i</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   172.26.128.0/30  10.128.128.3                           0 200 300 i</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Displayed  7 routes and 7 total paths</span></div></code></pre></div><p>In addition to the <code>show bgp</code> branch of output, you will now see contributions to the RIB from BGP in the output of <code>show rib</code>.</p><div class="mdxCodeBlock_iHAB"><pre class="prism-code language-undefined codeBlock_19pQ"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><code class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">admin@branchoffice1.seattlesite1# show rib</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Wed 2018-08-22 16:50:00 UTC</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Codes: K - kernel route, C - connected, S - static, R - RIP,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">       O - OSPF, I - IS-IS, B - BGP, P - PIM, T - Table, V - VNC,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">       V - VNC-Direct,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">       &gt; - selected route, * - FIB route</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">B   1.1.1.0/24 [20/0] via 1.1.1.1 inactive, 22:28:18</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">C&gt;* 1.1.1.0/24 is directly connected, g4</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">B&gt;* 2.2.2.0/24 [20/0] via 1.1.1.1, g4, 22:28:18</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">B&gt;* 3.3.3.0/24 [20/0] via 1.1.1.1, g4, 22:28:18</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">C&gt;* 10.0.128.0/31 is directly connected, g1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">K&gt;* 128.128.128.1/32 is directly connected, Null0, bh</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">K&gt;* 128.128.128.128/32 is directly connected, Null0, bh</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">C&gt;* 169.254.127.126/31 is directly connected, g4294967294</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">S&gt;* 172.16.128.2/32 [1/0] via 10.0.128.1, g1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">K   172.16.128.2/32 is directly connected, Null0, bh</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">K&gt;* 172.26.128.2/32 is directly connected, Null0, bh</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">C&gt;* 192.168.64.0/24 is directly connected, g2</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Completed in 0.09 seconds</span></div></code></pre></div></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/128technology/docs/tree/master/docs/howto_bgp.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 40 40" style="margin-right:0.3em;vertical-align:sub"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col text--right"><em><small>Last updated on <time datetime="2020-04-08T21:23:28.000Z" class="docLastUpdatedAt_1sqk">4/8/2020</time></small></em></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/config_templates"><h5 class="pagination-nav__link--sublabel">Previous</h5><h4 class="pagination-nav__link--label">« Configuration Templates</h4></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/howto_conductor_migration"><h5 class="pagination-nav__link--sublabel">Next</h5><h4 class="pagination-nav__link--label">Conductor Migration »</h4></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_TbNY"><ul class="contents contents__left-border"><li><a href="#prerequisites" class="contents__link">Prerequisites</a></li><li><a href="#bgp-configuration-when-peer-is-non-128t" class="contents__link">BGP Configuration when peer is non-128T</a></li><li><a href="#bgp-over-svr" class="contents__link">BGP over SVR</a></li><li><a href="#bgp-verification" class="contents__link">BGP Verification</a></li></ul></div></div></div></div></div></main></div></div><footer class="footer"><div class="container"><div class="text--center"><div>Copyright © 2020 128 Technology, Inc.</div></div></div></footer>
</div>

<script src="/styles.f2b4486f.js"></script>

<script src="/runtime~main.25f276b4.js"></script>

<script src="/main.8ba51e6d.js"></script>

<script src="/1.6fd3e54f.js"></script>

<script src="/2.6c31914b.js"></script>

<script src="/84.b2761997.js"></script>

<script src="/20ac7829.73cfd23a.js"></script>

<script src="/17896441.b4439569.js"></script>

<script src="/4a5a5e2a.0c48f0d3.js"></script>


</body>
</html>