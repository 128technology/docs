<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.8">
<link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-167298415-2","auto"),ga("set","anonymizeIp",!0),ga("send","pageview")</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
<link rel="search" type="application/opensearchdescription+xml" title="128T Docs" href="/opensearch.xml"><title data-react-helmet="true">Adding a Trusted Certificate | 128T Docs</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://docs.128technology.com/docs/howto_trusted_ca_certificate"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:version" content="current"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Adding a Trusted Certificate | 128T Docs"><meta data-react-helmet="true" name="description" content="Any Linux system hosting 128T comes with public certificates of common public Certificate Authorities (CA) already loaded. This allows them to trust end host certificates signed by these CAs, or signed by designated signing authorities in a chain of trust back to the CAs, right out of the box."><meta data-react-helmet="true" property="og:description" content="Any Linux system hosting 128T comes with public certificates of common public Certificate Authorities (CA) already loaded. This allows them to trust end host certificates signed by these CAs, or signed by designated signing authorities in a chain of trust back to the CAs, right out of the box."><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://docs.128technology.com/docs/howto_trusted_ca_certificate"><link data-react-helmet="true" rel="alternate" href="https://docs.128technology.com/docs/howto_trusted_ca_certificate" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://docs.128technology.com/docs/howto_trusted_ca_certificate" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.db35fe54.css">
<link rel="preload" href="/assets/js/runtime~main.332127e5.js" as="script">
<link rel="preload" href="/assets/js/main.f8547a3e.js" as="script">
</head>
<body>
<script>!function(){function e(e){document.documentElement.setAttribute("data-theme",e)}var t=function(){var e=null;try{e=localStorage.getItem("theme")}catch(e){}return e}();null!==t?e(t):window.matchMedia("(prefers-color-scheme: dark)").matches?e("dark"):(window.matchMedia("(prefers-color-scheme: light)").matches,e("light"))}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="Juniper Logo" class="themedImage_1VuW themedImage--light_3UqQ"><img src="/img/logo_dark.png" alt="Juniper Logo" class="themedImage_1VuW themedImage--dark_hz6m"></div><b class="navbar__title">Session Smart</b></a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/docs/intro_getting_started">Docs</a><a href="https://community.128technology.com/home" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>Interchange<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><a href="https://www.128technology.com/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>Company<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="searchBox_1Doo"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_31aa"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_35hR" type="button"></button><aside class="docSidebarContainer_3Kbt"><div class="sidebar_15mo"><nav class="menu thin-scrollbar menu_Bmed"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">About</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Introduction</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Deployment Considerations</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Installation Process</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Cloud Installations</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Supporting Information - Appendix</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Concepts</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">Administration</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Configuration</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Security</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#" tabindex="0">How To</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/howto_conductor_migration">Conductor Migration</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/howto_extend_gui_nav">Extending GUI Nav</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/howto_lte">LTE and Dual LTE Configuration</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/howto_config_PPPoE">Configuring Dual PPPoE</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/howto_maintenance_mode">Maintenance Mode</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/howto_ms365">Microsoft 365</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/howto_trusted_ca_certificate">Adding a Trusted Certificate</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/howto_tune_bfd">Tuning BFD</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Troubleshooting</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Events</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Best Practices</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">CLI Reference</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Installer/Initializer Reference</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Plugins</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">REST APIs</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Release Notes</a></li></ul></nav></div></aside><main class="docMainContainer_3ufF"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><div class="tocCollapsible_1PrD theme-doc-toc-mobile tocMobile_3Hoh"><button type="button" class="clean-btn tocCollapsibleButton_2O1e">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Adding a Trusted Certificate</h1></header><p>Any Linux system hosting 128T comes with public certificates of common public Certificate Authorities (CA) already loaded. This allows them to trust end host certificates signed by these CAs, or signed by designated signing authorities in a chain of trust back to the CAs, right out of the box.</p><p>However, many enterprises or service providers operate their own CA with no tie to public CA infrastructure. Should the 128T host need to connect to servers using certificates signed by these private CAs, the system will need to have the private CA&#x27;s certificates installed as a trusted certificate authority.</p><p>An example of this is a 128T host configured for LDAP over SSL, which must connect to an LDAP server that is using a host certificate signed by the private CA. If the 128T host is to trust the server when it opens a connection, it will require that it can has the private CA certificate, and any intermediate signing CA certificates.</p><h2 class="anchor anchorWithStickyNavbar_31ik" id="example-scenario">Example Scenario<a aria-hidden="true" class="hash-link" href="#example-scenario" title="Direct link to heading">​</a></h2><p>Let&#x27;s say our enterprise has a private certificate authority consisting of a root CA which delegates signing authority to a subordinate signing CA, and the signing CA signs end host certificates which are to be trusted.</p><p>The public certificate of the root CA in PEM form looks like:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">-----BEGIN CERTIFICATE-----</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">MIIDxjCCAq6gAwIBAgIBATANBgkqhkiG9w0BAQUFADB0MRMwEQYKCZImiZPyLGQB</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">...root CA contents...</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">EvWDvU72qH7pfC7TMeuvTOhnBmGsY/0RZnVbzG3SvE5/ZfWhjBK1MegQeHKVvZjl</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Ez9VDlefIZwjSA==</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">-----END CERTIFICATE-----</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>The public certificate of the signing CA in PEM form looks like:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">-----BEGIN CERTIFICATE-----</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">MIIDzzCCAregAwIBAgIBAjANBgkqhkiG9w0BAQUFADB0MRMwEQYKCZImiZPyLGQB</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">...signing CA contents...</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">NB7FEenRXO+vevj0PVVaxJUNyJEqfQwTyH0GaQD3VlGXJheyMCzpW9Gx76aBOXz0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">EyuS5Hop+ONX7G3qPTv8gQc8EQ==</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">-----END CERTIFICATE-----</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>To load these on a 128T host, place the PEM formatted public key contents in <code>/etc/pki/ca-trust/source/anchors/</code>. For this example the root CA public certificate would be saved to <code>/etc/pki/ca-trust/source/anchors/myenterprise-root-ca.crt</code>, and the signing CA public certificate would be saved to <code>/etc/pki/ca-trust/source/anchors/myenterprise-signing-ca.crt</code>.</p><p>With the public certificate saved, run <code>sudo update-ca-trust</code> for the system to process and recognize them as trusted CA certificates.</p><h2 class="anchor anchorWithStickyNavbar_31ik" id="automation-of-ca-certificate-installation-using-salt">Automation of CA Certificate Installation Using Salt<a aria-hidden="true" class="hash-link" href="#automation-of-ca-certificate-installation-using-salt" title="Direct link to heading">​</a></h2><p>If you have a deployment of many 128T nodes which must all be loaded with private CA certificates, you can automate the distribution of the certificates using salt.</p><p>For example, the salt state <code>/srv/salt/trusted-ca-certificates.sls</code> with contents below would install the certificate as previously described:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">myenterprise root ca:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  file.managed:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    - name: /etc/pki/ca-trust/source/anchors/myenterprise-root-ca.crt</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    - contents: |</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        -----BEGIN CERTIFICATE-----</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        MIIDxjCCAq6gAwIBAgIBATANBgkqhkiG9w0BAQUFADB0MRMwEQYKCZImiZPyLGQB</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        ...root CA contents...</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        EvWDvU72qH7pfC7TMeuvTOhnBmGsY/0RZnVbzG3SvE5/ZfWhjBK1MegQeHKVvZjl</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        Ez9VDlefIZwjSA==</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        -----END CERTIFICATE-----</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">myenterprise signing ca:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  file.managed:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    - name: /etc/pki/ca-trust/source/anchors/myenterprise-signing-ca.crt</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    - contents: |</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        -----BEGIN CERTIFICATE-----</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        MIIDzzCCAregAwIBAgIBAjANBgkqhkiG9w0BAQUFADB0MRMwEQYKCZImiZPyLGQB</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        ...signing CA contents...</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        NB7FEenRXO+vevj0PVVaxJUNyJEqfQwTyH0GaQD3VlGXJheyMCzpW9Gx76aBOXz0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        EyuS5Hop+ONX7G3qPTv8gQc8EQ==</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        -----END CERTIFICATE-----</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">update ca trust:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  cmd.run:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   - name: &#x27;update-ca-trust&#x27;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   - onchanges_any:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     - file: /etc/pki/ca-trust/source/anchors/myenterprise-signing-ca.crt</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     - file: /etc/pki/ca-trust/source/anchors/myenterprise-root-ca.crt</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"></div><div class="col lastUpdated_13-_"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2021-11-02T16:46:47.000Z">11/2/2021</time></b></span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/howto_ms365"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">« <!-- -->Microsoft 365</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/howto_tune_bfd"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Tuning BFD<!-- --> »</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#example-scenario" class="table-of-contents__link toc-highlight">Example Scenario</a></li><li><a href="#automation-of-ca-certificate-installation-using-salt" class="table-of-contents__link toc-highlight">Automation of CA Certificate Installation Using Salt</a></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2021 Juniper Networks, Inc.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.332127e5.js"></script>
<script src="/assets/js/main.f8547a3e.js"></script>
</body>
</html>