<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.ff31de0ff">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="128T Docs Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="128T Docs Blog Atom Feed">
<link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-167298415-2","auto"),ga("set","anonymizeIp",!0),ga("send","pageview")</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
<link rel="search" type="application/opensearchdescription+xml" title="128T Docs" href="/opensearch.xml"><title data-react-helmet="true">Wireguard Plugin | 128T Docs</title><meta data-react-helmet="true" property="og:url" content="https://docs.128technology.com/docs/plugin_wireguard"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:version" content="current"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Wireguard Plugin | 128T Docs"><meta data-react-helmet="true" name="description" content="The wireguard plugin allows your 128T router to peer with other endpoints using wireguard.  With this plugin you can securely connect endpoints to your 128T fabric, extending services and network tenancy."><meta data-react-helmet="true" property="og:description" content="The wireguard plugin allows your 128T router to peer with other endpoints using wireguard.  With this plugin you can securely connect endpoints to your 128T fabric, extending services and network tenancy."><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://docs.128technology.com/docs/plugin_wireguard"><link data-react-helmet="true" rel="alternate" href="https://docs.128technology.com/docs/plugin_wireguard" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://docs.128technology.com/docs/plugin_wireguard" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.b920482b.css">
<link rel="preload" href="/assets/js/runtime~main.cfcf7ca0.js" as="script">
<link rel="preload" href="/assets/js/main.6f545d22.js" as="script">
</head>
<body>
<script>!function(){function e(e){document.documentElement.setAttribute("data-theme",e)}var t=function(){var e=null;try{e=localStorage.getItem("theme")}catch(e){}return e}();null!==t?e(t):window.matchMedia("(prefers-color-scheme: dark)").matches?e("dark"):(window.matchMedia("(prefers-color-scheme: light)").matches,e("light"))}()</script><div id="__docusaurus">
<div><a href="#main" class="skipToContent_OuoZ">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle" type="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><img src="/img/logo.svg" alt="Juniper Logo" class="themedImage_TMUO themedImage--light_4Vu1 navbar__logo"><img src="/img/logo_dark.png" alt="Juniper Logo" class="themedImage_TMUO themedImage--dark_uzRr navbar__logo"><strong class="navbar__title">Session Smart</strong></a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/docs/intro_getting_started">Docs</a><a href="https://community.128technology.com/home" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Interchange</a><a href="https://www.128technology.com/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Company</a><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img src="/img/logo.svg" alt="Juniper Logo" class="themedImage_TMUO themedImage--light_4Vu1 navbar__logo"><img src="/img/logo_dark.png" alt="Juniper Logo" class="themedImage_TMUO themedImage--dark_uzRr navbar__logo"><strong class="navbar__title">Session Smart</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/intro_getting_started">Docs</a></li><li class="menu__list-item"><a href="https://community.128technology.com/home" target="_blank" rel="noopener noreferrer" class="menu__link">Interchange</a></li><li class="menu__list-item"><a href="https://www.128technology.com/" target="_blank" rel="noopener noreferrer" class="menu__link">Company</a></li></ul></div></div></div></nav><div class="main-wrapper docs-wrapper doc-page"><div class="docPage_lDyR"><div class="docSidebarContainer_0YBq" role="complementary"><div class="sidebar_a3j0"><div class="menu menu--responsive thin-scrollbar menu_cyFh"><button aria-label="Open menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_iZzd" width="24" height="24" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">About</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/about_128t">128T</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/about_svr_savings">Secure Vector Routing Savings</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/about_releases">128T Releases</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/about_support_policy">Software Support Policy</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/about_supported_platforms">Platform Support Policy</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/about_supported_drivers">Supported NICs and Drivers</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/about_certified_platforms">Certified Plus Platforms</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/about_security_policy">Security Policy</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/about_services_description">Services Description</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/CONTRIBUTING">Contributing</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Introduction</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/intro_getting_started">Getting Started with the 128T Networking Platform</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Deployment Considerations</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/intro_system_reqs">System Requirements</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Installation Process</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/intro_installation">Installation Overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/intro_downloading_iso">Downloading ISOs</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/intro_creating_bootable_usb">Creating Bootable USB</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/intro_installation_bootable_media">Conductor Interactive Installation</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/intro_basic_conductor_config">Configure the Conductor</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/intro_basic_router_config">Basic Router Configuration</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/intro_otp_iso_install">Router Installation Using OTP</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/intro_install_quickstart_otpiso">QuickStart from the OTP ISO</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Cloud Installations</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/intro_installation_aws">Installing from the AWS Marketplace</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/intro_installation_quickstart_aws">QuickStart Installation in AWS</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/intro_installation_azure">Installing in Azure</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/intro_initialize_HA_conductor">Conductor High Availability for Cloud Deployments</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Supporting Information - Appendix</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/intro_installation_installer">Manually Installing the 128T</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/legacy_OTP_install">Installing Using the Pre-5.0 Interactive ISO</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/intro_upgrade_considerations">Upgrade Considerations</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/intro_upgrading">Upgrading</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/intro_rollback">Rollback</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Concepts</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/concepts_application_discovery">Application Discovery</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/concepts_appid">Application Identification</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/concepts_EthOverSVR">Ethernet Over Secure Vector Routing</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/concepts_ha_theoryofoperation">HA - Theory of Operation</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/concepts_interface_types">Interface Types</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/concepts_kni">Kernel Network Interfaces</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/concepts_linux_host_networking">Linux Host Networking</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/concepts_learning_VRF_routes">Learning VRF Routes</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/concepts_network_planes">Forwarding Planes</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/concepts_metadata">128T Metadata</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/concepts_metrics">Metrics</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/concepts_machine_communication">Machine Communication</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/concepts_pcli">PCLI</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/concepts_session_timer">Session Timers</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/concepts_STEP">Service and Topology Exchange Protocol (STEP)</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/concepts_waypoint_ports">Waypoints</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/concepts_glossary">Data Model</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Administration</a><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Configuration</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config_basics">Configuration Management</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config_access_mgmt">Access Management</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config_asset_connection_resiliency">Asset Connection Resiliency</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config_bgp">Configuring BGP</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config_ospf">OSPF</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config_dscp_steering">Configuring DSCP Steering</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config_vrf_learning">VRF Learning</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config_reference_guide">Element Reference</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config_audit_event">Audit Events</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config_dhcp">DHCP</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config_dns_proxy">DNS Proxy</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config_ldap">LDAP</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config_management_over_forwarding">Management over Forwarding</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config_domain-based_web_filter">Configuring Domain-based Web Filtering/Routing</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config_EthoSVR">Configuring Ethernet Over Secure Vector Routing</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config_flow_perf_mon">Inline Flow Performance Monitoring</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config_gre_tunnel">Native GRE Tunnels</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config_in-memory_metrics">In-Memory Metrics</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config_nat">NAT</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config_rate_limiting">Rate Limiting</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config_RBAC">Configuring Role-Based Access Control</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config_service_health">Service Health Learning and Fault Avoidance</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config_snmp">SNMP</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config_snmp_metrics">SNMP: User defined metrics</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config_static_hostname_mapping">Static Hostname Mappings</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config_STEP">Configuring Service and Topology Exchange Protocol (STEP)</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config_tenants">Tenants</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config_templates">Configuration Templates</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config_transport_encryption">Transport Based Encryption</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config_wan_assurance">Configuring WAN Assurance</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">High Availability</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config_ha">Dual Node High Availability</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config_dual_router_ha">Dual Router High Availability using iBGP</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config_ha_vrrp">Dual Router High Availability and VRRP</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config_non_forwarding_ha_interfaces">Non-forwarding HA Interfaces</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config_adding_interfaces_to_ha_team">Adding Interfaces to HA Team Interface</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config_transition_standalone_to_ha">Transitioning a Conductor from Standalone to HA</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Security</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/sec_adaptive_encrypt">Adaptive Encryption</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">How To</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/howto_conductor_migration">Conductor Migration</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/howto_extend_gui_nav">Extending GUI Nav</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/howto_lte">LTE and Dual LTE Configuration</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/howto_config_PPPoE">Configuring Dual PPPoE</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/howto_maintenance_mode">Maintenance Mode</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/howto_ms365">Microsoft 365</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/howto_trusted_ca_certificate">Adding a Trusted Certificate</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/howto_tune_bfd">Tuning BFD</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Troubleshooting</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/ts_applications">Application Troubleshooting</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/ts_ap_duplicate_assets">AP: Duplicate Asset ID Error</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/ts_ap_salt_minion">AP: Salt Minion</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/ts_cpu_spikes">CPU Spikes</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/ts_connecting_to_routers">Connecting to Routers</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/ts_forwarding_resource_pools">Forwarding Plane Resource Pools</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/ts_logs">Logs</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/ts_mac_uniqueness">MAC Address Uniqueness</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/ts_packet_capture">Packet Capture</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/ts_t1_troubleshooting">T1 Troubleshooting</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/ts_troubleshooting_vrf">Troubleshooting VRF</a></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Events</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/events_overview">Alarm and Events</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/events_alarms">Alarms</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/events_events">Events</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Best Practices</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/bcp_att_avpn_configuration">AT&amp;T AVPN Configuration</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/bcp_using_128T_as_ntp_server">Branch NTP Service</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/bcp_conductor_deployment">Conductor Deployment</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/bcp_per-adjacency_traffic_engineering">Per Adjacency Traffic Engineering</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/bcp_qos_msft_expressroute">ExpressRoute QoS Configuration</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/bcp_lte_peering">LTE Peering</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/bcp_monitoring_headends">Monitoring Head End Routers</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/bcp_salt_pillars">Saltstack at Scale With 128T</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/bcp_sdwan_design_guide">SD-WAN Design Guide</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/bcp_service_and_service_policy_design">Service and Service Policy Design</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/bcp_service-policy_defaults">Service Policy Baseline Defaults</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/bcp_tenants">Tenancy Design</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">CLI Reference</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/cli_reference">Command Line Reference</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/cli_stats_reference">Show Stats Reference</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Installer/Initializer Reference</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/installer_cli_reference">Installer Command Line Reference</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/installer_preferences">Installer Preferences File Reference</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/initializer_cli_reference">Initializer Command Line Reference</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/initializer_preferences">Initializer Preferences File Reference</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Plugins</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/plugin_intro">Introduction</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/plugin_bgp_community_services">BGP Community Services</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/plugin_aws_tgw_connect">AWS Transit Gateway Connect</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/plugin_cloud_ha">Cloud HA</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/plugin_dns_app_id">DNS App Id</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/plugin_dns_cache">DNS Cache</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/plugin_gre">GRE</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/plugin_ha_sync_redundancy">HA Sync Redundancy Plugin</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/plugin_icmp_reachability_detection">ICMP Reachability Detection</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/plugin_ipsec_client">IPsec Client</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/plugin_loopback_static_routes">Loopback Static Routes</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/plugin_m800_watchdog">M800 Watchdog</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/plugin_monitoring_agent">Monitoring Agent</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/plugin_mosh">Mosh</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/plugin_set_hostname">Set Hostname</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/plugin_sip_alg">SIP ALG</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/docs/plugin_wireguard">Wireguard</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/plugin_kni_namespace_scripts">KNI Namespace Scripts</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">REST APIs</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/api_rest_4.2.0">128T-4.2.0</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Release Notes</a><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">SSR</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/release_notes_128t_5.4">5.4</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/release_notes_128t_5.3">5.3</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/release_notes_128t_5.2">5.2</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/release_notes_128t_5.1">5.1</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/release_notes_128t_5.0">5.0</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/release_notes_128t_4.5">4.5</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/release_notes_128t_4.4">4.4</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/release_notes_128t_4.3">4.3</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/release_notes_128t_4.2">4.2</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/release_notes_128t_4.1">4.1</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/release_notes_128t_4.0">4.0</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">SSR Installer</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/release_notes_128t_installer_3.1">3.1</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/release_notes_128t_installer_3.0">3.0</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/release_notes_128t_installer_2.7">2.7</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/release_notes_128t_installer_2.6">2.6</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/release_notes_128t_installer_2.5">2.5</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/release_notes_128t_installer_2.4">2.4</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/release_notes_128t_installer_2.3">2.3</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/release_notes_128t_installer_2.2">2.2</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/release_notes_128t_installer_2.1">2.1</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">SSR SIP ALG</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/release_notes_128t_sip_alg_2.1">2.1</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">SSR ZScaler</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/release_notes_128t_zscaler_1.1">1.1</a></li></ul></li></ul></li></ul></div></div></div><main class="docMainContainer_r8cw"><div class="container padding-vert--lg docItemWrapper_NJLN"><div class="row"><div class="col docItemCol_zHA2"><div class="docItemContainer_oiyr"><article><header><h1 class="docTitle_-X99">Wireguard Plugin</h1></header><div class="markdown"><p>The wireguard plugin allows your 128T router to peer with other endpoints using <a href="https://www.wireguard.com/" target="_blank" rel="noopener noreferrer">wireguard</a>.  With this plugin you can securely connect endpoints to your 128T fabric, extending services and network tenancy.</p><p><img alt="Wireguard overview" src="/assets/images/plugin_wireguard_1-8d117d6e489cf7c0bf29195ce4da31da.png"></p><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>See instructions for <a href="/docs/plugin_intro#installation-and-management">installing and managing</a> plugins.</p></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="wireguard-basics"></a>Wireguard Basics<a class="hash-link" href="#wireguard-basics" title="Direct link to heading">#</a></h2><p>Wireguard operates using <a href="https://www.wireguard.com/#cryptokey-routing" target="_blank" rel="noopener noreferrer">cryptokey routing</a>, which provides device-to-edge security with a 128T service centric fabric. For any wireguard peer to securely communicate with another, a <a href="https://tools.ietf.org/html/rfc7748" target="_blank" rel="noopener noreferrer">Curve25519</a> public/private keypair is generated. Each endpoint wishing to form a peering relationship must be configured minimally with the public key of the peer, and the prefixes that are allowed to be sent to the peer.</p><p>When a 128T router is configured for wireguard, it will generate a public key which can be configured in remote endpoints that are to peer with it. Additionally service prefixes that should be sent to the 128T router by a wireguard peer, can be configured as allowed IPs. More information on wireguard configuration can be found <a href="https://www.wireguard.com/quickstart/" target="_blank" rel="noopener noreferrer">here</a>.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="basic-configuration"></a>Basic Configuration<a class="hash-link" href="#basic-configuration" title="Direct link to heading">#</a></h2><p>To configure your 128T router for wireguard peering, you first create a wireguard profile on the router. For example, the following defines a profile called <code>wg-profile-1</code>. Each wireguard endpoint will use a unique address from the prefix <code>10.10.10.0/24</code> as defined in the profile and the router wireguard instance will use the first address of <code>10.10.10.1</code>.:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><div tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">config</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  authority</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    router             r1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      wireguard-profile    wg-profile-1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        name             wg-profile-1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        private-network</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            neighborhood  remote</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            address       10.10.10.1/24</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        exit</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      exit</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    exit</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  exit</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">exit</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>With a profile configured, the next step is to reference the wireguard profile on a network-interface address that you want to use for wireguard peering. For example, this sets <code>eth1-net</code> address <code>192.168.128.1</code> to function as a wireguard peering endpoint:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><div tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">config</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  authority</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    router             r1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      node                 node1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        device-interface  eth1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          network-interface  eth1-net</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            address     192.168.128.1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">              wireguard-profile wg-profile-1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            exit</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          exit</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        exit</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      exit</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    exit</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  exit</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">exit</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>With the profile configured and set on an interface, the router will install the required components for wireguard peering.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="services-and-tenants-with-wireguard"></a>Services and Tenants with Wireguard<a class="hash-link" href="#services-and-tenants-with-wireguard" title="Direct link to heading">#</a></h2><p>Configuration of a wireguard profile on a 128T router interface does <strong>not</strong> provide access to network services. It simply allows the endpoint to connect to the router using wireguard for secure transport, and all sessions will still be subject to the rules of <a href="/docs/concepts_glossary#service-layer">tenants and services</a>. To facilitate network tenancy being given to traffic coming from wireguard peers, a profile is configured with a neighborhood. The neighborhood in the wireguard profile will function as a named Layer 3 network, and used in defining <a href="/docs/bcp_tenants#per-neighborhood-tenancy">neighborhood based tenancy</a> to provide access to services.</p><div class="admonition admonition-tip alert alert--success"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</h5></div><div class="admonition-content"><p>If you do not have a pre-defined tenant to use for wireguard endpoints, you can optionally configure a <code>tenant</code> in the profile, and one will be automatically generated for you.</p></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="connecting-remote-endpoints"></a>Connecting Remote Endpoints<a class="hash-link" href="#connecting-remote-endpoints" title="Direct link to heading">#</a></h2><p>You have devices that are remote from your 128T fabric, but you want to give them network tenancy and access to services. In this example use case, assume you have two datacenter routers <code>dc1</code> and <code>dc2</code>, hosting services for <code>172.16.1.0/24</code> and <code>172.16.2.0/24</code> respectively. You want your remote devices to connect directly to each datacenter for these services, and be given a tenant called <code>remote</code>. <code>dc1</code> has a network-interface address of <code>1.1.1.1</code>, and <code>dc2</code> has a network-interface address of <code>2.2.2.2</code> that will be used to allow wireguard peers to connect.</p><p><img alt="Wireguard remote endpoints" src="/assets/images/plugin_wireguard_2-ecce2bc126cd93e9845df9687d5579f4.png"></p><p>Each peer is assigned an address out of a <code>10.10.10.0/24</code> private network, which they can use when sending sessions on to the fabric. Also every peer will end up having a public/private wirguard keypair. For this use case example, each peers have the following info assigned to them:</p><table><thead><tr><th>peer</th><th>private address</th><th>public key</th></tr></thead><tbody><tr><td>p1</td><td><code>10.10.10.2</code></td><td><code>cScVKF4nTbdDcGoZgbkNMRFhSEC0dVqdufIBBnCNvCk=</code></td></tr><tr><td>p2</td><td><code>10.10.10.3</code></td><td><code>4uXibv7XeeTxYhc5clp0G4cIYicvY03RQGxLwDNCCEY=</code></td></tr><tr><td>p3</td><td><code>10.10.10.4</code></td><td><code>lqvXPuopoYfVcVgpUEtF8Y6BXn8n6YXXAhRGhS50vU8=</code></td></tr></tbody></table><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="profile-configuration"></a>Profile Configuration<a class="hash-link" href="#profile-configuration" title="Direct link to heading">#</a></h3><p>The following config sets up profiles on each of the <code>dc1</code> and <code>dc2</code> routers, and provisions each peer.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="router-dc1"></a>Router dc1<a class="hash-link" href="#router-dc1" title="Direct link to heading">#</a></h4><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><div tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">config</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  authority</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    router             dc1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      wireguard-profile    wg-profile-1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        name             wg-profile-1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        private-network</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            neighborhood  remote</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            address       10.10.10.1/24</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        exit</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        peer             p1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            name        p1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            public-key  cScVKF4nTbdDcGoZgbkNMRFhSEC0dVqdufIBBnCNvCk=</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            allowed-ip  10.10.10.2/32</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        exit</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        peer             p2</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            name        p2</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            public-key  4uXibv7XeeTxYhc5clp0G4cIYicvY03RQGxLwDNCCEY=</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            allowed-ip  10.10.10.3/32</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        exit</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        peer             p3</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            name        p3</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            public-key  lqvXPuopoYfVcVgpUEtF8Y6BXn8n6YXXAhRGhS50vU8=</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            allowed-ip  10.10.10.4/32</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        exit</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      exit</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      node                 node1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        device-interface  eth1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          network-interface  eth1-net</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            address     1.1.1.1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">              wireguard-profile wg-profile-1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            exit</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          exit</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        exit</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      exit</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    exit</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  exit</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">exit</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="router-dc2"></a>Router dc2<a class="hash-link" href="#router-dc2" title="Direct link to heading">#</a></h4><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><div tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">config</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  authority</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    router             dc2</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      wireguard-profile    wg-profile-1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        name             wg-profile-1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        private-network</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            neighborhood  remote</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            address       10.10.10.1/24</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        exit</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        peer             p1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            name        p1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            public-key  cScVKF4nTbdDcGoZgbkNMRFhSEC0dVqdufIBBnCNvCk=</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            allowed-ip  10.10.10.2/32</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        exit</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        peer             p2</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            name        p2</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            public-key  4uXibv7XeeTxYhc5clp0G4cIYicvY03RQGxLwDNCCEY=</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            allowed-ip  10.10.10.3/32</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        exit</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        peer             p3</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            name        p3</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            public-key  lqvXPuopoYfVcVgpUEtF8Y6BXn8n6YXXAhRGhS50vU8=</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            allowed-ip  10.10.10.4/32</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        exit</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      exit</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    exit</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    node                 node1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      device-interface  eth1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        network-interface  eth1-net</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          address     2.2.2.2</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            wireguard-profile wg-profile-1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          exit</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        exit</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      exit</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    exit</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  exit</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">exit</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>With this config committed, wireguard will be installed and set up on <code>dc1</code> and <code>dc2</code>, and it will generate a wireguard keypair automatically. Once the interface is fully installed, you can view the public wireguard key of the profile by using the CLI command <code>show device-interface router &lt;router_name&gt; name &lt;profile_name&gt;</code>. Example:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><div tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">admin@node1.dev-conductor# show device-interface router dc1 name wg-profile-1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Wed 2020-08-05 16:46:41 UTC</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">===================================================================</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> node1.dc1:wg-profile-1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">===================================================================</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> Type:                host</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> Forwarding:          true</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> Mode:                host</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> MAC Address:         6a:ca:96:7b:e3:4c</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> Admin Status:        up</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> Operational Status:  up</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> Redundancy Status:   non-redundant</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> Speed:               1 Gb/s</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> Duplex:              full</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> in-octets:                       99768</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> in-unicast-pkts:                  1653</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> in-errors:                           0</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> out-octets:                      67788</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> out-unicast-pkts:                 1614</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> out-errors:                          0</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> wireguard:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   interface:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     listening port:  12800</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     name:            wg0</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     public key:      lV8egtiC8AKNh+DawkSM6G8t4x6BMFCsz8m48ToxHyA=</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   number of peers:   3</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   peers:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">       peer#1 - p1:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">         allowed ips: 10.10.10.2/32</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">         public key:  cScVKF4nTbdDcGoZgbkNMRFhSEC0dVqdufIBBnCNvCk=</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">       peer#2 - p2:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">         allowed ips: 10.10.10.3/32</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">         public key:  4uXibv7XeeTxYhc5clp0G4cIYicvY03RQGxLwDNCCEY=</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">       peer#3 - p3:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">         allowed ips: 10.10.10.4/32</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">         public key:  lqvXPuopoYfVcVgpUEtF8Y6BXn8n6YXXAhRGhS50vU8=</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Completed in 0.27 seconds</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="remote-endpoint-configuration"></a>Remote Endpoint Configuration<a class="hash-link" href="#remote-endpoint-configuration" title="Direct link to heading">#</a></h3><p>Now the remote peer endpoints can be configured to peer with the <code>dc1</code> and <code>dc2</code> routers at their respective interface addresses, and route the corresponding service prefixes of <code>172.16.1.0/24</code> and <code>172.16.2.0/24</code> to each. For example, a wireguard config for peer <code>p1</code> might look like the following:</p><div class="admonition admonition-tip alert alert--success"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</h5></div><div class="admonition-content"><p>See <a href="https://www.wireguard.com/quickstart/" target="_blank" rel="noopener noreferrer">wireguard documentation</a> for more on configuring wireguard on other endpoints.</p></div></div><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><div tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">[Interface]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"># p1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Address = 10.10.10.2/32</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">PrivateKey = kLbzfaAMMn1Nen3zZ+LreKCglYJuBgdvy/fFNgIZxHk=</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">[Peer]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"># dc1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">PublicKey = lV8egtiC8AKNh+DawkSM6G8t4x6BMFCsz8m48ToxHyA=</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">AllowedIPs = 172.16.1.0/24</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Endpoint = 1.1.1.1:12800</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">[Peer]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"># dc2</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">PublicKey = uB/YI6A/UZtLCLsnOuoWI+lopiwBO0/QdbdN5ryBsm4=</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">AllowedIPs = 172.16.2.0/24</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Endpoint = 2.2.2.2:12800</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="network-tenant-for-endpoints"></a>Network Tenant For Endpoints<a class="hash-link" href="#network-tenant-for-endpoints" title="Direct link to heading">#</a></h3><p>In the remote endpoint example, traffic coming from endpoints will be transported to the appropriate 128T <code>dc1</code> or <code>dc2</code> routers using wireguard, and then be sent into the fabric sourced from each endpoint&#x27;s assigned private address in the <code>10.10.10.0/24</code> network. To assign these endpoints a tenant, thus giving them access to services, the profile is configured with a <code>neighborhood</code> of <code>remote</code>. Based on this, you can define tenant membership for each endpoint in the private network.</p><p>For example, the following could be used to give endpoints in the network a tenant of <code>remote-worker</code> (including <code>p1</code> and <code>p2</code>), but give just <code>p3</code> tenant <code>engineering</code>:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><div tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">config</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  authority</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    tenant             remote-worker</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      name    remote-worker</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      member  remote</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          neighborhood  remote</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          address       10.10.10.0/24</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      exit</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    exit</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    tenant             engineering</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      name    engineering</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      member  remote</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          neighborhood  remote</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          address       10.10.10.4/32</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      exit</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    exit</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  exit</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">exit</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="remote-service-agent"></a>Remote Service Agent<a class="hash-link" href="#remote-service-agent" title="Direct link to heading">#</a></h2><p>You have a remote device that needs to be accessed as an agent of a service in your 128T network. In this example use case you have a remote IoT device that hosts a <code>thing</code> service with address <code>128.128.128.128/32</code>, which must be accessed by a tenant <code>technician</code>.</p><p>A remote IoT device has a wireguard peer with a public key of <code>Jihom426SSceUCPpS1147NSNzZcY1wl40Sf+OQ1rjGU=</code>. It will be given an address of <code>10.10.10.2</code> from the private network, and it will peer with the 128T router <code>r1</code> on the  <code>1.1.1.1</code> network-interface address.</p><p><img alt="Wireguard service agent" src="/assets/images/plugin_wireguard_3-e84322f7e06be8206d02132a36825bf5.png"></p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="profile-configuration-1"></a>Profile Configuration<a class="hash-link" href="#profile-configuration-1" title="Direct link to heading">#</a></h3><p>The following configuration sets up the wireguard profile, along with the IoT device wireguard peer:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><div tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">config</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  authority</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    router             r1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      wireguard-profile    wg-profile-1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        name             wg-profile-1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        private-network</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          neighborhood  remote</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          address       10.10.10.1/24</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        exit</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        peer             iot-dev-1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          name        iot-dev-1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          public-key  Jihom426SSceUCPpS1147NSNzZcY1wl40Sf+OQ1rjGU=</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          allowed-ip  10.10.10.2/32</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        exit</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      exit</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      node                 node1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        device-interface  eth1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          network-interface  eth1-net</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            address     1.1.1.1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">              wireguard-profile wg-profile-1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            exit</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          exit</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        exit</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      exit</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    exit</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  exit</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">exit</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="remote-endpoint-configuration-1"></a>Remote Endpoint Configuration<a class="hash-link" href="#remote-endpoint-configuration-1" title="Direct link to heading">#</a></h3><p>The wireguard configuration on the IoT device might look like the following:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><div tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">[Interface]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"># IoT device</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Address = 10.10.10.2/32</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">PrivateKey = MEAtlWq4Ou7++yxjYGtTa85gzDj3mbbCy76J5oWPaG8=</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">[Peer]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"># r1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">PublicKey = lV8egtiC8AKNh+DawkSM6G8t4x6BMFCsz8m48ToxHyA=</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">AllowedIPs = 0.0.0.0/0</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Endpoint = 1.1.1.1:12800</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">PersistentKeepalive = 30</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>The <code>PersistentKeepalive</code> in this wireguard configuration causes the peer to keep the connection to the peer alive by sending periodic traffic. This has the effect of allowing the 128T to originate sessions to the peer at any time. See <a href="https://www.wireguard.com/quickstart/" target="_blank" rel="noopener noreferrer">wireguard documentation</a> for more on configuring wireguard on other endpoints.</p></div></div><p>With the profile and peer configured on the 128T router <code>r1</code>, and wireguard configured on the remote IoT device, you can verify the device is keeping the connection alive by reviewing the <code>latest handshake</code> output of <code>show device-interface router &lt;router_name&gt; name &lt;profile_name&gt;</code>:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><div tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">admin@node1.dev-conductor# show device-interface router r1 name wg-profile-1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Wed 2020-08-05 23:33:02 UTC</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">===================================================================</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> node1.r1:wg-profile-1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">===================================================================</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> Type:                host</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> Forwarding:          true</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> Mode:                host</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> MAC Address:         6a:ca:96:7b:e3:4c</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> Admin Status:        up</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> Operational Status:  up</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> Redundancy Status:   non-redundant</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> Speed:               1 Gb/s</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> Duplex:              full</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> in-octets:                      493467</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> in-unicast-pkts:                  7115</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> in-errors:                           0</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> out-octets:                     356373</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> out-unicast-pkts:                 7218</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> out-errors:                          0</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> wireguard:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   interface:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     listening port:  12800</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     name:            wg0</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     public key:      lV8egtiC8AKNh+DawkSM6G8t4x6BMFCsz8m48ToxHyA=</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   number of peers:   4</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   peers:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">       peer#1 - iot-dev-1:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">         allowed ips: 10.10.10.2/32</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">         endpoint:    192.168.128.222:42948</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">         latest handshake: 21 seconds ago</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">         public key:  Jihom426SSceUCPpS1147NSNzZcY1wl40Sf+OQ1rjGU=</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">         transfer:    17.96 KiB received, 67.58 KiB sent</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Completed in 0.25 seconds</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="service-routing"></a>Service Routing<a class="hash-link" href="#service-routing" title="Direct link to heading">#</a></h3><p>Finally the <code>thing</code> service must be routed to the remote wireguard peer.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="service"></a>Service<a class="hash-link" href="#service" title="Direct link to heading">#</a></h4><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><div tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">config</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  authority</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    service            thing</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      name           thing</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      description    &quot;IoT sensor data service&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      address        128.128.128.128/32</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      access-policy  technician</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        source      technician</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        permission  allow</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      exit</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    exit</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  exit</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">exit</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="service-route"></a>Service-route<a class="hash-link" href="#service-route" title="Direct link to heading">#</a></h4><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><div tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">config</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  authority</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    router             r1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      service-route        static-thing</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        name          static-thing</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        service-name  thing</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        nat-target    10.10.10.2</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        next-hop      node1 wg-profile-1-intf</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          node-name   node1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          interface   wg-profile-1-intf</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          gateway-ip  169.254.140.129</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        exit</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      exit</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    exit</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  exit</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">exit</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>The <code>interface</code> and <code>gateway-ip</code> in this configuration are automatically generated as part of the profile configuration on the router, and can be seen with <code>show network-interface</code>.</p></div></div><p>With this configuration, sessions sent from the <code>technician</code> tenant to <code>128.128.128.128</code> will be given access as part of the <code>thing</code> service, and routed with a destination NAT to the wireguard interface of <code>10.10.10.2</code> on the IoT device peer.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="configuration-reference"></a>Configuration Reference<a class="hash-link" href="#configuration-reference" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="wireguard-profile"></a>wireguard-profile<a class="hash-link" href="#wireguard-profile" title="Direct link to heading">#</a></h3><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="path"></a>Path<a class="hash-link" href="#path" title="Direct link to heading">#</a></h4><p>authority &gt; router &gt; wireguard-profile</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="description"></a>Description<a class="hash-link" href="#description" title="Direct link to heading">#</a></h4><p>A profile describing an instance of wireguard on the router.</p><table><thead><tr><th>Element</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code>name</code></td><td>string</td><td>A string identifier for wireguard profile. This identifier is used as a device interface name in the host, therefore it can only use alphanumerics, underscores, or dashes, and cannot exceed 12 characters.</td></tr><tr><td><code>description</code></td><td>string</td><td>A description about the wireguard profile.</td></tr><tr><td><code>loopback-address</code></td><td>ipv4-prefix</td><td>An internal address prefix for KNI connectivity between wireguard and the data plane.</td></tr><tr><td><code>port</code></td><td>l4-port</td><td>The UDP port for the wireguard instance to recieve connections on.</td></tr><tr><td><code>inactivity-timeout</code></td><td>milliseconds</td><td>Inactivity timeout for wireguard sessions. By default this uses 180000 ms UDP timeout value. If customized to a non-default value, a new session-type will be automatically generated.</td></tr><tr><td><code>service-class</code></td><td>string</td><td>The service-class to associate with the generated session-type for this wireguard profile. Wireguard sessions arriving at the router will be given this service-class.</td></tr><tr><td><code>access-policy</code></td><td>access-policy</td><td>List of access policies for the wireguard service. Packets allowed by this access policy will additionally be subject to wireguard security validation. See <a href="/docs/config_reference_guide#access-policy-service">service access policy</a>.</td></tr></tbody></table><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="private-network"></a>private-network<a class="hash-link" href="#private-network" title="Direct link to heading">#</a></h3><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="path-1"></a>Path<a class="hash-link" href="#path-1" title="Direct link to heading">#</a></h4><p>authority &gt; router &gt; wireguard-profile &gt; private-network</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="description-1"></a>Description<a class="hash-link" href="#description-1" title="Direct link to heading">#</a></h4><p>A network to be associated with router the wireguard network-interface. This network handles packets after they have been decrypted from a wireguard peer connection, or prior to being encrypted and sent to a wireguard peer connection. The router wireguard instance will use the address given, and other peers can send or receive sessions using the remaining addresses in the network.</p><table><thead><tr><th>Element</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code>neighborhood</code></td><td>neighborhood-id</td><td>Neighborhood to be associated with the wireguard network. Addresses assigned to peers can be made members of an appropriate existing tenant based on this neighborhood.</td></tr><tr><td><code>tenant-name</code></td><td>string</td><td>A tenant to be associated with addresses in the network. If configured, a tenant will be automatically generated with the addresses in the neighborhood set as members. If not configured, no tenant will be generated, and peer addresses in the network will need to be defined as members of existing tenants.</td></tr><tr><td><code>address</code></td><td>ip prefix</td><td>The address and prefix associated with the wireguard profile. The wireguard interface created on the router will use the address defined, and other peers can send or receive sessions using the remaining addresses in the network.</td></tr></tbody></table><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="peer"></a>peer<a class="hash-link" href="#peer" title="Direct link to heading">#</a></h3><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="path-2"></a>Path<a class="hash-link" href="#path-2" title="Direct link to heading">#</a></h4><p>authority &gt; router &gt; wireguard-profile &gt; peer</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="description-2"></a>Description<a class="hash-link" href="#description-2" title="Direct link to heading">#</a></h4><p>Set of allowed wireguard peers.</p><table><thead><tr><th>Element</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code>name</code></td><td>string</td><td>Name identifier for the peer.</td></tr><tr><td><code>public-key</code></td><td>string</td><td>The peer&#x27;s base64 encoded 32 byte Curve25519 public wireguard key.</td></tr><tr><td><code>preshared-key</code></td><td>string</td><td>The peer&#x27;s optional base64 encoded 32 byte Curve25519 pre-shared wireguard key.</td></tr><tr><td><code>persistent-keepalive</code></td><td>seconds</td><td>Interval in seconds at which to send keepalive messages to the peer. Keepalives are optional. No configuration or a setting of &#x27;0&#x27; disables keepalives.</td></tr><tr><td><code>allowed-ip</code></td><td>ip prefix</td><td>The prefixes that are allowed to be sent to the peer. When the peer is an endpoint, typically the allowed-ip is the /32 of the peer&#x27;s wireguard interface. If the peer is a gateway device, the allowed-ip list would include any prefixes reachable as services via the peer, or prefixes from which traffic may be sourced.</td></tr></tbody></table><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>Disabled keepalives on the router does not mean keepalives cannot be generated by the remote peer. If keepalives are desired, a typical configuration is to have keepalives disabled on the router, but enabled on the remote peer.</p></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="endpoint"></a>endpoint<a class="hash-link" href="#endpoint" title="Direct link to heading">#</a></h3><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="path-3"></a>Path<a class="hash-link" href="#path-3" title="Direct link to heading">#</a></h4><p>authority &gt; router &gt; wireguard-profile &gt; peer &gt; endpoint</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="description-3"></a>Description<a class="hash-link" href="#description-3" title="Direct link to heading">#</a></h4><p>IP and port of the endpoint. If not set, the endpoint of the peer will establish dynamically based on the source address discovered during the wireguard handshake.</p><table><thead><tr><th>Element</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code>ip</code></td><td>ip address</td><td>Static IP address where the peer can be reached to connect.</td></tr><tr><td><code>port</code></td><td>port number</td><td>Port at which the peer can be reached to connect.</td></tr></tbody></table><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>If an endpoint is configured, wireguard on the 128T may attempt to send outbound sessions to the IP and port defined. The sessions will originate from the profile loopback-address. A tenant and service must be created to route the outbound wireguard session to the defined peer endpoint.</p></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="troubleshooting"></a>Troubleshooting<a class="hash-link" href="#troubleshooting" title="Direct link to heading">#</a></h2><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="interface-status"></a>Interface status<a class="hash-link" href="#interface-status" title="Direct link to heading">#</a></h4><p>To view the status of a wireguard interface, and its peers, use the following PCLI command:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><div tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">show device-interface router &lt;router_name&gt; name &lt;profile_name&gt;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>Example:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><div tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">admin@node1.dev-conductor# show device-interface router r1 name wg-profile-1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Fri 2020-08-07 13:35:22 UTC</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">===================================================================</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> node1.r1:wg-profile-1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">===================================================================</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> Type:                host</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> Forwarding:          true</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> Mode:                host</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> MAC Address:         6a:ca:96:7b:e3:4c</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> Admin Status:        up</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> Operational Status:  up</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> Redundancy Status:   non-redundant</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> Speed:               1 Gb/s</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> Duplex:              full</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> in-octets:                     4349806</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> in-unicast-pkts:                 50978</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> in-errors:                           0</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> out-octets:                    4793736</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> out-unicast-pkts:                63193</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> out-errors:                          0</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> wireguard:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   interface:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     listening port:  12800</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     name:            wg0</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     public key:      lV8egtiC8AKNh+DawkSM6G8t4x6BMFCsz8m48ToxHyA=</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   number of peers:   5</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   peers:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">       peer#1 - iot-dev-1:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">         allowed ips: 10.10.10.5/32</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">         endpoint:    192.168.128.222:42948</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">         latest handshake:1 minute, 2 seconds ago</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">         public key:  Jihom426SSceUCPpS1147NSNzZcY1wl40Sf+OQ1rjGU=</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">         transfer:    368.22 KiB received, 177.72 KiB sent</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">       peer#2 - p1:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">         allowed ips: 10.10.10.2/32, 192.168.8.0/24</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">         endpoint:    192.168.128.30:58608</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">         latest handshake:11 hours, 35 minutes, 38 seconds ago</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">         public key:  cScVKF4nTbdDcGoZgbkNMRFhSEC0dVqdufIBBnCNvCk=</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">         transfer:    775.50 KiB received, 771.83 KiB sent</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">       peer#3 - p2:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">         allowed ips: 10.10.10.3/32</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">         public key:  4uXibv7XeeTxYhc5clp0G4cIYicvY03RQGxLwDNCCEY=</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">       peer#4 - p3:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">         allowed ips: 10.10.10.4/32</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">         public key:  lqvXPuopoYfVcVgpUEtF8Y6BXn8n6YXXAhRGhS50vU8=</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="interface-and-profile-configuration-logging"></a>Interface and profile configuration logging<a class="hash-link" href="#interface-and-profile-configuration-logging" title="Direct link to heading">#</a></h4><p>Logging of new configuration sent to the router can be viewed in the Linux shell using the system journal.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><div tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">journalctl -u 128T-handle-wireguard-config</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>Example:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><div tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">[t128@dev-fitlet ~]$ sudo journalctl -u 128T-handle-wireguard-config</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">-- Logs begin at Sun 2012-01-01 00:37:26 UTC, end at Fri 2020-08-07 13:38:00 UTC. --</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Jul 30 02:06:25 dev-fitlet systemd[1]: Starting Handler for 128T wireguard config...</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Jul 30 02:06:25 dev-fitlet node[2602]: &#x27;/etc/128technology/plugins/network-scripts/host/remote&#x27; does not exist</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Jul 30 02:06:25 dev-fitlet node[2602]: &#x27;/etc/128technology/plugins/network-scripts/host/remote&#x27; created</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Jul 30 02:06:25 dev-fitlet node[2602]: &#x27;/etc/128technology/plugins/network-scripts/host/remote/init&#x27; does not exist</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Jul 30 02:06:25 dev-fitlet node[2602]: &#x27;/etc/128technology/plugins/network-scripts/host/remote/reinit&#x27; does not exist</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Jul 30 02:06:25 dev-fitlet node[2602]: &#x27;/etc/128technology/plugins/network-scripts/host/remote/shutdown&#x27; does not exist</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Jul 30 02:06:25 dev-fitlet node[2602]: &#x27;/etc/128technology/plugins/network-scripts/host/remote/startup&#x27; does not exist</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Jul 30 02:06:25 dev-fitlet node[2602]: &#x27;/etc/128technology/plugins/network-scripts/host/remote/init&#x27; symlink to &#x27;/etc/128technology/plugins/network-scripts/default/kni_namespace/init&#x27; created</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Jul 30 02:06:25 dev-fitlet node[2602]: &#x27;/etc/128technology/plugins/network-scripts/host/remote/reinit&#x27; symlink to &#x27;/etc/128technology/plugins/network-scripts/default/kni_namespace/reinit&#x27; created</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Jul 30 02:06:25 dev-fitlet node[2602]: &#x27;/etc/128technology/plugins/network-scripts/host/remote/shutdown&#x27; symlink to &#x27;/etc/128technology/plugins/network-scripts/default/kni_namespace/shutdown&#x27; created</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Jul 30 02:06:25 dev-fitlet node[2602]: &#x27;/etc/128technology/plugins/network-scripts/host/remote/startup&#x27; symlink to &#x27;/etc/128technology/plugins/network-scripts/default/kni_namespace/startup&#x27; created</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="peer-configuration-logging"></a>Peer configuration logging<a class="hash-link" href="#peer-configuration-logging" title="Direct link to heading">#</a></h4><p>Looging of peer configuration handling can be viewed in the Linux shell using the system journal.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><div tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">journalctl -u 128T-handle-wireguard-peer-config@&lt;profile_name&gt;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>Example:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><div tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">[t128@dev-fitlet ~]$ sudo journalctl -u 128T-handle-wireguard-peer-config@wg-profile-1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">-- Logs begin at Sun 2012-01-01 00:37:26 UTC, end at Fri 2020-08-07 13:36:42 UTC. --</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Aug 05 14:32:40 dev-fitlet systemd[1]: Starting Handler for wireguard peer and network config wg/profile/1...</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Aug 05 14:32:40 dev-fitlet node[32315]: &#x27;/etc/128technology/plugins/network-scripts/host/wg-profile-1/wg0.conf&#x27; written</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="wireguard-not-installed-on-the-router"></a>Wireguard not installed on the router<a class="hash-link" href="#wireguard-not-installed-on-the-router" title="Direct link to heading">#</a></h4><p>In some cases, it is possible that the version of 128T router is not compatible with wireguard. In such a case you will see the log messages like below in the journal</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><div tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">Dec 18 20:56:03 t211-dut2.openstacklocal python3.6[28707]: __main__ - Could not validate wireguard packages: Could not query package kmod-wireguard, Command &#x27;[&#x27;rpm&#x27;, &#x27;-q&#x27;, &#x27;kmod-wireguard&#x27;]&#x27; returned non-zero exit status 1.</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>In some upgrade and rollback scenarios, it is possible that an older version of the module is installed on the router but that version is not compatible. Typically in such scenarios, a new version will be installed by the conductor but in some scenarios a compatible version might not be available. The following log messages in the journal can help troubleshoot these errors.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><div tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">Dec 18 20:56:03 t211-dut2.openstacklocal python3.6[26711]: __main__ - Running startup check commands for ns: wg-profile-1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Dec 18 20:56:03 t211-dut2.openstacklocal python3.6[26711]: __main__ - Executing command: [&#x27;/usr/libexec/wireguard/startup-check&#x27;]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Dec 18 20:56:03 t211-dut2.openstacklocal python3.6[28707]: __main__ - Could not validate wireguard packages: Invalid kmod-wireguard for kernel version 3.10.0-1160.el7</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Dec 18 20:56:03 t211-dut2.openstacklocal python3.6[26711]: __main__ - not starting wg-profile-1: startup check error: Command &#x27;[&#x27;/usr/libexec/wireguard/startup-check&#x27;]&#x27; returned non-zero exit status 1.</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="release-notes"></a>Release Notes<a class="hash-link" href="#release-notes" title="Direct link to heading">#</a></h2><div class="admonition admonition-warning alert alert--danger"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"></path></svg></span>warning</h5></div><div class="admonition-content"><p>The plugin must be updated to version 2.0.3 or later prior to <a href="/docs/intro_upgrade_considerations#plugin-config-generation-changes">upgrading the conductor to SSR version 5.4.0.</a></p></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="release-203"></a>Release 2.0.3<a class="hash-link" href="#release-203" title="Direct link to heading">#</a></h3><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="issues-fixed"></a>Issues Fixed<a class="hash-link" href="#issues-fixed" title="Direct link to heading">#</a></h4><ul><li><p><strong>PLUGIN-1443</strong>  Config generation for the plugin failing</p><p><em><strong>Resolution:</strong></em> Correctly handle the config generation for routers where the DNS cache plugin is not enabled during config generation</p></li><li><p><strong>PLUGIN-1220</strong>  Add support for kernel version <code>3.10.0-1160.21.1</code>.</p></li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="release-202-122"></a>Release 2.0.2, 1.2.2<a class="hash-link" href="#release-202-122" title="Direct link to heading">#</a></h3><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="issues-fixed-1"></a>Issues Fixed<a class="hash-link" href="#issues-fixed-1" title="Direct link to heading">#</a></h4><ul><li><strong>PLUGIN-1089</strong> Add support for kernel version <code>3.10.0-1160.11.1</code>.</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="release-201-121"></a>Release 2.0.1, 1.2.1<a class="hash-link" href="#release-201-121" title="Direct link to heading">#</a></h3><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="issues-fixed-2"></a>Issues Fixed<a class="hash-link" href="#issues-fixed-2" title="Direct link to heading">#</a></h4><ul><li><strong>PLUGIN-1072</strong> Allow wireguard to start when the required version of <code>kmod-wireguard</code> is installed along with versions not used by the active kernel.</li><li><strong>PLUGIN-611</strong> Added support for plugin state. Plugin state information can be accessed on the PCLI using <code>show plugins state [router &lt;router&gt;] [node &lt;node&gt;] [{detail | summmary}] 128T-wireguard</code></li><li><strong>PLUGIN-768</strong> Support the Wireguard plugin on conductors running 128T versions <code>5.1.0</code> and greater.</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="caveat"></a>Caveat<a class="hash-link" href="#caveat" title="Direct link to heading">#</a></h3><ul><li><strong>I95-38622</strong> The plugin is not supported on routers running 128T version <code>5.1.0</code>.</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="release-120"></a>Release 1.2.0<a class="hash-link" href="#release-120" title="Direct link to heading">#</a></h3><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="issues-fixed-3"></a>Issues Fixed<a class="hash-link" href="#issues-fixed-3" title="Direct link to heading">#</a></h4><ul><li><strong>PLUGIN-922</strong> Support multiple kernel versions for 128T Wireguard plugin and allow for graceful upgrade and rollback of the 128T software releases. The enhancement currently supports the following kernel versions: <code>3.10.0-1062.9.1</code>, <code>3.10.0-1127.18.2</code>, <code>3.10.0-1160</code>, and <code>3.10.0-1160.6.1</code>.</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="caveat-1"></a>Caveat<a class="hash-link" href="#caveat-1" title="Direct link to heading">#</a></h3><ul><li><strong>PLUGIN-987</strong> A 128T software downgrade might fail when the currently installed wireguard kernel module and the new kernel being downgraded to are not compatible. The following procedure may be used to work around this issue</li></ul><div class="admonition admonition-caution alert alert--warning"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>caution</h5></div><div class="admonition-content"><p>The process below will cause the wireguard tunnels to be torn down and the peers to disconnect. Please perform the operations during a maintenance window only.</p></div></div><ul><li>Create a backup of the current running configuration to be restored later.</li><li>Before rolling back the 128T version, remove all references to <code>wireguard-profile</code> from <code>authority &gt; router &gt; device-interface &gt; network-interface &gt; address</code>. Once these changes are committed, the wireguard rpms will be removed from the router.</li><li>Rollback the 128T software to the desired version.</li><li>Restore the backup created in the first step. Once the changes are committed, the correct wireguard rpm&#x27;s will be installed on the router.</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="release-110"></a>Release 1.1.0<a class="hash-link" href="#release-110" title="Direct link to heading">#</a></h3><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="issues-fixed-4"></a>Issues Fixed<a class="hash-link" href="#issues-fixed-4" title="Direct link to heading">#</a></h4><ul><li><strong>PLUGIN-863</strong> A kernel panic condition occurs when running Wireguard with the kernel version <code>3.10.0-1127.18.2</code> or above.</li></ul></div></article><div class="margin-vert--xl"><div class="row"><div class="col"></div><div class="col text--right"><em><small>Last updated on <time datetime="2021-11-23T23:03:19.000Z" class="lastUpdatedDate_nN9m">11/23/2021</time></small></em></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/plugin_sip_alg"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label"> SIP ALG Plugin</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/plugin_kni_namespace_scripts"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Kernel Network Namespace Scripts </div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_vrFS thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#wireguard-basics" class="table-of-contents__link">Wireguard Basics</a></li><li><a href="#basic-configuration" class="table-of-contents__link">Basic Configuration</a></li><li><a href="#services-and-tenants-with-wireguard" class="table-of-contents__link">Services and Tenants with Wireguard</a></li><li><a href="#connecting-remote-endpoints" class="table-of-contents__link">Connecting Remote Endpoints</a><ul><li><a href="#profile-configuration" class="table-of-contents__link">Profile Configuration</a></li><li><a href="#remote-endpoint-configuration" class="table-of-contents__link">Remote Endpoint Configuration</a></li><li><a href="#network-tenant-for-endpoints" class="table-of-contents__link">Network Tenant For Endpoints</a></li></ul></li><li><a href="#remote-service-agent" class="table-of-contents__link">Remote Service Agent</a><ul><li><a href="#profile-configuration-1" class="table-of-contents__link">Profile Configuration</a></li><li><a href="#remote-endpoint-configuration-1" class="table-of-contents__link">Remote Endpoint Configuration</a></li><li><a href="#service-routing" class="table-of-contents__link">Service Routing</a></li></ul></li><li><a href="#configuration-reference" class="table-of-contents__link">Configuration Reference</a><ul><li><a href="#wireguard-profile" class="table-of-contents__link">wireguard-profile</a></li><li><a href="#private-network" class="table-of-contents__link">private-network</a></li><li><a href="#peer" class="table-of-contents__link">peer</a></li><li><a href="#endpoint" class="table-of-contents__link">endpoint</a></li></ul></li><li><a href="#troubleshooting" class="table-of-contents__link">Troubleshooting</a></li><li><a href="#release-notes" class="table-of-contents__link">Release Notes</a><ul><li><a href="#release-203" class="table-of-contents__link">Release 2.0.3</a></li><li><a href="#release-202-122" class="table-of-contents__link">Release 2.0.2, 1.2.2</a></li><li><a href="#release-201-121" class="table-of-contents__link">Release 2.0.1, 1.2.1</a></li><li><a href="#caveat" class="table-of-contents__link">Caveat</a></li><li><a href="#release-120" class="table-of-contents__link">Release 1.2.0</a></li><li><a href="#caveat-1" class="table-of-contents__link">Caveat</a></li><li><a href="#release-110" class="table-of-contents__link">Release 1.1.0</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright  2021 Juniper Networks, Inc.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.cfcf7ca0.js"></script>
<script src="/assets/js/main.6f545d22.js"></script>
</body>
</html>