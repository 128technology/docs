<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-config_flow_perf_mon">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.3.1">
<title data-rh="true">Inline Flow Performance Monitoring | SSN Docs</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://docs.128technology.com/docs/config_flow_perf_mon"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Inline Flow Performance Monitoring | SSN Docs"><meta data-rh="true" name="description" content="Inline Flow Performance Monitoring (FPM) complements BFD in measuring peer paths between two SSR devices. To provide this additional level of detail, the initiating router adds a small amount of metadata to a sample number of packets. This metadata indicates that metrics are collected per path, traffic class, and protocol (TCP or UDP). The receiving router reads the metadata and returns the data to the intiating router. The configurable fields include:"><meta data-rh="true" property="og:description" content="Inline Flow Performance Monitoring (FPM) complements BFD in measuring peer paths between two SSR devices. To provide this additional level of detail, the initiating router adds a small amount of metadata to a sample number of packets. This metadata indicates that metrics are collected per path, traffic class, and protocol (TCP or UDP). The receiving router reads the metadata and returns the data to the intiating router. The configurable fields include:"><link data-rh="true" rel="icon" href="/img/favicon.png"><link data-rh="true" rel="canonical" href="https://docs.128technology.com/docs/config_flow_perf_mon"><link data-rh="true" rel="alternate" href="https://docs.128technology.com/docs/config_flow_perf_mon" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.128technology.com/docs/config_flow_perf_mon" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.8e1fdc51.css">
<link rel="preload" href="/assets/js/runtime~main.5aea67a1.js" as="script">
<link rel="preload" href="/assets/js/main.b3a8c539.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.png" alt="Juniper Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/logo_dark.png" alt="Juniper Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate"></b></a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/docs/intro_getting_started">Docs</a><a href="https://community.juniper.net/answers/communities/community-home?CommunityKey=310d1a41-12fa-4627-9a99-880145a7c87c" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Community<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://www.juniper.net/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Company<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="searchBox_ZlJk"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/about_128t">About</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/intro_getting_started">Introduction</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/intro_system_reqs">Deployment Considerations</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/intro_installation">Installation Process</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/install_conductor_overview">Conductor Installation</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/intro_installation_image">Image-Based Installation</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/supported_cloud_platforms">Cloud Installations</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/intro_upgrade_considerations">Upgrades and Rollback</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/intro_installation_installer">Supporting Install Information - Appendix</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/concepts_application_discovery">Concepts</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/wan_overview">WAN Assurance</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/docs/config_basics">Administration</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" tabindex="0" href="/docs/config_basics">Configuration</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/config_basics">Configuration Management</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/config_templates">Configuration Templates</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/config_asset_connection_resiliency">Asset Connection Resiliency</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/config_session_recovery">Session Recovery Detection</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/config_dscp_steering">Configuring DSCP Steering</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/config_dscp_preservation">DSCP Preservation</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/config_vrf_learning">VRF Support</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/config_audit_event">Audit Events</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/config_dhcp">DHCP</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/config_dns_proxy">DNS Proxy</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/config_forward_error_correction">Configuring Forward Error Correction</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/config_management_over_forwarding">Management over Forwarding</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/config_app_ident">Application Identification</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/config_domain-based_web_filter">Web Filtering</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/config_application_steering">Application Steering</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/config_EthoSVR">Configuring Ethernet Over Secure Vector Routing</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/config_EthoSVR_activestandby">Configuring Ethernet Over SVR for Active/Standby</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/config_flow_perf_mon">Inline Flow Performance Monitoring</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/config_gre_tunnel">Native GRE Tunnels</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/config_in-memory_metrics">In-Memory Metrics</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/config_nat">NAT</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/config_rate_limiting">Rate Limiting</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/config_RBAC">Configuring Role-Based Access Control</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/config_service_health">Service Health Learning and Fault Avoidance</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/config_snmp">SNMP - Overview</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/howto_config_snmp">SNMP - Configuration</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/config_snmp_metrics">SNMP - User defined metrics</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/config_static_hostname_mapping">Static Hostname Mappings</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/config_tenants">Tenants</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/config_transport_encryption">Transport Based Encryption</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/howto_tune_bfd">Optimizing Routing Protocols</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/config_ha">High Availability</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/config_access_mgmt">Access Management and Authentication</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/config_ntp_auth">NTP</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/sec_adaptive_encrypt">Security</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/concepts_ssr_idp">Intrusion Detection and Prevention</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/config_STEP">Service and Topology Exchange Protocol (STEP)</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/how_to_use_app_summary">How To</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/ts_applications">Troubleshooting</a></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/events_overview">Events</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/bcp_att_avpn_configuration">Best Practices</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/cli_reference">CLI and Element Reference</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/installer_cli_reference">Installer/Initializer Reference</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/plugin_intro">Plugins</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/release_notes_128t_6.1">Release Notes</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Administration</span><meta itemprop="position" content="1"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Configuration</span><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Inline Flow Performance Monitoring</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Inline Flow Performance Monitoring</h1></header><p>Inline Flow Performance Monitoring (FPM) complements BFD in measuring peer paths between two SSR devices. To provide this additional level of detail, the initiating router adds a small amount of metadata to a sample number of packets. This metadata indicates that metrics are collected per path, traffic class, and protocol (TCP or UDP). The receiving router reads the metadata and returns the data to the intiating router. The configurable fields include:</p><ul><li><code>name</code>: The name of the performance monitoring profile.</li><li><code>marking-count</code>: The number of packets to mark within a given interval.</li><li><code>interval-duration</code>: The duration of a packet marking interval in milliseconds.</li><li><code>monitor-only</code>: Default is <code>false</code>. This generates metrics and provides those metrics for calculating SLA and making load balancing decisions. Setting <code>monitor-only</code> to <code>true</code> will generate metrics, but does not influence load balancing decisions or traffic flow.</li><li><code>resource-group</code>: Associate this performance monitoring profile with a top-level resource-group.</li></ul><p>Additional information is available at <a href="/docs/config_reference_guide#performance-monitoring-profile"><code>performance-monitoring-profile</code>.</a></p><p>The data returned is organized by traffic class (high/medium/low/best-effort) and protocol (TDP, UDP), giving more granular data on the performance of a link - not just through synthetic traffic (BFD), but by piggybacking onto actual user traffic.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="a-bit-about-traffic-class">A bit about traffic-class<a href="#a-bit-about-traffic-class" class="hash-link" aria-label="Direct link to A bit about traffic-class" title="Direct link to A bit about traffic-class">​</a></h4><p>The SSR has four traffic classes, in order of priority: high, medium, low, best-effort. The traffic-class allows you to configure different treatments for different classes of traffic for the same service.</p><p>Working in concert with the traffic engineering subsystem, this lets you determine which paths the traffic referenced by a service class will use, and therefore how much guaranteed bandwidth is reserved for each class.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="configuration">Configuration<a href="#configuration" class="hash-link" aria-label="Direct link to Configuration" title="Direct link to Configuration">​</a></h2><h4 class="anchor anchorWithStickyNavbar_LWe7" id="from-the-command-line">From the Command Line:<a href="#from-the-command-line" class="hash-link" aria-label="Direct link to From the Command Line:" title="Direct link to From the Command Line:">​</a></h4><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">config</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    authority</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        performance-monitoring-profile  wan-assurance-monitoring-profile</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            name               wan-assurance-monitoring-profile</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            marking-count      100</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            interval-duration  10000</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            monitor-only       true</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">exit</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="from-the-gui">From the GUI:<a href="#from-the-gui" class="hash-link" aria-label="Direct link to From the GUI:" title="Direct link to From the GUI:">​</a></h4><ol><li>From the Authority level, scroll down to Performance Monitoring Profiles, and click ADD.</li></ol><p><img loading="lazy" alt="Performance Monitoring Profiles" src="/assets/images/config_ifpm1-8397280be51b4724bc3462ce730b2d4c.png" width="1708" height="386" class="img_ev3q"></p><ol start="2"><li>Enter a name for the profile.</li></ol><p><img loading="lazy" alt="New Profile Name" src="/assets/images/config_ifpm2-2eb0dcf71b732a9da83f8810a1cdb107.png" width="1256" height="432" class="img_ev3q"></p><ol start="3"><li>Configure monitoring values, or accept the defaults to gather a baseline.</li></ol><p><img loading="lazy" alt="Monitoring Profile Intervals" src="/assets/images/config_ifpm3-11200f7efb4b929667477e957c0a21c1.png" width="1662" height="824" class="img_ev3q"></p><p>   The default setting for Monitor Only is <code>false</code>. This generates metrics and provides those metrics for calculating SLA and making load balancing decisions. Setting <code>monitor-only</code> to <code>true</code> will generate metrics, but does not influence load balancing decisions or traffic flow. </p><ol start="4"><li><p>Optionally, assign the profile to a Resource Group.</p></li><li><p>Validate and Commit the configuration changes.</p></li></ol><p>Additionally, ensure that the profile is applied to your peer paths. This is generally configured through <strong>router &gt; node &gt; device-interface &gt; network-interface &gt; neighborhood</strong>. Apply the profile to both sides of the SVR peer path.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="load-balancing">Load Balancing<a href="#load-balancing" class="hash-link" aria-label="Direct link to Load Balancing" title="Direct link to Load Balancing">​</a></h3><p>Flow Performance Monitoring (FPM) operates on top of existing traffic, and does not intiate its own traffic. Because of the interval timing and sample time, no significant load is added to the path. In <code>monitor-mode true</code>, no impact to load balancing is generated.  </p><p>When <code>monitor-mode</code> is set to <code>true</code>, the FPM metrics are collected, but are <strong>not</strong> reported to the load balancer.   </p><p>With <code>monitor-mode</code> set to <code>false</code>, both BFD and FPM provide metrics for calculating SLA and making load balancing decisions. By default, the metrics generated by FPM are used in favor of BFD metrics, and will influence load balancing.</p><p>In order to collect accurate metrics, FPM requires that user traffic be actively traversing the path. When FPM derived SLA metrics indicate that a path is no longer suitable, the load balancer may steer all user traffic away from that path, depending on how session-resiliency is configured. If SLA steers ALL sessions away from a specific path (except BFD traffic), then FPM will not generate any new metrics. The FPM metrics become stale and the load balancer then harvests performance metrics from BFD. Once the metrics from BFD indicate that the path is better, it (if session-resiliency is configured as <code>revertible-failover</code>) reverts all sessions back, in addition to allowing new sessions to be created using that path. Once traffic is again flowing, FPM path metrics are collected and used with the load balancer. </p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="show-commands">Show Commands<a href="#show-commands" class="hash-link" aria-label="Direct link to Show Commands" title="Direct link to Show Commands">​</a></h3><p>Use <code>show stats performance-monitoring</code> to view the results. The following metrics are provided:</p><ul><li><code>peer-path jitter</code>: Jitter in milliseconds for the SSR peer path.</li><li><code>peer-path latency</code>: Latency in milliseconds for the SSR peer path.</li><li><code>peer-path loss</code>: Packet loss percentange for the SSR peer path.</li><li><code>peer-path mos</code>: MOS value calculated for the SSR peer path (hundreths of a decimal).</li><li><code>peer-path updated</code>: Time of last reported FPM activity on this peer path. </li></ul><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">admin@labsystem1.fiedler# show stats performance-monitoring router all force</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Tue 2021-11-09 11:19:51 EST</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">✔ Retrieving statistics...</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Highway Manager Performance Monitoring Stats</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">--------------------------------------------</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">=================== =========== ======== =========== ================ ============= ====== =============== ========== ============</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> Metric              Router      Node     Peer-name   Peer-host        Device-name   Vlan   Traffic-class   Protocol        Value</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">=================== =========== ======== =========== ================ ============= ====== =============== ========== ============</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> peer-path jitter    natick      flutie   greyhaven   10.65.228.68     enp1s0f3         0   low             udp                21</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                                 flutie   greyhaven   10.65.228.68     enp1s0f3         0   medium          udp                12</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                                 flutie   greyhaven   192.168.2.101    enp1s0f3         0   low             udp                 4</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                                 flutie   greyhaven   192.168.2.101    enp1s0f3         0   medium          udp                51</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                                 flutie   westfield   10.0.0.41        enp1s0f3         0   medium          udp                 0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                     westfield   monty    natick      108.20.166.32    enp1s0           0   medium          udp                 1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                                 monty    natick      108.49.110.151   enp1s0           0   medium          udp                 0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> peer-path latency   natick      flutie   greyhaven   10.65.228.68     enp1s0f3         0   low             udp                78</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                                 flutie   greyhaven   10.65.228.68     enp1s0f3         0   medium          udp                64</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                                 flutie   greyhaven   192.168.2.101    enp1s0f3         0   low             udp                45</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                                 flutie   greyhaven   192.168.2.101    enp1s0f3         0   medium          udp               113</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                                 flutie   westfield   10.0.0.41        enp1s0f3         0   medium          udp                18</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                     westfield   monty    natick      108.20.166.32    enp1s0           0   medium          udp                15</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                                 monty    natick      108.49.110.151   enp1s0           0   medium          udp                 0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> peer-path loss      natick      flutie   greyhaven   10.65.228.68     enp1s0f3         0   low             udp                 0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                                 flutie   greyhaven   10.65.228.68     enp1s0f3         0   medium          udp                 0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                                 flutie   greyhaven   192.168.2.101    enp1s0f3         0   low             udp                 0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                                 flutie   greyhaven   192.168.2.101    enp1s0f3         0   medium          udp                 0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                                 flutie   westfield   10.0.0.41        enp1s0f3         0   medium          udp                 0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                     westfield   monty    natick      108.20.166.32    enp1s0           0   medium          udp                 0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                                 monty    natick      108.49.110.151   enp1s0           0   medium          udp               100</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> peer-path mos       natick      flutie   greyhaven   10.65.228.68     enp1s0f3         0   low             udp               434</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                                 flutie   greyhaven   10.65.228.68     enp1s0f3         0   medium          udp               436</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                                 flutie   greyhaven   192.168.2.101    enp1s0f3         0   low             udp               438</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                                 flutie   greyhaven   192.168.2.101    enp1s0f3         0   medium          udp               412</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                                 flutie   westfield   10.0.0.41        enp1s0f3         0   medium          udp               440</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                     westfield   monty    natick      108.20.166.32    enp1s0           0   medium          udp               440</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                                 monty    natick      108.49.110.151   enp1s0           0   medium          udp               100</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> peer-path updated   natick      flutie   greyhaven   10.65.228.68     enp1s0f3         0   low             udp        1636474788</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                                 flutie   greyhaven   10.65.228.68     enp1s0f3         0   medium          udp        1636216599</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                                 flutie   greyhaven   192.168.2.101    enp1s0f3         0   low             udp        1636474188</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                                 flutie   greyhaven   192.168.2.101    enp1s0f3         0   medium          udp        1636216603</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                                 flutie   westfield   10.0.0.41        enp1s0f3         0   medium          udp        1636466059</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                     westfield   monty    natick      108.20.166.32    enp1s0           0   medium          udp        1636466059</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                                 monty    natick      108.49.110.151   enp1s0           0   medium          udp        1636025768</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="troubleshooting">Troubleshooting<a href="#troubleshooting" class="hash-link" aria-label="Direct link to Troubleshooting" title="Direct link to Troubleshooting">​</a></h2><h4 class="anchor anchorWithStickyNavbar_LWe7" id="i-am-experiencing-100-loss-on-one-node-when-traffic-is-flowing">I am experiencing 100% loss on one node when traffic is flowing:<a href="#i-am-experiencing-100-loss-on-one-node-when-traffic-is-flowing" class="hash-link" aria-label="Direct link to I am experiencing 100% loss on one node when traffic is flowing:" title="Direct link to I am experiencing 100% loss on one node when traffic is flowing:">​</a></h4><p>Verify that the peer router has FPM enabled on its peer path. If not, the peer router will not collect and respond to FPM data analytics queries.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="i-am-seeing-infrequent-fpm-analytics-updates-when-generating-test-traffic-using-tools-like-iperf">I am seeing infrequent FPM analytics updates when generating test traffic using tools like Iperf:<a href="#i-am-seeing-infrequent-fpm-analytics-updates-when-generating-test-traffic-using-tools-like-iperf" class="hash-link" aria-label="Direct link to I am seeing infrequent FPM analytics updates when generating test traffic using tools like Iperf:" title="Direct link to I am seeing infrequent FPM analytics updates when generating test traffic using tools like Iperf:">​</a></h4><p>FPM operates on packets below MTU so calculations are not impacted by fragmentation stacks. Certain test tools that by default generate jumbo traffic may not satisfy this condition. As a result, FPM will not sample packets that will not generate new analytics.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="loss-values-generated-by-fpm-are-very-volatile">Loss values generated by FPM are very volatile:<a href="#loss-values-generated-by-fpm-are-very-volatile" class="hash-link" aria-label="Direct link to Loss values generated by FPM are very volatile:" title="Direct link to Loss values generated by FPM are very volatile:">​</a></h4><p>Because FPM attaches to existing traffic and does not generate its own, a very short interval duration can lead to inaccurate loss values. This is due to FPM not being able to sample a sufficient number of packets within the given interval. Increasing the interval duration allows more packets to be sampled, providing a more accurate representation of loss on the path.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"></div><div class="col lastUpdated_vwxv"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2023-07-19T16:16:30.000Z">Jul 19, 2023</time></b></span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/config_EthoSVR_activestandby"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Configuring Ethernet Over SVR for Active/Standby</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/config_gre_tunnel"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Native GRE Tunnels</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#configuration" class="table-of-contents__link toc-highlight">Configuration</a><ul><li><a href="#load-balancing" class="table-of-contents__link toc-highlight">Load Balancing</a></li><li><a href="#show-commands" class="table-of-contents__link toc-highlight">Show Commands</a></li></ul></li><li><a href="#troubleshooting" class="table-of-contents__link toc-highlight">Troubleshooting</a></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2023 Juniper Networks, Inc.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.5aea67a1.js"></script>
<script src="/assets/js/main.b3a8c539.js"></script>
</body>
</html>