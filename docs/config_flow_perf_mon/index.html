<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.14">
<title data-react-helmet="true">Inline Flow Performance Monitoring | SSN Docs</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://docs.128technology.com/docs/config_flow_perf_mon"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Inline Flow Performance Monitoring | SSN Docs"><meta data-react-helmet="true" name="description" content="Inline Flow Performance Monitoring (FPM) complements BFD in measuring peer paths between two SSR devices. To provide this additional level of detail, the initiating router adds a small amount of metadata to a sample number of packets. This metadata indicates that metrics are collected per path, traffic class, and protocol (TCP or UDP). The receiving router reads the metadata and returns the data to the intiating router. The configurable fields include:"><meta data-react-helmet="true" property="og:description" content="Inline Flow Performance Monitoring (FPM) complements BFD in measuring peer paths between two SSR devices. To provide this additional level of detail, the initiating router adds a small amount of metadata to a sample number of packets. This metadata indicates that metrics are collected per path, traffic class, and protocol (TCP or UDP). The receiving router reads the metadata and returns the data to the intiating router. The configurable fields include:"><link data-react-helmet="true" rel="icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://docs.128technology.com/docs/config_flow_perf_mon"><link data-react-helmet="true" rel="alternate" href="https://docs.128technology.com/docs/config_flow_perf_mon" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://docs.128technology.com/docs/config_flow_perf_mon" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.21b25f22.css">
<link rel="preload" href="/assets/js/runtime~main.75dab931.js" as="script">
<link rel="preload" href="/assets/js/main.0b437b3a.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_OuoZ">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="Juniper Logo" class="themedImage_TMUO themedImage--light_4Vu1"><img src="/img/logo_dark.png" alt="Juniper Logo" class="themedImage_TMUO themedImage--dark_uzRr"></div><b class="navbar__title">Session Smart</b></a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/docs/intro_getting_started">Docs</a><a href="https://community.juniper.net/answers/communities/community-home?CommunityKey=310d1a41-12fa-4627-9a99-880145a7c87c" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>Session Smart Community<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><a href="https://www.juniper.net/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>Company<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_lDyR"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_i9tI" type="button"></button><aside class="docSidebarContainer_0YBq"><div class="sidebar_a3j0"><nav class="menu thin-scrollbar menu_cyFh"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/docs/about_128t">About</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/docs/intro_getting_started">Introduction</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/docs/intro_system_reqs">Deployment Considerations</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/docs/intro_installation">Installation Process</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/docs/intro_installation_image">Image-Based Installation</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/docs/intro_installation_quickstart_aws">Cloud Installations</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/docs/intro_upgrade_considerations">Upgrades and Rollback</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/docs/intro_installation_installer">Supporting Install Information - Appendix</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/docs/concepts_application_discovery">Concepts</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/docs/intro_wa_quickstart_1_networks">WAN Assurance Quick Start</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/docs/wan_overview">WAN Assurance</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active hasHref_TwRn" href="/docs/config_basics">Administration</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active hasHref_TwRn" tabindex="0" href="/docs/config_basics">Configuration</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/config_basics">Configuration Management</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/config_templates">Configuration Templates</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/config_asset_connection_resiliency">Asset Connection Resiliency</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/config_dscp_steering">Configuring DSCP Steering</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/config_dscp_preservation">DSCP Preservation</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/config_vrf_learning">VRF Support</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/config_audit_event">Audit Events</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/config_dhcp">DHCP</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/config_dns_proxy">DNS Proxy</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/config_forward_error_correction">Configuring Forward Error Correction</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/config_management_over_forwarding">Management over Forwarding</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/config_domain-based_web_filter">Web Filtering</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/config_app_ident">Application Identification</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/config_EthoSVR">Configuring Ethernet Over Secure Vector Routing</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/config_EthoSVR_activestandby">Configuring Ethernet Over SVR for Active/Standby</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/config_flow_perf_mon">Inline Flow Performance Monitoring</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/config_gre_tunnel">Native GRE Tunnels</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/config_in-memory_metrics">In-Memory Metrics</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/config_nat">NAT</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/config_rate_limiting">Rate Limiting</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/config_RBAC">Configuring Role-Based Access Control</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/config_service_health">Service Health Learning and Fault Avoidance</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/config_snmp">SNMP - Overview</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/howto_config_snmp">SNMP - Configuration</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/config_snmp_metrics">SNMP: User defined metrics</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/config_static_hostname_mapping">Static Hostname Mappings</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/config_tenants">Tenants</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/config_transport_encryption">Transport Based Encryption</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" tabindex="0" href="/docs/howto_tune_bfd">Optimizing Routing Protocols</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" tabindex="0" href="/docs/config_ha">High Availability</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" tabindex="0" href="/docs/config_access_mgmt">Access Management and Authentication</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" tabindex="0" href="/docs/config_ntp_auth">NTP</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" tabindex="0" href="/docs/sec_adaptive_encrypt">Security</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" tabindex="0" href="/docs/concepts_ssr_idp">Intrusion Detection and Prevention</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" tabindex="0" href="/docs/config_STEP">Service and Topology Exchange Protocol (STEP)</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" tabindex="0" href="/docs/how_to_use_app_summary">How To</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" tabindex="0" href="/docs/ts_applications">Troubleshooting</a></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/docs/events_overview">Events</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/docs/bcp_att_avpn_configuration">Best Practices</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/docs/cli_reference">CLI and Element Reference</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/docs/installer_cli_reference">Installer/Initializer Reference</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/docs/plugin_intro">Plugins</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/docs/release_notes_128t_6.0">Release Notes</a></div></li></ul></nav></div></aside><main class="docMainContainer_r8cw"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_zHA2"><div class="docItemContainer_oiyr"><article><div class="tocCollapsible_aw-L theme-doc-toc-mobile tocMobile_Tx6Y"><button type="button" class="clean-btn tocCollapsibleButton_zr6a">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Inline Flow Performance Monitoring</h1></header><p>Inline Flow Performance Monitoring (FPM) complements BFD in measuring peer paths between two SSR devices. To provide this additional level of detail, the initiating router adds a small amount of metadata to a sample number of packets. This metadata indicates that metrics are collected per path, traffic class, and protocol (TCP or UDP). The receiving router reads the metadata and returns the data to the intiating router. The configurable fields include:</p><ul><li><code>name</code>: The name of the performance monitoring profile.</li><li><code>marking-count</code>: The number of packets to mark within a given interval.</li><li><code>interval-duration</code>: The duration of a packet marking interval in milliseconds.</li><li><code>monitor-only</code>: Collect statistics without influencing packet processing features.</li><li><code>resource-group</code>: Associate this performance monitoring profile with a top-level resource-group.</li></ul><p>Additional information is available at <a href="/docs/config_reference_guide#performance-monitoring-profile"><code>performance-monitoring-profile</code>.</a></p><p>The data returned is organized by traffic class (high/medium/low/best-effort) and protocol (TDP, UDP), giving more granular data on the performance of a link - not just through synthetic traffic (BFD), but by piggybacking onto actual user traffic.</p><h4 class="anchor anchorWithStickyNavbar_y2LR" id="a-bit-about-traffic-class">A bit about traffic-class<a class="hash-link" href="#a-bit-about-traffic-class" title="Direct link to heading">​</a></h4><p>The SSR has four traffic classes, in order of priority: high, medium, low, best-effort. The traffic-class allows you to configure different treatments for different classes of traffic for the same service.</p><p>Working in concert with the traffic engineering subsystem, this lets you determine which paths the traffic referenced by a service class will use, and therefore how much guaranteed bandwidth is reserved for each class.</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="configuration">Configuration<a class="hash-link" href="#configuration" title="Direct link to heading">​</a></h2><h4 class="anchor anchorWithStickyNavbar_y2LR" id="from-the-command-line">From the command line:<a class="hash-link" href="#from-the-command-line" title="Direct link to heading">​</a></h4><div class="codeBlockContainer_J+bg theme-code-block"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">config</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    authority</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        performance-monitoring-profile  wan-assurance-monitoring-profile</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            name               wan-assurance-monitoring-profile</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            marking-count      100</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            interval-duration  10000</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            monitor-only       true</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">exit</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h4 class="anchor anchorWithStickyNavbar_y2LR" id="from-the-gui">From the GUI:<a class="hash-link" href="#from-the-gui" title="Direct link to heading">​</a></h4><ol><li>From the Authority level, scroll down to Performance Monitoring Profiles, and click ADD.</li></ol><p><img alt="Performance Monitoring Profiles" src="/assets/images/config_ifpm1-8397280be51b4724bc3462ce730b2d4c.png"></p><ol start="2"><li>Enter a name for the profile.</li></ol><p><img alt="New Profile Name" src="/assets/images/config_ifpm2-2eb0dcf71b732a9da83f8810a1cdb107.png"></p><ol start="3"><li>Configure monitoring values, or accept the defaults to gather a baseline.</li></ol><p><img alt="Monitoring Profile Intervals" src="/assets/images/config_ifpm3-11200f7efb4b929667477e957c0a21c1.png"></p><p>   The default setting for Monitor Only is false. This generates metrics, but does not influence load balancing decisions or traffic flow. To use the Flow performance metrics for load balancing decisions, select true. </p><ol start="4"><li><p>Optionally, assign the profile to a Resource Group.</p></li><li><p>Validate and Commit the configuration changes.</p></li></ol><p>Additionally, ensure that the profile is applied to your peer paths. This is generally configured through <strong>router &gt; node &gt; device-interface &gt; network-interface &gt; neighborhood</strong>. Apply the profile to both sides of the SVR peer path.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="load-balancing">Load Balancing<a class="hash-link" href="#load-balancing" title="Direct link to heading">​</a></h3><p>Flow performance monitoring operates on top of existing traffic, and does not intiate its own traffic. Because of the interval timing and sample time, no significant load is added to the path, and no impact to load balancing is generated. </p><p>By default, the metrics generated by FPM are not contributed to the BFD metrics to influence load balancing. By disabling monitor mode (set to true) the FPM metrics are reported to the load balancer.<br>
<!-- -->When FPM is active (not configured as monitor only), both BFD and FPM provide metrics for calculating SLA and making load balancing decisions. Because FPM metrics provide greater detail than BFD metrics, these metrics are used first by the load balancer. When FPM metrics are stale (due to lack of traffic) the use of BFD metrics resumes.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="show-commands">Show Commands<a class="hash-link" href="#show-commands" title="Direct link to heading">​</a></h3><p>Use <code>show stats performance-monitoring</code> to view the results. The following metrics are provided:</p><ul><li><code>peer-path jitter</code>: Jitter in milliseconds for the SSR peer path.</li><li><code>peer-path latency</code>: Latency in milliseconds for the SSR peer path.</li><li><code>peer-path loss</code>: Packet loss percentange for the SSR peer path.</li><li><code>peer-path mos</code>: MOS value calculated for the SSR peer path (hundreths of a decimal).</li><li><code>peer-path updated</code>: Time of last reported FPM activity on this peer path. </li></ul><div class="codeBlockContainer_J+bg theme-code-block"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">admin@labsystem1.fiedler# show stats performance-monitoring router all force</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Tue 2021-11-09 11:19:51 EST</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">✔ Retrieving statistics...</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Highway Manager Performance Monitoring Stats</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">--------------------------------------------</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">=================== =========== ======== =========== ================ ============= ====== =============== ========== ============</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> Metric              Router      Node     Peer-name   Peer-host        Device-name   Vlan   Traffic-class   Protocol        Value</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">=================== =========== ======== =========== ================ ============= ====== =============== ========== ============</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> peer-path jitter    natick      flutie   greyhaven   10.65.228.68     enp1s0f3         0   low             udp                21</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                                 flutie   greyhaven   10.65.228.68     enp1s0f3         0   medium          udp                12</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                                 flutie   greyhaven   192.168.2.101    enp1s0f3         0   low             udp                 4</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                                 flutie   greyhaven   192.168.2.101    enp1s0f3         0   medium          udp                51</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                                 flutie   westfield   10.0.0.41        enp1s0f3         0   medium          udp                 0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                     westfield   monty    natick      108.20.166.32    enp1s0           0   medium          udp                 1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                                 monty    natick      108.49.110.151   enp1s0           0   medium          udp                 0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> peer-path latency   natick      flutie   greyhaven   10.65.228.68     enp1s0f3         0   low             udp                78</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                                 flutie   greyhaven   10.65.228.68     enp1s0f3         0   medium          udp                64</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                                 flutie   greyhaven   192.168.2.101    enp1s0f3         0   low             udp                45</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                                 flutie   greyhaven   192.168.2.101    enp1s0f3         0   medium          udp               113</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                                 flutie   westfield   10.0.0.41        enp1s0f3         0   medium          udp                18</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                     westfield   monty    natick      108.20.166.32    enp1s0           0   medium          udp                15</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                                 monty    natick      108.49.110.151   enp1s0           0   medium          udp                 0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> peer-path loss      natick      flutie   greyhaven   10.65.228.68     enp1s0f3         0   low             udp                 0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                                 flutie   greyhaven   10.65.228.68     enp1s0f3         0   medium          udp                 0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                                 flutie   greyhaven   192.168.2.101    enp1s0f3         0   low             udp                 0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                                 flutie   greyhaven   192.168.2.101    enp1s0f3         0   medium          udp                 0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                                 flutie   westfield   10.0.0.41        enp1s0f3         0   medium          udp                 0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                     westfield   monty    natick      108.20.166.32    enp1s0           0   medium          udp                 0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                                 monty    natick      108.49.110.151   enp1s0           0   medium          udp               100</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> peer-path mos       natick      flutie   greyhaven   10.65.228.68     enp1s0f3         0   low             udp               434</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                                 flutie   greyhaven   10.65.228.68     enp1s0f3         0   medium          udp               436</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                                 flutie   greyhaven   192.168.2.101    enp1s0f3         0   low             udp               438</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                                 flutie   greyhaven   192.168.2.101    enp1s0f3         0   medium          udp               412</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                                 flutie   westfield   10.0.0.41        enp1s0f3         0   medium          udp               440</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                     westfield   monty    natick      108.20.166.32    enp1s0           0   medium          udp               440</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                                 monty    natick      108.49.110.151   enp1s0           0   medium          udp               100</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> peer-path updated   natick      flutie   greyhaven   10.65.228.68     enp1s0f3         0   low             udp        1636474788</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                                 flutie   greyhaven   10.65.228.68     enp1s0f3         0   medium          udp        1636216599</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                                 flutie   greyhaven   192.168.2.101    enp1s0f3         0   low             udp        1636474188</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                                 flutie   greyhaven   192.168.2.101    enp1s0f3         0   medium          udp        1636216603</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                                 flutie   westfield   10.0.0.41        enp1s0f3         0   medium          udp        1636466059</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                     westfield   monty    natick      108.20.166.32    enp1s0           0   medium          udp        1636466059</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                                 monty    natick      108.49.110.151   enp1s0           0   medium          udp        1636025768</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h2 class="anchor anchorWithStickyNavbar_y2LR" id="troubleshooting">Troubleshooting<a class="hash-link" href="#troubleshooting" title="Direct link to heading">​</a></h2><h4 class="anchor anchorWithStickyNavbar_y2LR" id="i-am-experiencing-100-loss-on-one-node-when-traffic-is-flowing">I am experiencing 100% loss on one node when traffic is flowing:<a class="hash-link" href="#i-am-experiencing-100-loss-on-one-node-when-traffic-is-flowing" title="Direct link to heading">​</a></h4><p>Verify that the peer router has FPM enabled on its peer path. If not, the peer router will not collect and respond to FPM data analytics queries.</p><h4 class="anchor anchorWithStickyNavbar_y2LR" id="i-am-seeing-infrequent-fpm-analytics-updates-when-generating-test-traffic-using-tools-like-iperf">I am seeing infrequent FPM analytics updates when generating test traffic using tools like Iperf:<a class="hash-link" href="#i-am-seeing-infrequent-fpm-analytics-updates-when-generating-test-traffic-using-tools-like-iperf" title="Direct link to heading">​</a></h4><p>FPM operates on packets below MTU so calculations are not impacted by fragmentation stacks. Certain test tools that by default generate jumbo traffic may not satisfy this condition. As a result, FPM will not sample packets that will not generate new analytics.</p><h4 class="anchor anchorWithStickyNavbar_y2LR" id="loss-values-generated-by-fpm-are-very-volatile">Loss values generated by FPM are very volatile:<a class="hash-link" href="#loss-values-generated-by-fpm-are-very-volatile" title="Direct link to heading">​</a></h4><p>Because FPM attaches to existing traffic and does not generate its own, a very short interval duration can lead to inaccurate loss values. This is due to FPM not being able to sample a sufficient number of packets within the given interval. Increasing the interval duration allows more packets to be sampled, providing a more accurate representation of loss on the path.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"></div><div class="col lastUpdated_mt2f"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2022-09-29T13:04:23.000Z">9/29/2022</time></b></span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/config_EthoSVR_activestandby"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Configuring Ethernet Over SVR for Active/Standby</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/config_gre_tunnel"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Native GRE Tunnels</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_vrFS thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#configuration" class="table-of-contents__link toc-highlight">Configuration</a><ul><li><a href="#load-balancing" class="table-of-contents__link toc-highlight">Load Balancing</a></li><li><a href="#show-commands" class="table-of-contents__link toc-highlight">Show Commands</a></li></ul></li><li><a href="#troubleshooting" class="table-of-contents__link toc-highlight">Troubleshooting</a></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2022 Juniper Networks, Inc.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.75dab931.js"></script>
<script src="/assets/js/main.0b437b3a.js"></script>
</body>
</html>