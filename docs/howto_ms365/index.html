<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.8">
<link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-167298415-2","auto"),ga("set","anonymizeIp",!0),ga("send","pageview")</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
<link rel="search" type="application/opensearchdescription+xml" title="128T Docs" href="/opensearch.xml"><title data-react-helmet="true">Microsoft 365 | 128T Docs</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://docs.128technology.com/docs/howto_ms365"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:version" content="current"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Microsoft 365 | 128T Docs"><meta data-react-helmet="true" name="description" content="128T optimizes Microsoft 365 sessions, allowing you to easily configure the associated services to be delivered using the recommended network connectivity principles. It uses an AppID module for automatic discovery of Microsoft 365 endpoints, and simple service definition."><meta data-react-helmet="true" property="og:description" content="128T optimizes Microsoft 365 sessions, allowing you to easily configure the associated services to be delivered using the recommended network connectivity principles. It uses an AppID module for automatic discovery of Microsoft 365 endpoints, and simple service definition."><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://docs.128technology.com/docs/howto_ms365"><link data-react-helmet="true" rel="alternate" href="https://docs.128technology.com/docs/howto_ms365" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://docs.128technology.com/docs/howto_ms365" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.9ceca0cd.css">
<link rel="preload" href="/assets/js/runtime~main.f3773427.js" as="script">
<link rel="preload" href="/assets/js/main.1bde77d2.js" as="script">
</head>
<body>
<script>!function(){function e(e){document.documentElement.setAttribute("data-theme",e)}var t=function(){var e=null;try{e=localStorage.getItem("theme")}catch(e){}return e}();null!==t?e(t):window.matchMedia("(prefers-color-scheme: dark)").matches?e("dark"):(window.matchMedia("(prefers-color-scheme: light)").matches,e("light"))}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="Juniper Logo" class="themedImage_1VuW themedImage--light_3UqQ"><img src="/img/logo_dark.png" alt="Juniper Logo" class="themedImage_1VuW themedImage--dark_hz6m"></div><b class="navbar__title">Session Smart</b></a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/docs/intro_getting_started">Docs</a><a href="https://community.128technology.com/home" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>Interchange<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><a href="https://www.128technology.com/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>Company<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="searchBox_1Doo"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_31aa"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_35hR" type="button"></button><aside class="docSidebarContainer_3Kbt"><div class="sidebar_15mo"><nav class="menu thin-scrollbar menu_Bmed"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">About</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Introduction</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Deployment Considerations</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Installation Process</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Cloud Installations</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Supporting Information - Appendix</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Concepts</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">Administration</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Configuration</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">High Availability</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Security</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#" tabindex="0">How To</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/howto_conductor_migration">Conductor Migration</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/howto_extend_gui_nav">Extending GUI Nav</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/howto_lte">LTE and Dual LTE Configuration</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/howto_config_PPPoE">Configuring Dual PPPoE</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/howto_maintenance_mode">Maintenance Mode</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/howto_ms365">Microsoft 365</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/howto_trusted_ca_certificate">Adding a Trusted Certificate</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/howto_tune_bfd">Tuning BFD</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Troubleshooting</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Events</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Best Practices</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">CLI Reference</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Installer/Initializer Reference</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Plugins</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">REST APIs</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Release Notes</a></li></ul></nav></div></aside><main class="docMainContainer_3ufF"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><div class="tocCollapsible_1PrD theme-doc-toc-mobile tocMobile_3Hoh"><button type="button" class="clean-btn tocCollapsibleButton_2O1e">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Microsoft 365</h1></header><p>128T optimizes Microsoft 365 sessions, allowing you to easily configure the associated services to be delivered using the recommended <a href="https://docs.microsoft.com/en-us/office365/enterprise/office-365-network-connectivity-principles" target="_blank" rel="noopener noreferrer">network connectivity principles</a>. It uses an <a href="/docs/concepts_appid#appid-using-modules">AppID module</a> for automatic discovery of Microsoft 365 endpoints, and simple service definition.</p><div class="admonition admonition-info alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</h5></div><div class="admonition-content"><p>Microsoft 365, or M365 is formerly known as Office 365, or O365.</p></div></div><h2 class="anchor anchorWithStickyNavbar_31ik" id="configuration">Configuration<a aria-hidden="true" class="hash-link" href="#configuration" title="Direct link to heading">​</a></h2><p>To configure your router for Microsoft 365 you must enable the router for AppID module learning mode, create Microsoft 365 services, and define associated policies for access, security, and routing.</p><h3 class="anchor anchorWithStickyNavbar_31ik" id="enable-module-learning-mode">Enable Module Learning Mode<a aria-hidden="true" class="hash-link" href="#enable-module-learning-mode" title="Direct link to heading">​</a></h3><p>In the router configuration, enable module based application learning mode by adding <code>module</code> to the &quot;Application Identification&quot; settings. 128T software installs a default AppID module for Microsoft 365 applications.</p><h4 class="anchor anchorWithStickyNavbar_31ik" id="gui-example">GUI Example<a aria-hidden="true" class="hash-link" href="#gui-example" title="Direct link to heading">​</a></h4><p><img alt="AppId Module Add" src="/assets/images/howto_m365_1-1dd1bc8fd944f47ff906abe4313e60e0.png"></p><p><img alt="AppId Module Save" src="/assets/images/howto_m365_2-31c75590925065db387d1a5f85473f30.png"></p><p><img alt="AppId Module Added" src="/assets/images/howto_m365_3-68683678d0a506f141dc5cf33716e622.png"></p><h4 class="anchor anchorWithStickyNavbar_31ik" id="cli-example">CLI Example<a aria-hidden="true" class="hash-link" href="#cli-example" title="Direct link to heading">​</a></h4><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">config</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    authority</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        router   my-router</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            name                        my-router</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            application-identification</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                mode  module</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">exit</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><div class="admonition admonition-important alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>important</h5></div><div class="admonition-content"><p>Once the module AppID learning mode is enabled, the router host will periodically connect to Microsoft&#x27;s <code>https://endpoints.office.com</code> web service to retrieve M365 endpoints. Ensure your router host is able to access the public web service using the Linux kernel route table.</p></div></div><h3 class="anchor anchorWithStickyNavbar_31ik" id="configure-services">Configure Services<a aria-hidden="true" class="hash-link" href="#configure-services" title="Direct link to heading">​</a></h3><p>Once module AppID learning mode has been enabled, the following application names will be automatically discovered (see <a href="#verifying-operation">Verifying Operation</a> to confirm successful discovery): </p><table><thead><tr><th>Application Name</th><th>Description</th></tr></thead><tbody><tr><td><code>O365-Common</code></td><td>Microsoft 365 Common and Office Online</td></tr><tr><td><code>O365-Exchange</code></td><td>Exchange Online</td></tr><tr><td><code>O365-SharePoint</code></td><td>SharePoint Online and OneDrive for Business</td></tr><tr><td><code>O365-Skype</code></td><td>Skype for Business Online and Microsoft Teams</td></tr></tbody></table><p>Create one or more services configured for the module discovered application names.</p><h4 class="anchor anchorWithStickyNavbar_31ik" id="gui-example-1">GUI Example<a aria-hidden="true" class="hash-link" href="#gui-example-1" title="Direct link to heading">​</a></h4><p><img alt="M365 Service" src="/assets/images/howto_m365_6-3c8db6c9ecdd6f074d4b9c306cbfdb91.png"></p><h4 class="anchor anchorWithStickyNavbar_31ik" id="cli-example-1">CLI Example<a aria-hidden="true" class="hash-link" href="#cli-example-1" title="Direct link to heading">​</a></h4><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">config</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    authority</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        service  M365</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            name                  M365</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            description           &quot;Microsoft 365 Common and Office Online&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            application-name      O365-Common</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            share-service-routes  false</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        service  M365-Exchange</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            name                  M365-Exchange</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            description           &quot;Exchange Online&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            application-name      O365-Exchange</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            share-service-routes  false</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        service  M365-Sharepoint</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            name                  M365-Sharepoint</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            description           &quot;SharePoint Online and OneDrive for Business&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            application-name      O365-Sharepoint</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            share-service-routes  false</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        service  M365-Skype</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            name                  M365-Skype</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            description           &quot;Skype for Business Online and Microsoft Teams&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            application-name      O365-Skype</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            share-service-routes  false</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">exit</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_31ik" id="service-policies">Service Policies<a aria-hidden="true" class="hash-link" href="#service-policies" title="Direct link to heading">​</a></h3><p>With your services for Microsoft 365 added, the final step is to configure the services for which tenants can access Microsoft 365, security policies, routing, and optional service-policy.</p><h4 class="anchor anchorWithStickyNavbar_31ik" id="access">Access<a aria-hidden="true" class="hash-link" href="#access" title="Direct link to heading">​</a></h4><p>Define which of your <a href="/docs/config_tenants#modeling-your-network-tenancy">network tenants</a> are allowed to access Microsoft 365 services by adding them to the <a href="/docs/config_reference_guide#access-policy-service">service access policies</a>.</p><h4 class="anchor anchorWithStickyNavbar_31ik" id="security">Security<a aria-hidden="true" class="hash-link" href="#security" title="Direct link to heading">​</a></h4><p>Configure the <a href="/docs/config_reference_guide#security">security policy</a> for the Microsoft 365 services.</p><div class="admonition admonition-tip alert alert--success"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</h5></div><div class="admonition-content"><p>Microsoft 365 services are designed for direct internet transport, with robust security and encryption built in to each application. As such, a security policy that disables router encryption is typically preferred.</p></div></div><h4 class="anchor anchorWithStickyNavbar_31ik" id="routing">Routing<a aria-hidden="true" class="hash-link" href="#routing" title="Direct link to heading">​</a></h4><p>Give the Microsoft 365 services appropriate <a href="/docs/concepts_glossary#service-routes">service routes</a> in your overall topology to designate possible routes.</p><div class="admonition admonition-tip alert alert--success"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</h5></div><div class="admonition-content"><p>In broadband connected branch router scenarios, the optimal route for M365 services will typically be directly out local broadband links. In this case, disabling the sharing of service-routes may be desirable in the service configuration.</p></div></div><h4 class="anchor anchorWithStickyNavbar_31ik" id="service-policy">Service Policy<a aria-hidden="true" class="hash-link" href="#service-policy" title="Direct link to heading">​</a></h4><p>By using <a href="/docs/bcp_service_and_service_policy_design#service-policy">service policy</a> associated with your Microsoft 365 services, you can set how your network should treat sessions. This includes QoS, path selection, and failover behavior for Microsoft 365. </p><h2 class="anchor anchorWithStickyNavbar_31ik" id="verifying-operation">Verifying Operation<a aria-hidden="true" class="hash-link" href="#verifying-operation" title="Direct link to heading">​</a></h2><p>You can verify the discovery by checking the &quot;Applications Seen&quot; on the router page of the GUI, and using the <code>show application names</code> in the PCLI.</p><h4 class="anchor anchorWithStickyNavbar_31ik" id="gui-example-2">GUI Example<a aria-hidden="true" class="hash-link" href="#gui-example-2" title="Direct link to heading">​</a></h4><p><img alt="Applications Seen" src="/assets/images/howto_m365_4-3ab4153dfd852a0c7c3573f8a3a194c9.png"></p><p><img alt="M365 Applications Seen" src="/assets/images/howto_m365_5-8dbbdae27f91c8a8f8c2db75d55235f3.png"></p><h4 class="anchor anchorWithStickyNavbar_31ik" id="cli-example-2">CLI Example<a aria-hidden="true" class="hash-link" href="#cli-example-2" title="Direct link to heading">​</a></h4><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">admin@node1.my-router# show application names</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Mon 2020-06-08 03:03:49 UTC</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Node: node1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">================== =============== ================ ===================== =====================</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> Application Name   Session Count   Ip Tuple Count   Date Discovered       Last Updated</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">================== =============== ================ ===================== =====================</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> O365-Common                    0               25   2020-06-08 02:03:17   2020-06-08 02:03:17</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> O365-Exchange                  0               17   2020-06-08 02:03:17   2020-06-08 02:03:17</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> O365-SharePoint                0                5   2020-06-08 02:03:17   2020-06-08 02:03:17</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> O365-Skype                     0                3   2020-06-08 02:03:17   2020-06-08 02:03:17</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"></div><div class="col lastUpdated_13-_"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2021-11-18T20:15:10.000Z">11/18/2021</time></b></span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/howto_maintenance_mode"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">« <!-- -->Maintenance Mode</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/howto_trusted_ca_certificate"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Adding a Trusted Certificate<!-- --> »</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#configuration" class="table-of-contents__link toc-highlight">Configuration</a><ul><li><a href="#enable-module-learning-mode" class="table-of-contents__link toc-highlight">Enable Module Learning Mode</a></li><li><a href="#configure-services" class="table-of-contents__link toc-highlight">Configure Services</a></li><li><a href="#service-policies" class="table-of-contents__link toc-highlight">Service Policies</a></li></ul></li><li><a href="#verifying-operation" class="table-of-contents__link toc-highlight">Verifying Operation</a></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2021 Juniper Networks, Inc.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.f3773427.js"></script>
<script src="/assets/js/main.1bde77d2.js"></script>
</body>
</html>