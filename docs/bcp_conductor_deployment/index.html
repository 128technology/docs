<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-bcp_conductor_deployment">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.3.1">
<title data-rh="true">Conductor Deployment Patterns | SSN Docs</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://docs.128technology.com/docs/bcp_conductor_deployment"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Conductor Deployment Patterns | SSN Docs"><meta data-rh="true" name="description" content="The SSR conductor is the centralized orchestration platform within a SSR Authority, and maintains many persistent connections to each router and its constituent nodes. This document discusses the various  options for deploying the SSR conductor, discussing the relative strengths and drawbacks of each."><meta data-rh="true" property="og:description" content="The SSR conductor is the centralized orchestration platform within a SSR Authority, and maintains many persistent connections to each router and its constituent nodes. This document discusses the various  options for deploying the SSR conductor, discussing the relative strengths and drawbacks of each."><link data-rh="true" rel="icon" href="/img/favicon.png"><link data-rh="true" rel="canonical" href="https://docs.128technology.com/docs/bcp_conductor_deployment"><link data-rh="true" rel="alternate" href="https://docs.128technology.com/docs/bcp_conductor_deployment" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.128technology.com/docs/bcp_conductor_deployment" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.8e1fdc51.css">
<link rel="preload" href="/assets/js/runtime~main.7d48d306.js" as="script">
<link rel="preload" href="/assets/js/main.bc3caea8.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.png" alt="Juniper Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/logo_dark.png" alt="Juniper Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate"></b></a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/docs/intro_getting_started">Docs</a><a href="https://community.juniper.net/answers/communities/community-home?CommunityKey=310d1a41-12fa-4627-9a99-880145a7c87c" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Community<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://www.juniper.net/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Company<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="searchBox_ZlJk"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/about_128t">About</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/intro_getting_started">Introduction</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/intro_system_reqs">Deployment Considerations</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/intro_installation">Installation Process</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/docs/install_conductor_overview">Conductor Installation</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/install_conductor_overview">Conductor Overview</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/bcp_conductor_deployment">Conductor Deployment</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/single_conductor_install">Single Conductor Interactive Installation</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/ha_conductor_install">High Availability Conductor Installation</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/single_conductor_config">Import Configurations to the Conductor</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/conductor_upgrade">Upgrade the SSR Conductor</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/howto_conductor_migration">Conductor Migration</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/intro_installation_bootable_media">Router Installation</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/intro_installation_image">Image-Based Installation</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/supported_cloud_platforms">Cloud Installations</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/intro_upgrade_considerations">Upgrades and Rollback</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/intro_installation_installer">Supporting Install Information - Appendix</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/concepts_application_discovery">Concepts</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/wan_overview">WAN Assurance</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/config_basics">Administration</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/events_overview">Events</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/bcp_att_avpn_configuration">Best Practices</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/cli_reference">CLI and Element Reference</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/installer_cli_reference">Installer/Initializer Reference</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/plugin_intro">Plugins</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/release_notes_128t_6.1">Release Notes</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Conductor Installation</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Conductor Deployment</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Conductor Deployment Patterns</h1></header><p>The SSR conductor is the centralized orchestration platform within a SSR Authority, and maintains many persistent connections to each router and its constituent nodes. This document discusses the various  options for deploying the SSR conductor, discussing the relative strengths and drawbacks of each.</p><p>All of the design patterns contained within this document are supported configurations; however, certain designs are discouraged due to their complexity, the number of limitations it imposes on your network design, the functional caveats it imposes, etc. These will be explicitly noted within each section accordingly.</p><p>For each topic, we will discuss items such as:</p><ul><li>Any resource requirements (e.g., public internet addresses)</li><li>All corresponding SSR or Linux OS configuration requirements</li><li>When the design pattern is encouraged or discouraged</li><li>The design pattern&#x27;s flexibility and scale</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="about-this-guide">About this Guide<a href="#about-this-guide" class="hash-link" aria-label="Direct link to About this Guide" title="Direct link to About this Guide">​</a></h2><p>This guide is intended to be referenced by network architects during the Design phase of a planned deployment, to assist with:</p><ul><li>Selecting the most appropriate platform for the conductor</li><li>Preparing the base platform and underlying operating system for optimal conductor performance</li><li>Choosing the most suitable design pattern for the deployment</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="terminology">Terminology<a href="#terminology" class="hash-link" aria-label="Direct link to Terminology" title="Direct link to Terminology">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="conductor-host-services">Conductor Host Services<a href="#conductor-host-services" class="hash-link" aria-label="Direct link to Conductor Host Services" title="Direct link to Conductor Host Services">​</a></h4><p><em>Conductor Host Services</em> refers to the built-in feature within the SSR software that will generate configuration to simplify the connectivity between routers and their conductor(s). By configuring the <code>conductor-address</code> field within the SSR&#x27;s data model, and by indicating which interface(s) on a manged router should be used to connect to conductor, the conductor will automatically generate the supporting configuration infrastructure. This includes:</p><ul><li>The <code>_conductor_</code> service (which will have a trailing sequence number; e.g., <code>_conductor_1</code>)</li><li>A <code>service-route</code> for each <code>network-interface</code> on each router that has <code>conductor</code> set to <code>true</code></li></ul><p>The Conductor Host Services feature forms the basis for the majority of the conductor design patterns described in this document, and should be leveraged whenever possible.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="in-band-management">In-Band Management<a href="#in-band-management" class="hash-link" aria-label="Direct link to In-Band Management" title="Direct link to In-Band Management">​</a></h4><p>The term <em>in-band management</em> in the context of conductor connectivity refers to the use of a forwarding interface by a router node for reaching the conductor; there is no dedicated interface specifically for the conductor to &quot;manage&quot; the node. Because most SSR deployments separate the remote sites from the conductor over a WAN, it is exceedingly common to leverage in-band management between a remote node and a conductor. For SDWAN deployments, in-band management is <em>strongly recommended</em>, for the branch locations. For head end systems that are colocated with the conductors, out-of-band management is preferable, assuming there are sufficent free interfaces on the chosen head end hardware platform.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="out-of-band-management">Out-of-Band Management<a href="#out-of-band-management" class="hash-link" aria-label="Direct link to Out-of-Band Management" title="Direct link to Out-of-Band Management">​</a></h4><p>Routing nodes are said to leverage <em>out-of-band management</em> when they have a dedicated interface for the traffic to reach the conductor. Out-of-band management is generally only feasible when a conductor is colocated with the routing nodes, as is typically the case only at a head end data center.</p><div class="theme-admonition theme-admonition-note alert alert--secondary admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_S0QG"><p>It is possible to have a dedicated out-of-band management interface on branch locations, but this connection will almost certainly ultimately ride over the same device&#x27;s WAN connection to the conductor. I.e., the management traffic will egress one interface on the device and be sent back to another interface on the same device. As such, the in-band management model is more suitable, as it avoids unnecessary hops.</p></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="universal-considerations">Universal Considerations<a href="#universal-considerations" class="hash-link" aria-label="Direct link to Universal Considerations" title="Direct link to Universal Considerations">​</a></h2><p>This section contains information pertinent to all conductor deployments.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="platform-requirements">Platform Requirements<a href="#platform-requirements" class="hash-link" aria-label="Direct link to Platform Requirements" title="Direct link to Platform Requirements">​</a></h3><p>It is important from the outset to choose a platform (physical or virtual) that is suitable for the demands of managing an array of SSR routers. As the deployment scales, so too do the demands on the conductor. In general, the two primary concerns are CPU and memory. The speed of a conductor&#x27;s CPU (moreso than the quantity of CPU cores) will have the most impact on its performance as deployments scale up. The amount of memory will have an impact on the responsiveness of the conductor&#x27;s administrative interfaces as the deployments scale up.</p><div class="theme-admonition theme-admonition-note alert alert--secondary admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_S0QG"><p>The SSR conductor will run effectively on a virtual machine in both private and public cloud infrastructure. From a physical vs. virtual standpoint, there is no difference in the CPU and memory requirements, and thus the decision ultimately comes down to architectural preference and cost.</p></div></div><p>Running a small lab network or pilot deployment on a modestly sized conductor is acceptable, but be advised that migrating routers from a &quot;temporary&quot; or &quot;POC&quot; conductor to a production conductor may incur downtime during the transition. It is best to procure and deploy suitable hardware up front.</p><p>Juniper provides a sizing tool on <a href="https://community.juniper.net/viewdocument/128t-conductor-sizing-spreadsheet?CommunityKey=310d1a41-12fa-4627-9a99-880145a7c87c&amp;tab=librarydocuments" target="_blank" rel="noopener noreferrer">our community site</a> to give guidance on CPU, memory, and disk requirements for bare metal and cloud conductor deployments.</p><div class="theme-admonition theme-admonition-tip alert alert--success admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>Key Decision</div><div class="admonitionContent_S0QG"><p>Size your conductor for the size you anticipate your network to grow to, or the number of nodes your administrative policy caps for a single configuration platform. For deployments in excess of 2,000 managed nodes (remembering that a highly available router counts twice), see the section on POD design below.</p></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="pod-design">POD Design<a href="#pod-design" class="hash-link" aria-label="Direct link to POD Design" title="Direct link to POD Design">​</a></h3><p>The conductor is the single point of configuration for an array of managed routers; as such, its configuration can grow to be quite large. As the configuration grows larger, the processing time for new configuration moves, adds, and changes grows accordingly. Juniper recommends that network deployments be sized to a ratio of 2,000 assets per conductor (where an asset is a single instance of SSR software). I.e., either 1,000 highly available routers comprised of two nodes each, 2,000 standalone nodes, or any combination thereof.</p><p>For large scale deployments in excess of 2,000 assets, the conventional approach is to subdivide the network into PODs – independently managed networks. Each POD, or set of managed assets, is independently managed.</p><div class="theme-admonition theme-admonition-tip alert alert--success admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>Key Decision</div><div class="admonitionContent_S0QG"><p>POD design can have impacts on staging and provisioning workflows (for example, identifying during software installation which conductor a router should be homed to), it is recommended to plan for multi-POD deployments at the outset of the program, and not to wait until your deployment is approaching 2,000 nodes.</p></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="tuning-your-system">Tuning your System<a href="#tuning-your-system" class="hash-link" aria-label="Direct link to Tuning your System" title="Direct link to Tuning your System">​</a></h3><p>Juniper recommends various platform and operating system settings to ensure the optimal performance of your SSR conductor.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="platform-tuning">Platform Tuning<a href="#platform-tuning" class="hash-link" aria-label="Direct link to Platform Tuning" title="Direct link to Platform Tuning">​</a></h4><p>Juniper recommends enabling hyperthreading for systems operating as conductors, as it may improve performance.</p><div class="theme-admonition theme-admonition-note alert alert--secondary admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_S0QG"><p>Because Juniper <em>does not</em> recommend hyperthreading for nodes running SSR software as a router, please be aware when repurposing a host from conductor to router that hyperthreading should be disabled.</p></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="linux-os-tuning">Linux OS Tuning<a href="#linux-os-tuning" class="hash-link" aria-label="Direct link to Linux OS Tuning" title="Direct link to Linux OS Tuning">​</a></h4><p>This section is specifically geared toward end users that want to build their own conductor nodes on top of the SSR operating system. For users that install their conductor software using a Juniper-provided ISO, these settings will be set already.</p><h5 class="anchor anchorWithStickyNavbar_LWe7" id="configuring-firewalld">Configuring firewalld<a href="#configuring-firewalld" class="hash-link" aria-label="Direct link to Configuring firewalld" title="Direct link to Configuring firewalld">​</a></h5><p>When deploying conductor on the internet, Juniper recommends limiting access to the system using <em>firewalld</em>. (The <a href="https://firewalld.org/" target="_blank" rel="noopener noreferrer"><em>firewalld</em> system daemon</a> is a managed firewall application within Linux.) The basic premise is to restrict inbound access to the public-facing addresses to only allow ports 4505/TCP, 4506/TCP, and 930/TCP. This is generally done by:</p><ol><li>Creating a specific firewalld <strong>zone</strong>; e.g., <code>conductor</code></li><li>Creating a firewalld <strong>service</strong> for the conductor&#x27;s salt-master, containing TCP ports 4505, 4506; e.g., <code>salt-master</code></li><li>Creating a firewalld <strong>service</strong> for the conductor&#x27;s IPC connection, containing TCP port 930; e.g., <code>ipc</code></li><li>Adding the &quot;salt-master&quot; and &quot;ipc&quot; services to the <code>conductor</code> zone</li><li>Set the public address to be in the <code>conductor</code> zone</li></ol><p>Juniper has developed some salt states to assist with these common configuration steps. Refer to our <a href="https://github.com/128technology/salt-states/blob/master/setup-firewalld-t128-zone.sls" target="_blank" rel="noopener noreferrer">public Github repo</a> for some samples you can use to tune your system accordingly.</p><div class="theme-admonition theme-admonition-note alert alert--secondary admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_S0QG"><blockquote><blockquote><blockquote><p>The <code>ipc</code> configuration is not applicable to version 5.3 and later. NETCONF controls have been replaced with REST API controls in versions 5.1 and later, with no loss of functionality.</p></blockquote></blockquote></blockquote></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="design-patterns">Design Patterns<a href="#design-patterns" class="hash-link" aria-label="Direct link to Design Patterns" title="Direct link to Design Patterns">​</a></h2><p>This section enumerates the supported topologies for the SSR conductor. Straying from one of these  designs may be possible, but should be avoided unless absolutely necessary.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="public-conductor">Public Conductor<a href="#public-conductor" class="hash-link" aria-label="Direct link to Public Conductor" title="Direct link to Public Conductor">​</a></h3><p>The most conventional deployment model is where the conductor is reachable on a public IPv4 address, and all managed nodes have direct access to it via one or more WAN connections. This is the simplest of all deployment schemes, as it allows you to leverage the global <code>conductor-address</code> fields within the SSR data model to unambiguously define the conductor targets across the entire population of router nodes.</p><p>This design pattern is suitable for both public cloud deployments of the SSR conductor, as well as private cloud deployments where the SSR conductor co-resides alongside other SSR routers in a data center.</p><p>This deployment model is recommended when possible.</p><p>Configuration required:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">config auth conductor-address [public address of conductor]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">config auth router r1 node n1 device-interface WAN network-interface WAN0 conductor true</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>A sample configuration is provided in <a href="#appendix-a-public-conductor">Appendix A</a>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="public-conductor-behind-nat">Public Conductor Behind NAT<a href="#public-conductor-behind-nat" class="hash-link" aria-label="Direct link to Public Conductor Behind NAT" title="Direct link to Public Conductor Behind NAT">​</a></h3><p>Another common model is a deployment where the conductor is behind a static NAT/firewall, which is forwarding to a private address assigned to the conductor. When placing the conductor behind a static NAT/firewall (effectively giving it a public IP address), be mindful of whether the NAT/firewall supports &quot;hairpinning.&quot; (Hairpinning is when a device sends packets to the public IP address of a NAT that it sits behind.) This is because a conductor&#x27;s salt-minion will connect to its own salt-master, and will attempt to do so at the same IP address that all external minions connect to. If the NAT does not support hairpinning, then follow the steps outlined below in the section on <em>Split Horizon Conductor</em>.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="port-forwarding">Port Forwarding<a href="#port-forwarding" class="hash-link" aria-label="Direct link to Port Forwarding" title="Direct link to Port Forwarding">​</a></h4><p>When deploying a conductor behind a firewall, open 930/TCP and 4505-4506/TCP (used for salt) to allow a conductor to communicate to managed routers. Open 443/TCP for the web UI, and 22/TCP for remote SSH.</p><p>Because there is little difference from each deployed router&#x27;s perspective between this and the previous design pattern, the configuration provided in <a href="#appendix-a-public-conductor">Appendix A</a> is representative of this design as well. All NAT awareness exists outside of the SSR&#x27;s configuration.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="conductor-behind-ssr">Conductor Behind SSR<a href="#conductor-behind-ssr" class="hash-link" aria-label="Direct link to Conductor Behind SSR" title="Direct link to Conductor Behind SSR">​</a></h3><p>At times a conductor must be hosted within a data center that has a SSR head end router at its edge. This is generally not best practice as it can greatly increase the complexity of the deployment. It is strongly advised to validate this design in a lab environment before attempting to configure this in a deployment. In these topologies, the design is a hybrid of the previous two (conductor behind NAT, split horizon conductor). From the remote routers&#x27; perspective (i.e., the branch locations not resident at this data center and other data center routers), the conductor is only reachable through the head end SSR router. That same SSR head end router will typically communicate with conductor using a private address.</p><ul><li>The head end fronting the conductor must perform NAT/NAPT to forward 4505-4506/TCP (used for salt), and 930/TCP to the conductor on the data center LAN. The authority-wide <code>conductor-address</code> is an IP address that is resolved/routed to that head end router.</li><li>The head end router overrides the <code>conductor-address</code> with specific configuration to reference the local address.</li><li>The head end router uses <code>management-config-generated</code> set to <code>proxy</code> requests received on its WAN interface (from remote branch sites) to the internal conductor&#x27;s address.</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="remote-routers-to-svr-or-not-to-svr">Remote Routers: to SVR or not to SVR?<a href="#remote-routers-to-svr-or-not-to-svr" class="hash-link" aria-label="Direct link to Remote Routers: to SVR or not to SVR?" title="Direct link to Remote Routers: to SVR or not to SVR?">​</a></h4><p>When deploying your conductor behind another SSR at a data center, it opens the question of using Secure Vector Routing to reach the conductor using SVR peer paths between a branch and the data center. However, using SVR for conductor communication is not supported for several reasons:</p><ol><li>It exacerbates the Jekyll/Hyde problem (described below), by virtue of being both at the branch and the data center</li><li>Certain upgrade workflows or maintenance activities will cause remote sites to toggle between SVR and natural routing, which is suboptimal</li></ol><p>A sample configuration is provided in <a href="#appendix-b-conductor-behind-128t">Appendix B</a>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="conductor-redundancy">Conductor Redundancy<a href="#conductor-redundancy" class="hash-link" aria-label="Direct link to Conductor Redundancy" title="Direct link to Conductor Redundancy">​</a></h2><p>Most production deployments include redundant conductor nodes. When deployed as a highly available pair, conductor nodes are always run as <em>active/active</em>, with all managed routers connecting to both. Unlike highly available routers, there is no notion of interface takeover with conductors; each conductor node is given a unique IP address reachable by all devices at all times. The two conductors that comprise a highly available pair will communicate with one another to synchronize state, such that it does not matter which conductor an administrator logs into to view metrics, alarms, etc.</p><p>The two conductor nodes must therefore have IP reachability to one another. For conductor nodes that are physically adjacent to one another, a direct cable between them is the most common deployment style. When separating conductor nodes over any distance, ensure they have a route to reach one another that will not interfere with the connectivity to the nodes they manage.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="geographic-redundancy">Geographic Redundancy<a href="#geographic-redundancy" class="hash-link" aria-label="Direct link to Geographic Redundancy" title="Direct link to Geographic Redundancy">​</a></h3><p>Highly available conductors run as active/active, and have ongoing needs for state synchronization between one another. For this reason, Juniper requires that when deploying geographically separated conductor nodes, the following requirements must be met:</p><ul><li>Latency less than 150ms</li><li>Packet loss less than 0.01%</li><li>No firewalling between the systems</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="conductor-access-router-design">Conductor Access (Router Design)<a href="#conductor-access-router-design" class="hash-link" aria-label="Direct link to Conductor Access (Router Design)" title="Direct link to Conductor Access (Router Design)">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="jekyllhyde-access">Jekyll/Hyde Access<a href="#jekyllhyde-access" class="hash-link" aria-label="Direct link to Jekyll/Hyde Access" title="Direct link to Jekyll/Hyde Access">​</a></h3><p>A critical design consideration when configuring SSR routers to talk to the conductor is referred to as the &quot;Jekyll/Hyde&quot; problem: the system daemons that require connectivity to the SSR conductor must have persistent access whether the SSR router application is running or not. As starting the SSR application will typically have an (intentional) impact on that host platform&#x27;s routing behavior, administrators must be aware of two distinct behaviors: the routing configuration in Linux while the SSR is stopped (&quot;Dr. Jekyll&quot;), and the routing configuration in Linux while the SSR is running (&quot;Mr. Hyde&quot;). Fortunately, the SSR software has facilities to create most, if not all of the requisite configuration.</p><p>When using <em>Conductor Host Services</em> to create your configuration for a router to reach the conductor, the SSR configuration generator will create all of the necessary infrastructure (within both SSRs as well as the host platform) to connect to the conductor on the interfaces you&#x27;ve specified. It does so by creating a <em>KNI</em> (Kernel Network Interface), which is a network interface that connects between the Linux kernel and the SSR software.</p><div class="theme-admonition theme-admonition-important alert alert--info admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_S0QG"><p>You must also specify <code>conductor=true</code> on one of your network-interface configuration elements, in order for the SSR to recognize which egress path(s) to use.</p></div></div><p>The KNI (named <code>kni254</code>) shuttles packets back and forth between the Linux processses (salt, secureCommunicationManager) and the SSR routing domain. Conductor Host Services will install specific, /32 routes to one or two conductor addresses, using the local KNI address (169.254.127.126) as its next-hop. Those will be sent &quot;up&quot; to the SSR routing domain, where they will match the generated <code>_conductor_</code> service(s), and follow the service-route out of the specified interface.</p><hr><h2 class="anchor anchorWithStickyNavbar_LWe7" id="appendix-a-public-conductor">Appendix A: Public Conductor<a href="#appendix-a-public-conductor" class="hash-link" aria-label="Direct link to Appendix A: Public Conductor" title="Direct link to Appendix A: Public Conductor">​</a></h2><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">config</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    authority</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        conductor-address  192.0.2.2</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        remote-login</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        router             datacenter</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            name                 datacenter</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            inter-node-security  internal</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            node                 node1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                name              node1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                asset-id          b77cefa0-b870-49bc-8b58-31d55bc56527</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                role              combo</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                device-interface  wan</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    name               wan</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    type               ethernet</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    pci-address        0000:01:00.0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    forwarding         true</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    network-interface  wan0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                        name        wan0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                        global-id   2</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                        conductor   true</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                        source-nat  true</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                        address     203.0.113.2</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                            ip-address     203.0.113.2</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                            prefix-length  24</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                            gateway        203.0.113.1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                        exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            service-route        _conductor_1_route_1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                name          _conductor_1_route_1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                service-name  _conductor_1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                generated     true</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                next-hop      node1 wan0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    node-name   node1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    interface   wan0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    gateway-ip  203.0.113.1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        router             branch1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            name                 branch1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            inter-node-security  internal</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            node                 node1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                name              node1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                asset-id          04822a5c-1f78-4d82-a442-bcb914c7fd99</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                role              combo</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                device-interface  wan</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    name               wan</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    type               ethernet</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    pci-address        0000:01:00.0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    network-interface  wan1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                        name                   wan1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                        global-id              3</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                        conductor              true</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                        inter-router-security  internal</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                        source-nat             true</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                        address                198.51.100.2</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                            ip-address     198.51.100.2</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                            prefix-length  24</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                            gateway        198.51.100.1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                        exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            service-route        _conductor_1_route_1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                name          _conductor_1_route_1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                service-name  _conductor_1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                generated     true</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                next-hop      node1 wan1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    node-name   node1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    interface   wan1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    gateway-ip  198.51.100.1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        router             bernstein</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            name    bernstein</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            system</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                inactivity-timer  86400</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            node    node1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                name              node1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                device-interface  wan</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    name               wan</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    type               ethernet</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    pci-address        0000:01:00.0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    forwarding         false</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    network-interface  wan0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                        name       wan0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                        global-id  1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                        type       shared</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                        address    192.0.2.2</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                            ip-address     192.0.2.2</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                            prefix-length  24</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                            gateway        192.0.2.1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                        exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        tenant             _internal_</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            name         _internal_</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            description  &quot;Auto generated tenant for internal services&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            generated    true</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        service            _conductor_1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            name                     _conductor_1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            enabled                  true</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            scope                    private</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            tap-multiplexing         false</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            transport                icmp</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                protocol  icmp</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            transport                tcp</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                protocol    tcp</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                port-range  443</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    start-port  443</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    end-port    443</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                port-range  930</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    start-port  930</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    end-port    930</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                port-range  4505</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    start-port  4505</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    end-port    4505</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                port-range  4506</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    start-port  4506</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    end-port    4506</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            address                  192.0.2.2/32</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            access-policy-generated  true</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            access-policy            _internal_</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                source      _internal_</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                permission  allow</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            service-policy           _conductor_</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            share-service-routes     false</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            source-nat               network-interface</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            application-type         generic</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            fqdn-resolution-type     v4</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            generated                true</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        service-policy     _conductor_</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            name                         _conductor_</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            description                  &quot;Auto generated service-policy for conductor services&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            lb-strategy                  proportional</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            session-resiliency           none</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            path-quality-filter          false</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            best-effort                  true</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            max-loss                     0.5</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            max-latency                  250</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            max-jitter                   100</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            transport-state-enforcement  reset</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            generated                    true</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            ingress-source-nat           network-interface</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">exit</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="notes-on-the-configuration">Notes on the Configuration<a href="#notes-on-the-configuration" class="hash-link" aria-label="Direct link to Notes on the Configuration" title="Direct link to Notes on the Configuration">​</a></h2><ol><li><p>The inclusion of <code>conductor-address</code> into the configuration generates the service <code>_conductor_1</code>. Each configuration can contain no more than two <code>conductor-address</code> values configured; a second <code>conductor-address</code> would create <code>_conductor_2</code>.</p></li><li><p>In this configuration, each of the two sample routers (<code>datacenter</code> and <code>branch1</code>) use their WAN interface to reach the Conductor. This is done by setting <code>conductor</code> to <code>true</code> on the WAN interface.</p></li><li><p>The interface used to reach the conductor must have <code>source-nat</code> set to <code>true</code>. (This is because the conductor connection is initiated by a process in Linux, which travels through <code>kni254</code> to reach the SSR&#x27;s forwarding plane, and will have an unroutable source address: 169.254.127.127.)</p></li></ol><hr><h2 class="anchor anchorWithStickyNavbar_LWe7" id="appendix-b-conductor-behind-ssr">Appendix B: Conductor behind SSR<a href="#appendix-b-conductor-behind-ssr" class="hash-link" aria-label="Direct link to Appendix B: Conductor behind SSR" title="Direct link to Appendix B: Conductor behind SSR">​</a></h2><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">config</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    authority</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        conductor-address  203.0.113.2</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        remote-login</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        router             datacenter</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            name                           datacenter</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            conductor-address              172.20.0.128</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            inter-node-security            internal</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            node                           node1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                name              node1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                asset-id          b77cefa0-b870-49bc-8b58-31d55bc56527</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                role              combo</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                device-interface  wan</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    name               wan</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    type               ethernet</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    pci-address        0000:01:00.0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    forwarding         true</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    network-interface  wan0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                        name        wan0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                        global-id   2</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                        conductor   false</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                        tenant      internet</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                        source-nat  true</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                        address     203.0.113.2</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                            ip-address     203.0.113.2</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                            prefix-length  24</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                            gateway        203.0.113.1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                        exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                device-interface  lan</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    name               lan</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    type               ethernet</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    pci-address        0000:02:00.0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    forwarding         true</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    network-interface  lan0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                        name        lan0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                        global-id   4</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                        conductor   true</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                        source-nat  true</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                        address     172.20.0.1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                            ip-address     172.20.0.1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                            prefix-length  24</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                        exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            management-service-generation</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                service-route-type  paths-as-next-hop</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                proxy               true</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            service-route                  _conductor_1_route_1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                name          _conductor_1_route_1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                service-name  _conductor_1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                generated     true</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                next-hop      node1 lan0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    node-name       node1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    interface       lan0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    target-address  172.20.0.128</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            service-route                  _conductor_datacenter_1_route_1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                name          _conductor_datacenter_1_route_1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                service-name  _conductor_datacenter_1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                generated     true</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                next-hop      node1 lan0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    node-name   node1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    interface   lan0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    gateway-ip  172.20.0.128</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        router             branch1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            name                 branch1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            inter-node-security  internal</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            node                 node1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                name              node1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                asset-id          04822a5c-1f78-4d82-a442-bcb914c7fd99</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                role              combo</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                device-interface  wan</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    name               wan</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    type               ethernet</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    pci-address        0000:01:00.0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    network-interface  wan1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                        name                   wan1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                        global-id              3</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                        conductor              true</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                        inter-router-security  internal</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                        source-nat             true</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                        address                198.51.100.2</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                            ip-address     198.51.100.2</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                            prefix-length  24</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                            gateway        198.51.100.1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                        exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            service-route        _conductor_1_route_1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                name          _conductor_1_route_1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                service-name  _conductor_1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                generated     true</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                next-hop      node1 wan1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    node-name   node1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    interface   wan1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    gateway-ip  198.51.100.1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        router             bernstein</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            name    bernstein</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            system</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                inactivity-timer  86400</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            node    node1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                name              node1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                device-interface  wan</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    name               wan</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    type               ethernet</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    pci-address        0000:01:00.0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    forwarding         false</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    network-interface  wan0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                        name       wan0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                        global-id  1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                        type       shared</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                        address    192.0.2.2</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                            ip-address     192.0.2.2</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                            prefix-length  24</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                            gateway        192.0.2.1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                        exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        tenant             internet</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            name         internet</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            description  &quot;Public internet&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            member       internet</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                neighborhood  internet</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                address       0.0.0.0/0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        tenant             _internal_</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            name         _internal_</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            description  &quot;Auto generated tenant for internal services&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            generated    true</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        service            _conductor_1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            name                     _conductor_1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            enabled                  true</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            scope                    private</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            tap-multiplexing         false</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            transport                icmp</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                protocol  icmp</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            transport                tcp</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                protocol    tcp</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                port-range  443</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    start-port  443</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    end-port    443</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                port-range  930</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    start-port  930</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    end-port    930</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                port-range  4505</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    start-port  4505</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    end-port    4505</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                port-range  4506</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    start-port  4506</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    end-port    4506</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            address                  203.0.113.2/32</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            access-policy-generated  false</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            access-policy            _internal_</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                source      _internal_</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                permission  allow</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            access-policy            internet</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                source      internet</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                permission  allow</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            service-policy           _conductor_</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            share-service-routes     false</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            source-nat               network-interface</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            application-type         generic</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            fqdn-resolution-type     v4</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            generated                true</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        service            _conductor_datacenter_1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            name                     _conductor_datacenter_1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            applies-to               router</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                type         router</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                router-name  datacenter</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            enabled                  true</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            scope                    private</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            tap-multiplexing         false</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            transport                icmp</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                protocol  icmp</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            transport                tcp</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                protocol    tcp</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                port-range  443</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    start-port  443</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    end-port    443</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                port-range  930</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    start-port  930</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    end-port    930</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                port-range  4505</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    start-port  4505</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    end-port    4505</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                port-range  4506</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    start-port  4506</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    end-port    4506</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            address                  172.20.0.128/32</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            access-policy-generated  true</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            access-policy            _internal_</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                source      _internal_</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                permission  allow</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            service-policy           _conductor_</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            share-service-routes     false</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            source-nat               network-interface</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            application-type         generic</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            fqdn-resolution-type     v4</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            generated                true</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        service-policy     _conductor_</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            name                         _conductor_</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            description                  &quot;Auto generated service-policy for conductor services&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            lb-strategy                  proportional</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            session-resiliency           none</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            path-quality-filter          false</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            best-effort                  true</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            max-loss                     0.5</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            max-latency                  250</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            max-jitter                   100</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            transport-state-enforcement  reset</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            generated                    true</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            ingress-source-nat           network-interface</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">exit</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="notes-on-the-configuration-1">Notes on the Configuration<a href="#notes-on-the-configuration-1" class="hash-link" aria-label="Direct link to Notes on the Configuration" title="Direct link to Notes on the Configuration">​</a></h2><ol><li><p>As in the previous example, the interfaces that have <code>conductor</code> set to <code>true</code> also require <code>source-nat</code> to be set to <code>true</code>.</p></li><li><p>The datacenter router includes new configuration in the <code>management-service-generation</code> container; <code>proxy</code> is set to <code>true</code>, to forward requests received on its WAN interface to the conductor&#x27;s private IP. The <code>paths-as-next-hop</code> value for <code>service-route-type</code> will generate one <code>service-route</code> to reach the conductor, with multiple next-hops for configurations with more than one conductor. The other choice, <code>paths-as-service-route</code> will generate multiple <code>service-route</code> configurations with a single next-hop apiece.</p></li><li><p>In this design, the datacenter router reaches to the conductor using the <code>lan</code> interface. The global <code>conductor-address</code> is overridden by the router. (If there are two conductors configured at the authority level, any router that overrides the addresses must override both.)</p></li><li><p>The datacenter&#x27;s unique accesss create a unique service specific to it: <code>_conductor_datacenter_1</code>. It has the actual conductor&#x27;s address configured and will match the requests arriving via <code>kni254</code>.</p></li><li><p>The generated <code>_conductor_1</code> service will require that the <code>access-policy-generated</code> toggle be set to <code>false</code>, and that the <code>access-policy</code> contain a reference to the WAN interfaces of the remote site(s). In our case, we have the WAN interface of the <code>datacenter</code> router in an &quot;internet&quot; neighborhood (0.0.0.0/0), such that any inbound, non-SVR request on the WAN will be treated as sourced from the <code>internet</code> tenant. We&#x27;ve added an <code>access-policy</code> statement for allowing inbound access to the <code>internet</code> tenant.</p></li></ol><div class="theme-admonition theme-admonition-note alert alert--secondary admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_S0QG"><p>This tenancy design may require some tuning to fit into your environment. It is good practice to use tenancy on your WAN interfaces (in the form of neighborhood/membership, preferably). This gives you more control over the security of an interface. For example, we could have a tenant named <code>remote-sites</code> that contains the WAN IP addresses of the remote sites (presuming they&#x27;re static addresses), and use that in our <code>_conductor_1</code> access-policy instead of <code>internet</code>. This would restrict inbound access. But for cases where branch offices use dynamic addressing (DHCP), this is not possible.</p></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"></div><div class="col lastUpdated_vwxv"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2023-10-04T16:18:30.000Z">Oct 4, 2023</time></b></span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/install_conductor_overview"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Conductor Overview</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/single_conductor_install"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Single Conductor Interactive Installation</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#about-this-guide" class="table-of-contents__link toc-highlight">About this Guide</a><ul><li><a href="#terminology" class="table-of-contents__link toc-highlight">Terminology</a></li></ul></li><li><a href="#universal-considerations" class="table-of-contents__link toc-highlight">Universal Considerations</a><ul><li><a href="#platform-requirements" class="table-of-contents__link toc-highlight">Platform Requirements</a></li><li><a href="#pod-design" class="table-of-contents__link toc-highlight">POD Design</a></li><li><a href="#tuning-your-system" class="table-of-contents__link toc-highlight">Tuning your System</a></li></ul></li><li><a href="#design-patterns" class="table-of-contents__link toc-highlight">Design Patterns</a><ul><li><a href="#public-conductor" class="table-of-contents__link toc-highlight">Public Conductor</a></li><li><a href="#public-conductor-behind-nat" class="table-of-contents__link toc-highlight">Public Conductor Behind NAT</a></li><li><a href="#conductor-behind-ssr" class="table-of-contents__link toc-highlight">Conductor Behind SSR</a></li></ul></li><li><a href="#conductor-redundancy" class="table-of-contents__link toc-highlight">Conductor Redundancy</a><ul><li><a href="#geographic-redundancy" class="table-of-contents__link toc-highlight">Geographic Redundancy</a></li></ul></li><li><a href="#conductor-access-router-design" class="table-of-contents__link toc-highlight">Conductor Access (Router Design)</a><ul><li><a href="#jekyllhyde-access" class="table-of-contents__link toc-highlight">Jekyll/Hyde Access</a></li></ul></li><li><a href="#appendix-a-public-conductor" class="table-of-contents__link toc-highlight">Appendix A: Public Conductor</a></li><li><a href="#notes-on-the-configuration" class="table-of-contents__link toc-highlight">Notes on the Configuration</a></li><li><a href="#appendix-b-conductor-behind-ssr" class="table-of-contents__link toc-highlight">Appendix B: Conductor behind SSR</a></li><li><a href="#notes-on-the-configuration-1" class="table-of-contents__link toc-highlight">Notes on the Configuration</a></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2023 Juniper Networks, Inc.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.7d48d306.js"></script>
<script src="/assets/js/main.bc3caea8.js"></script>
</body>
</html>