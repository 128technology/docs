<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="generator" content="Docusaurus">


<title data-react-helmet="true">Connecting to 128T Routers from Conductor | 128T Docs</title>

<meta data-react-helmet="true" http-equiv="x-ua-compatible" content="ie=edge"><meta data-react-helmet="true" property="og:title" content="128T Docs"><meta data-react-helmet="true" name="twitter:card" content="summary"><meta data-react-helmet="true" name="description" content="The `connect` command affords administrators the ability to connect to any managed 128T node via the PCLI from the conductor. This is implemented as a reverse SSH tunnel, originated by the 128T router, and associated with a specific loopback address and port on the conductor. (The loopback address for all managed routers is `127.127.0.1`, and the port is unique per router.)"><meta data-react-helmet="true" property="og:description" content="The `connect` command affords administrators the ability to connect to any managed 128T node via the PCLI from the conductor. This is implemented as a reverse SSH tunnel, originated by the 128T router, and associated with a specific loopback address and port on the conductor. (The loopback address for all managed routers is `127.127.0.1`, and the port is unique per router.)"><meta data-react-helmet="true" property="og:url" content="https://docs.128technology.com/docs/ts_connecting_to_routers">

<link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico">


<link rel="stylesheet" href="/styles.8d924258.css">


<link rel="preload" href="/styles.8119cba2.js" as="script">

<link rel="preload" href="/runtime~main.6b040e56.js" as="script">

<link rel="preload" href="/main.0faefc0c.js" as="script">

<link rel="preload" href="/1.dbbcbb7c.js" as="script">

<link rel="preload" href="/2.7d249ed6.js" as="script">

<link rel="preload" href="/27.6fb8134c.js" as="script">

<link rel="preload" href="/20ac7829.c390b3ec.js" as="script">

<link rel="preload" href="/17896441.9dbe2e15.js" as="script">

<link rel="preload" href="/123589a3.01b54394.js" as="script">

</head>
<body>

<div id="__docusaurus">
<nav class="navbar navbar--light navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a aria-current="page" class="navbar__brand active" href="/"><img class="navbar__logo" src="/img/128t_black.png" alt="128 Technology Logo"><strong></strong></a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/docs/intro_getting_started">Docs</a><a class="navbar__item navbar__link" target="_blank" rel="noopener noreferrer" href="https://community.128technology.com/home">Interchange</a><a class="navbar__item navbar__link" target="_blank" rel="noopener noreferrer" href="https://www.128technology.com/">Company</a><div class="navbar__search"><span aria-label="expand searchbar" role="button" class="search-icon" tabindex="0"></span><input type="search" id="search_input_react" placeholder="Search" aria-label="Search" class="navbar__search-input search-bar"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a aria-current="page" class="navbar__brand active" href="/"><img class="navbar__logo" src="/img/128t_black.png" alt="128 Technology Logo"><strong></strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/intro_getting_started">Docs</a></li><li class="menu__list-item"><a class="menu__link" target="_blank" rel="noopener noreferrer" href="https://community.128technology.com/home">Interchange</a></li><li class="menu__list-item"><a class="menu__link" target="_blank" rel="noopener noreferrer" href="https://www.128technology.com/">Company</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_1kjD"><div class="docSidebarContainer_1cYp"><div class="sidebar_1kLs"><div class="sidebarLogo_3ono"><img src="/img/128t_black.png" alt="128 Technology Logo"><strong></strong></div><div class="menu menu--responsive menu_w2sC"><button aria-label="Open Menu" class="button button--secondary button--sm menu__button" type="button"><svg class="sidebarMenuIcon_2vk4" xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 32 32" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">About</a><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Release Notes</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/release_notes/release_notes_4.2.0">4.2.0 Release Notes</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/release_notes/release_notes_4.2.1">4.2.1 Release Notes</a></li></ul></li><li class="menu__list-item"><a class="menu__link" href="/docs/CONTRIBUTING">Contributing</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Introduction</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/intro_downloading">Downloading</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/intro_installation">Installation</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/intro_getting_started">Getting Started</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Concepts</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/concepts_glossary">Glossary</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Administration</a><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Configuration</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/config_basics">Basics</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/config_audit_log">Audit Log</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Troubleshooting</a><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active" href="/docs/ts_connecting_to_routers">Connecting to Routers</a></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Events</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/events">Alarms and Events</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Best Practics</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/bcp_conductor_deployment">Conductor Deployment</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/bcp_lte_peering">LTE Peering</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">CLI Reference</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/cli_reference">Reference</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Plugins</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/monitoring_agent">Monitoring</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">APIs</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/apis_rest">REST</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/apis_netconf">NETCONF</a></li></ul></li></ul></div></div></div><main class="docMainContainer_FFX1"><div class="padding-vert--lg"><div class="container"><div class="row"><div class="col docItemCol_2GOA"><div class="docItemContainer_2cwg"><article><header><h1 class="docTitle_1vWb">Connecting to 128T Routers from Conductor</h1></header><div class="markdown"><p>The <code>connect</code> command affords administrators the ability to connect to any managed 128T node via the PCLI from the conductor. This is implemented as a reverse SSH tunnel, originated by the 128T router, and associated with a specific loopback address and port on the conductor. (The loopback address for all managed routers is <code>127.127.0.1</code>, and the port is unique per router.)</p><p>Information about the IP and port assignments is maintained by the conductor in the file located at:</p><div class="mdxCodeBlock_iHAB"><pre class="prism-code language-undefined codeBlock_19pQ"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><code class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">/var/lib/128technology/connect/nodeIdentifier</span></div></code></pre></div><p>As new 128T nodes (the fundamental building block of a 128T router) are added to or removed from an Authority, this <code>nodeIdentifier</code> file will get rotated in the same way that log files get rotated. Thus, you may see many iterations of this file on your filesystem. The newest will always be the copy without any suffix appended to it, as indicated above.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="the-nodeidentifier-file-contents"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#the-nodeidentifier-file-contents" title="Direct link to heading">#</a>The nodeIdentifier File Contents</h2><p>Because the <code>connect</code> command uses SSH, the <code>nodeIdentifier</code> file is written in the format of a SSH configuration file. Here is an excerpt from one sample system:</p><div class="mdxCodeBlock_iHAB"><pre class="prism-code language-undefined codeBlock_19pQ"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><code class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">[t128@conductor ~]$ cat /var/lib/128technology/connect/nodeIdentifier</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Host node1.router1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    Port 16496</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    HostName 127.127.0.1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Host node2.router1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    Port 16497</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    HostName 127.127.0.1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Host node1.router2</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    Port 16498</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    HostName 127.127.0.1</span></div></code></pre></div><p>Each node for each router is represented as a separate <code>Host</code> statement, and is written in the form <code>node-name.router-name</code>.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="connecting-to-a-managed-node"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#connecting-to-a-managed-node" title="Direct link to heading">#</a>Connecting to a Managed Node</h2><p>While the PCLI gives administrators the ability to connect to managed nodes using its packaged <code>connect</code> command, the implementation also gives you the flexibility to use the same reverse SSH tunnels manually within Linux via the <code>connect128t</code> command.</p><div class="mdxCodeBlock_iHAB"><pre class="prism-code language-undefined codeBlock_19pQ"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><code class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">[t128@conductor ~]$ connect128t --router router1 --node node1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">t128@127.127.0.1&#x27;s password: ••••••••</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Last login: Wed Jan 16 23:07:45 2019 from 10.128.0.1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">[t128@node1 ~]$</span></div></code></pre></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="using-other-ssh-based-applications"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#using-other-ssh-based-applications" title="Direct link to heading">#</a>Using Other SSH-based Applications</h2><p>Various other applications have been built using SSH, and can leverage the same techniques described above to perform remote actions on managed nodes. Namely <code>scp</code> (which is a derivative of BSD&#x27;s <em>rcp</em> utility, but built on top of SSH) for copying files, and <code>sftp</code> (which is loosely based on FTP, and also built on top of SSH) for an interactive file transfer session.</p><p>These two applications (<code>scp</code> and <code>sftp</code>) in particular are extremely useful for copying files to and from remote devices within the Linux shell. As we demonstrated with SSH above, we can use the reverse SSH tunnel to connect to managed nodes either by port reference, or by alias reference when using the configuration in the <code>nodeIdentifier</code> file.</p><p>For example, assume I have a PCAP file on a managed node and I want to copy that to my conductor so I can later pull it down to my desktop for analysis. This can be done as follows:</p><div class="mdxCodeBlock_iHAB"><pre class="prism-code language-undefined codeBlock_19pQ"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><code class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">[t128@conductor ~]$ scp -F /var/lib/128technology/connect/nodeIdentifier t128@node1.router1:/var/log/128technology/128T_wan.pcap /tmp</span></div></code></pre></div><p>Just as with SSH, we can pass the <code>nodeIdentifier</code> file using <code>-F</code> as an argument to <code>scp</code>. This command will copy the <code>128T_wan.pcap</code> file from the 128T&#x27;s log directory to the conductor&#x27;s filesystem in /tmp.</p><p>Here&#x27;s another example, using <code>sftp</code>.</p><div class="mdxCodeBlock_iHAB"><pre class="prism-code language-undefined codeBlock_19pQ"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><code class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">[t128@conductor ~]$ sftp -F /var/lib/128technology/connect/nodeIdentifier t128@node1.router1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">t128@127.127.0.1&#x27;s password: ••••••••</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Connected to node1.router1.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">sftp&gt;</span></div></code></pre></div><p>Now we can interactively transfer many files to or from the remote node within the <code>sftp</code> application.</p></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/128technology/docs/tree/master/docs/ts_connecting_to_routers.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 40 40" style="margin-right:0.3em;vertical-align:sub"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col text--right"><em><small>Last updated on <time datetime="2020-03-04T14:47:03.000Z" class="docLastUpdatedAt_1sqk">3/4/2020</time> by <strong>Michael Baj</strong></small></em></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/config_audit_log"><h5 class="pagination-nav__link--sublabel">Previous</h5><h4 class="pagination-nav__link--label">« Configuring Audit Logging</h4></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/events"><h5 class="pagination-nav__link--sublabel">Next</h5><h4 class="pagination-nav__link--label">Alarms and Events »</h4></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_TbNY"><ul class="contents contents__left-border"><li><a href="#the-nodeidentifier-file-contents" class="contents__link">The nodeIdentifier File Contents</a></li><li><a href="#connecting-to-a-managed-node" class="contents__link">Connecting to a Managed Node</a></li><li><a href="#using-other-ssh-based-applications" class="contents__link">Using Other SSH-based Applications</a></li></ul></div></div></div></div></div></main></div></div><footer class="footer"><div class="container"><div class="text--center">Copyright © 2020 128 Technology, Inc.</div></div></footer>
</div>

<script src="/styles.8119cba2.js"></script>

<script src="/runtime~main.6b040e56.js"></script>

<script src="/main.0faefc0c.js"></script>

<script src="/1.dbbcbb7c.js"></script>

<script src="/2.7d249ed6.js"></script>

<script src="/27.6fb8134c.js"></script>

<script src="/20ac7829.c390b3ec.js"></script>

<script src="/17896441.9dbe2e15.js"></script>

<script src="/123589a3.01b54394.js"></script>


</body>
</html>