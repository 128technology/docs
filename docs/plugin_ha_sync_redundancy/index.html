<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.ff31de0ff">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="128T Docs Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="128T Docs Blog Atom Feed">
<link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-167298415-2","auto"),ga("set","anonymizeIp",!0),ga("send","pageview")</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
<link rel="search" type="application/opensearchdescription+xml" title="128T Docs" href="/opensearch.xml"><title data-react-helmet="true">HA Sync Redundancy Plugin | 128T Docs</title><meta data-react-helmet="true" property="og:url" content="https://docs.128technology.com/docs/plugin_ha_sync_redundancy"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:version" content="current"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="HA Sync Redundancy Plugin | 128T Docs"><meta data-react-helmet="true" name="description" content="The HA Sync Redundancy plugin adds the ability to include an additional link in the team interface configured as per Non-Forwarding HA Interfaces. This plugin automates the manual process described here. Additionally, the plugin provides the ability to use the HA sync connection (single or dual-member) to send HA fabric traffic as well by creating a vlan sub-interface and setting up a KNI interfae in a bridge with this sub-interface."><meta data-react-helmet="true" property="og:description" content="The HA Sync Redundancy plugin adds the ability to include an additional link in the team interface configured as per Non-Forwarding HA Interfaces. This plugin automates the manual process described here. Additionally, the plugin provides the ability to use the HA sync connection (single or dual-member) to send HA fabric traffic as well by creating a vlan sub-interface and setting up a KNI interfae in a bridge with this sub-interface."><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://docs.128technology.com/docs/plugin_ha_sync_redundancy"><link data-react-helmet="true" rel="alternate" href="https://docs.128technology.com/docs/plugin_ha_sync_redundancy" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://docs.128technology.com/docs/plugin_ha_sync_redundancy" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.b920482b.css">
<link rel="preload" href="/assets/js/runtime~main.bc8e57c4.js" as="script">
<link rel="preload" href="/assets/js/main.6f545d22.js" as="script">
</head>
<body>
<script>!function(){function e(e){document.documentElement.setAttribute("data-theme",e)}var t=function(){var e=null;try{e=localStorage.getItem("theme")}catch(e){}return e}();null!==t?e(t):window.matchMedia("(prefers-color-scheme: dark)").matches?e("dark"):(window.matchMedia("(prefers-color-scheme: light)").matches,e("light"))}()</script><div id="__docusaurus">
<div><a href="#main" class="skipToContent_OuoZ">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle" type="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><img src="/img/logo.svg" alt="Juniper Logo" class="themedImage_TMUO themedImage--light_4Vu1 navbar__logo"><img src="/img/logo_dark.png" alt="Juniper Logo" class="themedImage_TMUO themedImage--dark_uzRr navbar__logo"><strong class="navbar__title">Session Smart</strong></a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/docs/intro_getting_started">Docs</a><a href="https://community.128technology.com/home" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Interchange</a><a href="https://www.128technology.com/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Company</a><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img src="/img/logo.svg" alt="Juniper Logo" class="themedImage_TMUO themedImage--light_4Vu1 navbar__logo"><img src="/img/logo_dark.png" alt="Juniper Logo" class="themedImage_TMUO themedImage--dark_uzRr navbar__logo"><strong class="navbar__title">Session Smart</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/intro_getting_started">Docs</a></li><li class="menu__list-item"><a href="https://community.128technology.com/home" target="_blank" rel="noopener noreferrer" class="menu__link">Interchange</a></li><li class="menu__list-item"><a href="https://www.128technology.com/" target="_blank" rel="noopener noreferrer" class="menu__link">Company</a></li></ul></div></div></div></nav><div class="main-wrapper docs-wrapper doc-page"><div class="docPage_lDyR"><div class="docSidebarContainer_0YBq" role="complementary"><div class="sidebar_a3j0"><div class="menu menu--responsive thin-scrollbar menu_cyFh"><button aria-label="Open menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_iZzd" width="24" height="24" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">About</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/about_128t">128T</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/about_svr_savings">Secure Vector Routing Savings</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/about_releases">128T Releases</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/about_support_policy">Software Support Policy</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/about_supported_platforms">Platform Support Policy</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/about_supported_drivers">Supported NICs and Drivers</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/about_certified_platforms">Certified Plus Platforms</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/about_security_policy">Security Policy</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/about_services_description">Services Description</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/CONTRIBUTING">Contributing</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Introduction</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/intro_getting_started">Getting Started with the 128T Networking Platform</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Deployment Considerations</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/intro_system_reqs">System Requirements</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Installation Process</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/intro_installation">Installation Overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/intro_downloading_iso">Downloading ISOs</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/intro_creating_bootable_usb">Creating Bootable USB</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/intro_installation_bootable_media">Conductor Interactive Installation</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/intro_basic_conductor_config">Configure the Conductor</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/intro_basic_router_config">Basic Router Configuration</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/intro_otp_iso_install">Router Installation Using OTP</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/intro_install_quickstart_otpiso">QuickStart from the OTP ISO</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Cloud Installations</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/intro_installation_aws">Installing from the AWS Marketplace</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/intro_installation_quickstart_aws">QuickStart Installation in AWS</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/intro_installation_azure">Installing in Azure</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/intro_initialize_HA_conductor">Conductor High Availability for Cloud Deployments</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Supporting Information - Appendix</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/intro_installation_installer">Manually Installing the 128T</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/legacy_OTP_install">Installing Using the Pre-5.0 Interactive ISO</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/intro_upgrade_considerations">Upgrade Considerations</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/intro_upgrading">Upgrading</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/intro_rollback">Rollback</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Concepts</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/concepts_application_discovery">Application Discovery</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/concepts_appid">Application Identification</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/concepts_EthOverSVR">Ethernet Over Secure Vector Routing</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/concepts_ha_theoryofoperation">HA - Theory of Operation</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/concepts_interface_types">Interface Types</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/concepts_kni">Kernel Network Interfaces</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/concepts_linux_host_networking">Linux Host Networking</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/concepts_learning_VRF_routes">Learning VRF Routes</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/concepts_network_planes">Forwarding Planes</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/concepts_metadata">128T Metadata</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/concepts_metrics">Metrics</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/concepts_machine_communication">Machine Communication</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/concepts_pcli">PCLI</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/concepts_session_timer">Session Timers</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/concepts_STEP">Service and Topology Exchange Protocol (STEP)</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/concepts_waypoint_ports">Waypoints</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/concepts_glossary">Data Model</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Administration</a><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Configuration</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config_basics">Configuration Management</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config_access_mgmt">Access Management</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config_asset_connection_resiliency">Asset Connection Resiliency</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config_bgp">Configuring BGP</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config_ospf">OSPF</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config_dscp_steering">Configuring DSCP Steering</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config_vrf_learning">VRF Learning</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config_reference_guide">Element Reference</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config_audit_event">Audit Events</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config_dhcp">DHCP</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config_dns_proxy">DNS Proxy</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config_ldap">LDAP</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config_management_over_forwarding">Management over Forwarding</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config_domain-based_web_filter">Configuring Domain-based Web Filtering/Routing</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config_EthoSVR">Configuring Ethernet Over Secure Vector Routing</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config_flow_perf_mon">Inline Flow Performance Monitoring</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config_gre_tunnel">Native GRE Tunnels</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config_in-memory_metrics">In-Memory Metrics</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config_nat">NAT</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config_rate_limiting">Rate Limiting</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config_RBAC">Configuring Role-Based Access Control</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config_service_health">Service Health Learning and Fault Avoidance</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config_snmp">SNMP</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config_snmp_metrics">SNMP: User defined metrics</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config_static_hostname_mapping">Static Hostname Mappings</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config_STEP">Configuring Service and Topology Exchange Protocol (STEP)</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config_tenants">Tenants</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config_templates">Configuration Templates</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config_transport_encryption">Transport Based Encryption</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config_wan_assurance">Configuring WAN Assurance</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">High Availability</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config_ha">Dual Node High Availability</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config_dual_router_ha">Dual Router High Availability using iBGP</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config_ha_vrrp">Dual Router High Availability and VRRP</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config_non_forwarding_ha_interfaces">Non-forwarding HA Interfaces</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config_adding_interfaces_to_ha_team">Adding Interfaces to HA Team Interface</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config_transition_standalone_to_ha">Transitioning a Conductor from Standalone to HA</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Security</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/sec_adaptive_encrypt">Adaptive Encryption</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">How To</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/howto_conductor_migration">Conductor Migration</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/howto_extend_gui_nav">Extending GUI Nav</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/howto_lte">LTE and Dual LTE Configuration</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/howto_config_PPPoE">Configuring Dual PPPoE</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/howto_maintenance_mode">Maintenance Mode</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/howto_ms365">Microsoft 365</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/howto_trusted_ca_certificate">Adding a Trusted Certificate</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/howto_tune_bfd">Tuning BFD</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Troubleshooting</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/ts_applications">Application Troubleshooting</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/ts_ap_duplicate_assets">AP: Duplicate Asset ID Error</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/ts_ap_salt_minion">AP: Salt Minion</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/ts_cpu_spikes">CPU Spikes</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/ts_connecting_to_routers">Connecting to Routers</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/ts_forwarding_resource_pools">Forwarding Plane Resource Pools</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/ts_logs">Logs</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/ts_mac_uniqueness">MAC Address Uniqueness</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/ts_packet_capture">Packet Capture</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/ts_t1_troubleshooting">T1 Troubleshooting</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/ts_troubleshooting_vrf">Troubleshooting VRF</a></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Events</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/events_overview">Alarm and Events</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/events_alarms">Alarms</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/events_events">Events</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Best Practices</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/bcp_att_avpn_configuration">AT&amp;T AVPN Configuration</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/bcp_using_128T_as_ntp_server">Branch NTP Service</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/bcp_conductor_deployment">Conductor Deployment</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/bcp_per-adjacency_traffic_engineering">Per Adjacency Traffic Engineering</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/bcp_qos_msft_expressroute">ExpressRoute QoS Configuration</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/bcp_lte_peering">LTE Peering</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/bcp_monitoring_headends">Monitoring Head End Routers</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/bcp_salt_pillars">Saltstack at Scale With 128T</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/bcp_sdwan_design_guide">SD-WAN Design Guide</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/bcp_service_and_service_policy_design">Service and Service Policy Design</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/bcp_service-policy_defaults">Service Policy Baseline Defaults</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/bcp_tenants">Tenancy Design</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">CLI Reference</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/cli_reference">Command Line Reference</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/cli_stats_reference">Show Stats Reference</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Installer/Initializer Reference</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/installer_cli_reference">Installer Command Line Reference</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/installer_preferences">Installer Preferences File Reference</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/initializer_cli_reference">Initializer Command Line Reference</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/initializer_preferences">Initializer Preferences File Reference</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Plugins</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/plugin_intro">Introduction</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/plugin_bgp_community_services">BGP Community Services</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/plugin_aws_tgw_connect">AWS Transit Gateway Connect</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/plugin_cloud_ha">Cloud HA</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/plugin_dns_app_id">DNS App Id</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/plugin_dns_cache">DNS Cache</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/plugin_gre">GRE</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/docs/plugin_ha_sync_redundancy">HA Sync Redundancy Plugin</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/plugin_icmp_reachability_detection">ICMP Reachability Detection</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/plugin_ipsec_client">IPsec Client</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/plugin_loopback_static_routes">Loopback Static Routes</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/plugin_m800_watchdog">M800 Watchdog</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/plugin_monitoring_agent">Monitoring Agent</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/plugin_mosh">Mosh</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/plugin_set_hostname">Set Hostname</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/plugin_sip_alg">SIP ALG</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/plugin_wireguard">Wireguard</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/plugin_kni_namespace_scripts">KNI Namespace Scripts</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">REST APIs</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/api_rest_4.2.0">128T-4.2.0</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Release Notes</a><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">SSR</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/release_notes_128t_5.4">5.4</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/release_notes_128t_5.3">5.3</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/release_notes_128t_5.2">5.2</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/release_notes_128t_5.1">5.1</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/release_notes_128t_5.0">5.0</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/release_notes_128t_4.5">4.5</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/release_notes_128t_4.4">4.4</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/release_notes_128t_4.3">4.3</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/release_notes_128t_4.2">4.2</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/release_notes_128t_4.1">4.1</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/release_notes_128t_4.0">4.0</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">SSR Installer</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/release_notes_128t_installer_3.1">3.1</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/release_notes_128t_installer_3.0">3.0</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/release_notes_128t_installer_2.7">2.7</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/release_notes_128t_installer_2.6">2.6</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/release_notes_128t_installer_2.5">2.5</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/release_notes_128t_installer_2.4">2.4</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/release_notes_128t_installer_2.3">2.3</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/release_notes_128t_installer_2.2">2.2</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/release_notes_128t_installer_2.1">2.1</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">SSR SIP ALG</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/release_notes_128t_sip_alg_2.1">2.1</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">SSR ZScaler</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/release_notes_128t_zscaler_1.1">1.1</a></li></ul></li></ul></li></ul></div></div></div><main class="docMainContainer_r8cw"><div class="container padding-vert--lg docItemWrapper_NJLN"><div class="row"><div class="col docItemCol_zHA2"><div class="docItemContainer_oiyr"><article><header><h1 class="docTitle_-X99">HA Sync Redundancy Plugin</h1></header><div class="markdown"><p>The HA Sync Redundancy plugin adds the ability to include an additional link in the team interface configured as per <a href="https://docs.128technology.com/docs/config_non_forwarding_ha_interfaces" target="_blank" rel="noopener noreferrer">Non-Forwarding HA Interfaces</a>. This plugin automates the manual process described <a href="https://docs.128technology.com/docs/config_adding_interfaces_to_ha_team/" target="_blank" rel="noopener noreferrer">here</a>. Additionally, the plugin provides the ability to use the HA sync connection (single or dual-member) to send HA fabric traffic as well by creating a vlan sub-interface and setting up a KNI interfae in a bridge with this sub-interface.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="configuration-snippet"></a>Configuration Snippet<a class="hash-link" href="#configuration-snippet" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="redundant-ha-sync-interface"></a>Redundant HA Sync Interface<a class="hash-link" href="#redundant-ha-sync-interface" title="Direct link to heading">#</a></h3><p>The configuration sample below will add Linux interface <code>enp0s14f1</code> to the HA sync team interface.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><div tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">config</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    authority</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        router  lshields</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            name  lshields</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            node  lanner7573</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                name                lanner7573</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                ha-sync-redundancy</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                    redundant-interface    enp0s14f1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                exit</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            exit</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        exit</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    exit</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">exit</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="ha-fabric-over-ha-sync"></a>HA Fabric Over HA Sync<a class="hash-link" href="#ha-fabric-over-ha-sync" title="Direct link to heading">#</a></h3><p>The configuration sample below will auto-generate HA fabric interfaces that will leverage the existing HA sync connection to transit between the nodes.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><div tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">config</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    authority</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        router  lshields</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            name  lshields</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            ha-sync-redundancy</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                generate-shared-fabric-interface    true</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            exit</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        exit</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    exit</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">exit</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>This will auto-generate the configuration for a device-interface named <code>ha-fabric</code> on any nodes in the router, each with a network-interface named <code>ha-fabric-intf</code>. The addresses used on these interfaces will be from the network <code>169.254.252.0/30</code>. The network can be overridden by specifying a different network range for the option <code>fabric-network</code> within the <code>ha-sync-redundancy</code> container.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="use-cases"></a>Use Cases<a class="hash-link" href="#use-cases" title="Direct link to heading">#</a></h2><p>Within an HA router, the communication that occurs on the HA sync connection is vital to proper operation of the router. In many ways it should be thought of as akin to a backplane of a chassis based router, despite the fact that it is provided through an Ethernet connection. Due to the importance of this connection to proper functionality, customers often wish to provide redundant connections for this traffic in case of cable or interface failure.</p><p>Additionally there is typically a desire to minimize the number of cables that run between two nodes in an HA router, possibly due to lack of physical ports available. This plugin gives the ability to leverage the existing HA sync connection for HA fabric traffic in order to limit the number of physical connections between the two nodes. This can either allow users to avoid the use of three cables when using a redundant HA connection or two avoid using two when the hardware does not provide sufficient ports.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="troubleshooting"></a>Troubleshooting<a class="hash-link" href="#troubleshooting" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="config-auto-generation"></a>Config Auto-Generation<a class="hash-link" href="#config-auto-generation" title="Direct link to heading">#</a></h3><p>When enabling use of the shared fabric interface, this plugin auto-generates configuration for a kni host interface named <code>ha-fabric</code>. If expected configuration is not being generated, please check the following log on the conductor for errors.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><div tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">/var/log/128technology/plugins/ha-sync-redundancy-generate-configuration.log</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="plugin-state"></a>Plugin State<a class="hash-link" href="#plugin-state" title="Direct link to heading">#</a></h3><p>The <code>show plugin state</code> command provides useful information in troubleshooting proper performance of the plugin. The <code>summary</code> version of this command shows a simple table indicating the status of the team and/or bridge as well as their individual members. A sample output of a fully working plugin is shown below.</p><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>If only using one of the two options in this plugin, the output will only contain information for either the team or bridge.</p></div></div><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><div tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">admin@node1.conductor# show plugins state router router1 summary 128T-ha-sync-redundancy</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Fri 2021-09-03 20:05:53 UTC</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Retrieving state data...</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Target: node1.router1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">============== ======== ====== ================</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> Interface      Exists   Up     In Bridge/Team</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">============== ======== ====== ================</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> team-ens3      True     True   N/A</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> ens3           True     True   True</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> ens4           True     True   True</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> ha-fabric-br   True     True   N/A</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> fabric         True     True   True</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> ha-fabric      True     True   True</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Target: node2.router1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">============== ======== ====== ================</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> Interface      Exists   Up     In Bridge/Team</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">============== ======== ====== ================</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> team-ens3      True     True   N/A</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> ens3           True     True   True</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> ens4           True     True   True</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> ha-fabric-br   True     True   N/A</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> fabric         True     True   True</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> ha-fabric      True     True   True</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Retrieved state data.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Completed in 4.12 seconds</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">admin@node1.conductor#</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>If there is a False value for any of these fields, further investigation should be undertaken as outlined below.</p><p>The <code>show plugin state</code> command can also be issued with a <code>detail</code> option. This option will report the output of the Linux commands <code>brctl show</code> and <code>teamdctl &lt;team name&gt; state</code> which can provide additional details of the status of the bridge and team interfaces.</p><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p> If only using one of the two options in this plugin, the output will only contain information for either the team or bridge.</p></div></div><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><div tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">admin@node1.conductor# show plugins state router router1 detail 128T-ha-sync-redundancy</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Fri 2021-09-03 20:17:21 UTC</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Retrieving state data...</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">============================================================================</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> node1.router1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">============================================================================</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   Fabric Status:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> bridge name    bridge id               STP enabled     interfaces</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> ha-fabric-br           8000.500000020001       no              fabric</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                                                        ha-fabric</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   Team Status:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     ports:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">       ens3:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">         ifinfo:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">           dev_addr:                           50:00:00:02:00:01</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">           dev_addr_len:                       6</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">           ifindex:                            3</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">           ifname:                             ens3</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">         link:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">           duplex:                             full</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">           speed:                              1000</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">           up:                                 True</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">         link_watches:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">           list:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">             link_watch_0:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">               delay_down:                     0</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">               delay_up:                       0</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">               down_count:                     1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">               name:                           ethtool</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">               up:                             True</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">           up:                                 True</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">       ens4:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">         ifinfo:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">           dev_addr:                           50:00:00:02:00:01</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">           dev_addr_len:                       6</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">           ifindex:                            4</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">           ifname:                             ens4</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">         link:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">           duplex:                             full</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">           speed:                              1000</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">           up:                                 True</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">         link_watches:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">           list:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">             link_watch_0:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">               delay_down:                     0</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">               delay_up:                       0</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">               down_count:                     0</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">               name:                           ethtool</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">               up:                             True</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">           up:                                 True</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     runner:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">       active_port:                            ens4</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     setup:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">       daemonized:                             False</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">       dbus_enabled:                           True</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">       debug_level:                            0</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">       kernel_team_mode_name:                  activebackup</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">       pid:                                    11070</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">       pid_file:                               /var/run/teamd/team-ens3.pid</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">       runner_name:                            activebackup</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">       zmq_enabled:                            False</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     team_device:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">       ifinfo:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">         dev_addr:                             50:00:00:02:00:01</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">         dev_addr_len:                         6</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">         ifindex:                              11</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">         ifname:                               team-ens3</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>The sections below contain information on how the plugin orchestrates the setup of the team and bridge interfaces. This information can be used to troubleshoot proper operation of the plugin if these commands show issues with either the team or the bridge.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="plugin-configuration"></a>Plugin Configuration<a class="hash-link" href="#plugin-configuration" title="Direct link to heading">#</a></h3><p>When configuration is created for this plugin, the conductor will create a configuration file with the appropriate information on each node of the router. This file will be located in the directory <code>/var/lib/128technology/plugins/ha-sync-redundancy/</code> and named <code>config.yaml</code>. A copy of this file named <code>config.yaml.current</code> will also be found in this directory if the config was read correctly. This file is used to maintain the last state of the configuration to detect when changes are made so that interfaces no longer needed can be cleaned up. The contents of this file should look as follows (based on the configuration above).</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI yaml"><div tabindex="0" class="prism-code language-yaml codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token key atrule">redundant_interface</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;enp0s14f0&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">ha_fabric_vlan</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;1000&quot;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>It can take several minutes after a commit from conductor for this file to be generated</p></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="configuration-handling"></a>Configuration handling<a class="hash-link" href="#configuration-handling" title="Direct link to heading">#</a></h3><p>Upon generation of the configuration file, a configuration handler will be executed. This handler will read the configuration file and will setup the redundant team interface member as well as setup a <a href="https://docs.128technology.com/docs/plugin_kni_namespace_scripts/" target="_blank" rel="noopener noreferrer">kni namespace script</a> configuration file that will handle the vlan interface and bridge creation. This script will write errors to the log file <code>/var/log/128technology/plugins/ha-sync-redundancy.log</code>, which can provide information if issues arise. The config handler can also be executed manually by running <code>/usr/bin/t128-ha-sync-redundancy-config-handler</code>.</p><p>The contents of this file should look similar to what is shown below.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI yaml"><div tabindex="0" class="prism-code language-yaml codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token key atrule">vlan-interfaces</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> fabric</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">base-intf</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> team</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">enp10s0f0</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">vlan-id</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">2000</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">bridges</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> ha</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">fabric</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">br</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">kni-intf</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> ha</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">fabric</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">target-intf</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> fabric</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="kni-namespace-script"></a>Kni Namespace script<a class="hash-link" href="#kni-namespace-script" title="Direct link to heading">#</a></h3><p>This portion is only relevant to the configuration of a HA Fabric Vlan. After the configuration has been handled, as mentioned above, a configuration file for the namespace scripts will be generated at <code>/var/lib/128technology/kni/host/ha-fabric.conf</code>. In addition, symbolic links should be created to the kni namespace scripts in the directory <code>/etc/128technology/plugins/network-scripts/host/ha-fabric</code> as shown below:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><div tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">[root@lr202006003427 ha-fabric]# ll</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">total 20</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">lrwxrwxrwx 1 root root  69 Aug 30 20:26 init -&gt; /etc/128technology/plugins/network-scripts/default/kni_namespace/init</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">-rwxr-xr-x 1 root root 246 Aug 30 20:52 monitoring</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">lrwxrwxrwx 1 root root  62 Aug 30 20:26 reinit -&gt; /etc/128technology/plugins/network-scripts/host/ha-fabric/init</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">lrwxrwxrwx 1 root root  73 Aug 30 20:26 shutdown -&gt; /etc/128technology/plugins/network-scripts/default/kni_namespace/shutdown</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">lrwxrwxrwx 1 root root  72 Aug 30 20:26 startup -&gt; /etc/128technology/plugins/network-scripts/default/kni_namespace/startup</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">[root@lr202006003427 ha-fabric]#</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>If these scripts have errors, they will be shown in <code>/var/log/128technology/highway.log</code>. On occasion, setting the log-level to debug will provide additional details of how these scripts are run and errors they generate.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="release-notes"></a>Release Notes<a class="hash-link" href="#release-notes" title="Direct link to heading">#</a></h2><div class="admonition admonition-warning alert alert--danger"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"></path></svg></span>warning</h5></div><div class="admonition-content"><p>The plugin must be updated to version 1.1.0 or later prior to <a href="/docs/intro_upgrade_considerations#plugin-config-generation-changes">upgrading the conductor to SSR version 5.4.0.</a></p></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="release-110"></a>Release 1.1.0<a class="hash-link" href="#release-110" title="Direct link to heading">#</a></h3><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="issues-fixed"></a>Issues Fixed<a class="hash-link" href="#issues-fixed" title="Direct link to heading">#</a></h4><ul><li><p><strong>PLUGIN-1451</strong>  Config generation for the plugin failing</p><p><em><strong>Resolution:</strong></em> Correctly handle the config generation for routers where the plugin is not enabled during config generation</p></li></ul></div></article><div class="margin-vert--xl"><div class="row"><div class="col"></div><div class="col text--right"><em><small>Last updated on <time datetime="2021-11-19T17:23:41.000Z" class="lastUpdatedDate_nN9m">11/19/2021</time></small></em></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/plugin_gre"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label"> GRE Plugin</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/plugin_icmp_reachability_detection"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">ICMP Reachability Detection Plugin </div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_vrFS thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#configuration-snippet" class="table-of-contents__link">Configuration Snippet</a><ul><li><a href="#redundant-ha-sync-interface" class="table-of-contents__link">Redundant HA Sync Interface</a></li><li><a href="#ha-fabric-over-ha-sync" class="table-of-contents__link">HA Fabric Over HA Sync</a></li></ul></li><li><a href="#use-cases" class="table-of-contents__link">Use Cases</a></li><li><a href="#troubleshooting" class="table-of-contents__link">Troubleshooting</a><ul><li><a href="#config-auto-generation" class="table-of-contents__link">Config Auto-Generation</a></li><li><a href="#plugin-state" class="table-of-contents__link">Plugin State</a></li><li><a href="#plugin-configuration" class="table-of-contents__link">Plugin Configuration</a></li><li><a href="#configuration-handling" class="table-of-contents__link">Configuration handling</a></li><li><a href="#kni-namespace-script" class="table-of-contents__link">Kni Namespace script</a></li></ul></li><li><a href="#release-notes" class="table-of-contents__link">Release Notes</a><ul><li><a href="#release-110" class="table-of-contents__link">Release 1.1.0</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright  2021 Juniper Networks, Inc.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.bc8e57c4.js"></script>
<script src="/assets/js/main.6f545d22.js"></script>
</body>
</html>