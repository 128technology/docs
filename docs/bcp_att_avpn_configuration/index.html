<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-bcp_att_avpn_configuration">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.3.1">
<title data-rh="true">AT&amp;T AVPN Configuration | SSN Docs</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://docs.128technology.com/docs/bcp_att_avpn_configuration"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="AT&amp;T AVPN Configuration | SSN Docs"><meta data-rh="true" name="description" content="This guide is for network engineers and architects using their Session Smart Router to connect to AT&amp;T’s MPLS VPN (AVPN) service. It will cover:"><meta data-rh="true" property="og:description" content="This guide is for network engineers and architects using their Session Smart Router to connect to AT&amp;T’s MPLS VPN (AVPN) service. It will cover:"><link data-rh="true" rel="icon" href="/img/favicon.png"><link data-rh="true" rel="canonical" href="https://docs.128technology.com/docs/bcp_att_avpn_configuration"><link data-rh="true" rel="alternate" href="https://docs.128technology.com/docs/bcp_att_avpn_configuration" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.128technology.com/docs/bcp_att_avpn_configuration" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.8e1fdc51.css">
<link rel="preload" href="/assets/js/runtime~main.8bb84db0.js" as="script">
<link rel="preload" href="/assets/js/main.5cdde051.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.png" alt="Juniper Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/logo_dark.png" alt="Juniper Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate"></b></a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/docs/intro_getting_started">Docs</a><a href="https://community.juniper.net/answers/communities/community-home?CommunityKey=310d1a41-12fa-4627-9a99-880145a7c87c" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Community<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://www.juniper.net/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Company<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="searchBox_ZlJk"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/about_128t">About</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/intro_getting_started">Introduction</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/intro_system_reqs">Deployment Considerations</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/intro_installation">Installation Process</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/install_conductor_overview">Conductor Installation</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/intro_installation_bootable_media">Router Installation</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/intro_installation_image">Image-Based Installation</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/supported_cloud_platforms">Cloud Installations</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/intro_upgrade_considerations">Upgrades and Rollback</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/intro_installation_installer">Supporting Install Information - Appendix</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/concepts_application_discovery">Concepts</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/wan_overview">WAN Assurance</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/config_basics">Administration</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/events_overview">Events</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/docs/bcp_att_avpn_configuration">Best Practices</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/bcp_att_avpn_configuration">AT&amp;T AVPN Configuration</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/bcp_using_128T_as_ntp_server">Branch NTP Service</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/bcp_dhcp_relay_overview">DHCP Relay Best Practices</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/bcp_qos_msft_expressroute">ExpressRoute QoS Configuration</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/bcp_lte_peering">LTE Peering</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/bcp_monitoring_headends">Monitoring Head End Routers</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/bcp_per-adjacency_traffic_engineering">Per Adjacency Traffic Engineering</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/bcp_salt_pillars">Saltstack at Scale With SSR</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/bcp_sdwan_design_guide">SD-WAN Design Guide</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/bcp_service_and_service_policy_design">Service and Service Policy Design</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/bcp_service-policy_defaults">Service Policy Baseline Defaults</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/bcp_tenants">Tenancy Design</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/cli_reference">CLI and Element Reference</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/installer_cli_reference">Installer/Initializer Reference</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/plugin_intro">Plugins</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/release_notes_128t_6.2">Release Notes</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Best Practices</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">AT&amp;T AVPN Configuration</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>AT&amp;T AVPN Configuration</h1></header><p>This guide is for network engineers and architects using their Session Smart Router to connect to AT&amp;T’s MPLS VPN (AVPN) service. It will cover:</p><ul><li>Service class definitions for the various COS queues on the AT&amp;T MPLS network</li><li>Strategies for mapping <code>service</code> configuration to the COS queues using <code>service-policy</code> elements</li><li>Guidelines for setting your <code>traffic-engineering</code> properties, to match the circuit profile of your AT&amp;T MPLS link</li></ul><div class="theme-admonition theme-admonition-note alert alert--secondary admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_S0QG"><p>While the techniques described here apply to any MPLS connection, they will be most valuable when engineering branch office (i.e., smaller) MPLS links, due to the higher likelihood of congestion.</p></div></div><p>This document is intended to be a companion guide to the <em>AT&amp;T Network-Based Class of Service Customer Router Configuration Guide</em>. </p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="att-service-classes">AT&amp;T Service Classes<a href="#att-service-classes" class="hash-link" aria-label="Direct link to AT&amp;T Service Classes" title="Direct link to AT&amp;T Service Classes">​</a></h2><p>The AT&amp;T AVPN MPLS network uses six distinct classes of service for carrying customer traffic, as well as a seventh “control” queue for communication between the CE and PE router. This section describes each of the classes of service and provides SSR configuration fragments to illustrate how to configure your Session Smart Router to interact with the AVPN network.</p><div class="theme-admonition theme-admonition-note alert alert--secondary admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_S0QG"><p>This document assumes the use of a 6COS circuit profile. The 4COS circuit does not use the COS2V nor COS5 classes of service. Otherwise, the recommendations made in this document apply.</p></div></div><div class="theme-admonition theme-admonition-caution alert alert--warning admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>caution</div><div class="admonitionContent_S0QG"><p>In each of the <code>service-class</code> configuration excerpts below, you will see it has been assigned a <code>traffic-class</code>. The Session Smart Router has four traffic classes, in order of priority: high, medium, low, best-effort. This is different from other network equipment, which may order the priorities as high, medium, best-effort, low.</p></div></div><p>All of the <code>service-class</code> elements in this section are provided as an appendix to this document, to facilitate their import (or copy/paste) into your existing SSR configuration.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="cos1-real-time">COS1: Real-time<a href="#cos1-real-time" class="hash-link" aria-label="Direct link to COS1: Real-time" title="Direct link to COS1: Real-time">​</a></h3><p>The COS1 class is treated differently than the other classes on AVPN; any packets received that are marked as COS1 exceed the configured bandwidth, they are explicitly dropped (&quot;hard policed&quot;). Packets are identified as COS1 through the use of the &quot;EF&quot; DSCP marking (decimal 46).</p><p>COS1 is typically reserved for Voice over IP (VoIP) traffic.</p><p>Configuration:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">admin@AAPCDCVACON0A.AAPCONPOD0# show config run auth service-class ATT-COS1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">config</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    authority</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        service-class  ATT-COS1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            name           ATT-COS1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            description    &quot;Real-time applications (EF)&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            dscp           46</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            traffic-class  high</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">exit</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="cos2v-delay-sensitive-applications">COS2V: Delay-sensitive applications<a href="#cos2v-delay-sensitive-applications" class="hash-link" aria-label="Direct link to COS2V: Delay-sensitive applications" title="Direct link to COS2V: Delay-sensitive applications">​</a></h3><p>The COS2V queue, identified through the use of the DSCP value AF41 (decimal 34), is typically reserved for video conferencing traffic.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="configuration">Configuration<a href="#configuration" class="hash-link" aria-label="Direct link to Configuration" title="Direct link to Configuration">​</a></h4><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">admin@AAPCDCVACON0A.AAPCONPOD0# show config run auth service-class ATT-COS2V</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">config</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    authority</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        service-class  ATT-COS2V</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            name           ATT-COS2V</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            description    &quot;Delay-sensitive applications (AF41)&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            dscp           34</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            traffic-class  medium</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">exit</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="cos2-time-critical-applications">COS2: Time-critical applications<a href="#cos2-time-critical-applications" class="hash-link" aria-label="Direct link to COS2: Time-critical applications" title="Direct link to COS2: Time-critical applications">​</a></h3><p>The COS2 queue, identified through the use of DSCP AF31 (decimal 26), is to be used for time-sensitive, mission-critical, low bandwidth applications. This is the recommended class VoIP signaling (e.g., SIP, H.323, SCCP), as it is low-bandwidth (typically a small number of kilobits per second) but extremely time-sensitive.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="configuration-1">Configuration<a href="#configuration-1" class="hash-link" aria-label="Direct link to Configuration" title="Direct link to Configuration">​</a></h4><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">admin@AAPCDCVACON0A.AAPCONPOD0# show config run auth service-class ATT-COS2</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">config</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    authority</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        service-class  ATT-COS2</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            name           ATT-COS2</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            description    &quot;Time-sensitive mission-critical low-bandwidth applications (AF31)&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            dscp           26</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            traffic-class  medium</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">exit</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="cos3-time-sensitive-applications">COS3: Time-sensitive applications<a href="#cos3-time-sensitive-applications" class="hash-link" aria-label="Direct link to COS3: Time-sensitive applications" title="Direct link to COS3: Time-sensitive applications">​</a></h3><p>This class of service should include all mission-critical applications that are <em>interactive</em> in nature; that is, they correspond to applications that are transactional in nature. In enterprises this may be a CRM system, an ERP system, or other important client/server applications.</p><p>COS3 is distinguishable by its DSCP value of AF21 (decimal 18).</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="configuration-2">Configuration<a href="#configuration-2" class="hash-link" aria-label="Direct link to Configuration" title="Direct link to Configuration">​</a></h4><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">admin@AAPCDCVACON0A.AAPCONPOD0# show config run auth service-class ATT-COS3</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">config</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    authority</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        service-class  ATT-COS3</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            name           ATT-COS3</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            description    &quot;Time-sensitive mission-critical applications (AF21)&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            dscp           18</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            traffic-class  medium</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">exit</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="cos4-best-effort">COS4: Best Effort<a href="#cos4-best-effort" class="hash-link" aria-label="Direct link to COS4: Best Effort" title="Direct link to COS4: Best Effort">​</a></h3><p>The &quot;best effort&quot; class is the one that should be used by the majority of network traffic.</p><p>There is no DSCP value associated with best effort traffic (decimal 0).</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="configuration-3">Configuration<a href="#configuration-3" class="hash-link" aria-label="Direct link to Configuration" title="Direct link to Configuration">​</a></h4><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">admin@AAPCDCVACON0A.AAPCONPOD0# show config run auth service-class ATT-COS4</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">config</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    authority</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        service-class  ATT-COS4</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            name           ATT-COS4</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            description    &quot;Best effort (default)&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            dscp           0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            traffic-class  best-effort</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">exit</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="cos5-scavenger">COS5: Scavenger<a href="#cos5-scavenger" class="hash-link" aria-label="Direct link to COS5: Scavenger" title="Direct link to COS5: Scavenger">​</a></h3><p>The last class of service for customer traffic is COS5, or scavenger. This is for all non business-oriented traffic. This typically gets the lowest allocation when assigning traffic engineering percentages, and thus will experience congestion first.</p><p>Scavenger traffic is identified as COS5 through the use of the AF11 DSCP value (decimal 10).</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="configuration-4">Configuration<a href="#configuration-4" class="hash-link" aria-label="Direct link to Configuration" title="Direct link to Configuration">​</a></h4><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">admin@AAPCDCVACON0A.AAPCONPOD0# show config run auth service-class ATT-COS5</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">config</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    authority</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        service-class  ATT-COS5</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            name           ATT-COS5</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            description    &quot;Scavenger (AF11)&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            dscp           10</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            traffic-class  best-effort</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">exit</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="control-queue">Control Queue<a href="#control-queue" class="hash-link" aria-label="Direct link to Control Queue" title="Direct link to Control Queue">​</a></h3><p>The control queue is used for communicating between the CE and PE router, and should typically be limited to BGP and BFD only. This is an extremely low bandwidth queue.</p><div class="theme-admonition theme-admonition-warning alert alert--danger admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"></path></svg></span>danger</div><div class="admonitionContent_S0QG"><p>In many deployments the SSR does not BGP peer with the PE router, and in no deployments will the SSR send BFD to the PE router. Do not mark BFD or BGP with DSCP CS6/decimal 48. This is only presented for completeness, or when BGP peering with the PE router.</p></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="configuration-5">Configuration<a href="#configuration-5" class="hash-link" aria-label="Direct link to Configuration" title="Direct link to Configuration">​</a></h4><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">admin@AAPCDCVACON0A.AAPCONPOD0# show config run auth service-class ATT-control</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">config</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    authority</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        service-class  ATT-control</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            name           ATT-control</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            description    &quot;Control traffic only (CS6)&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            dscp           48</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            traffic-class  high</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">exit</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="service-policies">Service Policies<a href="#service-policies" class="hash-link" aria-label="Direct link to Service Policies" title="Direct link to Service Policies">​</a></h2><p>The SSR will use <code>service-policy</code> to indicate which sessions need to get marked and treated with the <code>session-type</code> configurations. Each <code>service</code> should have a corresponding <code>service-policy</code>, to ensure that the markings are applied and the correct <code>traffic-class</code> is used for traffic engineering.</p><p>The base class <code>service-policy</code> configurations presented here are derived from the <a href="/docs/bcp_service-policy_defaults">BCP on Service Policy</a>.</p><table><thead><tr><th>Base <code>service-policy</code></th><th align="center">AVPN <code>service-class</code></th></tr></thead><tbody><tr><td><code>voip-audio</code></td><td align="center">ATT-COS1</td></tr><tr><td><code>voip-video</code></td><td align="center">ATT-COS2V</td></tr><tr><td><code>video-streaming</code></td><td align="center">ATT-COS2V</td></tr><tr><td><code>voip-signaling</code></td><td align="center">ATT-COS2</td></tr><tr><td><code>data-mission-critical</code></td><td align="center">ATT-COS2</td></tr><tr><td><code>remote-desktop</code></td><td align="center">ATT-COS2</td></tr><tr><td><code>management-interactive</code></td><td align="center">ATT-COS3</td></tr><tr><td><code>management-m2m</code></td><td align="center">ATT-COS3</td></tr><tr><td><code>data-interactive</code></td><td align="center">ATT-COS3</td></tr><tr><td><code>data-best-effort</code></td><td align="center">ATT-COS4</td></tr><tr><td><code>data-scavenger</code></td><td align="center">ATT-COS5</td></tr><tr><td><code>video-streaming-scavenger</code></td><td align="center">ATT-COS5</td></tr></tbody></table><h2 class="anchor anchorWithStickyNavbar_LWe7" id="traffic-engineering-strategies">Traffic Engineering Strategies<a href="#traffic-engineering-strategies" class="hash-link" aria-label="Direct link to Traffic Engineering Strategies" title="Direct link to Traffic Engineering Strategies">​</a></h2><p>The SSR uses four traffic engineering queues for prioritizing egress traffic during times of congestion or link contention. The general practice of mapping the <code>traffic-class</code> assignments (high, medium, low, best-effort) into the various 6COS queues is shown below.</p><div class="mermaid">
  graph LR
    voip-audio --&gt; ATT-COS1
    id1(BFD, BGP) -.-&gt; ATT-control
    voip-video --&gt; ATT-COS2V
    video-streaming --&gt; ATT-COS2V
    voip-signaling --&gt; ATT-COS2
    data-mission-critical --&gt; ATT-COS2
    remote-desktop --&gt; ATT-COS2
    management-interactive --&gt; ATT-COS3
    management-m2m --&gt; ATT-COS3
    data-interactive --&gt; ATT-COS3
    data-best-effort --&gt; ATT-COS4
    data-scavenger --&gt; ATT-COS5
    video-streaming-scavenger --&gt; ATT-COS5
    subgraph best-effort
    ATT-COS5
    end
    subgraph low
    ATT-COS4
    end
    subgraph medium
    ATT-COS2V
    ATT-COS2
    ATT-COS3
    end
    subgraph high
    ATT-COS1
    ATT-control
    end
</div><p>Each AT&amp;T AVPN circuit has a <em>profile</em> associated with it (referred to as a &quot;COS Package&quot;), that maps to bandwidth allocations for the various COS queues. These in turn need to be mapped to the four egress traffic engineering queues on the SSR. The COS Package from AT&amp;T is expressed as a set of six numbers (corresponding to the queues), where the first number is the percentage of the circuit bandwidth allocated for COS1, and the remaining five numbers (which sum to 100%) represent the amount of <em>bandwidth remaining</em> from the bandwidth not used by COS1.</p><div class="theme-admonition theme-admonition-warning alert alert--danger admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"></path></svg></span>danger</div><div class="admonitionContent_S0QG"><p>Math involved.</p></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="sizing-the-traffic-engineering-policy">Sizing the Traffic Engineering Policy<a href="#sizing-the-traffic-engineering-policy" class="hash-link" aria-label="Direct link to Sizing the Traffic Engineering Policy" title="Direct link to Sizing the Traffic Engineering Policy">​</a></h3><table><thead><tr><th align="center">Traffic Class</th><th>Value</th></tr></thead><tbody><tr><td align="center">high</td><td>COS1 percentage from COS Profile</td></tr><tr><td align="center">medium</td><td>(sum of COS2V + COS2 + COS3) * (100% - COS1 bandwidth)</td></tr><tr><td align="center">low</td><td>COS4 * (100% - COS1 bandwidth)</td></tr><tr><td align="center">best-effort</td><td>COS5 * (100% - COS1 bandwidth)</td></tr></tbody></table><p>Example (simple COS profile for a 6COS model):</p><table><thead><tr><th align="center">COS1</th><th align="center">COS2V</th><th align="center">COS2</th><th align="center">COS3</th><th align="center">COS4</th><th align="center">COS5</th></tr></thead><tbody><tr><td align="center">5%</td><td align="center">20%</td><td align="center">20%</td><td align="center">20%</td><td align="center">20%</td><td align="center">20%</td></tr></tbody></table><p>In this case, the <code>high</code> percentage is <code>5</code>. The <code>medium</code> class gets 60% (20% + 20% + 20%) of the remaining 95%, which is <code>57</code>. The <code>low</code> class gets 20% of the remaining 95%, which is <code>19</code>. And <code>best-effort</code> also gets 20%, which is <code>19</code>.</p><div class="theme-admonition theme-admonition-note alert alert--secondary admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_S0QG"><p>These values are merely starting points that should line up to the COS Profile of the AT&amp;T AVPN circuit. Further tuning is left to the discretion of the network engineer.</p></div></div><p>The <code>traffic-profile</code> would therefore look like this:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">*admin@labsystem1.fiedler# show config candidate authority traffic-profile 6COS-simple</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">config</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   authority</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">       traffic-profile  6COS-simple</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">           name         6COS-simple</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">           high</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">               distribution  5</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">           exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">           medium</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">               distribution  57</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">           exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">           low</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">               distribution  19</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">           exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">           best-effort</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">               distribution  19</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">           exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">       exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">exit</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This <code>traffic-profile</code> is applied to a <code>device-interface</code>:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">*admin@labsystem1.fiedler# show config candidate authority router newton node labsystem2 device eno4 traffic-engineering</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">config</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    authority</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        router  newton</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            name  newton</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            node  labsystem2</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                name              labsystem2</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                device-interface  eno4</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    name                 eno4</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    traffic-engineering</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                        transmit-cap     100000000</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                        traffic-profile  6COS-simple</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">exit</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="appendix-service-class-configuration">Appendix: Service Class Configuration<a href="#appendix-service-class-configuration" class="hash-link" aria-label="Direct link to Appendix: Service Class Configuration" title="Direct link to Appendix: Service Class Configuration">​</a></h2><p>The following configuration output is presented here to facilitate copy/paste into your SSR conductor.</p><div class="theme-admonition theme-admonition-note alert alert--secondary admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_S0QG"><p>Because the <code>dscp</code> value is a key field for the <code>service-class</code> object, no two <code>service-class</code> configurations can share the same value. This will likely require you to delete existing <code>service-class</code> configuration, as the SSR ships with <em>factory default</em> <code>service-class</code> elements that will conflict with the ones presented below.</p></div></div><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">config authority service-class ATT-COS1 name           ATT-COS1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">config authority service-class ATT-COS1 description    &quot;Real-time applications (EF)&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">config authority service-class ATT-COS1 dscp           46</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">config authority service-class ATT-COS1 traffic-class  high</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">config authority service-class ATT-COS2V name           ATT-COS2V</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">config authority service-class ATT-COS2V description    &quot;Delay-sensitive applications (AF41)&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">config authority service-class ATT-COS2V dscp           34</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">config authority service-class ATT-COS2V traffic-class  medium</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">config authority service-class ATT-COS2 name           ATT-COS2</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">config authority service-class ATT-COS2 description    &quot;Time-sensitive mission-critical low-bandwidth applications (AF31)&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">config authority service-class ATT-COS2 dscp           26</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">config authority service-class ATT-COS2 traffic-class  medium</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">config authority service-class ATT-COS3 name           ATT-COS3</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">config authority service-class ATT-COS3 description    &quot;Time-sensitive mission-critical applications (AF21)&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">config authority service-class ATT-COS3 dscp           18</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">config authority service-class ATT-COS3 traffic-class medium</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">config authority service-class ATT-COS4 name           ATT-COS4</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">config authority service-class ATT-COS4 description    &quot;Best effort (default)&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">config authority service-class ATT-COS4 dscp           0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">config authority service-class ATT-COS4 traffic-class  best-effort</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">config authority service-class ATT-COS5 name           ATT-COS5</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">config authority service-class ATT-COS5 description    &quot;Scavenger (AF11)&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">config authority service-class ATT-COS5 dscp           10</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">config authority service-class ATT-COS5 traffic-class  best-effort</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">config authority service-class ATT-control name           ATT-control</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">config authority service-class ATT-control description    &quot;Control traffic only (CS6)&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">config authority service-class ATT-control dscp           48</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">config authority service-class ATT-control traffic-class  high</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"></div><div class="col lastUpdated_vwxv"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2023-11-20T19:50:26.000Z">Nov 20, 2023</time></b></span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/events_events"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Events</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/bcp_using_128T_as_ntp_server"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Branch NTP Service</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#att-service-classes" class="table-of-contents__link toc-highlight">AT&amp;T Service Classes</a><ul><li><a href="#cos1-real-time" class="table-of-contents__link toc-highlight">COS1: Real-time</a></li><li><a href="#cos2v-delay-sensitive-applications" class="table-of-contents__link toc-highlight">COS2V: Delay-sensitive applications</a></li><li><a href="#cos2-time-critical-applications" class="table-of-contents__link toc-highlight">COS2: Time-critical applications</a></li><li><a href="#cos3-time-sensitive-applications" class="table-of-contents__link toc-highlight">COS3: Time-sensitive applications</a></li><li><a href="#cos4-best-effort" class="table-of-contents__link toc-highlight">COS4: Best Effort</a></li><li><a href="#cos5-scavenger" class="table-of-contents__link toc-highlight">COS5: Scavenger</a></li><li><a href="#control-queue" class="table-of-contents__link toc-highlight">Control Queue</a></li></ul></li><li><a href="#service-policies" class="table-of-contents__link toc-highlight">Service Policies</a></li><li><a href="#traffic-engineering-strategies" class="table-of-contents__link toc-highlight">Traffic Engineering Strategies</a><ul><li><a href="#sizing-the-traffic-engineering-policy" class="table-of-contents__link toc-highlight">Sizing the Traffic Engineering Policy</a></li></ul></li><li><a href="#appendix-service-class-configuration" class="table-of-contents__link toc-highlight">Appendix: Service Class Configuration</a></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2023 Juniper Networks, Inc.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.8bb84db0.js"></script>
<script src="/assets/js/main.5cdde051.js"></script>
</body>
</html>