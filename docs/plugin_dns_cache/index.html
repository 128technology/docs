<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-plugin_dns_cache" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.1.1">
<title data-rh="true">DNS Cache Plugin | SSN Docs</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://docs.128technology.com/docs/plugin_dns_cache"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="DNS Cache Plugin | SSN Docs"><meta data-rh="true" name="description" content="The SSR-dns-cache plugin provides a DNS caching service on your SSR router by forwarding all traffic on a configured ingress-service and tenant to dnsmasq. By default it uses existing system configuration for nameserver resolution, but supports optionally configuring custom server addresses. The plugin is implemented as a service function chain (SFC) where the DNS traffic received on an ingress interface is detoured through a Kernel Network Interface (KNI) to be cached by dnsmasq. A typical flow of the packets for the plugin is illustrated below:"><meta data-rh="true" property="og:description" content="The SSR-dns-cache plugin provides a DNS caching service on your SSR router by forwarding all traffic on a configured ingress-service and tenant to dnsmasq. By default it uses existing system configuration for nameserver resolution, but supports optionally configuring custom server addresses. The plugin is implemented as a service function chain (SFC) where the DNS traffic received on an ingress interface is detoured through a Kernel Network Interface (KNI) to be cached by dnsmasq. A typical flow of the packets for the plugin is illustrated below:"><link data-rh="true" rel="icon" href="/img/favicon.png"><link data-rh="true" rel="canonical" href="https://docs.128technology.com/docs/plugin_dns_cache"><link data-rh="true" rel="alternate" href="https://docs.128technology.com/docs/plugin_dns_cache" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.128technology.com/docs/plugin_dns_cache" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/kb/rss.xml" title="SSR Knowledge Base Articles RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/kb/atom.xml" title="SSR Knowledge Base Articles Atom Feed">
<link rel="alternate" type="application/json" href="/kb/feed.json" title="SSR Knowledge Base Articles JSON Feed"><link rel="stylesheet" href="/assets/css/styles.b50a304b.css">
<script src="/assets/js/runtime~main.04c77879.js" defer="defer"></script>
<script src="/assets/js/main.5baa852b.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.png" alt="Juniper Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/logo_dark.png" alt="Juniper Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate"></b></a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/docs/intro_getting_started">Docs</a><a class="navbar__item navbar__link" href="/kb">Knowledge Base</a><a href="https://community.juniper.net/answers/communities/community-home?CommunityKey=310d1a41-12fa-4627-9a99-880145a7c87c" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Community<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://www.juniper.net/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Company<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20" aria-hidden="true"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/about_128t">About</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/intro_getting_started">Introduction</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/intro_system_reqs">Deployment Considerations</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/cc_fips_titlepage">SSR Common Criteria Install and Configuration</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/intro_upgrade_considerations">Upgrading the SSR</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/intro_installation">Pre-Installation Process</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/intro_installation_univ-iso">SSR Universal ISO Installation</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/supported_cloud_platforms">Cloud Installations</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/intro_installation_legacy">Legacy Install Information</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/concepts_application_discovery">Concepts</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/concepts_fib">Understanding the Forwarding Information Base</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/wan_overview">WAN Assurance</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/config_basics">Administration</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/events_overview">Events</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/bcp_sdwan_design_guide">Best Practices</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/cli_reference">CLI and Element Reference</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/installer_cli_reference">Installer/Initializer Reference</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/docs/plugin_intro">Plugins</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/plugin_intro">Introduction</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/plugin_bgp_community_services">BGP Community Services</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/plugin_cloud_ha">Cloud HA</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/plugin_dns_app_id">DNS App Id</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/plugin_dns_cache">DNS Cache</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/plugin_gre">GRE</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/plugin_ha_sync_redundancy">HA Sync Redundancy Plugin</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/plugin_http_probe">HTTP Probe Reachability Detection</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/plugin_icmp_reachability_detection">ICMP Reachability Detection</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/plugin_ipsec_client">IPsec Client</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/plugin_loopback_static_routes">Loopback Static Routes</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/plugin_m800_watchdog">M800 Watchdog</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/plugin_monitoring_agent">Monitoring Agent Plugin</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/plugin_mosh">Mosh</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/plugin_set_hostname">Set Hostname</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/plugin_sip_alg">SIP ALG</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/plugin_wireguard">Wireguard</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/plugin_kni_namespace_scripts">KNI Namespace Scripts</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/release_notes_128t_6.3">Release Notes</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Plugins</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">DNS Cache</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>DNS Cache Plugin</h1></header><p>The SSR-dns-cache plugin provides a DNS caching service on your SSR router by forwarding all traffic on a configured <code>ingress-service</code> and <code>tenant</code> to <a href="http://www.thekelleys.org.uk/dnsmasq/doc.html" target="_blank" rel="noopener noreferrer">dnsmasq</a>. By default it uses existing system configuration for nameserver resolution, but supports optionally configuring custom server addresses. The plugin is implemented as a <a href="/docs/plugin_intro#service-function-chaining">service function chain</a> (SFC) where the DNS traffic received on an ingress interface is detoured through a <a href="/docs/concepts_kni">Kernel Network Interface</a> (KNI) to be cached by <code>dnsmasq</code>. A typical flow of the packets for the plugin is illustrated below:</p>
<p>lan-intf (lan-tenant) &gt; <code>ingress-service</code> &gt; <code>dnsmasq</code> &gt; dns-kni (<code>tenant</code>) &gt; egress-service &gt; wan-intf</p>
<p>By enabling this plugin, you can provide DNS caching with fast resolution times to your network.</p>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_BuS1"><p>The instructions for installing and managing the plugin can be found <a href="/docs/plugin_intro#installation-and-management">here</a>.</p></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="configuration">Configuration<a href="#configuration" class="hash-link" aria-label="Direct link to Configuration" title="Direct link to Configuration">​</a></h2>
<p>Assuming the below SSR configuration:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">config</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    authority</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        name Authority128</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        conductor-address labconductor.acme.com</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        tenant dns-cache-plugin</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            name dns-cache-plugin</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        tenant lan-clients</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            name lan-clients</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            security aes1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        service internet</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            name internet</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            security internal</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            address 0.0.0.0/0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            access-policy lan-clients</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                source lan-clients</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                permission allow</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            access-policy dns-cache-plugin</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                source dns-cache-plugin</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                permission allow</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            share-service-routes false</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        service dns-catcher</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            name dns-catcher</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            transport udp</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                protocol udp</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                port-range 53</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    start-port 53</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            address 0.0.0.0/0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            access-policy lan-clients</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                source lan-clients</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                permission allow</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        router labrouter</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            name labrouter</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            node node1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                name node1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                role combo</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                device-interface LAN</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    name LAN</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    network-interface vlan0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                        name vlan0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                        tenant lan-clients</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                        dhcp v4</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">exit</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>We can apply the following DNS cache plugin configuration:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">config</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    authority</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        router lab-router</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            name lab-router</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            dns-cache</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                enabled true</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                tenant dns-cache-plugin</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                ingress-service dns-catcher</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">exit</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<table><thead><tr><th>Element</th><th>Type</th><th>Default</th><th>Description</th></tr></thead><tbody><tr><td>enabled</td><td>boolean</td><td>true</td><td>Governs whether the DNS cache is operationally enabled or not.</td></tr><tr><td>name</td><td>SSR device name</td><td><code>dns-cache</code></td><td>This controls the name of the service function chain interface.</td></tr><tr><td>addresses</td><td>IPv4 address</td><td>N/A</td><td>Multiple instance object. This will specify the upstream DNS resolvers to use, overriding the ones normally used by the Linux host operating system on the machine.</td></tr><tr><td>ingress-service</td><td>reference</td><td>N/A</td><td>This refers to a configured <code>service</code> within the authority that will be used to &quot;trap&quot; inbound DNS requests, to divert them to dnsmasq. Generally, this is a service that has an address of 0.0.0.0/0 and restricted to UDP/53.</td></tr><tr><td>plugin-network</td><td>CIDR</td><td>169.254.141.128/30</td><td>This controls the IP addresses used for the internal SFC network to detour packets to and from the on-board DNS cache. This should only be changed if there is a conflict with another IP block in use on this same host system.</td></tr><tr><td>tenant</td><td>reference</td><td>N/A</td><td>This is the tenant that will be assigned to the SFC interface (of type KNI). All packets leaving the DNS cache and heading toward an upstream DNS resolver will be associated with this tenant. For this reason, it is important that your SSR configuration also includes a <code>service</code> that allows this <code>tenant</code> to reach the upstream resolvers. Typically, this is an <code>internet</code> service (0.0.0.0/0).</td></tr><tr><td>ingress-source-nat-pool</td><td>reference</td><td>N/A</td><td>This refers to a configured <code>source-nat-pool</code>, and will be used when forwarding the traffic through the DNS cache/service function chain.</td></tr><tr><td>max-ttl</td><td>seconds</td><td>1500</td><td>The configured maximum TTL will be advertised to clients instead of the true TTL value if it is lower. The true TTL value is however kept in the cache to avoid flooding the upstream DNS servers. See <a href="#release-120-220">release notes for details</a></td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="notes-about-the-sample-configuration">Notes about the Sample Configuration<a href="#notes-about-the-sample-configuration" class="hash-link" aria-label="Direct link to Notes about the Sample Configuration" title="Direct link to Notes about the Sample Configuration">​</a></h3>
<p>The <code>ingress-service</code> we have configured is <code>dns-catcher</code>. This is a simple service that matches any IP address (0.0.0.0/0) and has a destination protocol and port of UDP/53. Our <code>dns-catcher</code> service is set to allow the <code>lan-clients</code> tenant (which is assigned to the LAN <code>network-interface</code>), so any traffic arriving on this interface destined for UDP/53 will be detoured to the DNS cache.</p>
<p>The DNS cache will either respond locally (if there&#x27;s an existing cache entry), or will forward the request to an upstream resolver. For the latter case, it will reenter the SSR&#x27;s forwarding plane via the KNI interface (a.k.a. the &quot;service function chain&quot; interface) and be affiliated with the <code>tenant</code> named <code>dns-cache-plugin</code>.</p>
<p>Once in the SSR&#x27;s data plane, this traffic will match the <code>internet</code> service (we&#x27;ve added an <code>allow</code> statement for the <code>dns-cache-plugin</code> tenant), and be forwarded out to the upstream server(s).</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="custom-dns-servers">Custom DNS Servers<a href="#custom-dns-servers" class="hash-link" aria-label="Direct link to Custom DNS Servers" title="Direct link to Custom DNS Servers">​</a></h3>
<p>To configure custom server addresses for dnsmasq instead of the ones affiliated with the host machine that the plugin is running on, add the <code>addresses</code> field:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">dns-cache</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    enabled          true</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    addresses        1.1.1.1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    addresses        2.2.2.2</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    tenant           dns-cache-plugin</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    ingress-service  dns-catcher</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">exit</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="redirecting-and-blocking-domains">Redirecting and blocking domains<a href="#redirecting-and-blocking-domains" class="hash-link" aria-label="Direct link to Redirecting and blocking domains" title="Direct link to Redirecting and blocking domains">​</a></h3>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="version-history">Version History<a href="#version-history" class="hash-link" aria-label="Direct link to Version History" title="Direct link to Version History">​</a></h5>
<table><thead><tr><th>Release</th><th>Modification</th></tr></thead><tbody><tr><td>1.1.0, 2.1.0</td><td><code>dns-cache &gt; redirect-domains</code> and <code>dns-cache &gt; block-domains</code> were introduced</td></tr></tbody></table>
<p>The DNS cache plugin will send all requests it processes to the list of servers provided in its configuration. Generally, these are configured as public DNS servers. However, many enterprises commonly host their own authoritative name server for their own domain (e.g., some-private-domain.com). The redirect-domains configuration lets administrators specify a distinct DNS server for a given domain, and SSR will use this when issuing queries for any host within that domain.</p>
<div class="language-config codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-config codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">config</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    authority</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        router  router1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            name       router1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            dns-cache</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                enabled true</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                tenant dns-cache-plugin</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                ingress-service dns-catcher</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                redirect-domains  some-private-domain.com</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    domain   some-private-domain.com</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    address  192.168.8.8</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                block-domains     block-domain.com</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">exit</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The <code>block-domains</code> configuration allows the DNS server to block those domains by replying back with NXDOMAIN indicating that the domain name doesn&#x27;t exist.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="custom-options">Custom Options<a href="#custom-options" class="hash-link" aria-label="Direct link to Custom Options" title="Direct link to Custom Options">​</a></h3>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="version-history-1">Version History<a href="#version-history-1" class="hash-link" aria-label="Direct link to Version History" title="Direct link to Version History">​</a></h5>
<table><thead><tr><th>Release</th><th>Modification</th></tr></thead><tbody><tr><td>3.3.1</td><td><code>dns-cache &gt; custom-options</code> was introduced</td></tr></tbody></table>
<p>The <code>custom-options</code> allows the user to configure additional dnsmasq options that are not exposed as support configuration options.</p>
<div class="language-config codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-config codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">config</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    authority</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        router  router</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            name       router</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            dns-cache</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#bfc7d5"><span class="token plain">                custom-options  domain-needed</span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#bfc7d5"><span class="token plain">                    name   domain-needed</span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#bfc7d5"><span class="token plain">                    value  yes</span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#bfc7d5"><span class="token plain">                exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">exit</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<table><thead><tr><th>Config</th><th>Description</th></tr></thead><tbody><tr><td>name</td><td>The name of the dnsmasq option</td></tr><tr><td>value</td><td>The value of the option</td></tr></tbody></table>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>warning</div><div class="admonitionContent_BuS1"><p>The <code>custom-option</code> is added to the dnsmasq config file; any invalid option could prevent the application from starting up.</p></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="third-party-software-and-licenses">Third Party Software and Licenses<a href="#third-party-software-and-licenses" class="hash-link" aria-label="Direct link to Third Party Software and Licenses" title="Direct link to Third Party Software and Licenses">​</a></h2>
<ul>
<li>dnsmasq (GNU GPL v2, v3)</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="troubleshooting">Troubleshooting<a href="#troubleshooting" class="hash-link" aria-label="Direct link to Troubleshooting" title="Direct link to Troubleshooting">​</a></h2>
<p>To verify that the services are running properly on the SSR router:</p>
<ul>
<li><code>systemctl status 128T-dns-cache-forwarder.service</code></li>
<li><code>systemctl status 128T-dns-cache-matcher.service</code></li>
</ul>
<p>Verify that the dns-cache network interface (default <code>dns-cache-intf</code>) is UP.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="release-notes">Release Notes<a href="#release-notes" class="hash-link" aria-label="Direct link to Release Notes" title="Direct link to Release Notes">​</a></h2>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>warning</div><div class="admonitionContent_BuS1"><p>The plugin must be updated to version 3.2.1 or later prior to <a href="/docs/intro_upgrade_considerations#plugin-configuration-generation-changes">upgrading the conductor to SSR version 5.4.0.</a></p></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="release-400">Release 4.0.0<a href="#release-400" class="hash-link" aria-label="Direct link to Release 4.0.0" title="Direct link to Release 4.0.0">​</a></h3>
<p>Image based install and upgrade (IBU) support for SSR 6.3.0.</p>
<p><strong>Release Date:</strong> Sep 30, 2024</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="release-350">Release 3.5.0<a href="#release-350" class="hash-link" aria-label="Direct link to Release 3.5.0" title="Direct link to Release 3.5.0">​</a></h3>
<p><strong>Release Date:</strong> Dec 21, 2023</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="new-features-and-improvements">New Features and Improvements<a href="#new-features-and-improvements" class="hash-link" aria-label="Direct link to New Features and Improvements" title="Direct link to New Features and Improvements">​</a></h4>
<ul>
<li><strong>PLUGIN-1842</strong> Reduce Conductor CPU time to apply salt states in large scale deployments</li>
</ul>
<p>By using Saltstack data files, the time to apply high states across all assets is significantly reduced</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="release-340">Release 3.4.0<a href="#release-340" class="hash-link" aria-label="Direct link to Release 3.4.0" title="Direct link to Release 3.4.0">​</a></h3>
<p><strong>Release Date:</strong> May 13, 2022</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="new-features-and-improvements-1">New Features and Improvements<a href="#new-features-and-improvements-1" class="hash-link" aria-label="Direct link to New Features and Improvements" title="Direct link to New Features and Improvements">​</a></h4>
<ul>
<li><strong>PLUGIN-1611</strong> Improve HA support for DNS based app-id</li>
</ul>
<p>The DNS cache plugin is enhanced to synchronize the cache between HA nodes to allow the DNS app-id plugin to consume and process DNS records on both nodes.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="release-331">Release 3.3.1<a href="#release-331" class="hash-link" aria-label="Direct link to Release 3.3.1" title="Direct link to Release 3.3.1">​</a></h3>
<p><strong>Release Date:</strong> Apr 29, 2022</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="new-features-and-improvements-2">New Features and Improvements<a href="#new-features-and-improvements-2" class="hash-link" aria-label="Direct link to New Features and Improvements" title="Direct link to New Features and Improvements">​</a></h4>
<ul>
<li><strong>PLUGIN-1208</strong> Enhance DNS Cache Plugin with An Advanced field</li>
</ul>
<p>Added support for new custom dnsmasq options that are otherwise not provided via direct configuration.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="issues-fixed">Issues Fixed<a href="#issues-fixed" class="hash-link" aria-label="Direct link to Issues Fixed" title="Direct link to Issues Fixed">​</a></h4>
<ul>
<li>
<p><strong>PLUGIN-1707</strong> dns-cache service stops working</p>
<p><em><strong>Resolution:</strong></em> The salt states were made more robust to handle certain failure conditions better. In addition, the router will monitor the status of the dns service and restart it as necessary.</p>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="release-322">Release 3.2.2<a href="#release-322" class="hash-link" aria-label="Direct link to Release 3.2.2" title="Direct link to Release 3.2.2">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="issues-fixed-1">Issues Fixed<a href="#issues-fixed-1" class="hash-link" aria-label="Direct link to Issues Fixed" title="Direct link to Issues Fixed">​</a></h4>
<ul>
<li>
<p><strong>PLUGIN-1452</strong> The dns-app-id plugin has lot of failures on system startup</p>
<p><em><strong>Resolution:</strong></em> The dns-app-id plugin will wait for dns-cache components to be initialized and running before starting up</p>
</li>
<li>
<p><strong>PLUGIN-1480</strong> Large configuration was causing plugin config generation to fail</p>
<p><em><strong>Resolution:</strong></em> The config generation logic for the plugin will handle config with long lines correctly</p>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="release-321">Release 3.2.1<a href="#release-321" class="hash-link" aria-label="Direct link to Release 3.2.1" title="Direct link to Release 3.2.1">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="issues-fixed-2">Issues Fixed<a href="#issues-fixed-2" class="hash-link" aria-label="Direct link to Issues Fixed" title="Direct link to Issues Fixed">​</a></h4>
<ul>
<li>
<p><strong>PLUGIN-1461</strong>  Config generation for the plugin failing in the Bonsai mode</p>
<p><em><strong>Resolution:</strong></em> Correctly handle the config generation for routers where the DNS cache plugin is not enabled during bonsai config generation</p>
</li>
<li>
<p><strong>PLUGIN-1367</strong>  DNS cache services constantly fail on system startup</p>
<p><em><strong>Resolution:</strong></em> The DNS cache systemd services will be deferred until the SSR services are running and stable.</p>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="release-310">Release 3.1.0<a href="#release-310" class="hash-link" aria-label="Direct link to Release 3.1.0" title="Direct link to Release 3.1.0">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="issues-fixed-3">Issues Fixed<a href="#issues-fixed-3" class="hash-link" aria-label="Direct link to Issues Fixed" title="Direct link to Issues Fixed">​</a></h4>
<ul>
<li><strong>PLUGIN-768</strong> Support the DNS Cache plugin in SSR versions <code>5.1.0</code> and greater.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="release-120-220">Release 1.2.0, 2.2.0<a href="#release-120-220" class="hash-link" aria-label="Direct link to Release 1.2.0, 2.2.0" title="Direct link to Release 1.2.0, 2.2.0">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="issues-fixed-4">Issues Fixed<a href="#issues-fixed-4" class="hash-link" aria-label="Direct link to Issues Fixed" title="Direct link to Issues Fixed">​</a></h4>
<ul>
<li>
<p><strong>PLUGIN-952</strong> FIB entry for dns-app-id based applications was deleted before the advertised TTL causing traffic to be blackholed</p>
<p><em><strong>Resolution:</strong></em> The TTL value advertised to the clients is made configurable and is also set to 1500 seconds by default to match the internal DNS cache timers.</p>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="release-110-210">Release 1.1.0, 2.1.0<a href="#release-110-210" class="hash-link" aria-label="Direct link to Release 1.1.0, 2.1.0" title="Direct link to Release 1.1.0, 2.1.0">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="new-features-and-improvements-3">New Features and Improvements<a href="#new-features-and-improvements-3" class="hash-link" aria-label="Direct link to New Features and Improvements" title="Direct link to New Features and Improvements">​</a></h4>
<ul>
<li><strong>PLUGIN-641</strong> Provide support for redirecting and blocking domains</li>
</ul>
<p>Added support for redirecting domains to a different upstream domain server. In addition, added support for blocking domains that the user should not be able to access.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="issues-fixed-5">Issues Fixed<a href="#issues-fixed-5" class="hash-link" aria-label="Direct link to Issues Fixed" title="Direct link to Issues Fixed">​</a></h4>
<ul>
<li>
<p><strong>PLUGIN-684</strong> DNS cache plugin fails to apply configuration on initial installation</p>
<p><em><strong>Resolution:</strong></em> Make config handling on the router dependent on a successful plugin router RPM installation.</p>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="release-101-201">Release 1.0.1, 2.0.1<a href="#release-101-201" class="hash-link" aria-label="Direct link to Release 1.0.1, 2.0.1" title="Direct link to Release 1.0.1, 2.0.1">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="issues-fixed-6">Issues Fixed<a href="#issues-fixed-6" class="hash-link" aria-label="Direct link to Issues Fixed" title="Direct link to Issues Fixed">​</a></h4>
<ul>
<li><strong>PLUGIN-402</strong> Ensure the application restarts with SSR</li>
</ul></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/plugin_dns_app_id"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">DNS App Id</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/plugin_gre"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">GRE</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#configuration" class="table-of-contents__link toc-highlight">Configuration</a><ul><li><a href="#notes-about-the-sample-configuration" class="table-of-contents__link toc-highlight">Notes about the Sample Configuration</a></li><li><a href="#custom-dns-servers" class="table-of-contents__link toc-highlight">Custom DNS Servers</a></li><li><a href="#redirecting-and-blocking-domains" class="table-of-contents__link toc-highlight">Redirecting and blocking domains</a></li><li><a href="#custom-options" class="table-of-contents__link toc-highlight">Custom Options</a></li></ul></li><li><a href="#third-party-software-and-licenses" class="table-of-contents__link toc-highlight">Third Party Software and Licenses</a></li><li><a href="#troubleshooting" class="table-of-contents__link toc-highlight">Troubleshooting</a></li><li><a href="#release-notes" class="table-of-contents__link toc-highlight">Release Notes</a><ul><li><a href="#release-400" class="table-of-contents__link toc-highlight">Release 4.0.0</a></li><li><a href="#release-350" class="table-of-contents__link toc-highlight">Release 3.5.0</a></li><li><a href="#release-340" class="table-of-contents__link toc-highlight">Release 3.4.0</a></li><li><a href="#release-331" class="table-of-contents__link toc-highlight">Release 3.3.1</a></li><li><a href="#release-322" class="table-of-contents__link toc-highlight">Release 3.2.2</a></li><li><a href="#release-321" class="table-of-contents__link toc-highlight">Release 3.2.1</a></li><li><a href="#release-310" class="table-of-contents__link toc-highlight">Release 3.1.0</a></li><li><a href="#release-120-220" class="table-of-contents__link toc-highlight">Release 1.2.0, 2.2.0</a></li><li><a href="#release-110-210" class="table-of-contents__link toc-highlight">Release 1.1.0, 2.1.0</a></li><li><a href="#release-101-201" class="table-of-contents__link toc-highlight">Release 1.0.1, 2.0.1</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="footer"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2024 Juniper Networks, Inc.</div></div></div></footer></div>
</body>
</html>