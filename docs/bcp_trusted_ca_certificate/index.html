<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="generator" content="Docusaurus">


<title data-react-helmet="true">Adding a Trusted Certificate | 128T Docs</title>

<meta data-react-helmet="true" http-equiv="x-ua-compatible" content="ie=edge"><meta data-react-helmet="true" property="og:title" content="128T Docs"><meta data-react-helmet="true" name="twitter:card" content="summary"><meta data-react-helmet="true" name="description" content="Any Linux system hosting 128T comes with public certificates of common public Certificate Authorities (CA) already loaded. This allows them to trust end host certificates signed by these CAs, or signed by designated signing authorities in a chain of trust back to the CAs, right out of the box."><meta data-react-helmet="true" property="og:description" content="Any Linux system hosting 128T comes with public certificates of common public Certificate Authorities (CA) already loaded. This allows them to trust end host certificates signed by these CAs, or signed by designated signing authorities in a chain of trust back to the CAs, right out of the box."><meta data-react-helmet="true" property="og:url" content="https://docs.128technology.com/docs/bcp_trusted_ca_certificate">

<link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico">


<link rel="stylesheet" href="/styles.71d4e6da.css">


<link rel="preload" href="/styles.defab6d8.js" as="script">

<link rel="preload" href="/runtime~main.87c20142.js" as="script">

<link rel="preload" href="/main.e19db0f1.js" as="script">

<link rel="preload" href="/1.57c5585a.js" as="script">

<link rel="preload" href="/2.8551fed1.js" as="script">

<link rel="preload" href="/57.2df2504e.js" as="script">

<link rel="preload" href="/20ac7829.3dc5d380.js" as="script">

<link rel="preload" href="/17896441.513c9240.js" as="script">

<link rel="preload" href="/3cb6dd64.2f7ebdca.js" as="script">

</head>
<body>

<div id="__docusaurus">
<nav class="navbar navbar--light navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a aria-current="page" class="navbar__brand active" href="/"><img class="navbar__logo" src="/img/128t_black.png" alt="128 Technology Logo"><strong class="navbar__title"></strong></a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/docs/intro_getting_started">Docs</a><a class="navbar__item navbar__link" target="_blank" rel="noopener noreferrer" href="https://community.128technology.com/home">Interchange</a><a class="navbar__item navbar__link" target="_blank" rel="noopener noreferrer" href="https://www.128technology.com/">Company</a><div class="navbar__search"><span aria-label="expand searchbar" role="button" class="search-icon" tabindex="0"></span><input type="search" id="search_input_react" placeholder="Search" aria-label="Search" class="navbar__search-input search-bar"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a aria-current="page" class="navbar__brand active" href="/"><img class="navbar__logo" src="/img/128t_black.png" alt="128 Technology Logo"><strong class="navbar__title"></strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/intro_getting_started">Docs</a></li><li class="menu__list-item"><a class="menu__link" target="_blank" rel="noopener noreferrer" href="https://community.128technology.com/home">Interchange</a></li><li class="menu__list-item"><a class="menu__link" target="_blank" rel="noopener noreferrer" href="https://www.128technology.com/">Company</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_1kjD"><div class="docSidebarContainer_1cYp"><div class="sidebar_1kLs"><div class="sidebarLogo_3ono"><img src="/img/128t_black.png" alt="128 Technology Logo"><strong></strong></div><div class="menu menu--responsive menu_w2sC"><button aria-label="Open Menu" class="button button--secondary button--sm menu__button" type="button"><svg class="sidebarMenuIcon_2vk4" xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 32 32" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">About</a><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Release Notes</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/release_notes/release_notes_4.2.0">4.2.0 Release Notes</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/release_notes/release_notes_4.2.1">4.2.1 Release Notes</a></li></ul></li><li class="menu__list-item"><a class="menu__link" href="/docs/CONTRIBUTING">Contributing</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Introduction</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/intro_getting_started">Getting Started</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/intro_installation">Installation</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/intro_ztp">QuickStart</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/intro_creating_bootable_iso">Creating Bootable USB</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Concepts</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/concepts_glossary">Glossary</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/concepts_application_discovery">Application Discovery</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/concepts_ha_theoryofoperation">HA - Theory of Operation</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/concepts_interface_types">Interface Types</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/concepts_linux_host_networking">Linux Host Networking</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/concepts_network_planes">Forwarding Planes</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/concepts_machine_communication">Machine Communication</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/concepts_session_timer">Session Timers</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Administration</a><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Configuration</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/config_basics">Basics</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/config_audit_log">Audit Log</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/config_dns_proxy">DNS Proxy</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/config_ldap">LDAP</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/config_ha">High Availability</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/config_non_forwarding_ha_interfaces">Non-forwarding HA Interfaces</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/config_adding_interfaces_to_ha_team">Adding Interfaces to HA Team Interface</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/config_transition_standalone_to_ha">Transitioning a Conductor from Standalone to HA</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/config_nat">NAT</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/config_snmp">SNMP</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/config_snmp_metrics">SNMP: User defined metrics</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/config_tenants">Tenants</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Troubleshooting</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/ts_applications">Application Troubleshooting</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/ts_ap_salt_minion">AP: Salt Minion</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/ts_cpu_spikes">CPU Spikes</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/ts_connecting_to_routers">Connecting to Routers</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/ts_forwarding_resource_pools">Forwarding Plane Resource Pools</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/ts_mac_uniqueness">MAC Address Uniqueness</a></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Events</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/events_overview">Alarm and Events</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/events_alarms">Alarms</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/events_events">Events</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Best Practices</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/bcp_conductor_deployment">Conductor Deployment</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/bcp_lte_peering">LTE Peering</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/bcp_service_and_service_policy_design">Service and Service Policy Design</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/bcp_tenants">Tenancy Design</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active" href="/docs/bcp_trusted_ca_certificate">Adding a Trusted Certificate</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">CLI Reference</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/cli_reference">Reference</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Plugins</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/plugin_monitoring_agent">Monitoring</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/plugin_gre">GRE Plugin</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">APIs</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/apis_rest">REST</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/apis_netconf">NETCONF</a></li></ul></li></ul></div></div></div><main class="docMainContainer_FFX1"><div class="padding-vert--lg"><div class="container"><div class="row"><div class="col docItemCol_2GOA"><div class="docItemContainer_2cwg"><article><header><h1 class="docTitle_1vWb">Adding a Trusted Certificate</h1></header><div class="markdown"><p>Any Linux system hosting 128T comes with public certificates of common public Certificate Authorities (CA) already loaded. This allows them to trust end host certificates signed by these CAs, or signed by designated signing authorities in a chain of trust back to the CAs, right out of the box.</p><p>However, many enterprises or service providers operate their own CA with no tie to public CA infrastructure. Should the 128T host need to connect to servers using certificates signed by these private CAs, the system will need to have the private CA&#x27;s certificates installed as a trusted certificate authority.</p><p>An example of this is a 128T host configured for LDAP over SSL, which must connect to an LDAP server that is using a host certificate signed by the private CA. If the 128T host is to trust the server when it opens a connection, it will require that it can has the private CA certificate, and any intermediate signing CA certificates.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="example-scenario"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#example-scenario" title="Direct link to heading">#</a>Example Scenario</h2><p>Let&#x27;s say our enterprise has a private certificate authority consisting of a root CA which delegates signing authority to a subordinate signing CA, and the signing CA signs end host certificates which are to be trusted.</p><p>The public certificate of the root CA in PEM form looks like:</p><div class="mdxCodeBlock_iHAB"><pre class="prism-code language-undefined codeBlock_19pQ"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><code class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">-----BEGIN CERTIFICATE-----</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">MIIDxjCCAq6gAwIBAgIBATANBgkqhkiG9w0BAQUFADB0MRMwEQYKCZImiZPyLGQB</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">...root CA contents...</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">EvWDvU72qH7pfC7TMeuvTOhnBmGsY/0RZnVbzG3SvE5/ZfWhjBK1MegQeHKVvZjl</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Ez9VDlefIZwjSA==</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">-----END CERTIFICATE-----</span></div></code></pre></div><p>The public certificate of the signing CA in PEM form looks like:</p><div class="mdxCodeBlock_iHAB"><pre class="prism-code language-undefined codeBlock_19pQ"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><code class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">-----BEGIN CERTIFICATE-----</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">MIIDzzCCAregAwIBAgIBAjANBgkqhkiG9w0BAQUFADB0MRMwEQYKCZImiZPyLGQB</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">...signing CA contents...</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">NB7FEenRXO+vevj0PVVaxJUNyJEqfQwTyH0GaQD3VlGXJheyMCzpW9Gx76aBOXz0</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">EyuS5Hop+ONX7G3qPTv8gQc8EQ==</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">-----END CERTIFICATE-----</span></div></code></pre></div><p>To load these on a 128T host, place the PEM formatted public key contents in <code>/etc/pki/ca-trust/source/anchors/</code>. For this example the root CA public certificate would be saved to <code>/etc/pki/ca-trust/source/anchors/myenterprise-root-ca.crt</code>, and the signing CA public certificate would be saved to <code>/etc/pki/ca-trust/source/anchors/myenterprise-signing-ca.crt</code>.</p><p>With the public certificate saved, run <code>sudo update-ca-trust</code> for the system to process and recognize them as trusted CA certificates.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="automation-of-ca-certificate-installation-using-salt"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#automation-of-ca-certificate-installation-using-salt" title="Direct link to heading">#</a>Automation of CA Certificate Installation Using Salt</h2><p>If you have a deployment of many 128T nodes which must all be loaded with private CA certificates, you can automate the distribution of the certificates using salt.</p><p>For example, the salt state <code>/srv/salt/trusted-ca-certificates.sls</code> with contents below would install the certificate as previously described:</p><div class="mdxCodeBlock_iHAB"><pre class="prism-code language-undefined codeBlock_19pQ"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><code class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">myenterprise root ca:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  file.managed:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    - name: /etc/pki/ca-trust/source/anchors/myenterprise-root-ca.crt</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    - contents: |</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        -----BEGIN CERTIFICATE-----</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        MIIDxjCCAq6gAwIBAgIBATANBgkqhkiG9w0BAQUFADB0MRMwEQYKCZImiZPyLGQB</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        ...root CA contents...</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        EvWDvU72qH7pfC7TMeuvTOhnBmGsY/0RZnVbzG3SvE5/ZfWhjBK1MegQeHKVvZjl</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        Ez9VDlefIZwjSA==</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        -----END CERTIFICATE-----</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">myenterprise signing ca:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  file.managed:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    - name: /etc/pki/ca-trust/source/anchors/myenterprise-signing-ca.crt</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    - contents: |</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        -----BEGIN CERTIFICATE-----</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        MIIDzzCCAregAwIBAgIBAjANBgkqhkiG9w0BAQUFADB0MRMwEQYKCZImiZPyLGQB</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        ...signing CA contents...</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        NB7FEenRXO+vevj0PVVaxJUNyJEqfQwTyH0GaQD3VlGXJheyMCzpW9Gx76aBOXz0</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        EyuS5Hop+ONX7G3qPTv8gQc8EQ==</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        -----END CERTIFICATE-----</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">update ca trust:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  cmd.run:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   - name: &#x27;update-ca-trust&#x27;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   - onchanges_any:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     - file: /etc/pki/ca-trust/source/anchors/myenterprise-signing-ca.crt</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     - file: /etc/pki/ca-trust/source/anchors/myenterprise-root-ca.crt</span></div></code></pre></div></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/128technology/docs/tree/master/docs/bcp_trusted_ca_certificate.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 40 40" style="margin-right:0.3em;vertical-align:sub"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col text--right"><em><small>Last updated on <time datetime="2020-03-19T15:03:11.000Z" class="docLastUpdatedAt_1sqk">3/19/2020</time></small></em></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/bcp_tenants"><h5 class="pagination-nav__link--sublabel">Previous</h5><h4 class="pagination-nav__link--label">« Tenancy Design</h4></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/cli_reference"><h5 class="pagination-nav__link--sublabel">Next</h5><h4 class="pagination-nav__link--label">Reference »</h4></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_TbNY"><ul class="contents contents__left-border"><li><a href="#example-scenario" class="contents__link">Example Scenario</a></li><li><a href="#automation-of-ca-certificate-installation-using-salt" class="contents__link">Automation of CA Certificate Installation Using Salt</a></li></ul></div></div></div></div></div></main></div></div><footer class="footer"><div class="container"><div class="text--center"><div>Copyright © 2020 128 Technology, Inc.</div></div></div></footer>
</div>

<script src="/styles.defab6d8.js"></script>

<script src="/runtime~main.87c20142.js"></script>

<script src="/main.e19db0f1.js"></script>

<script src="/1.57c5585a.js"></script>

<script src="/2.8551fed1.js"></script>

<script src="/57.2df2504e.js"></script>

<script src="/20ac7829.3dc5d380.js"></script>

<script src="/17896441.513c9240.js"></script>

<script src="/3cb6dd64.2f7ebdca.js"></script>


</body>
</html>