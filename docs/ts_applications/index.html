<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.ff31de0ff">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="128T Docs Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="128T Docs Blog Atom Feed">
<link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-167298415-2","auto"),ga("set","anonymizeIp",!0),ga("send","pageview")</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
<link rel="search" type="application/opensearchdescription+xml" title="128T Docs" href="/opensearch.xml"><title data-react-helmet="true">Application Troubleshooting | 128T Docs</title><meta data-react-helmet="true" property="og:url" content="https://docs.128technology.com/docs/ts_applications"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:version" content="current"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Application Troubleshooting | 128T Docs"><meta data-react-helmet="true" name="description" content="This guide describes the methodology behind troubleshooting issues on the 128T that apply to a specific application&#x27;s behavior. This technique is useful when the 128T is forwarding traffic, but end users complain about certain applications that are not behaving properly (e.g., performance is slow, certain applications don&#x27;t work)."><meta data-react-helmet="true" property="og:description" content="This guide describes the methodology behind troubleshooting issues on the 128T that apply to a specific application&#x27;s behavior. This technique is useful when the 128T is forwarding traffic, but end users complain about certain applications that are not behaving properly (e.g., performance is slow, certain applications don&#x27;t work)."><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://docs.128technology.com/docs/ts_applications"><link data-react-helmet="true" rel="alternate" href="https://docs.128technology.com/docs/ts_applications" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://docs.128technology.com/docs/ts_applications" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.b920482b.css">
<link rel="preload" href="/assets/js/runtime~main.fcf303a7.js" as="script">
<link rel="preload" href="/assets/js/main.6fb9b052.js" as="script">
</head>
<body>
<script>!function(){function e(e){document.documentElement.setAttribute("data-theme",e)}var t=function(){var e=null;try{e=localStorage.getItem("theme")}catch(e){}return e}();null!==t?e(t):window.matchMedia("(prefers-color-scheme: dark)").matches?e("dark"):(window.matchMedia("(prefers-color-scheme: light)").matches,e("light"))}()</script><div id="__docusaurus">
<div><a href="#main" class="skipToContent_OuoZ">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle" type="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><img src="/img/logo.svg" alt="Juniper Logo" class="themedImage_TMUO themedImage--light_4Vu1 navbar__logo"><img src="/img/logo_dark.png" alt="Juniper Logo" class="themedImage_TMUO themedImage--dark_uzRr navbar__logo"><strong class="navbar__title">Session Smart</strong></a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/docs/intro_getting_started">Docs</a><a href="https://community.128technology.com/home" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Interchange</a><a href="https://www.128technology.com/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Company</a><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img src="/img/logo.svg" alt="Juniper Logo" class="themedImage_TMUO themedImage--light_4Vu1 navbar__logo"><img src="/img/logo_dark.png" alt="Juniper Logo" class="themedImage_TMUO themedImage--dark_uzRr navbar__logo"><strong class="navbar__title">Session Smart</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/intro_getting_started">Docs</a></li><li class="menu__list-item"><a href="https://community.128technology.com/home" target="_blank" rel="noopener noreferrer" class="menu__link">Interchange</a></li><li class="menu__list-item"><a href="https://www.128technology.com/" target="_blank" rel="noopener noreferrer" class="menu__link">Company</a></li></ul></div></div></div></nav><div class="main-wrapper docs-wrapper doc-page"><div class="docPage_lDyR"><div class="docSidebarContainer_0YBq" role="complementary"><div class="sidebar_a3j0"><div class="menu menu--responsive thin-scrollbar menu_cyFh"><button aria-label="Open menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_iZzd" width="24" height="24" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">About</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/about_128t">128T</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/about_svr_savings">Secure Vector Routing Savings</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/about_releases">SSR Releases</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/about_support_policy">Software Support Policy</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/about_supported_platforms">Platform Support Policy</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/about_supported_drivers">Supported NICs and Drivers</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/about_certified_platforms">Certified Plus Platforms</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/about_security_policy">Security Policy</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/about_services_description">Services Description</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/CONTRIBUTING">Contributing</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Introduction</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/intro_getting_started">Getting Started with the 128T Networking Platform</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Deployment Considerations</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/intro_system_reqs">System Requirements</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Installation Process</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/intro_installation">Installation Overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/intro_downloading_iso">Downloading ISOs</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/intro_creating_bootable_usb">Creating Bootable USB</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/intro_installation_bootable_media">Conductor Interactive Installation</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/intro_basic_conductor_config">Configure the Conductor</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/intro_basic_router_config">Basic Router Configuration</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/intro_otp_iso_install">Router Installation Using OTP</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/intro_install_quickstart_otpiso">QuickStart from the OTP ISO</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Cloud Installations</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/intro_installation_aws">Installing from the AWS Marketplace</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/intro_installation_quickstart_aws">QuickStart Installation in AWS</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/intro_installation_azure">Installing in Azure</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/intro_initialize_HA_conductor">Conductor High Availability for Cloud Deployments</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Supporting Information - Appendix</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/intro_installation_installer">Manually Installing the 128T</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/legacy_OTP_install">Installing Using the Pre-5.0 Interactive ISO</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/intro_upgrade_considerations">Upgrade Considerations</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/intro_upgrading">Upgrading</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/intro_rollback">Rollback</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Concepts</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/concepts_application_discovery">Application Discovery</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/concepts_appid">Application Identification</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/concepts_EthOverSVR">Ethernet Over Secure Vector Routing</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/concepts_ha_theoryofoperation">HA - Theory of Operation</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/concepts_interface_types">Interface Types</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/concepts_kni">Kernel Network Interfaces</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/concepts_linux_host_networking">Linux Host Networking</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/concepts_learning_VRF_routes">Learning VRF Routes</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/concepts_network_planes">Forwarding Planes</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/concepts_metadata">128T Metadata</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/concepts_metrics">Metrics</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/concepts_machine_communication">Machine Communication</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/concepts_pcli">PCLI</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/concepts_session_timer">Session Timers</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/concepts_STEP">Service and Topology Exchange Protocol (STEP)</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/concepts_waypoint_ports">Waypoints</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/concepts_glossary">Data Model</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Administration</a><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Configuration</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config_basics">Configuration Management</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config_access_mgmt">Access Management</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config_asset_connection_resiliency">Asset Connection Resiliency</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config_bgp">Configuring BGP</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config_ospf">OSPF</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config_dscp_steering">Configuring DSCP Steering</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config_vrf_learning">VRF Learning</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config_audit_event">Audit Events</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config_dhcp">DHCP</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config_dns_proxy">DNS Proxy</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config_ldap">LDAP</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config_management_over_forwarding">Management over Forwarding</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config_domain-based_web_filter">Configuring Domain-based Web Filtering/Routing</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config_EthoSVR">Configuring Ethernet Over Secure Vector Routing</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config_flow_perf_mon">Inline Flow Performance Monitoring</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config_gre_tunnel">Native GRE Tunnels</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config_in-memory_metrics">In-Memory Metrics</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config_nat">NAT</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config_rate_limiting">Rate Limiting</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config_RBAC">Configuring Role-Based Access Control</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config_service_health">Service Health Learning and Fault Avoidance</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config_snmp">SNMP</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config_snmp_metrics">SNMP: User defined metrics</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config_static_hostname_mapping">Static Hostname Mappings</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config_STEP">Configuring Service and Topology Exchange Protocol (STEP)</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config_tenants">Tenants</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config_templates">Configuration Templates</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config_transport_encryption">Transport Based Encryption</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config_wan_assurance">Configuring WAN Assurance</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">High Availability</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config_ha">Dual Node High Availability</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config_dual_router_ha">Dual Router High Availability using iBGP</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config_ha_vrrp">Dual Router High Availability and VRRP</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config_non_forwarding_ha_interfaces">Non-forwarding HA Interfaces</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config_adding_interfaces_to_ha_team">Adding Interfaces to HA Team Interface</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config_transition_standalone_to_ha">Transitioning a Conductor from Standalone to HA</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Security</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/sec_adaptive_encrypt">Adaptive Encryption</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">How To</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/howto_conductor_migration">Conductor Migration</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/howto_extend_gui_nav">Extending GUI Nav</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/howto_lte">LTE and Dual LTE Configuration</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/howto_config_PPPoE">Configuring Dual PPPoE</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/howto_maintenance_mode">Maintenance Mode</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/howto_ms365">Microsoft 365</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/howto_trusted_ca_certificate">Adding a Trusted Certificate</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/howto_tune_bfd">Tuning BFD</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!" tabindex="0">Troubleshooting</a><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/docs/ts_applications">Application Troubleshooting</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/ts_ap_duplicate_assets">AP: Duplicate Asset ID Error</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/ts_ap_salt_minion">AP: Salt Minion</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/ts_cpu_spikes">CPU Spikes</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/ts_connecting_to_routers">Connecting to Routers</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/ts_forwarding_resource_pools">Forwarding Plane Resource Pools</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/ts_logs">Logs</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/ts_mac_uniqueness">MAC Address Uniqueness</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/ts_packet_capture">Packet Capture</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/ts_t1_troubleshooting">T1 Troubleshooting</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/ts_troubleshooting_vrf">Troubleshooting VRF</a></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Events</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/events_overview">Alarm and Events</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/events_alarms">Alarms</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/events_events">Events</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Best Practices</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/bcp_att_avpn_configuration">AT&amp;T AVPN Configuration</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/bcp_using_128T_as_ntp_server">Branch NTP Service</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/bcp_conductor_deployment">Conductor Deployment</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/bcp_per-adjacency_traffic_engineering">Per Adjacency Traffic Engineering</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/bcp_qos_msft_expressroute">ExpressRoute QoS Configuration</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/bcp_lte_peering">LTE Peering</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/bcp_monitoring_headends">Monitoring Head End Routers</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/bcp_salt_pillars">Saltstack at Scale With 128T</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/bcp_sdwan_design_guide">SD-WAN Design Guide</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/bcp_service_and_service_policy_design">Service and Service Policy Design</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/bcp_service-policy_defaults">Service Policy Baseline Defaults</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/bcp_tenants">Tenancy Design</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">CLI and Element Reference</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/cli_reference">Command Line Reference</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config_reference_guide">Configuration Element Reference</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/cli_stats_reference">Show Stats Reference</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Installer/Initializer Reference</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/installer_cli_reference">Installer Command Line Reference</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/installer_preferences">Installer Preferences File Reference</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/initializer_cli_reference">Initializer Command Line Reference</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/initializer_preferences">Initializer Preferences File Reference</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Plugins</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/plugin_intro">Introduction</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/plugin_aws_tgw_connect">AWS Transit Gateway Connect</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/plugin_bgp_community_services">BGP Community Services</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/plugin_cloud_ha">Cloud HA</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/plugin_dns_app_id">DNS App Id</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/plugin_dns_cache">DNS Cache</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/plugin_gre">GRE</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/plugin_ha_sync_redundancy">HA Sync Redundancy Plugin</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/plugin_http_probe">HTTP Probe Reachability Detection</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/plugin_icmp_reachability_detection">ICMP Reachability Detection</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/plugin_ipsec_client">IPsec Client</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/plugin_loopback_static_routes">Loopback Static Routes</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/plugin_m800_watchdog">M800 Watchdog</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/plugin_monitoring_agent">Monitoring Agent</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/plugin_mosh">Mosh</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/plugin_set_hostname">Set Hostname</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/plugin_sip_alg">SIP ALG</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/plugin_wireguard">Wireguard</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/plugin_kni_namespace_scripts">KNI Namespace Scripts</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">REST APIs</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/api_rest_4.2.0">128T-4.2.0</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Release Notes</a><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">SSR</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/release_notes_128t_5.4">5.4</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/release_notes_128t_5.3">5.3</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/release_notes_128t_5.2">5.2</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/release_notes_128t_5.1">5.1</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/release_notes_128t_5.0">5.0</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/release_notes_128t_4.5">4.5</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/release_notes_128t_4.4">4.4</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/release_notes_128t_4.3">4.3</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/release_notes_128t_4.2">4.2</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/release_notes_128t_4.1">4.1</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/release_notes_128t_4.0">4.0</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">SSR Installer</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/release_notes_128t_installer_3.1">3.1</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/release_notes_128t_installer_3.0">3.0</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/release_notes_128t_installer_2.7">2.7</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/release_notes_128t_installer_2.6">2.6</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/release_notes_128t_installer_2.5">2.5</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/release_notes_128t_installer_2.4">2.4</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/release_notes_128t_installer_2.3">2.3</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/release_notes_128t_installer_2.2">2.2</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/release_notes_128t_installer_2.1">2.1</a></li></ul></li></ul></li></ul></div></div></div><main class="docMainContainer_r8cw"><div class="container padding-vert--lg docItemWrapper_NJLN"><div class="row"><div class="col docItemCol_zHA2"><div class="docItemContainer_oiyr"><article><header><h1 class="docTitle_-X99">Application Troubleshooting</h1></header><div class="markdown"><p>This guide describes the methodology behind troubleshooting issues on the 128T that apply to a specific application&#x27;s behavior. This technique is useful when the 128T is forwarding traffic, but end users complain about certain applications that are not behaving properly (e.g., performance is slow, certain applications don&#x27;t work).</p><p>This document is for network administrators responsible for managing a deployed 128T Networking Platform.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="troubleshooting-steps"></a>Troubleshooting Steps<a class="hash-link" href="#troubleshooting-steps" title="Direct link to heading">#</a></h2><p>The basic approach used to troubleshoot applications on the 128T Networking Platform follows the set of steps below:</p><ol><li>Identify the requesting <em>tenant</em> that is attempting to use the application</li><li>Identify the <em>service</em> associated with the application.</li><li>Determine the 128T&#x27;s selected route for the application</li><li>Check the status of peers (for SVR traffic) or next hops (for non-SVR traffic)</li><li>Use the <code>service-ping</code> command to generate test traffic</li><li>Perform end user testing</li></ol><p>Each of these steps will be discussed in more detail in the sections that follow.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="identifying-the-requesting-tenant"></a>Identifying the Requesting Tenant<a class="hash-link" href="#identifying-the-requesting-tenant" title="Direct link to heading">#</a></h2><p>Each source of traffic that arrives at a 128T router is associated with a tenant; this may be either an administratively assigned tenant, or the default <em>global tenant</em>, which is used when no explicitly configured tenant exists. Tenancy is determined in one of several ways:</p><ol><li>By virtue of arriving on a <code>network-interface</code> that has a <code>tenant</code> configured.</li><li>By virtue of arriving on a <code>network-interface</code> that has one or more <code>neighborhood</code> elements configured, and those neighborhoods are referenced in <code>tenant &gt; member</code> configuration.</li><li>Via conveyance from an upstream 128T device that has encoded the source tenant information into 128T <em>metadata</em>. This tenancy assignment will not be discussed in this document, as the traffic routing decision is made by the first 128T router encountered by a client; thus, we can concern ourselves with items 1 and 2 exclusively.</li></ol><p>The configuration on a 128T – specifically, items 1 and 2 above – construct the <em>source lookup table</em> used by the 128T to affiliate inbound requests to tenants.</p><p>While it is possible to discern the contents of the source lookup table by examining the configuration (by checking the ingress <code>network-interface</code> and reviewing its tenant assignment and/or neighborhoods&#x27; members), the 128T administrative interfaces provide tools to make it simpler.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="determining-the-tenant-from-the-pcli"></a>Determining the Tenant from the PCLI<a class="hash-link" href="#determining-the-tenant-from-the-pcli" title="Direct link to heading">#</a></h3><p>The PCLI command <code>show tenant members</code> will display the contents of the <strong>Source Lookup Table</strong> for a given 128T router. An example of the output from <code>show tenant members</code> is seen here:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><div tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">admin@node1.router# show tenant members</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Mon 2019-11-25 17:36:37 UTC</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Node: AAPVA0962P1A</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">============ ========= ============== ================= ================== =================</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> Device I/F   VLAN ID   Network I/F    Network I/F IP    Source IP Prefix   Tenant</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">============ ========= ============== ================= ================== =================</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          2         0   ha-fabric      169.254.255.0     169.254.255.1/32   &lt;fabric&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          3         0   pos            10.0.0.1          0.0.0.0/0          cust</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          3         2   utility        10.128.0.1        0.0.0.0/0          utility.cust</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          3         3   voice          10.192.0.1        0.0.0.0/0          voice.cust</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          4         0   DIA            128.128.128.129   0.0.0.0/0          &lt;global&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     kni254         0   controlKniIf   169.254.127.126   0.0.0.0/0          _internal_</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        lte         0   lte            169.254.100.101   0.0.0.0/0          &lt;global&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">         t1         0   mpls-backup    169.254.128.128   0.0.0.0/0          &lt;global&gt;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="determining-the-tenant-from-the-gui"></a>Determining the Tenant from the GUI<a class="hash-link" href="#determining-the-tenant-from-the-gui" title="Direct link to heading">#</a></h3><p>From within the Conductor&#x27;s GUI, in the left hand pane, click on <strong>Routers</strong>. In the main information panel, a list of all of the managed routers is displayed. Click on the router of interest to display its information page. On the right hand side of the information page, click <strong>Debug</strong>. Within the Debug screen, click on the <strong>Source Tenant</strong> tab at the top of the screen. This will show the output of the source lookup table for the router – the same output as the PCLI&#x27;s <code>show tenant members</code> command. </p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="identifying-the-requested-service"></a>Identifying the Requested Service<a class="hash-link" href="#identifying-the-requested-service" title="Direct link to heading">#</a></h2><p>Sometimes, the service a user is attempting to access is self-evident (e.g., in cases where all traffic is forwarded using a &quot;quad zero&quot; service). In other cases it is not so clear. Follow the steps below if you need assistance in determining the <em>service</em> that particular inbound traffic is matching.</p><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>It is worth following these steps if you are not 100% certain of the service that is used for a given source/destination IP pair, since there may be unexpected &quot;better&quot; matches with more specific prefixes, or even &quot;worse&quot; matches if the service you&#x27;re expecting to see doesn&#x27;t match.</p></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="identifying-the-destination-ip-address-port-and-transport"></a>Identifying the Destination IP Address, Port, and Transport<a class="hash-link" href="#identifying-the-destination-ip-address-port-and-transport" title="Direct link to heading">#</a></h3><p>All service matching is performed based on the destination address of packets received by a 128T, inclusive of port and transport protocol. It is important to understand what address, port, and protocol are being transmitted by the client. There are several tools to use to glean this:</p><ul><li>Packet captures. Enabling packet captures on the ingress interface will definitively show what IP/port/proto is being sent by the client. Use a capture filter such as <code>host a.b.c.d</code> (e.g., <code>host 192.168.1.100</code>) on the ingress interface, to isolate the trace to a source with the IP address <code>a.b.c.d</code>.</li></ul><div class="admonition admonition-info alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>Remember</h5></div><div class="admonition-content"><p>When capturing packets on an interface that has a VLAN tag you must also include <code>and vlan</code> in your capture-filter.</p></div></div><ul><li>The output of <code>show sessions</code> from the PCLI (or the equivalent output in the GUI) will identify all traffic that is in the 128T&#x27;s <em>session table</em> – i.e., it has been through &quot;first packet processing&quot; on the 128T. Use the <code>grep</code> command to filter this traffic down to the source IP address, to see which destination(s) that client is attempting to access. From this list, winnow it down to the destination.</li></ul><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>If the traffic is not present in the output of <code>show sessions</code>, then it is either not reaching that 128T, failing to establish a session due to some configuration or software error, or was a very short-lived session and it has already expired from the session table.</p></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="determining-the-service-from-the-pcli"></a>Determining the Service from the PCLI<a class="hash-link" href="#determining-the-service-from-the-pcli" title="Direct link to heading">#</a></h3><p>If you were able to find the session in the output of the session table, it will positively identify the name of the service that is being accessed. Move on to the next step, Determinine the Selected Route.</p><p>If you were unable to find the session in the output of the session table, we&#x27;ll need to dig into the IP/port/protocol of the packet to see which service it should match.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="which-services-are-available"></a>Which Services Are Available?<a class="hash-link" href="#which-services-are-available" title="Direct link to heading">#</a></h4><p>From the PCLI, use the following command to identify which services are available to the tenant. For this example we&#x27;ll use the tenant <code>trusted</code>.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><div tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">show fib router newton | grep &quot; trusted&quot;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>The tenant name within quotes has a preceding space. That will let you isolate services that are specifically allowed by this tenant, and not any of its descendents (children, grandchildren, etc.).</p></div></div><p>This command will output a list of prefixes/transports/ports, sorted by IP address:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><div tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">admin@labsystem1.fiedler# show fib router newton | grep &quot; trusted&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">✔ Piping output...</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> 0.0.0.0/8            &lt;any&gt;   &lt;any&gt;   trusted       &lt;ControlMessageService&gt;    &lt;none&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> 1.0.0.0/8            &lt;any&gt;   &lt;any&gt;   trusted       internet                   108.26.188.1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> 1.0.0.1/32           53      udp     trusted       cloudflare-dns             108.26.188.1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> 1.1.1.1/32           53      udp     trusted       cloudflare-dns             108.26.188.1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> 2.0.0.0/7            &lt;any&gt;   &lt;any&gt;   trusted       internet                   108.26.188.1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> 4.0.0.0/6            &lt;any&gt;   &lt;any&gt;   trusted       internet                   108.26.188.1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> 8.0.0.0/7            &lt;any&gt;   &lt;any&gt;   trusted       internet                   108.26.188.1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> 10.128.200.0/24      &lt;any&gt;   &lt;any&gt;   trusted       becket-servicenet          10.172.170.61</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> 11.0.0.0/8           &lt;any&gt;   &lt;any&gt;   trusted       internet                   108.26.188.1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> 12.0.0.0/6           &lt;any&gt;   &lt;any&gt;   trusted       internet                   108.26.188.1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> ...</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="which-service-did-i-match"></a>Which Service Did I Match?<a class="hash-link" href="#which-service-did-i-match" title="Direct link to heading">#</a></h4><p>Note that the matching algorithm for the 128T will give preference to <em>transport and port</em>. That is, a fully qualified port/protocol match will be considered better than an exact IP address match with no port/protocol specified. By way of example, consider the following two configuration examples:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><div tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">service</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">       service-name    cloudflare-dns</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">       address         1.0.0.1/32</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">       address         1.1.1.1/32</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">exit</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                       </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">service</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">       service-name    all-dns-traffic</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">       address         0.0.0.0/0</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">       transport       udp</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">               protocol      udp</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">               port-range 53</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                       start-port    53</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">               exit</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">       exit</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">exit</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>Inbound traffic for <code>1.0.0.1</code> will match the <code>cloudflare-dns</code> service, and traffic for <code>8.8.8.8 UDP/53</code> will match the <code>all-dns-traffic</code> service. But traffic for <code>1.0.0.1 UDP/53</code> will <em>also</em> match the <code>all-dns-traffic</code> service; even though the IP address in the <code>cloudflare-dns</code> service is more specific, because the port and protocol are exact matches, this traffic will match the <code>all-dns-traffic</code> service.</p><p>The lookup algorithm is as follows:</p><ol><li>Perform the lookup with a &quot;fully qualified&quot; protocol and port (e.g., UDP/53).</li><li>If there is no hit, perform a lookup with a fully-qualified protocol and a wildcard port (e.g., UDP/*)</li><li>If there is no hit, perform a lookup with a fully wildcarded protocol and port</li></ol><p>This information is critical when trying to understand which service your inbound traffic matches.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="determine-the-selected-route"></a>Determine the Selected Route<a class="hash-link" href="#determine-the-selected-route" title="Direct link to heading">#</a></h2><p>Once you&#x27;ve positively identified the service that the client is requesting, we&#x27;ll see which route the 128T will use for that traffic.</p><p>For service-routed traffic (i.e., when there&#x27;s either an explicitly configured or a generated <code>service-route</code> for that <code>service</code> on the ingress router), you can use the <code>show load-balancer</code> tool within the PCLI to determine how the 128T will route the traffic. For natively-routed traffic, we&#x27;ll use the RIB to show us where to expect the traffic to be sent.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="service-routed-traffic"></a>Service-Routed Traffic<a class="hash-link" href="#service-routed-traffic" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><div tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">admin@labsystem1.fiedler# show load-balancer router newton service cloudflare-dns</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Tue 2019-12-03 16:49:04 EST</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">===============================================================================</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Service:  cloudflare-dns</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Strategy: hunt</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">+--------------------+-------------+------------+----------------+</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">|       Agent        | Destination |    Node    |    Service     |</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">+--------------------+-------------+------------+----------------+</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">| rte_cloudflare-dns |   &lt;empty&gt;   | labsystem2 | cloudflare-dns |</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">+--------------------+-------------+------------+----------------+</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Capacity:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">====== =========== ====== ======</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> Used         Max   Util   Rate</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">====== =========== ====== ======</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    1   unlimited           0/s</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Paths (count 1):</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">wan.0 gateway 128.128.128.128</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">======= ========= ====== ======= ====== ========= ========</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  Type   Quality   Cost   State   Loss   Latency   Jitter</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">======= ========= ====== ======= ====== ========= ========</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> local         0    N/A      up     0%       0ms      0ms</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>This <code>cloudflare-dns</code> service is a non-SVR service (the next-hop type is <code>local</code>). This traffic is using the <code>wan.0</code> egress interface and will be sent to the gateway router <code>128.128.128.128</code>.</p><p>Now we&#x27;ll look at an SVR service to see what the <code>load-balancer</code> output looks like:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><div tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">admin@labsystem1.fiedler# show load-balancer router becket service newton-https</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Tue 2019-12-03 16:50:56 EST</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">===============================================================================</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Service:  newton-https</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Strategy: hunt</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">+----------------------+-------------+------------+--------------+</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">|        Agent         | Destination |    Node    |   Service    |</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">+----------------------+-------------+------------+--------------+</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">| newton-https__newton |    newton   | labsystem4 | newton-https |</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">+----------------------+-------------+------------+--------------+</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Capacity:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">====== =========== ====== ======</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> Used         Max   Util   Rate</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">====== =========== ====== ======</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    0   unlimited           0/s</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Paths (count 2):</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">lte.0 gateway 128.128.128.129</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">======== ========= ====== ======= ====== ========= ========</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   Type   Quality   Cost   State   Loss   Latency   Jitter</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">======== ========= ====== ======= ====== ========= ========</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> router         0    N/A      up     0%     156ms      3ms</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">wan0.0 gateway 192.168.2.1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">======== ========= ====== ======= ====== ========= ========</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   Type   Quality   Cost   State   Loss   Latency   Jitter</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">======== ========= ====== ======= ====== ========= ========</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> router         0    N/A    down     0%       0ms      0ms</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">++ Warning: Path link is down</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>In this case, we can tell that it is an SVR route because the <code>Destination</code> is another router. Each of the paths (of which there are two) is of type <code>router</code>. The peer path over <code>wan0.0</code> is down, and thus we should expect the traffic to egress over the <code>lte.0</code> interface. You can also see the path statistics here (loss/latency/jitter) which can influence route selection in the event that a <code>service-policy</code> is applied to a service and requires specific ceilings for those values.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="check-the-selected-routes-health"></a>Check the Selected Route&#x27;s Health<a class="hash-link" href="#check-the-selected-routes-health" title="Direct link to heading">#</a></h2><p>Now that we&#x27;ve identified the tenant, the service, and the path that traffic will take, we&#x27;ll investigate the health of that path. The process for doing this varies slightly based on whether it is an SVR path or a non-SVR path.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="svr-traffic"></a>SVR Traffic<a class="hash-link" href="#svr-traffic" title="Direct link to heading">#</a></h3><p>When traffic is sent from one 128T router to another 128T <em>peer</em>, it is called Secure Vector Routing, or &quot;SVR.&quot;</p><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>128T routers can also send traffic to other 128T routers as &quot;native&quot; traffic – i.e., non-SVR. This is fairly uncommon, however.</p></div></div><p>The first thing to check when verifying a route&#x27;s health is to look at the output of <code>show peers</code>. Here&#x27;s an example:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><div tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">admin@labsystem1.fiedler# show peers router becket</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Tue 2019-12-03 18:12:03 EST</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">================== ============ =========== ================= ======== ================ </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> Peer               Node         Interface   Destination       Status   Hostname             </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">================== ============ =========== ================= ======== ================ </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> becket -&gt; newton   labsystem4   wan0        128.128.128.129   down     lab.128t.com   </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> becket -&gt; newton   labsystem4   lte         128.128.128.129   up       lab.128t.com </span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>As we saw in the output from <code>show load-balancer</code>, one of the peers between these two routers is down (over the <code>wan0</code> interface). The LTE peer path is up, however, so this is the one which will be used.</p><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>If all peer paths between a source and a destination are down, and there are no other routes, the 128T has a &quot;best effort&quot; route it will use if configured to do so.</p></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="service-ping"></a>Service Ping<a class="hash-link" href="#service-ping" title="Direct link to heading">#</a></h4><p>Once you have identified the tenant, service, and path, you can exercise that path using the PCLI&#x27;s built-in <code>service-ping</code> capability. While the syntax is a bit complex, it will use the exact same forwarding logic that the 128T control plane uses for making traffic forwarding decisions.</p><p>Here is an example of the <code>service-ping</code> at work:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><div tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">admin@labsystem1.fiedler# service-ping router becket node labsystem4 service-name newton-https tenant trusted 128.128.128.129</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">PING 128.128.128.129 56 bytes of data.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Ping from 128.128.128.129 (128.128.128.129): icmp_seq=0 ttl=48 time=136.176ms</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Ping from 128.128.128.129 (128.128.128.129): icmp_seq=1 ttl=48 time=112.438ms</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Ping from 128.128.128.129 (128.128.128.129): icmp_seq=2 ttl=48 time=119.685ms</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Ping from 128.128.128.129 (128.128.128.129): icmp_seq=3 ttl=48 time=100.758ms</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>You can pass the router, node, service, tenant, and destination IP addresses to the <code>service-ping</code> command. You cannot pass transport and port, however; as the <code>service-ping</code> command will exclusively generate ICMP packets.</p><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>The <code>service-ping</code> command will exercise the entire data path, including creating a session. You can see the effects of the <code>service-ping</code> in the output of <code>show sessions</code> – but you have to act fast (or have a second screen), since the session will expire five seconds after the last ping is sent.</p></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="checking-sessions"></a>Checking Sessions<a class="hash-link" href="#checking-sessions" title="Direct link to heading">#</a></h4><p>Each bidirectional flow of traffic processed by a 128T will have a unique <em>session ID</em> that persists for the duration of the session. (This is the leftmost column in the output of <code>show sessions</code>). When a 128T router sends SVR traffic to another 128T router, <strong>the session ID persists between the two devices</strong>. This greatly assists in troubleshooting, since you can identify the traffic of interest on the ingress device and see if the session arrives successfully at the next hop 128T.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="non-svr-traffic"></a>Non-SVR Traffic<a class="hash-link" href="#non-svr-traffic" title="Direct link to heading">#</a></h3><p>For non-SVR traffic, we can use the &quot;classic&quot; <code>ping</code> function to make sure the 128T can reach the outside world. If the 128T can reach its next hop gateway, but pings to the far end destination fail, then the issue should be taken up with the ISP providing the circuit.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><div tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">admin@labsystem1.fiedler# ping router becket node labsystem4 egress-interface wan0 1.0.0.1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">PING 1.0.0.1 56 bytes of data.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Ping from 1.0.0.1 (1.0.0.1): icmp_seq=0 ttl=57 time=114.491ms</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Ping from 1.0.0.1 (1.0.0.1): icmp_seq=1 ttl=57 time=138.771ms</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Ping from 1.0.0.1 (1.0.0.1): icmp_seq=2 ttl=57 time=138.339ms</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Ping from 1.0.0.1 (1.0.0.1): icmp_seq=3 ttl=57 time=138.002ms</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="perform-end-user-testing"></a>Perform End User Testing<a class="hash-link" href="#perform-end-user-testing" title="Direct link to heading">#</a></h2><p>Now that you have a sense of the type of application traffic you&#x27;re interested in troubleshooting, we&#x27;ll follow basic troubleshooting methodology:</p><ol><li><p>Coordinate a time with the end user reporting a problem to attempt to reproduce the issue.</p></li><li><p>Prior to testing, enable packet captures on the non-SVR interfaces (typically the LAN) at both the ingress 128T and the egress 128T devices. Use filters that are inclusive, but as narrow as possible to keep the signal:noise ratio high.</p><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>Typically filtering traffic based on source IP at the ingress 128T and destination IP at the egress 128T is the most useful, since this will sidestep NAT issues.</p></div></div></li><li><p>If possible, raise the log level on the ingress and egress 128T for the <code>highway</code> process. The command is <code>set log level debug highway</code> from the router&#x27;s PCLI. If the router is not busy, you can set the log level to <code>trace</code> instead of debug.</p><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>Do not raise the log level on busy routers (i.e., head end) to <code>trace</code>, and do not leave them running at <code>debug</code> for extended periods.</p></div></div></li><li><p>Use the command <code>write log message BEGINNING TEST 1</code> to cause the 128T to put an identifier into each log on the system.</p></li><li><p>Ask your user to run tests that demonstrate the failure.</p></li><li><p>Use the command <code>write log message ENDING TEST 1</code></p></li><li><p>Repeate steps 4-6 several times, incrementing the TEST numbers in your log message.</p></li><li><p>Lower the log levels on all devices, disable packet captures on all devices.</p></li><li><p>Retrieve the logs and captures from ingress and egress 128T systems.</p></li><li><p>Analyze the captures to follow the packet flow from ingress to egress 128T. Ensure that all messages received on the ingress router arrive and are forwarded by the egress router, and that the return path follows suit in the reverse direction.</p></li><li><p>If the packet captures and logs do not both contain the user&#x27;s test traffic, change the filter to improve the signal:noise ratio and re-test. <strong>Getting packet captures that correspond to logs that demonstrate the failure is the most important step.</strong></p></li></ol><p>If the 128T devices are confirmed to be forwarding traffic in both directions but the application is not working, then consult with the application provider to get their consultation. If the 128T devices are not forwarding traffic, continue troubleshooting.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="traffic-doesnt-leave-the-ingress-router"></a>Traffic Doesn&#x27;t Leave the Ingress Router<a class="hash-link" href="#traffic-doesnt-leave-the-ingress-router" title="Direct link to heading">#</a></h3><p>This is generally due to a configuration problem or a transient network issue (e.g., an interface failure). Look for the <code>BEGINNING TEST</code> messages in the logs and correlate them to the packet captures you took. Look for evidence of failure. For configurations that had been working previously but stopped (with no configuration changes), correlate the time at which traffic stopped working to any notable items in the router&#x27;s event history – viewable with the command <code>show events alarm</code>.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="traffic-doesnt-reach-the-egress-router"></a>Traffic Doesn&#x27;t Reach the Egress Router<a class="hash-link" href="#traffic-doesnt-reach-the-egress-router" title="Direct link to heading">#</a></h3><p>If traffic is processed by the ingress router and you believe it is forwarded out to the egress router but doesn&#x27;t arrive, perform additional testing as follows:</p><ol><li><p>Enable packet captures as was done previously, but also enable them on the WAN interface(s) of the ingress and egress 128T devices. Use <code>capture-filter</code> configuration that limits the traffic to only the two waypoints of the two routers in question.</p></li><li><p>Run the tests as was done previously. Investigate the <code>highway</code> logs or the output of the <code>show sessions</code> table while the traffic is in progress to see what waypoint allocations were assigned to that traffic flow. On the ingress router this will be indicated by the <code>rev</code> flow for the session.</p></li><li><p>Look for these ports in the WAN captures on both the ingress and egress routers. If you see them leaving the ingress router and not arriving at the egress router, then this should be taken to your ISP for assistance in troubleshooting.</p></li></ol><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="traffic-doesnt-leave-the-egress-router"></a>Traffic Doesn&#x27;t Leave the Egress Router<a class="hash-link" href="#traffic-doesnt-leave-the-egress-router" title="Direct link to heading">#</a></h3><p>As with issues with the ingress router, this is generally due to a configuration problem or a transient network issue (e.g., an interface failure). Look for the <code>BEGINNING TEST</code> messages in the logs and correlate them to the packet captures you took. Look for evidence of failure. For configurations that had been working previously but stopped (with no configuration changes), correlate the time at which traffic stopped working to any notable items in the router&#x27;s event history – viewable with the command <code>show events alarm</code>.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="support-services"></a>Support Services<a class="hash-link" href="#support-services" title="Direct link to heading">#</a></h2><p>128 Technology offers several options for support services to assist with troubleshooting. Users with a valid End User License Agreement can escalate support issues using our support system (telephone, email, web portal) as governed by our Service and Support Plan. We also host a peer-to-peer community portal, Interchange, for discussing issues that are less time sensitive or urgent.</p></div></article><div class="margin-vert--xl"><div class="row"><div class="col"></div><div class="col text--right"><em><small>Last updated on <time datetime="2022-01-19T20:39:37.000Z" class="lastUpdatedDate_nN9m">1/19/2022</time></small></em></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/howto_tune_bfd"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">« Tuning BFD Settings</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/ts_ap_duplicate_assets"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Automated Provisioner: Duplicate Asset ID Error »</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_vrFS thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#troubleshooting-steps" class="table-of-contents__link">Troubleshooting Steps</a></li><li><a href="#identifying-the-requesting-tenant" class="table-of-contents__link">Identifying the Requesting Tenant</a><ul><li><a href="#determining-the-tenant-from-the-pcli" class="table-of-contents__link">Determining the Tenant from the PCLI</a></li><li><a href="#determining-the-tenant-from-the-gui" class="table-of-contents__link">Determining the Tenant from the GUI</a></li></ul></li><li><a href="#identifying-the-requested-service" class="table-of-contents__link">Identifying the Requested Service</a><ul><li><a href="#identifying-the-destination-ip-address-port-and-transport" class="table-of-contents__link">Identifying the Destination IP Address, Port, and Transport</a></li><li><a href="#determining-the-service-from-the-pcli" class="table-of-contents__link">Determining the Service from the PCLI</a></li></ul></li><li><a href="#determine-the-selected-route" class="table-of-contents__link">Determine the Selected Route</a><ul><li><a href="#service-routed-traffic" class="table-of-contents__link">Service-Routed Traffic</a></li></ul></li><li><a href="#check-the-selected-routes-health" class="table-of-contents__link">Check the Selected Route&#39;s Health</a><ul><li><a href="#svr-traffic" class="table-of-contents__link">SVR Traffic</a></li><li><a href="#non-svr-traffic" class="table-of-contents__link">Non-SVR Traffic</a></li></ul></li><li><a href="#perform-end-user-testing" class="table-of-contents__link">Perform End User Testing</a><ul><li><a href="#traffic-doesnt-leave-the-ingress-router" class="table-of-contents__link">Traffic Doesn&#39;t Leave the Ingress Router</a></li><li><a href="#traffic-doesnt-reach-the-egress-router" class="table-of-contents__link">Traffic Doesn&#39;t Reach the Egress Router</a></li><li><a href="#traffic-doesnt-leave-the-egress-router" class="table-of-contents__link">Traffic Doesn&#39;t Leave the Egress Router</a></li></ul></li><li><a href="#support-services" class="table-of-contents__link">Support Services</a></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2022 Juniper Networks, Inc.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.fcf303a7.js"></script>
<script src="/assets/js/main.6fb9b052.js"></script>
</body>
</html>