<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.8">
<link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-167298415-2","auto"),ga("set","anonymizeIp",!0),ga("send","pageview")</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
<link rel="search" type="application/opensearchdescription+xml" title="128T Docs" href="/opensearch.xml"><title data-react-helmet="true">Open Shortest Path First (OSPF) | 128T Docs</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://docs.128technology.com/docs/config_ospf"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:version" content="current"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Open Shortest Path First (OSPF) | 128T Docs"><meta data-react-helmet="true" name="description" content="The goal of this guide is to provide guidance for implementing OSPF on the 128T Networking Platform. The OSPF feature enables a dynamic and flexible integration of SVR in customer networks."><meta data-react-helmet="true" property="og:description" content="The goal of this guide is to provide guidance for implementing OSPF on the 128T Networking Platform. The OSPF feature enables a dynamic and flexible integration of SVR in customer networks."><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://docs.128technology.com/docs/config_ospf"><link data-react-helmet="true" rel="alternate" href="https://docs.128technology.com/docs/config_ospf" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://docs.128technology.com/docs/config_ospf" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.db35fe54.css">
<link rel="preload" href="/assets/js/runtime~main.989e5062.js" as="script">
<link rel="preload" href="/assets/js/main.bcf580c1.js" as="script">
</head>
<body>
<script>!function(){function e(e){document.documentElement.setAttribute("data-theme",e)}var t=function(){var e=null;try{e=localStorage.getItem("theme")}catch(e){}return e}();null!==t?e(t):window.matchMedia("(prefers-color-scheme: dark)").matches?e("dark"):(window.matchMedia("(prefers-color-scheme: light)").matches,e("light"))}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="Juniper Logo" class="themedImage_1VuW themedImage--light_3UqQ"><img src="/img/logo_dark.png" alt="Juniper Logo" class="themedImage_1VuW themedImage--dark_hz6m"></div><b class="navbar__title">Session Smart</b></a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/docs/intro_getting_started">Docs</a><a href="https://community.128technology.com/home" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>Interchange<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><a href="https://www.128technology.com/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>Company<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="searchBox_1Doo"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_31aa"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_35hR" type="button"></button><aside class="docSidebarContainer_3Kbt"><div class="sidebar_15mo"><nav class="menu thin-scrollbar menu_Bmed"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">About</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Introduction</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Deployment Considerations</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Installation Process</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Cloud Installations</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Supporting Information - Appendix</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Concepts</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">Administration</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#" tabindex="0">Configuration</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/config_basics">Configuration Management</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/config_access_mgmt">Access Management</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/config_asset_connection_resiliency">Asset Connection Resiliency</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/config_bgp">Configuring BGP</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/config_vrf_learning">VRF Learning via BGP</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/config_reference_guide">Element Reference</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/config_audit_event">Audit Events</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/config_dhcp">DHCP</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/config_dns_proxy">DNS Proxy</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/config_ldap">LDAP</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/config_management_over_forwarding">Management over Forwarding</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/config_domain-based_web_filter">Configuring Domain-based Web Filtering/Routing</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/config_EthoSVR">Configuring Ethernet Over Secure Vector Routing</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/config_service_health">Service Health Learning and Fault Avoidance</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/config_gre_tunnel">Native GRE Tunnels</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/config_in-memory_metrics">In-Memory Metrics</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/config_ha">High Availability</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/config_dual_router_ha">High Availability (Dual Router)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/config_non_forwarding_ha_interfaces">Non-forwarding HA Interfaces</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/config_adding_interfaces_to_ha_team">Adding Interfaces to HA Team Interface</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/config_transition_standalone_to_ha">Transitioning a Conductor from Standalone to HA</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/config_nat">NAT</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/config_ospf">OSPF</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/config_rate_limiting">Rate Limiting</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/config_RBAC">Configuring Role-Based Access Control</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/config_snmp">SNMP</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/config_snmp_metrics">SNMP: User defined metrics</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/config_static_hostname_mapping">Static Hostname Mappings</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/config_STEP">Configuring Service and Topology Exchange Protocol (STEP)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/config_tenants">Tenants</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/config_templates">Configuration Templates</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Security</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">How To</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Troubleshooting</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Events</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Best Practices</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">CLI Reference</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Installer/Initializer Reference</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Plugins</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">REST APIs</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Release Notes</a></li></ul></nav></div></aside><main class="docMainContainer_3ufF"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><div class="tocCollapsible_1PrD theme-doc-toc-mobile tocMobile_3Hoh"><button type="button" class="clean-btn tocCollapsibleButton_2O1e">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Open Shortest Path First (OSPF)</h1></header><p>The goal of this guide is to provide guidance for implementing OSPF on the 128T Networking Platform. The OSPF feature enables a dynamic and flexible integration of SVR in customer networks.
Open Shortest Path First (OSPF) is an interior gateway protocol (IGP) that is most often used to dynamically manage network routes in large enterprise network. It determines routes  dynamically by obtaining information from other routers and advertising routes to other routers by way of Link State Advertisements (LSAs). The information gathered from the LSAs is used to construct a topology map of the network. This topology map is shared across routers in the network and used to populate the IP routing table with available routes.</p><p>Learning routes from OSPF simplifies enterprise configuration and integration with Secure  Vector Routing.</p><h2 class="anchor anchorWithStickyNavbar_31ik" id="prerequisites">Prerequisites<a aria-hidden="true" class="hash-link" href="#prerequisites" title="Direct link to heading">​</a></h2><p>This document presumes that the reader has a running 128T system and wants to add configuration to support OSPF. The running 128T system includes configuration for basic platform functionality (e.g., router, node, device-interface, network-interface) and basic routing configuration (e.g., tenants, services, etc.).</p><h2 class="anchor anchorWithStickyNavbar_31ik" id="ospf-configuration">OSPF Configuration<a aria-hidden="true" class="hash-link" href="#ospf-configuration" title="Direct link to heading">​</a></h2><p>As with BGP and static routes, the OSPF configuration exists within the routing configuration container in the 128T data model. First, we’ll configure the OSPF “instance” and give it the instance-id of 1.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">*admin@labsystem1.fiedler# config authority</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">*admin@labsystem1.fiedler (authority)# router burlington *admin@labsystem1.fiedler (router[name=burlington])# routing default-instance *admin@labsystem1.fiedler (routing[type=default-instance])# ospf 1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">*admin@labsystem1.fiedler (ospf[instance=1])# show</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">instance 1</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Next we’ll configure a router-id. Typically, the highest router-id on the network becomes the designated router for the network.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">*admin@labsystem1.fiedler (ospf[instance=1])# router-id 192.0.2.1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">*admin@labsystem1.fiedler (ospf[instance=1])# show</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">instance 1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">router-id 192.0.2.1</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Next we’ll configure an OSPF area and put interfaces into that area. The area is in the format x.x.x.x; for example, area 0 is configured as 0.0.0.0. Interfaces, as they are in other areas of the system, require the node name that contains the interface and the interface’s name.</p><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>If adding an interface that is part of a highly available set (e.g., they share the same MAC address and global ID), it is important that you only add one of the interfaces into the area. This will be sufficient to achieve high availability, as the 128T software will map the “shared” interface into the area.</p></div></div><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">*admin@labsystem1.fiedler (ospf[instance=1])# area 0.0.0.0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">*admin@labsystem1.fiedler (area[id=0.0.0.0])# interface labsystem5 lan0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">*admin@labsystem1.fiedler (interface[node=labsystem5][interface=lan0])# exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">*admin@labsystem1.fiedler (area[id=0.0.0.0])# exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">*admin@labsystem1.fiedler (ospf[instance=1])# show</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">instance 1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">router-id 192.0.2.1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">area 0.0.0.0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">id 0.0.0.0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">       interface  labsystem5 lan0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">       node       labsystem5</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">       interface lan0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">       exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">exit</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Next, we can optionally elect to have the 128T redistribute connected routes, static routes, BGP routes, or service routes into OSPF. This is done with one or more “redistribute” elements within the OSPF instance. (Within each of these redistribute elements you can specify metrics, metric-type, and policies to apply to the redistributed routes.)</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">*admin@labsystem1.fiedler (ospf[instance=1])# redistribute bgp</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">*admin@labsystem1.fiedler (redistribute[protocol=bgp])#</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">*admin@labsystem1.fiedler (redistribute[protocol=bgp])# up</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">*admin@labsystem1.fiedler (ospf[instance=1])# redistribute static</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">*admin@labsystem1.fiedler (redistribute[protocol=static])# up</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">*admin@labsystem1.fiedler (ospf[instance=1])# show</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">instance      1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">router-id     192.0.2.1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">area          0.0.0.0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">       id            0.0.0.0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">       interface  labsystem5 lan0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">       node       labsystem5</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">       interface  lan0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">       exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">redistribute  bgp</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">       protocol  bgp</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">redistribute  static</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">       protocol  static</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">exit</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>To enable service routing (service-route elements) to leverage the learned routes that a 128T has exchanged via OSPF (or any routing protocol), the “use-learned-routes” selector should be enabled in the appropriate service-route configuration.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">*admin@labsystem1.fiedler (router[name=burlington])# service-route rte_internet</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">*admin@labsystem1.fiedler (service-route[name=rte_internet])# use-learned-routes</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">*admin@labsystem1.fiedler (service-route[name=rte_internet])# show</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">name rte_internet</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">service-name internet</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">use-learned-routes</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p><img alt="OSPF Topology" src="/assets/images/config_ospf-9497231865a44ecb57896a1a5eac6366.png"></p><h2 class="anchor anchorWithStickyNavbar_31ik" id="configuration-verification">Configuration Verification<a aria-hidden="true" class="hash-link" href="#configuration-verification" title="Direct link to heading">​</a></h2><p>Several “show” commands are available in the PCLI to display information about the state of the OSP protocol. In addition to the “show ospf” branch of output, you will now see contributions to the RIB from OSPF in the output of “show rib”.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">admin@labsystem1.fiedler# show ospf</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">usage: ospf [area &lt;area-id&gt;] [router &lt;router&gt;] [&lt;verbosity&gt;]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Show general information about OSPF</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">keyword arguments:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">area   the area to filter OSPF information for</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">router the router to request OSPF information from</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">positional arguments:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">verbosity    detail | summary (default: summary)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">subcommands:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">border-routers    Show information about the OSPF border routers</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">database          Show OSPF database information</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">interfaces        Show information about the OSPF interfaces</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">neighbors         Show information about OSPF neighbors</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">routes            Show information about the OSPF routes</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h2 class="anchor anchorWithStickyNavbar_31ik" id="ospf-troubleshooting-steps">OSPF Troubleshooting Steps<a aria-hidden="true" class="hash-link" href="#ospf-troubleshooting-steps" title="Direct link to heading">​</a></h2><ol><li>Verify OSPF router information (show ospf detail or show ospf summary)<ol><li>Check the area</li><li>Check for adjacency</li></ol></li><li>Verify OSPF interface ( show ospf interface)</li><li>Verify OSPF neighbors (show ospf neighbors)<ol><li>Check state FULL for each neighbor</li><li>Verify which router is the designated router</li></ol></li><li>Verify RIB (show rib or show ospf routes)<ol><li>Routes beginning with O are OSPF routes</li></ol></li><li>Verify FIB ( show fib)<ol><li>FIB entry has the appropriate next hop</li></ol></li></ol><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">admin@128tconductor-node.128TConductor# show ospf router 128TRouter summary</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Sat 2018-10-20 17:48:29 UTC</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">================== =============== ========== ======== =========== ========= =========== ========</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Router              Router ID       ABR Type   ASBR     External    Area ID   Area Type   Area</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                                               Router   LSA Count                         Border</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                                                                                          Router</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">================== =============== ========== ======== =========== ========= =========== ========</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">128TRouter          10.52.113.128   unknown    true     84          0.0.0.0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Completed in 0.66 seconds</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">admin@128tconductor-node.128TConductor#</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">*admin@128tconductor-node.128TConductor# show ospf router 128TRouter detail</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Sat 2018-10-20 17:46:27 UTC</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">=============================================================</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> Router 128TRouter</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">=============================================================</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  Router ID:                             10.10.10.128</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  Deferred Shutdown:                     0.0 s</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  RFC1583 Compatible:                    false</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  Stub Advertisement Enabled:            false</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  Opaque Capable:                        false</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  Post-Start Enabled:                    0.0 s</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  Pre-Shutdown Enabled:                  0.0 s</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  SPF Schedule Delay:                    0.0 s</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  Holdtime Minimum:                      50 ms</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  Holdtime Maximum:                      5000 ms</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  Holdtime Multiplier:                   1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  SPF Last Executed:                     -1d 17h 56m 15s ago</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  SPF Last Duration:                     0 ms</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  SPF Has Not Run:                       false</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  SPF Timer Due:                         0.0 s</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  LSA Minimum Interval:                  5.0 s</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  LSA Minimum Arrival:                   1.0 s</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  Write Multiplier:                      20</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  Refresh Timer:                         10.0 s</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  ABR Type:                              unknown</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  ASBR Router:                           true</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  External LSA Count:                    84</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  External LSA Checksum:                 0x002c4b5a</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  Opaque AS LSA Count:                   0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  Opaque AS LSA Checksum:                0x00000000</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  Attached Area Count:                   1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  Adjacency Changes Logged:              false</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  Adjacency Changes Logged (all):        false</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  Area:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    Area ID:                             0.0.0.0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    Backbone:                            true</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    Interface Total Count:               1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    Interface Active Count:              1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    Fully Adjacent Neighbor Count:       1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    Authentication:                      none</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    Passing Fully Virtual Adjacencies:   0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    SPF Executed Count:                  4</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    LSA Count:                           3</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    LSA Router Count:                    2</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    LSA Router Checksum:                 0x0000c2b1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    LSA Network Count:                   1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    LSA Network Checksum:                0x0000c606</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    LSA Summary Count:                   0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    LSA Summary Checksum:                0x00000000</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    LSA ASBR Count:                      0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    LSA ASBR Checksum:                   0x00000000</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    LSA NSSA Count:                      0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    LSA NSSA Checksum:                   0x00000000</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    LSA Opaque Link Count:               0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    LSA Opaque Link Checksum:            0x00000000</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    LSA Opaque Area Count:               0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    LSA Opaque Area Checksum:            0x00000000</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Completed in 0.58 seconds</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">admin@128tconductor-node.128TConductor#</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">admin@128tconductor-node.128TConductor# show ospf database router 128TRouter</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Sat 2018-10-20 03:21:52 UTC</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">============ ============= ============= ============== ============= ===== ============</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> Router       Area ID       Type          LSA ID         Advertising   Age   Sequence</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                                                         Router              Number</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">============ ============= ============= ============== ============= ===== ============</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> 128TRouter   0.0.0.0       Router        10.10.10.128   10.10.10.128  617   0x8000000e</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> 128TRouter   0.0.0.0       Router        10.10.10.1     10.10.10.1    385   0x80000017</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> 128TRouter   0.0.0.0       Network       10.58.0.0      10.10.10.1    641   0x80000003</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> 128TRouter   unavailable   AS_External   10.0.0.0       10.10.10.128  607   0x80000006</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> 128TRouter   unavailable   AS_External   10.1.254.96    10.10.10.128  597   0x80000006</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> 128TRouter   unavailable   AS_External   10.10.60.0     10.10.10.128  597   0x80000006</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> 128TRouter   unavailable   AS_External   10.10.220.0    10.10.10.128  587   0x80000006</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> 128TRouter   unavailable   AS_External   10.10.221.0    10.10.10.128  607   0x80000006</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> 128TRouter   unavailable   AS_External   10.10.225.0    10.10.10.128  617   0x80000006</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> 128TRouter   unavailable   AS_External   10.10.226.0    10.10.10.128  607   0x80000006</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> 128TRouter   unavailable   AS_External   10.10.252.0    10.10.10.128  627   0x80000006</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> 128TRouter   unavailable   AS_External   10.52.0.0      10.10.10.128  627   0x80000006</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"></div><div class="col lastUpdated_13-_"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2021-10-26T20:19:33.000Z">10/26/2021</time></b></span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/config_nat"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">« <!-- -->NAT</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/config_rate_limiting"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Rate Limiting<!-- --> »</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#prerequisites" class="table-of-contents__link toc-highlight">Prerequisites</a></li><li><a href="#ospf-configuration" class="table-of-contents__link toc-highlight">OSPF Configuration</a></li><li><a href="#configuration-verification" class="table-of-contents__link toc-highlight">Configuration Verification</a></li><li><a href="#ospf-troubleshooting-steps" class="table-of-contents__link toc-highlight">OSPF Troubleshooting Steps</a></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2021 Juniper Networks, Inc.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.989e5062.js"></script>
<script src="/assets/js/main.bcf580c1.js"></script>
</body>
</html>