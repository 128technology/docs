<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.14">
<link rel="search" type="application/opensearchdescription+xml" title="128T Docs" href="/opensearch.xml"><title data-react-helmet="true">Configuring Domain-based Web Filtering/Routing | 128T Docs</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://docs.128technology.com/docs/config_domain-based_web_filter"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:version" content="current"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Configuring Domain-based Web Filtering/Routing | 128T Docs"><meta data-react-helmet="true" name="description" content="Configuring Domain-based Web Filtering allows users to create generic services for a broad range of domains that fall into a categories such as “Sports” (i.e.; espn.com, nfl.com, nhl.com, etc.) “Social Media” (Facebook, LinkedIn, etc), “Adult” and others. Categories are populated with known domains associated with the traffic type. Domain learning can be enabled so that the default domains are supplemented with discovered domains in each category. Additionally, users can modify the list of domains in a category."><meta data-react-helmet="true" property="og:description" content="Configuring Domain-based Web Filtering allows users to create generic services for a broad range of domains that fall into a categories such as “Sports” (i.e.; espn.com, nfl.com, nhl.com, etc.) “Social Media” (Facebook, LinkedIn, etc), “Adult” and others. Categories are populated with known domains associated with the traffic type. Domain learning can be enabled so that the default domains are supplemented with discovered domains in each category. Additionally, users can modify the list of domains in a category."><link data-react-helmet="true" rel="icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://docs.128technology.com/docs/config_domain-based_web_filter"><link data-react-helmet="true" rel="alternate" href="https://docs.128technology.com/docs/config_domain-based_web_filter" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://docs.128technology.com/docs/config_domain-based_web_filter" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.baea6de5.css">
<link rel="preload" href="/assets/js/runtime~main.aa9a519e.js" as="script">
<link rel="preload" href="/assets/js/main.46075bbe.js" as="script">
</head>
<body>
<script>!function(){function e(e){document.documentElement.setAttribute("data-theme",e)}var t=function(){var e=null;try{e=localStorage.getItem("theme")}catch(e){}return e}();null!==t?e(t):window.matchMedia("(prefers-color-scheme: dark)").matches?e("dark"):(window.matchMedia("(prefers-color-scheme: light)").matches,e("light"))}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_OuoZ">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="Juniper Logo" class="themedImage_TMUO themedImage--light_4Vu1"><img src="/img/logo_dark.png" alt="Juniper Logo" class="themedImage_TMUO themedImage--dark_uzRr"></div><b class="navbar__title">Session Smart</b></a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/docs/intro_getting_started">Docs</a><a href="https://community.128technology.com/home" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>Interchange<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><a href="https://www.128technology.com/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>Company<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="searchBox_Utm0"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_lDyR"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_i9tI" type="button"></button><aside class="docSidebarContainer_0YBq"><div class="sidebar_a3j0"><nav class="menu thin-scrollbar menu_cyFh"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/docs/about_128t">About</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/docs/intro_getting_started">Introduction</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/docs/intro_system_reqs">Deployment Considerations</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/docs/intro_installation">Installation Process</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/docs/intro_installation_aws">Cloud Installations</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/docs/intro_installation_installer">Supporting Information - Appendix</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/docs/concepts_application_discovery">Concepts</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active hasHref_TwRn" href="/docs/config_basics">Administration</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active hasHref_TwRn" tabindex="0" href="/docs/config_basics">Configuration</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/config_basics">Configuration Management</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/config_access_mgmt">Access Management</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/config_asset_connection_resiliency">Asset Connection Resiliency</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/config_bgp">Configuring BGP</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/config_ospf">OSPF</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/config_dscp_steering">Configuring DSCP Steering</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/config_vrf_learning">VRF Learning</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/config_audit_event">Audit Events</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/config_dhcp">DHCP</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/config_dns_proxy">DNS Proxy</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/config_ldap">LDAP</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/config_management_over_forwarding">Management over Forwarding</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/config_domain-based_web_filter">Configuring Domain-based Web Filtering/Routing</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/config_EthoSVR">Configuring Ethernet Over Secure Vector Routing</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/config_flow_perf_mon">Inline Flow Performance Monitoring</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/config_gre_tunnel">Native GRE Tunnels</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/config_in-memory_metrics">In-Memory Metrics</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/config_nat">NAT</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/config_rate_limiting">Rate Limiting</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/config_RBAC">Configuring Role-Based Access Control</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/config_service_health">Service Health Learning and Fault Avoidance</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/config_snmp">SNMP</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/config_snmp_metrics">SNMP: User defined metrics</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/config_static_hostname_mapping">Static Hostname Mappings</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/config_STEP">Configuring Service and Topology Exchange Protocol (STEP)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/config_tenants">Tenants</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/config_templates">Configuration Templates</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/config_transport_encryption">Transport Based Encryption</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/config_wan_assurance">Configuring WAN Assurance</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" tabindex="0" href="/docs/config_ha">High Availability</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" tabindex="0" href="/docs/sec_adaptive_encrypt">Security</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" tabindex="0" href="/docs/howto_conductor_migration">How To</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" tabindex="0" href="/docs/ts_applications">Troubleshooting</a></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/docs/events_overview">Events</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/docs/bcp_att_avpn_configuration">Best Practices</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/docs/cli_reference">CLI and Element Reference</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/docs/installer_cli_reference">Installer/Initializer Reference</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/docs/plugin_intro">Plugins</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/docs/api_rest_4.2.0">REST APIs</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/docs/release_notes_128t_5.4">Release Notes</a></div></li></ul></nav></div></aside><main class="docMainContainer_r8cw"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_zHA2"><div class="docItemContainer_oiyr"><article><div class="tocCollapsible_aw-L theme-doc-toc-mobile tocMobile_Tx6Y"><button type="button" class="clean-btn tocCollapsibleButton_zr6a">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Configuring Domain-based Web Filtering/Routing</h1></header><p>Configuring Domain-based Web Filtering allows users to create generic services for a broad range of domains that fall into a categories such as “Sports” (i.e.; espn.com, nfl.com, nhl.com, etc.) “Social Media” (Facebook, LinkedIn, etc), “Adult” and others. Categories are populated with known domains associated with the traffic type. Domain learning can be enabled so that the default domains are supplemented with discovered domains in each category. Additionally, users can modify the list of domains in a category. </p><p>Services can be defined based on categories to filter a broad set of related domains. Services can also be assigned to individual domains, and filtering performed in a more targeted manner. </p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="domain-categories">Domain Categories<a class="hash-link" href="#domain-categories" title="Direct link to heading">​</a></h2><p>Use the <code>show domain-categories</code> command to display a list of categories in the CLI. The data is stored in the /etc/128technology/application-categories directory. The default categories available are:</p><div class="codeBlockContainer_J+bg theme-code-block"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">Node: node1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">================= =============== ===================</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> Category          Session Count   Domain-name Count</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">================= =============== ===================</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> &lt;Uncategorized&gt;             403                  16</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> Advertiser                    0                   0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> Arts                          0                   0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> Business                     14                  13</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> CDN                           0                   0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> Computers                     1                   1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> Conferencing                  2                   1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> Cybersecurity                 0                   0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> DeviceIoT                     1                   1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> FileSharing                   0                   0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> Hosting                       0                   0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> Mail                          0                   0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> Recreation                    0                   0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> Reference                     0                   0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> Search                        0                   0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> SocialMedia                   0                   0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> SoftwareUpdates               0                   0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> StreamingMedia                0                   0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> Technology                   13                   6</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>To specify a Domain Name Category in the GUI, enter a category name into the Domain Name Category field. </p><p><img alt="Configuration Fields" src="/assets/images/dbwf_config_fields-26f670d3687b02fd92a5e37b108dba4c.png"></p><p>Active categories and domains are displayed on the Applications Seen page available on the Routers page, using the link in the top right corner. </p><p><img alt="Select Applications Seen" src="/assets/images/dbwf_appl_seen-febbfcb5d680ae6ae77e8223f8c18618.png"></p><p>Adding a new category or domain enters the information to the master list. The category and domain lists are generated when the configuration is committed. As new categories and domains are added, the configuration is updated, but the entire list is not regenerated. </p><p>Use the Generate Application Idenfication Categories toggle to generate a set of child services for each category. </p><p><img alt="Generate Application Identification Categories" src="/assets/images/dbwf_gen_categories-df0205d4f6502928b225a76dea4b7382.png"></p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="auto-update-the-domain-list">Auto-Update the Domain List<a class="hash-link" href="#auto-update-the-domain-list" title="Direct link to heading">​</a></h3><p>Application Identification is configured to automatically download updated domain and application datatsets weekly. The defaults (shown below) can be adjusted as necessary using the Application Data Updates panel for each router. </p><p><img alt="Application Data Updates" src="/assets/images/dbwf_app-id_updates-15b4adb6afddc7650eba0cd30d4effa5.png"></p><p>For additional information, see <a href="/docs/config_reference_guide#application-identification">application-identification.</a></p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="configuring-domain-based-web-filtering">Configuring Domain-based Web Filtering<a class="hash-link" href="#configuring-domain-based-web-filtering" title="Direct link to heading">​</a></h2><p>To enable Domain-based Web Filtering, you must configure a parent-level service under which your child service will nest. In many cases, you may have pieces of this procedure already in place, such as  the <em>internet</em> service configured as an example below. </p><p>The high level steps for configuring Domain-based Web Filtering are:</p><ul><li>Create a parent service</li><li>Create the child service to be filtered</li><li>Configure a Tenant</li><li>Create an access policy on the child service to filter traffic </li></ul><h3 class="anchor anchorWithStickyNavbar_y2LR" id="create-a-parent-level-service">Create a Parent-level Service<a class="hash-link" href="#create-a-parent-level-service" title="Direct link to heading">​</a></h3><p>In this example we create a broad service representing the internet.</p><ol><li>Log in to the Conductor GUI.</li><li>Select Configuration.</li><li>Scroll down to Services.</li><li>Select ADD next to Services.</li><li>Name the service internet, and select SAVE.</li><li>On the Service screen, verify that Enabled is set to true.</li><li>Set Scope to public.</li><li>To generate Application Identification Categories, set the toggle to True.</li><li>Scroll down to Service Addresses and select ADD.</li><li>Enter the IP address 0.0.0.0/0, and select SAVE.</li><li>At the top of the screen, select VALIDATE.</li></ol><div class="codeBlockContainer_J+bg theme-code-block"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">config</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    authority</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        service     internet</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            name          internet</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            scope         public</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            address       0.0.0.0/0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">exit</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_y2LR" id="create-child-services">Create Child Services<a class="hash-link" href="#create-child-services" title="Direct link to heading">​</a></h3><p>The child service classifies the traffic and provides the option to filter different domains and categories. We will create two services, one of which will be filtered out (denied).</p><h4 class="anchor anchorWithStickyNavbar_y2LR" id="create-the-first-service">Create the first service<a class="hash-link" href="#create-the-first-service" title="Direct link to heading">​</a></h4><ol><li>In the Services window, select ADD.</li><li>Name the first service <code>netflix.internet</code></li><li>On the Service screen, verify that Enabled is set to <strong>true</strong>.</li><li>Set share service routes to <strong>true</strong>.</li><li>Scroll down to Domain Name and enter the domain name using a wildcard to allow identification of all domain names; <code>*.netflix.com</code>.</li><li>In the Domain Name Category field, click ADD and select/add the domain category, Entertainment.</li></ol><h4 class="anchor anchorWithStickyNavbar_y2LR" id="create-the-second-service-the-one-to-be-filtered">Create the second service, the one to be filtered<a class="hash-link" href="#create-the-second-service-the-one-to-be-filtered" title="Direct link to heading">​</a></h4><ol><li>In the Services panel, select ADD.</li><li>Create a new service, <code>adult.internet</code>.</li><li>On the Service screen, verify that Enabled is set to <strong>true</strong>.</li><li>Set Scope to private.</li><li>Scroll down to the Domain Name Category field, click ADD and select/add the domain category, Adult. </li></ol><div class="codeBlockContainer_J+bg theme-code-block"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">config</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    authority</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        service     netflix.internet</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">           name         netflix.internet</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">           domain-name             *.netflix.com</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">           domain-name-category    Entertainment</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        service       adult.internet</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">           name            adult.internet</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">           domain-name-category    Adult </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">exit</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_y2LR" id="configure-the-tenant">Configure the Tenant<a class="hash-link" href="#configure-the-tenant" title="Direct link to heading">​</a></h3><p>A tenant must be configured in order to create an Access Policy. If you have not already configured a tenant for the service, refer to <a href="/docs/intro_basic_conductor_config#create-the-tenant">Create the Tenant</a> in the Conductor Configuration documentation.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="create-the-access-policy">Create the Access Policy<a class="hash-link" href="#create-the-access-policy" title="Direct link to heading">​</a></h3><p>Configure the access-policy to deny the relevant tenants.</p><ol><li>Scroll down to services.</li><li>Select adult.internet.</li><li>In the Basic Information panel, set the Tenant to adult.internet.</li><li>Scroll down to Access Policies and click ADD.</li><li>In the Source field, enter adult.internet (name of the service).</li><li>In the permission field, select deny.</li><li>Click Validate.</li><li>Return to the Configuration Home screen.</li><li>Click Commit.</li></ol><div class="codeBlockContainer_J+bg theme-code-block"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">config</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    authority</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        service    adult.internet</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            name                  adult.internet</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            domain-name-category  Adult</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            access-policy         adult.internet</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                source      adult.internet</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                permission  deny</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            access-policy         home</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                source      home</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                permission  deny</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h2 class="anchor anchorWithStickyNavbar_y2LR" id="configuring-learning-mode">Configuring Learning Mode<a class="hash-link" href="#configuring-learning-mode" title="Direct link to heading">​</a></h2><p>Learning mode is used to gather statistics about a domain or category. You can select the type of information to be gathered; Modules, HTTPS, TLS, or All. </p><p>To configure Learning Mode via the GUI:</p><ol><li>Select a router.</li><li>Scroll down to Router Settings and click Application Identification Settings.</li></ol><p><img alt="Application ID Setting Button" src="/assets/images/config_app_learning1-72dd58c24b6cbb8d025095b5d9ed16b0.png"></p><ol start="3"><li>Set <code>enabled</code> to <code>true</code>.</li></ol><p><img alt="App ID Basic Info" src="/assets/images/config_app_learning2-72167fe1cef84b77b735c18a05195a88.png"></p><ol start="4"><li>Under Application Identification, select ADD.</li><li>Select a type of application to identify. In most cases, selecting <code>all</code> will provide the best data set.</li></ol><p><img alt="App Id Dropdown" src="/assets/images/config_app_learning3-5159c398e120be2a1b7d9ebd25709713.png"></p><ol start="6"><li>Validate and Commit the changes. </li></ol><p>If Learning Mode is disabled, statistics are only gathered for categories/domains that are configured in a service.</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="show-commands">Show Commands<a class="hash-link" href="#show-commands" title="Direct link to heading">​</a></h2><p>The following show commands can be used from the CLI to display the list of domains and domain categories available and in use for Domain based web Filtering. </p><p><code>show domain-name</code>:</p><div class="codeBlockContainer_J+bg theme-code-block"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">admin@node1.test-home# show domain-names</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Thu 2021-06-24 22:03:28 EDT</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Retrieving from &#x27;node1.test-home&#x27;...</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Node: node1.test-home Page 1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">=================================== =============== ================= =====================</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> Domain                              Session Count   Category          Last Updated</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">=================================== =============== ================= =====================</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> ps16.pndsn.com                                 44   &lt;Uncategorized&gt;   2021-06-24 21:37:52</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> ps17.pndsn.com                                 40   &lt;Uncategorized&gt;   2021-06-24 21:37:52</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> ps9.pndsn.com                                  39   &lt;Uncategorized&gt;   2021-06-24 21:37:53</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> ps3.pndsn.com                                  36   &lt;Uncategorized&gt;   2021-06-24 21:37:52</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> ps14.pndsn.com                                 36   &lt;Uncategorized&gt;   2021-06-24 21:37:52</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> ps6.pndsn.com                                  30   &lt;Uncategorized&gt;   2021-06-24 21:37:52</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> ps7.pndsn.com                                  20   &lt;Uncategorized&gt;   2021-06-24 22:01:26</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> ps4.pndsn.com                                  20   &lt;Uncategorized&gt;   2021-06-24 21:37:52</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> ps15.pndsn.com                                 20   &lt;Uncategorized&gt;   2021-06-24 21:37:52</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> ps1.pndsn.com                                  20   &lt;Uncategorized&gt;   2021-06-24 21:37:52</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> ps2.pndsn.com                                  10   &lt;Uncategorized&gt;   2021-06-24 21:37:52</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> ps18.pndsn.com                                 10   &lt;Uncategorized&gt;   2021-06-24 21:38:15</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> ps13.pndsn.com                                 10   &lt;Uncategorized&gt;   2021-06-24 21:38:06</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> api-ws.mistsys.com                              3   Technology        2021-06-24 21:37:54</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> wss-primary.slack.com                           2   Business          2021-06-24 21:37:53</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> mtalk.google.com                                2   Conferencing      2021-06-24 07:49:11</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> ep-terminator-staging.mistsys.net               2   Technology        2021-06-24 20:44:12</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> mistsys.atlassian.net                           2   Technology        2021-06-24 21:37:53</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> beacons.gvt2.com                                1   Business          2021-06-24 22:01:15</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> *.immedia-semi.com                              1   DeviceIoT         2021-06-23 09:29:52</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> status-integration.mistsys.com                  1   Technology        2021-06-24 21:37:55</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> ssl.gstatic.com                                 1   Business          2021-06-24 22:00:21</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> slackb.com                                      1   Business          2021-06-24 22:00:21</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> slack.com                                       1   Business          2021-06-24 21:38:21</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> skydrive.wns.windows.com                        1   Business          2021-06-24 21:38:08</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> push.services.mozilla.com                       1   Business          2021-06-24 21:37:59</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> addon-juniper.goskope.com                       1   &lt;Uncategorized&gt;   2021-06-24 21:37:55</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> alive.github.com                                1   Technology        2021-06-24 21:37:54</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> beacons.gcp.gvt2.com                            1   Business          2021-06-24 22:00:21</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> beacons3.gvt2.com                               1   Business          2021-06-24 22:03:15</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> beacons4.gvt2.com                               1   Business          2021-06-24 22:02:15</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> courier.push.apple.com                          1   Business          2021-06-24 21:37:53</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> gateway-juniper.goskope.com                     1   &lt;Uncategorized&gt;   2021-06-24 21:38:01</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> github.com                                      1   Computers         2021-06-24 21:38:32</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> gs-loc.apple.com                                1   Business          2021-06-24 21:38:37</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> ibm.lakesidesoftware.com                        1   &lt;Uncategorized&gt;   2021-06-24 21:41:54</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> lp-push-server-770.lastpass.com                 1   Business          2021-06-24 21:37:57</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Completed in 0.09 seconds</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p><code>show domain-categories</code>: </p><div class="codeBlockContainer_J+bg theme-code-block"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">admin@node1.test-home# show domain-categories</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Thu 2021-06-24 22:03:45 EDT</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">✔ Retrieving domain-name categories...</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Node: node1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">================= =============== ===================</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> Category          Session Count   Domain-name Count</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">================= =============== ===================</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> &lt;Uncategorized&gt;             403                  16</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> Advertiser                    0                   0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> Arts                          0                   0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> Business                     14                  13</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> CDN                           0                   0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> Computers                     1                   1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> Conferencing                  2                   1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> Cybersecurity                 0                   0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> DeviceIoT                     1                   1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> FileSharing                   0                   0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> Hosting                       0                   0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> Mail                          0                   0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> Recreation                    0                   0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> Reference                     0                   0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> Search                        0                   0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> SocialMedia                   0                   0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> SoftwareUpdates               0                   0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> StreamingMedia                0                   0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> Technology                   13                   6</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Completed in 0.08 seconds</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"></div><div class="col lastUpdated_mt2f"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2022-01-26T21:04:34.000Z">1/26/2022</time></b></span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/config_management_over_forwarding"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Management over Forwarding</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/config_EthoSVR"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Configuring Ethernet Over Secure Vector Routing</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_vrFS thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#domain-categories" class="table-of-contents__link toc-highlight">Domain Categories</a><ul><li><a href="#auto-update-the-domain-list" class="table-of-contents__link toc-highlight">Auto-Update the Domain List</a></li></ul></li><li><a href="#configuring-domain-based-web-filtering" class="table-of-contents__link toc-highlight">Configuring Domain-based Web Filtering</a><ul><li><a href="#create-a-parent-level-service" class="table-of-contents__link toc-highlight">Create a Parent-level Service</a></li><li><a href="#create-child-services" class="table-of-contents__link toc-highlight">Create Child Services</a></li><li><a href="#configure-the-tenant" class="table-of-contents__link toc-highlight">Configure the Tenant</a></li><li><a href="#create-the-access-policy" class="table-of-contents__link toc-highlight">Create the Access Policy</a></li></ul></li><li><a href="#configuring-learning-mode" class="table-of-contents__link toc-highlight">Configuring Learning Mode</a></li><li><a href="#show-commands" class="table-of-contents__link toc-highlight">Show Commands</a></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2022 Juniper Networks, Inc.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.aa9a519e.js"></script>
<script src="/assets/js/main.46075bbe.js"></script>
</body>
</html>