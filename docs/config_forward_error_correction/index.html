<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.14">
<title data-react-helmet="true">Configuring Forward Error Correction | SSN Docs</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://docs.128technology.com/docs/config_forward_error_correction"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Configuring Forward Error Correction | SSN Docs"><meta data-react-helmet="true" name="description" content="Version History"><meta data-react-helmet="true" property="og:description" content="Version History"><link data-react-helmet="true" rel="icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://docs.128technology.com/docs/config_forward_error_correction"><link data-react-helmet="true" rel="alternate" href="https://docs.128technology.com/docs/config_forward_error_correction" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://docs.128technology.com/docs/config_forward_error_correction" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.21b25f22.css">
<link rel="preload" href="/assets/js/runtime~main.d04835af.js" as="script">
<link rel="preload" href="/assets/js/main.bf52851a.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_OuoZ">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="Juniper Logo" class="themedImage_TMUO themedImage--light_4Vu1"><img src="/img/logo_dark.png" alt="Juniper Logo" class="themedImage_TMUO themedImage--dark_uzRr"></div><b class="navbar__title">Session Smart</b></a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/docs/intro_getting_started">Docs</a><a href="https://community.juniper.net/answers/communities/community-home?CommunityKey=310d1a41-12fa-4627-9a99-880145a7c87c" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>Session Smart Community<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><a href="https://www.juniper.net/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>Company<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_lDyR"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_i9tI" type="button"></button><aside class="docSidebarContainer_0YBq"><div class="sidebar_a3j0"><nav class="menu thin-scrollbar menu_cyFh"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/docs/about_128t">About</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/docs/intro_getting_started">Introduction</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/docs/intro_system_reqs">Deployment Considerations</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/docs/intro_installation">Installation Process</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/docs/intro_installation_aws">Cloud Installations</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/docs/intro_installation_installer">Supporting Information - Appendix</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/docs/concepts_application_discovery">Concepts</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active hasHref_TwRn" href="/docs/config_basics">Administration</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active hasHref_TwRn" tabindex="0" href="/docs/config_basics">Configuration</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/config_basics">Configuration Management</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/config_access_mgmt">Access Management</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/config_asset_connection_resiliency">Asset Connection Resiliency</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/config_bgp">Configuring BGP</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/config_ospf">OSPF</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/config_dscp_steering">Configuring DSCP Steering</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/config_vrf_learning">VRF Learning</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/config_audit_event">Audit Events</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/config_dhcp">DHCP</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/config_dns_proxy">DNS Proxy</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/config_ldap">LDAP</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/config_forward_error_correction">Configuring Forward Error Correction</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/config_management_over_forwarding">Management over Forwarding</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/config_domain-based_web_filter">Web Filtering</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/config_app_ident">Application Identification</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/config_EthoSVR">Configuring Ethernet Over Secure Vector Routing</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/config_flow_perf_mon">Inline Flow Performance Monitoring</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/config_gre_tunnel">Native GRE Tunnels</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/config_in-memory_metrics">In-Memory Metrics</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/config_nat">NAT</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/config_rate_limiting">Rate Limiting</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/config_RBAC">Configuring Role-Based Access Control</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/config_service_health">Service Health Learning and Fault Avoidance</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/config_snmp">SNMP</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/config_snmp_metrics">SNMP: User defined metrics</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/config_static_hostname_mapping">Static Hostname Mappings</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/config_STEP">Configuring Service and Topology Exchange Protocol (STEP)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/config_tenants">Tenants</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/config_templates">Configuration Templates</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/config_transport_encryption">Transport Based Encryption</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/config_wan_assurance">Configuring WAN Assurance</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" tabindex="0" href="/docs/config_ha">High Availability</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" tabindex="0" href="/docs/sec_adaptive_encrypt">Security</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" tabindex="0" href="/docs/how_to_use_app_summary">How To</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" tabindex="0" href="/docs/ts_applications">Troubleshooting</a></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/docs/events_overview">Events</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/docs/bcp_att_avpn_configuration">Best Practices</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/docs/cli_reference">CLI and Element Reference</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/docs/installer_cli_reference">Installer/Initializer Reference</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/docs/plugin_intro">Plugins</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/docs/release_notes_128t_5.5">Release Notes</a></div></li></ul></nav></div></aside><main class="docMainContainer_r8cw"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_zHA2"><div class="docItemContainer_oiyr"><article><div class="tocCollapsible_aw-L theme-doc-toc-mobile tocMobile_Tx6Y"><button type="button" class="clean-btn tocCollapsibleButton_zr6a">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Configuring Forward Error Correction</h1></header><h4 class="anchor anchorWithStickyNavbar_y2LR" id="version-history">Version History<a class="hash-link" href="#version-history" title="Direct link to heading">​</a></h4><table><thead><tr><th>Release</th><th>Modification</th></tr></thead><tbody><tr><td>5.5.0</td><td>This feature was introduced</td></tr></tbody></table><h2 class="anchor anchorWithStickyNavbar_y2LR" id="overview">Overview<a class="hash-link" href="#overview" title="Direct link to heading">​</a></h2><p>Forward Error Correction (FEC) adds resiliency against packet loss between two points in the network. The SSR implements Forward Error Correction using parity packets and a &quot;round&quot; based approach. In each round, a set number of data packets are sent before a parity packet. The number of packets per round is based on the observed packet loss for the flow. When the loss is greater, fewer data packets are sent before a parity packet.  </p><p>FEC has two modes, Dynamic and Static. Each mode is enabled through the FEC profile.</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="dynamic-mode">Dynamic Mode<a class="hash-link" href="#dynamic-mode" title="Direct link to heading">​</a></h2><p>Dynamic is the default mode. In Dynamic mode, the behavior of FEC is adjusted for the currently observed packet loss. When no loss is detected, no parity packets are added to the transmission. When some amount of loss is found, the ratio necessary to heal the loss is calculated, and parity packets are added to the transmission. As the loss goes up or down, the loss ratio is adjusted automatically. </p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="sample-dynamic-configuration">Sample Dynamic Configuration<a class="hash-link" href="#sample-dynamic-configuration" title="Direct link to heading">​</a></h3><div class="codeBlockContainer_J+bg theme-code-block"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">        forward-error-correction-profile  fec-profile-dynmc</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            name                 fec-profile-dynmc</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            mode                 dynamic</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        exit</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><div class="codeBlockContainer_J+bg theme-code-block"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">        service-policy                    policy-a</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            name                              policy-a</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            service-class                     Standard</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            lb-strategy                       hunt</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            session-resiliency                none</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            packet-resiliency                 forward-error-correction</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            transport-state-enforcement       reset</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            forward-error-correction-profile  fec-profile-dynmc</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        exit</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h2 class="anchor anchorWithStickyNavbar_y2LR" id="static-mode">Static Mode<a class="hash-link" href="#static-mode" title="Direct link to heading">​</a></h2><p>In Static mode, you configure the loss ratio in the profile, and FEC uses this ratio regardless of link quality. This provides a consistent number of parity packets, but will increase overhead on links with no or low loss.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="sample-static-configuration">Sample Static Configuration<a class="hash-link" href="#sample-static-configuration" title="Direct link to heading">​</a></h3><div class="codeBlockContainer_J+bg theme-code-block"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">forward-error-correction-profile  fec-profile-statc</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            name                 fec-profile-statc</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            mode                 static</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            ratio                10</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><div class="codeBlockContainer_J+bg theme-code-block"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">        service-policy                    policy-a</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            name                              policy-a</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            service-class                     Standard</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            lb-strategy                       hunt</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            session-resiliency                none</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            packet-resiliency                 forward-error-correction</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            transport-state-enforcement       reset</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            forward-error-correction-profile  fec-profile-statc</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        exit</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h2 class="anchor anchorWithStickyNavbar_y2LR" id="how-to-use-forward-error-correction">How to Use Forward Error Correction<a class="hash-link" href="#how-to-use-forward-error-correction" title="Direct link to heading">​</a></h2><p>Forward Error Correction profiles are configured at the authority level and are not traffic-specific, which allows them to be used on any service and any router in the authority. </p><p>The order of configuration is not important, but the following process configures a dynamic FEC profile using the default values, and assigns it to a service for UDP traffic.</p><p>Create the Forware Error Correction profile.</p><div class="codeBlockContainer_J+bg theme-code-block"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">        forward-error-correction-profile  fec-profile-dynmc</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            name                 fec-profile-dynmc</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            mode                 dynamic</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        exit</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Create the <code>service-policy</code>, or add the FEC profile to an existing <code>service-policy</code> by specifying <code>forward-error-correction</code> under <code>packet-resiliency</code>.</p><div class="codeBlockContainer_J+bg theme-code-block"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">        service-policy                    policy-a</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            name                              policy-a</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            service-class                     Standard</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            lb-strategy                       hunt</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            session-resiliency                none</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            packet-resiliency                 forward-error-correction</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            transport-state-enforcement       reset</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            forward-error-correction-profile  fec-profile-dynmc</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        exit</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Create the <code>service</code>, or add the <code>service-policy</code> with the FEC profile to an existing service.</p><div class="codeBlockContainer_J+bg theme-code-block"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">        service         west</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            name            west</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            service-group   all</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            description     &quot;web service for everyone&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            enabled         true</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            scope           private</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            security        aes1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            transport   udp</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                protocol  udp</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            address         172.16.2.201/24</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            access-policy   red@0.0.0.0/0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                source      red@0.0.0.0/0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                permission  allow</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            service-policy  policy-a</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        exit</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h4 class="anchor anchorWithStickyNavbar_y2LR" id="static-profile">Static Profile<a class="hash-link" href="#static-profile" title="Direct link to heading">​</a></h4><p>Configuration and use of the static profile is similar to the process described above. The Static profile is configured as shown below. </p><div class="codeBlockContainer_J+bg theme-code-block"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">        forward-error-correction-profile  fec-static-profile-statc</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            name                 fec-static-profile-statc</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            mode                 static</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            low-loss-ratio       10</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_y2LR" id="disableenable-fec-from-the-neighborhood-configuration">Disable/Enable FEC from the Neighborhood Configuration<a class="hash-link" href="#disableenable-fec-from-the-neighborhood-configuration" title="Direct link to heading">​</a></h3><p>The neighborhood/adjacency configuration can be used to disable FEC in cases where the per packet overhead from FEC is unnecessary (for example, on a very high quality link). Toggle <code>packet-resiliency</code> (enable/disable) across a path, within the Neighborhood.</p><h4 class="anchor anchorWithStickyNavbar_y2LR" id="limitations">Limitations<a class="hash-link" href="#limitations" title="Direct link to heading">​</a></h4><p>Forward Error Correction has the following limitations:</p><ul><li><p>Forward Error Corrections carries a 4 byte per-packet overhead, and a parity packet overhead every N packets (Largest Packet Size in round + Packet Sizes Trailer (N * 2 bytes) + 4 bytes).</p></li><li><p>If you are going to be transferring large amounts of data at, or close to, the MTU size with FEC enabled, it is strongly recommended to enable <code>path-MTU</code>. This setting automatically adjusts the packet size, allowing space for the FEC headers and preventing fragmentation.</p></li><li><p>Additionally, this feature should not be used to diagnose link quality issues. If the packet loss is above a nominal amount, the extra data that FEC adds to the wire will likely cause extra loss, further decreasing link quality. </p></li><li><p>Packet retransmission will not work when FEC is enabled. </p></li></ul><h2 class="anchor anchorWithStickyNavbar_y2LR" id="troubleshooting">Troubleshooting<a class="hash-link" href="#troubleshooting" title="Direct link to heading">​</a></h2><p>Metrics for FEC are categorized into success and failure counters. Use the following counters to help diagnose any issues that arise.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="success-counters">Success Counters<a class="hash-link" href="#success-counters" title="Direct link to heading">​</a></h3><p>Use <a href="/docs/cli_stats_reference#show-stats-packet-processing-action-success-fec"><code>show stats packet-processing action success fec</code></a> to view the following success metrics.</p><h4 class="anchor anchorWithStickyNavbar_y2LR" id="add">Add<a class="hash-link" href="#add" title="Direct link to heading">​</a></h4><ul><li><strong>Parity-sent:</strong>  A parity packet was successfully sent.</li><li><strong>Trailer-added:</strong> An FEC trailer was successfully added to a packet.</li></ul><h4 class="anchor anchorWithStickyNavbar_y2LR" id="remove">Remove<a class="hash-link" href="#remove" title="Direct link to heading">​</a></h4><ul><li><strong>Trailer-removed:</strong> An FEC trailer was successfully removed from a packet.</li><li><strong>Regenerated-packet:</strong> A packet that was missing from a round was able to be regenerated via the parity packet.</li><li><strong>Completed-round:</strong> A round was able to be completed successfully. Either all packets arrived as expected, or a single packet was missing and the parity was able to regenerate the missing packet.</li><li><strong>Unnecessary-parity:</strong> A parity packet was received for a round in which no loss was experienced, and as such was unnecessary to be able to complete a round.</li><li><strong>Resync:</strong> The number of times the recipient of an FEC marked packet determined it was out of sync with the sender. This causes a flush of all cached information and a latch to the information contained in the packet.</li><li><strong>Out-of-order:</strong> The number of times a data packet was received out of order for the current round. This packet was allowed through.</li></ul><h3 class="anchor anchorWithStickyNavbar_y2LR" id="failure-counters">Failure Counters<a class="hash-link" href="#failure-counters" title="Direct link to heading">​</a></h3><p>Use <a href="/docs/cli_stats_reference#show-stats-packet-processing-action-failure-fec"><code>show stats packet-processing action failure fec</code></a> to view the following failure metrics. </p><h4 class="anchor anchorWithStickyNavbar_y2LR" id="add-1">Add<a class="hash-link" href="#add-1" title="Direct link to heading">​</a></h4><ul><li><strong>Allocation:</strong> The number of times a packet was dropped because memory for the FEC trailer could not be allocated.</li><li><strong>Buffer-expansion:</strong> The number of packets that were dropped because packet payload could not be expanded to fit a FEC header.</li></ul><h4 class="anchor anchorWithStickyNavbar_y2LR" id="remove-1">Remove<a class="hash-link" href="#remove-1" title="Direct link to heading">​</a></h4><ul><li><strong>Completed-round:</strong> The number of times a round was not able to be completed. Mainly occurs when the number of packets lost in a round is greater than one, and the parity packet cannot heal the round. However, if the scenario described under the Resync counter is detected, then this stat may also be incremented if the current round is not completed.</li><li><strong>Out-of-order:</strong> The number of packets dropped due to belonging to a recently completed FEC round.</li><li><strong>Unexpected-parity:</strong> The number of parity packets received when the recipient of FEC packets was not tracking a round.</li><li><strong>Parity-discard:</strong> The number of parity packets that were discarded because not enough data packets were received.  </li><li><strong>Invalid-payload-length:</strong> The number of packets dropped while attempting to process an FEC packet, but the payload was too short to accommodate an FEC header.</li></ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"></div><div class="col lastUpdated_mt2f"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2022-04-21T16:23:42.000Z">4/21/2022</time></b></span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/config_ldap"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">LDAP</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/config_management_over_forwarding"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Management over Forwarding</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_vrFS thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#overview" class="table-of-contents__link toc-highlight">Overview</a></li><li><a href="#dynamic-mode" class="table-of-contents__link toc-highlight">Dynamic Mode</a><ul><li><a href="#sample-dynamic-configuration" class="table-of-contents__link toc-highlight">Sample Dynamic Configuration</a></li></ul></li><li><a href="#static-mode" class="table-of-contents__link toc-highlight">Static Mode</a><ul><li><a href="#sample-static-configuration" class="table-of-contents__link toc-highlight">Sample Static Configuration</a></li></ul></li><li><a href="#how-to-use-forward-error-correction" class="table-of-contents__link toc-highlight">How to Use Forward Error Correction</a><ul><li><a href="#disableenable-fec-from-the-neighborhood-configuration" class="table-of-contents__link toc-highlight">Disable/Enable FEC from the Neighborhood Configuration</a></li></ul></li><li><a href="#troubleshooting" class="table-of-contents__link toc-highlight">Troubleshooting</a><ul><li><a href="#success-counters" class="table-of-contents__link toc-highlight">Success Counters</a></li><li><a href="#failure-counters" class="table-of-contents__link toc-highlight">Failure Counters</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2022 Juniper Networks, Inc.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.d04835af.js"></script>
<script src="/assets/js/main.bf52851a.js"></script>
</body>
</html>