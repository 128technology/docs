<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-concepts_machine_communication" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.1.1">
<title data-rh="true">Intra- and Inter-System Communication | SSN Docs</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://docs.128technology.com/docs/concepts_machine_communication"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Intra- and Inter-System Communication | SSN Docs"><meta data-rh="true" name="description" content="This document lists the different communication channels between nodes within a router, between peering routers, and between routers and their conductor. This is to provide:"><meta data-rh="true" property="og:description" content="This document lists the different communication channels between nodes within a router, between peering routers, and between routers and their conductor. This is to provide:"><link data-rh="true" rel="icon" href="/img/favicon.png"><link data-rh="true" rel="canonical" href="https://docs.128technology.com/docs/concepts_machine_communication"><link data-rh="true" rel="alternate" href="https://docs.128technology.com/docs/concepts_machine_communication" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.128technology.com/docs/concepts_machine_communication" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/kb/rss.xml" title="SSR Knowledge Base Articles RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/kb/atom.xml" title="SSR Knowledge Base Articles Atom Feed">
<link rel="alternate" type="application/json" href="/kb/feed.json" title="SSR Knowledge Base Articles JSON Feed"><link rel="stylesheet" href="/assets/css/styles.b50a304b.css">
<script src="/assets/js/runtime~main.c0e9f115.js" defer="defer"></script>
<script src="/assets/js/main.663e799e.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.png" alt="Juniper Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/logo_dark.png" alt="Juniper Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate"></b></a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/docs/intro_getting_started">Docs</a><a class="navbar__item navbar__link" href="/kb">Knowledge Base</a><a href="https://community.juniper.net/answers/communities/community-home?CommunityKey=310d1a41-12fa-4627-9a99-880145a7c87c" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Community<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://www.juniper.net/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Company<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20" aria-hidden="true"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/about_128t">About</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/intro_getting_started">Introduction</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/intro_system_reqs">Deployment Considerations</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/cc_fips_titlepage">SSR Common Criteria Install and Configuration</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/intro_installation">Installation Process</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/install_conductor_overview">Conductor Installation</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/intro_installation_bootable_media">Router Installation</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/intro_installation_image">Image-Based Installation</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/supported_cloud_platforms">Cloud Installations</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/intro_upgrade_considerations">Upgrades and Rollback</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/intro_installation_installer">Supporting Install Information - Appendix</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/docs/concepts_application_discovery">Concepts</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/concepts_application_discovery">Application Discovery</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/concepts_EthOverSVR">Ethernet Over Secure Vector Routing</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/concepts_ha_theoryofoperation">HA - Theory of Operation</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/concepts_interface_types">Interface Types</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/concepts_kni">Kernel Network Interfaces</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/concepts_linux_host_networking">Linux Host Networking</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/concepts_learning_VRF_routes">Learning VRF Routes</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/concepts_network_planes">Forwarding Planes</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/concepts_metadata">SSR Metadata</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/concepts_metrics">Metrics</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/concepts_machine_communication">Machine Communication</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/concepts_pcli">PCLI</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/concepts_session_timer">Session Timers</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/concepts_waypoint_ports">Waypoints</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/concepts_monitoring">Monitoring Agent</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/concepts_glossary">Glossary</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/concepts_fib">Understanding the Forwarding Information Base</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/wan_overview">WAN Assurance</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/config_basics">Administration</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/events_overview">Events</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/bcp_sdwan_design_guide">Best Practices</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/cli_reference">CLI and Element Reference</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/installer_cli_reference">Installer/Initializer Reference</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/plugin_intro">Plugins</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/release_notes_128t_6.2">Release Notes</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Concepts</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Machine Communication</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Intra- and Inter-System Communication</h1></header><p>This document lists the different communication channels between nodes within a router, between peering routers, and between routers and their conductor. This is to provide:</p>
<ul>
<li>A guide for port forwarding when deploying a conductor behind a firewall</li>
<li>A tool to help predict and manage the amount of ambient, management-plane bandwidth that SSR software will use during &quot;steady state.&quot; (This is useful when deploying devices that have limited use and/or expensive WAN connections, such as LTE.)</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="connections">Connections<a href="#connections" class="hash-link" aria-label="Direct link to Connections" title="Direct link to Connections">​</a></h2>
<p>Each running instance of SSR software (generically termed as a <em>node</em>) can exist in one of two <em>roles</em>: a <em>router</em> or a <em>conductor</em>. Furthermore, two <em>nodes</em> can be coupled together to form a highly available router or conductor. There are machine to machine (M2M) connections between the various topologies of nodes, which will be covered here. These include:</p>
<ul>
<li>Node to node connectivity within a highly available router</li>
<li>Router to router connectivity between peering routers</li>
<li>Router to conductor connectivity for management, adminstration, and orchestration</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="node-to-node-connectivity-high-availability">Node to Node Connectivity (High Availability)<a href="#node-to-node-connectivity-high-availability" class="hash-link" aria-label="Direct link to Node to Node Connectivity (High Availability)" title="Direct link to Node to Node Connectivity (High Availability)">​</a></h2>
<p>The vast majority of node-to-node connections, deployed as highly available systems, are done over directly connected interfaces between collocated machines. As such, bandwidth consumption and firewall management are not applicable. However, it is possible to geographically separate highly available nodes and have them communicate over a WAN, typically in the form of a data center interconnection.</p>
<div class="theme-admonition theme-admonition-important admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>important</div><div class="admonitionContent_BuS1"><p>Geographic distribution for highly available systems is only supported for nodes serving as conductors. Juniper does not support geographic distribution of nodes acting as routers.</p></div></div>
<p>When deploying geographically separated conductor nodes, the following requirements must be met:</p>
<ul>
<li>Latency less than 150ms</li>
<li>Packet loss less than 0.01%</li>
<li>No firewalling between the systems</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="router-to-router-connectivity">Router to Router Connectivity<a href="#router-to-router-connectivity" class="hash-link" aria-label="Direct link to Router to Router Connectivity" title="Direct link to Router to Router Connectivity">​</a></h2>
<p>Between peered routers, there are four different M2M connections that are established aside from forwarding plane traffic that is sent between them, and excluding routing protocol control plane traffic (BGP). Each of the connections is described here.</p>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_BuS1"><p>Peering SSR routers requires a successful exchange of BFD packets in order to initiate SVR connections. <em>At least one of the devices must be reachable at 1280/UDP.</em> Peering can be established if one device is behind a NAT that allocates dynamic ports, but not both. To peer devices that are both behind distinct NATs (not recommended), you must forward 1280/UDP to one or both of them.</p></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="bfd-peer-path-detection">BFD (Peer Path Detection)<a href="#bfd-peer-path-detection" class="hash-link" aria-label="Direct link to BFD (Peer Path Detection)" title="Direct link to BFD (Peer Path Detection)">​</a></h3>
<table><thead><tr><th>Direction</th><th>Port/Proto</th><th>Default Interval</th><th>Notes</th></tr></thead><tbody><tr><td>bidirectional</td><td>1280/UDP</td><td>1s</td><td>Frequency negotiated between devices by configuring <code>desired-tx-interval</code> and <code>required-min-rx-interval</code> settings. Client and server payloads are variable length, typically greater than 90 bytes. This is due to the presence of peer-name.</td></tr></tbody></table>
<p><a href="https://en.wikipedia.org/wiki/Bidirectional_Forwarding_Detection" target="_blank" rel="noopener noreferrer">BFD</a>, or Bidirectional Forwarding Detection (as defined in <a href="https://tools.ietf.org/html/rfc5880" target="_blank" rel="noopener noreferrer">RFC 5880</a>), is exchanged between SSR routers to detect SVR path availability. I.e., the successful, and continued exchange of BFD packets is a prerequisite for choosing that path to carry SVR traffic. For peer path detection, SSR uses the <em>asynchronous mode</em> of BFD.</p>
<p>The peering status between SSR devices is viewable using the PCLI command <code>show peers</code>.</p>
<p>The default timer values for BFD traffic are adequate for deployments where head end routers are managing 1,000 aggregate peer paths. For larger deployments, these values should be dilated.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="bfd-path-quality">BFD (Path Quality)<a href="#bfd-path-quality" class="hash-link" aria-label="Direct link to BFD (Path Quality)" title="Direct link to BFD (Path Quality)">​</a></h3>
<table><thead><tr><th>Direction</th><th>Port/Proto</th><th>Default Interval</th><th>Notes</th></tr></thead><tbody><tr><td>bidirectional</td><td>1280/UDP</td><td>10s</td><td>A ten (10) packet burst sent between SSR routers on each peer path. Client and server payloads are variable length, typically greater than 90 bytes. This is due to the presence of peer-name.</td></tr></tbody></table>
<p>Each SSR router will measure the path quality to its peer using the <em>echo mode</em> of BFD. It does so by sending a burst of ten packets every ten seconds over each peer path. These packets are echoed back from the remote SSR instance and returned to the point of origin. This allows the transmitter to accurately measure round trip time, and calculate packet loss and jitter (variability in interpacket arrival times).</p>
<p>The results of the path quality testing are available in the output of the PCLI command <code>show peers detail</code>.</p>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_BuS1"><p>The SSR will also <em>calculate</em> a Mean Opinion Score (MOS) for each peer path. This is derived from the loss, latency, and jitter values empirically determined by the Path Quality BFD packets.</p></div></div>
<p>In many common deployment scenarios, the SSR software is deployed as &quot;hub-and-spoke,&quot; where the traffic flows exclusively (or nearly exclusively) in one direction from branch deployments toward data centers. In these topologies, it is common and recommended to disable the asynchronous packets sent by the hub routers toward the edge routers, since the path selection critieria is not relevant.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="firewall-detector">Firewall Detector<a href="#firewall-detector" class="hash-link" aria-label="Direct link to Firewall Detector" title="Direct link to Firewall Detector">​</a></h3>
<table><thead><tr><th>Direction</th><th>Port/Proto</th><th>Client Payload (bytes)</th><th>Server Payload (bytes)</th><th>Default Interval</th><th>Notes</th></tr></thead><tbody><tr><td>bidirectional</td><td>1280 and 1283/TCP</td><td>6516</td><td>6516</td><td>300s</td><td>Rate can be adjusted by setting <code>udp-transform/detect-interval</code> or disabled by setting <code>udp-transform/mode</code> to <code>always-transform</code>.</td></tr></tbody></table>
<p>Each SSR periodically sends <em>firewall detector</em> packets on each peer path to determine if stateful firewalls exist on the peer path. Firewalls between SSR devices can interfere with SVR behavior; because of this, the firewall detector is used to automatically trigger a <em>UDP transform</em> feature, to carry SVR over UDP when firewalls would otherwise block TCP. The status of the firewall detector is show in the PCLI in the output of <code>show udp-transform</code>:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">admin@labsystem1.fiedler# show udp-transform router newton</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">============= ============ ============ ========== =========================================</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> Router Name   Node Name    Peer         Status     Reason(s)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">============= ============ ============ ========== =========================================</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> newton        labsystem2   becket       enabled    TCP SYN; Mid-flow; TCP SYN Jumbo;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                            becket       enabled    TCP SYN; TCP SYN Jumbo;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                            burlington   enabled    TCP SYN; Mid-flow; TCP SYN Jumbo;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The firewall detector function sends deliberately malformed, out-of-order, and missequenced packets in bursts of four packets every five minutes (by default). This time may be increased if you are certain there is no firewall on the path, nor any possibility of the path changing to include a stateful device. If you know there is a firewall device in the path, you can force the <code>udp-transform</code> to <code>always-transform</code>, which suppresses the firewall detector packets entirely.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="path-mtu-discovery">Path MTU Discovery<a href="#path-mtu-discovery" class="hash-link" aria-label="Direct link to Path MTU Discovery" title="Direct link to Path MTU Discovery">​</a></h3>
<table><thead><tr><th>Direction</th><th>Port/Proto</th><th>Client Payload (bytes)</th><th>Server Payload (bytes)</th><th>Default Interval</th><th>Notes</th></tr></thead><tbody><tr><td>bidirectional</td><td>1280/UDP</td><td>2945</td><td>90</td><td>600s</td><td>Interval is configurable within <code>path-mtu-discovery/interval</code>, or disabled <code>path-mtu-discovery/enabled</code>.</td></tr></tbody></table>
<p>Peering SSR routers will perform path MTU discovery on each peer path between each other. This test is run every ten (10) minutes by default, to adjust in the event of path changes between peering devices. During the test, SSR routers send packets of various sizes to discover the MTU of the path. However, in some government deployments the use of MTU discovery is not possible.</p>
<p>In order to accommodate these deployments where “ICMP Destination Unreachable - Fragmentation Needed” response messages are not generated (RFC1911 is not followed), three successive non-responses are considered equivalent to ICMP responses for the purposes of driving the algorithm with an inferred MTU.</p>
<p>The discovered MTU is viewable in the output of <code>show peers</code>.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="secure-vector-routing-traffic">Secure Vector Routing Traffic<a href="#secure-vector-routing-traffic" class="hash-link" aria-label="Direct link to Secure Vector Routing Traffic" title="Direct link to Secure Vector Routing Traffic">​</a></h3>
<p>By using SVR, the SSR creates sessions to transport directional, encrypted, tunnel-free traffic to its peers by creating engineered pathways between waypoints – IP addresses assigned to SSR interfaces. This is a significant departure from legacy tunnel-based approaches. For additional information about Waypoints and Secure Vector Routing (SVR) please refer to <a href="/docs/concepts_waypoint_ports">Concepts of Waypoints and Waypoint Ports</a>.</p>
<table><thead><tr><th>Direction</th><th>Port/Proto</th><th>Client Payload (bytes)</th><th>Server Payload (bytes)</th><th>Default Interval</th><th>Notes</th></tr></thead><tbody><tr><td>bidirectional</td><td>16385-65,533 <br> TCP/UDP</td><td>--</td><td>--</td><td>--</td><td>Native TCP sessions use TCP for transport. UDP is used for all other session types. Use <code>udp-transform</code> to force UDP transport.</td></tr></tbody></table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="protocol">Protocol<a href="#protocol" class="hash-link" aria-label="Direct link to Protocol" title="Direct link to Protocol">​</a></h4>
<p>By default, native TCP sessions use TCP, and UDP is used for all other session types. However, if firewall detection is enabled and <a href="#firewall-detector">triggered</a>, all traffic destined for a peer transitions to UDP.</p>
<p>You can manually configure traffic to use UDP for transport by modifying the <a href="/docs/config_reference_guide#udp-transform"><code>udp-transform</code></a> sub-element under <a href="/docs/config_reference_guide#adjacency">network-interface &gt; adjacency</a> or <a href="/docs/config_reference_guide#neighborhood">network-interface &gt; neighborhood</a>.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="port-ranges">Port Ranges<a href="#port-ranges" class="hash-link" aria-label="Direct link to Port Ranges" title="Direct link to Port Ranges">​</a></h4>
<p>The default range of ports used for configuring waypoints with SVR is 16,385 through 65,533. When sending traffic to a peer, the SSR will allocate an even numbered waypoint for itself and an odd numbered waypoint for its peer.</p>
<p>If you need to limit the ports or port range the SSR uses for receiving traffic, a <code>port-range</code> can be configured under the <code>neighborhood</code>. This tells peer SSRs to constrain the destination port range used when communicating with another router. Note that when manually specifying a port range, port numbers 1025 to 16383 can also be used.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="example">Example:<a href="#example" class="hash-link" aria-label="Direct link to Example:" title="Direct link to Example:">​</a></h4>
<p>Let&#x27;s say you want to utilize UDP for transport, but do not want to open up all the default ports. To limit the number of ports open on your firewall, you choose to specify a port range of 10,000 to 12,000. With each new waypoint, thousands of active sessions are added. Even with a small port range selection you can easily support many active users.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="ttl-handling">TTL Handling<a href="#ttl-handling" class="hash-link" aria-label="Direct link to TTL Handling" title="Direct link to TTL Handling">​</a></h3>
<p>Beginning with version 6.0.0, the SSR&#x27;s handling of SVR traffic can be configured to adjust the TTL value on hops between SSR routers. This adjustment can prevent situations where the TTL expires on packets flowing through multiple hops and then out to the Internet to their final destination.</p>
<table><thead><tr><th>Element</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>ttl-padding</td><td>enumeration</td><td>Valid values: 0-255, automatic, false. Default is 0. A numeric value is used to adjust the TTL of each packet destined to the next SSR. All subsequent routers continue to decrement the TTL value, but seeding at a higher value at each SSR hop minimizes the risk of TTL expiring mid-route. Automatic allows BFD traffic to help determine hops between SSR&#x27;s and adjusts padding automatically. False disables the feature.</td></tr></tbody></table>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="router-to-conductor-connectivity">Router to Conductor Connectivity<a href="#router-to-conductor-connectivity" class="hash-link" aria-label="Direct link to Router to Conductor Connectivity" title="Direct link to Router to Conductor Connectivity">​</a></h2>
<p>Each deployed router (and in many cases, individual nodes within that router) has multiple concurrent connections to each conductor node within its authority. The primary connection between a router and a conductor is using 930/TCP, which is an encrypted SSH connection that bears most router-to-conductor inter-process communication (IPC). The secondary connetion is that between a router&#x27;s <em>salt-minion</em> and a conductor&#x27;s <em>salt-master</em>, which leverages 4505-4506/TCP.</p>
<div class="theme-admonition theme-admonition-important admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>important</div><div class="admonitionContent_BuS1"><p>When deploying a firewall in front of your SSR conductor, it is important to ensure that ports 930/TCP, 4505/TCP, and 4506/TCP are forwarded to your conductor node.</p></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="software-version-check">Software Version Check<a href="#software-version-check" class="hash-link" aria-label="Direct link to Software Version Check" title="Direct link to Software Version Check">​</a></h3>
<table><thead><tr><th>Direction</th><th>Port/Proto</th><th>Client Payload (bytes)</th><th>Server Payload (bytes)</th><th>Default Interval</th><th>Notes</th></tr></thead><tbody><tr><td>to router</td><td>4506/TCP</td><td>950</td><td>2100</td><td>12hr</td><td>The payload size will be variable based on how many software versions are available for upgrade.</td></tr></tbody></table>
<p>Every twelve (12) hours, the conductor will query the router to see which versions it is eligible to download. This value is not configurable.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="alarms">Alarms<a href="#alarms" class="hash-link" aria-label="Direct link to Alarms" title="Direct link to Alarms">​</a></h3>
<table><thead><tr><th>Direction</th><th>Port/Proto</th><th>Client Payload (bytes)</th><th>Server Payload (bytes)</th><th>Default Interval</th><th>Notes</th></tr></thead><tbody><tr><td>to conductor</td><td>930/TCP</td><td>214 (est.)</td><td>150</td><td>variable</td><td>The payload size and frequency of alarms sent from a router to a conductor is variable based on the types and frequencies of alarms.</td></tr></tbody></table>
<p>Alarms are sent by every managed router node to the conductor using a secure socket. The payload exchanged is dependent on the frequency and count of alarms that are sent.</p>
<p>Alarms are shown on the GUI of the conductor as well as via the PCLI command <code>show alarms</code>.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="site-wide-entitlement">Site-Wide Entitlement<a href="#site-wide-entitlement" class="hash-link" aria-label="Direct link to Site-Wide Entitlement" title="Direct link to Site-Wide Entitlement">​</a></h3>
<table><thead><tr><th>Direction</th><th>Port/Proto</th><th>Client Payload (bytes)</th><th>Server Payload (bytes)</th><th>Default Interval</th><th>Notes</th></tr></thead><tbody><tr><td>to conductor</td><td>930/TCP</td><td>182 (est.)</td><td>0</td><td>300s</td><td>The payload size is variable based on the name of the device transmitting the entitlement data.</td></tr></tbody></table>
<p>Each router relays its utilization data to the conductor every five minutes, to render it on the conductor UI as part of the conductor&#x27;s <em>entitlement</em> graph. This value is not configurable.</p>
<p>The current entitlement usage is shown in the device GUI as well as the output of the PCLI command <code>show entitlement</code>.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="conductorasset-keepalives">Conductor/Asset Keepalives<a href="#conductorasset-keepalives" class="hash-link" aria-label="Direct link to Conductor/Asset Keepalives" title="Direct link to Conductor/Asset Keepalives">​</a></h3>
<table><thead><tr><th>Direction</th><th>Port/Proto</th><th>Client Payload (bytes)</th><th>Server Payload (bytes)</th><th>Default Interval</th><th>Notes</th></tr></thead><tbody><tr><td>to conductor</td><td>4505/TCP</td><td>0</td><td>0</td><td>10s (client), 20s (server)</td><td>TCP keepalive ACKs only</td></tr></tbody></table>
<p>The TCP socket between the router node&#x27;s <em>salt-minion</em> and the conductor&#x27;s <em>salt-master</em> is refreshed periodically to ensure that the minion/master connectivity persists. This value is not configurable.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="key-exchangesecurity-rekeying">Key Exchange/Security Rekeying<a href="#key-exchangesecurity-rekeying" class="hash-link" aria-label="Direct link to Key Exchange/Security Rekeying" title="Direct link to Key Exchange/Security Rekeying">​</a></h3>
<table><thead><tr><th>Direction</th><th>Port/Proto</th><th>Client Payload (bytes)</th><th>Server Payload (bytes)</th><th>Default Interval</th><th>Notes</th></tr></thead><tbody><tr><td>to conductor</td><td>930/TCP</td><td>150</td><td>294</td><td>none</td><td>Variable based on configured <code>rekey-interval</code> and the number of <code>security</code> configuration elements.</td></tr></tbody></table>
<p>The conductor orchestrates a periodic key exchange when the <code>authority &gt; rekey-interval</code> is changed from its default value of <code>never</code>. When set, each router will receive a key from conductor at the defined interval for each <code>security</code> element configured.</p>
<p>The status for the key exchange and rekeying process is shown in the output of the PCLI command <code>show security key-status</code>.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="asset-keepalives">Asset Keepalives<a href="#asset-keepalives" class="hash-link" aria-label="Direct link to Asset Keepalives" title="Direct link to Asset Keepalives">​</a></h3>
<table><thead><tr><th>Direction</th><th>Port/Proto</th><th>Client Payload (bytes)</th><th>Server Payload (bytes)</th><th>Default Interval</th><th>Notes</th></tr></thead><tbody><tr><td>bidirectional</td><td>4506/TCP</td><td>514</td><td>84</td><td>1s</td><td></td></tr></tbody></table>
<p>The asset keepalive messages are used to ensure persistent connectivity between a router&#x27;s <em>minion</em> and the corresponding <em>master</em> running on its conductor(s). The asset&#x27;s connection state is viewable using the <code>show assets</code> command within the PCLI on the conductor.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="shell-connect">Shell <code>connect</code><a href="#shell-connect" class="hash-link" aria-label="Direct link to shell-connect" title="Direct link to shell-connect">​</a></h3>
<table><thead><tr><th>Direction</th><th>Port/Proto</th><th>Client Payload (bytes)</th><th>Server Payload (bytes)</th><th>Default Interval</th><th>Notes</th></tr></thead><tbody><tr><td>bidirectional</td><td>930/TCP</td><td>104</td><td>104</td><td>20s (client), 5s (server)</td><td>Amount of data exchanged is largely dependent on administrator activity once connected to a remote router.</td></tr></tbody></table>
<p>The conductor offers several ways of connecting to a remote router&#x27;s shell (including both its PCLI shell and Linux shell): either via the <code>connect</code> command within the PCLI, or using the <em>PCLI cut-through</em> feature within the conductor&#x27;s GUI. Both of these leverage a secure (SSH) connection between the router its conductor(s).</p>
<p>Each <em>node</em> within a router will connect to each of its conductors.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="log-retriever-connection">Log Retriever Connection<a href="#log-retriever-connection" class="hash-link" aria-label="Direct link to Log Retriever Connection" title="Direct link to Log Retriever Connection">​</a></h3>
<table><thead><tr><th>Direction</th><th>Port/Proto</th><th>Client Payload (bytes)</th><th>Server Payload (bytes)</th><th>Default Interval</th><th>Notes</th></tr></thead><tbody><tr><td>bidirectional</td><td>930/TCP</td><td>104</td><td>104</td><td>20s (client), 5s (server)</td><td>Amount of data exchanged is entirely dependent on if/when administrators retrieve logs from remote routers via conductor GUI.</td></tr></tbody></table>
<p>The <em>log retriever</em> is a function within the conductor&#x27;s GUI to allow administrators to download log files, packet captures, and tech-support-info bundles. When using this GUI function on the conductor, it will retrieve a file inventory via this connection, and also use that same connection to relay any logs to the user via their web browser.</p>
<p>Each <em>node</em> within a router will connect using this mechanism to each of its conductors.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="conductor-hosted-software-repository">Conductor-hosted Software Repository<a href="#conductor-hosted-software-repository" class="hash-link" aria-label="Direct link to Conductor-hosted Software Repository" title="Direct link to Conductor-hosted Software Repository">​</a></h3>
<table><thead><tr><th>Direction</th><th>Port/Proto</th><th>Client Payload (bytes)</th><th>Server Payload (bytes)</th><th>Default Interval</th><th>Notes</th></tr></thead><tbody><tr><td>bidirectional</td><td>930/TCP</td><td>104</td><td>104</td><td>20s (client), 5s (server)</td><td>Only exchanged if the conductor hosted software repository is configured.</td></tr></tbody></table>
<p>When the conductor is used as a software repository for its managed routers, there will be connectivity checks sent periodically. The frequency at which these are exchanged is not configurable. When the conductor is not used as a software repository (which is the default behavior), these keepalives are not sent.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="conductor-software-proxy">Conductor Software Proxy<a href="#conductor-software-proxy" class="hash-link" aria-label="Direct link to Conductor Software Proxy" title="Direct link to Conductor Software Proxy">​</a></h3>
<table><thead><tr><th>Direction</th><th>Port/Proto</th><th>Client Payload (bytes)</th><th>Server Payload (bytes)</th><th>Default Interval</th><th>Notes</th></tr></thead><tbody><tr><td>bidirectional</td><td>930/TCP</td><td>104</td><td>104</td><td>20s (client), 5s (server)</td><td>Only exchanged if the conductor is configured as a proxy for software retrieval.</td></tr></tbody></table>
<p>When the conductor is used as a proxy for reaching the SSR software repository, there will be connectivity checks sent periodically. The frequency at which these are exchanged is not configurable. When the conductor is not used as a software proxy (which is the default behavior), these keepalives are not sent.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="ssh-keepalives">SSH Keepalives<a href="#ssh-keepalives" class="hash-link" aria-label="Direct link to SSH Keepalives" title="Direct link to SSH Keepalives">​</a></h3>
<table><thead><tr><th>Direction</th><th>Port/Proto</th><th>Client Payload (bytes)</th><th>Server Payload (bytes)</th><th>Default Interval</th><th>Notes</th></tr></thead><tbody><tr><td>bidirectional</td><td>930/TCP</td><td>84</td><td>48</td><td>5s</td><td>Maintains secure socket connection between conductor and deployed router.</td></tr></tbody></table>
<p>The connection between the router and conductor is refreshed every five seconds using keepalive messages.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="dynamic-peer-update">Dynamic Peer Update<a href="#dynamic-peer-update" class="hash-link" aria-label="Direct link to Dynamic Peer Update" title="Direct link to Dynamic Peer Update">​</a></h3>
<table><thead><tr><th>Direction</th><th>Port/Proto</th><th>Client Payload (bytes)</th><th>Server Payload (bytes)</th><th>Default Interval</th><th>Notes</th></tr></thead><tbody><tr><td>bidirectional</td><td>930/TCP</td><td>128</td><td>100</td><td>on demand</td><td>Variable size payload based on router and node name. This is exercised whenever a dynamic IP address on a deployed router changes.</td></tr></tbody></table>
<p>The Dynamic Peer Update (DPU) process supplies dynamic IP address information from a router to conductor, which will then propagate that information down to all routers that create adjacencies to that address. When a <code>network-interface</code> that uses dynamic addressing (e.g., DHCP, PPPoE) acquires an address for the first time or changes its address, that information is sent to conductor via DPU.</p>
<p>The status of the DPU exchange is shown in the output of the PCLI command <code>show dynamic-peer-update</code>.</p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/concepts_metrics"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Metrics</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/concepts_pcli"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">PCLI</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#connections" class="table-of-contents__link toc-highlight">Connections</a></li><li><a href="#node-to-node-connectivity-high-availability" class="table-of-contents__link toc-highlight">Node to Node Connectivity (High Availability)</a></li><li><a href="#router-to-router-connectivity" class="table-of-contents__link toc-highlight">Router to Router Connectivity</a><ul><li><a href="#bfd-peer-path-detection" class="table-of-contents__link toc-highlight">BFD (Peer Path Detection)</a></li><li><a href="#bfd-path-quality" class="table-of-contents__link toc-highlight">BFD (Path Quality)</a></li><li><a href="#firewall-detector" class="table-of-contents__link toc-highlight">Firewall Detector</a></li><li><a href="#path-mtu-discovery" class="table-of-contents__link toc-highlight">Path MTU Discovery</a></li><li><a href="#secure-vector-routing-traffic" class="table-of-contents__link toc-highlight">Secure Vector Routing Traffic</a></li><li><a href="#ttl-handling" class="table-of-contents__link toc-highlight">TTL Handling</a></li></ul></li><li><a href="#router-to-conductor-connectivity" class="table-of-contents__link toc-highlight">Router to Conductor Connectivity</a><ul><li><a href="#software-version-check" class="table-of-contents__link toc-highlight">Software Version Check</a></li><li><a href="#alarms" class="table-of-contents__link toc-highlight">Alarms</a></li><li><a href="#site-wide-entitlement" class="table-of-contents__link toc-highlight">Site-Wide Entitlement</a></li><li><a href="#conductorasset-keepalives" class="table-of-contents__link toc-highlight">Conductor/Asset Keepalives</a></li><li><a href="#key-exchangesecurity-rekeying" class="table-of-contents__link toc-highlight">Key Exchange/Security Rekeying</a></li><li><a href="#asset-keepalives" class="table-of-contents__link toc-highlight">Asset Keepalives</a></li><li><a href="#shell-connect" class="table-of-contents__link toc-highlight">Shell <code>connect</code></a></li><li><a href="#log-retriever-connection" class="table-of-contents__link toc-highlight">Log Retriever Connection</a></li><li><a href="#conductor-hosted-software-repository" class="table-of-contents__link toc-highlight">Conductor-hosted Software Repository</a></li><li><a href="#conductor-software-proxy" class="table-of-contents__link toc-highlight">Conductor Software Proxy</a></li><li><a href="#ssh-keepalives" class="table-of-contents__link toc-highlight">SSH Keepalives</a></li><li><a href="#dynamic-peer-update" class="table-of-contents__link toc-highlight">Dynamic Peer Update</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="footer"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2024 Juniper Networks, Inc.</div></div></div></footer></div>
</body>
</html>