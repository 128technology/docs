<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="generator" content="Docusaurus v2.0.0-alpha.61">
<link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-167298415-2","auto"),ga("set","anonymizeIp",!0),ga("send","pageview")</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
<link rel="search" type="application/opensearchdescription+xml" title="128T Docs" href="/opensearch.xml"><title data-react-helmet="true">128T Monitoring Agent | 128T Docs</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:title" content="128T Monitoring Agent | 128T Docs"><meta data-react-helmet="true" name="description" content="The 128T Monitoring Agent is an entity for collecting data from a node running 128T software and to push it to a collector. It is capable of collecting the data from several sources such as metrics, events etc. The current mechanism of monitoring a 128T router involves performing REST or GraphQL queries from the conductor. At scale, this can become inefficient and be problematic in terms of the performance of the conductor. Additionally it is important to interact with 3rd party monitoring platforms as means for organizations to collect, analyze and report using various KPIs available from 128T software and other application in the network."><meta data-react-helmet="true" property="og:description" content="The 128T Monitoring Agent is an entity for collecting data from a node running 128T software and to push it to a collector. It is capable of collecting the data from several sources such as metrics, events etc. The current mechanism of monitoring a 128T router involves performing REST or GraphQL queries from the conductor. At scale, this can become inefficient and be problematic in terms of the performance of the conductor. Additionally it is important to interact with 3rd party monitoring platforms as means for organizations to collect, analyze and report using various KPIs available from 128T software and other application in the network."><meta data-react-helmet="true" property="og:url" content="https://docs.128technology.com/docs/plugin_monitoring_agent"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="true"><link data-react-helmet="true" rel="canonical" href="https://docs.128technology.com/docs/plugin_monitoring_agent"><link rel="stylesheet" href="/styles.9a832058.css">
<link rel="preload" href="/styles.c3d814b8.js" as="script">
<link rel="preload" href="/runtime~main.54f3bd1c.js" as="script">
<link rel="preload" href="/main.c993cd9a.js" as="script">
<link rel="preload" href="/1.e48c6587.js" as="script">
<link rel="preload" href="/2.0b9f4486.js" as="script">
<link rel="preload" href="/124.866c24a0.js" as="script">
<link rel="preload" href="/127.c5fb5cb6.js" as="script">
<link rel="preload" href="/20ac7829.d2166c4c.js" as="script">
<link rel="preload" href="/17896441.20f74e96.js" as="script">
<link rel="preload" href="/ea10fb5e.095de107.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<nav class="navbar navbar--light navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/"><img class="navbar__logo" src="/img/128t_black.png" alt="128 Technology Logo"><strong class="navbar__title">Technology</strong></a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/docs/intro_getting_started">Docs</a><a href="https://community.128technology.com/home" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Interchange</a><a href="https://www.128technology.com/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Company</a><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span><span class="DocSearch-Button-Key">âŒ˜</span><span class="DocSearch-Button-Key">K</span></button></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img class="navbar__logo" src="/img/128t_black.png" alt="128 Technology Logo"><strong class="navbar__title">Technology</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/intro_getting_started">Docs</a></li><li class="menu__list-item"><a href="https://community.128technology.com/home" target="_blank" rel="noopener noreferrer" class="menu__link">Interchange</a></li><li class="menu__list-item"><a href="https://www.128technology.com/" target="_blank" rel="noopener noreferrer" class="menu__link">Company</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_2gpo"><div class="docSidebarContainer_3_JD" role="complementary"><div class="sidebar_2urC"><div class="menu menu--responsive menu_5FrY"><button aria-label="Open Menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_Dm3K" xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 32 32" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">About</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/about_128t">128T</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/about_releases">128T Releases</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/about_support_policy">Software Support Policy</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/about_supported_platforms">Platform Support Policy</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/about_security_policy">Security Policy</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/about_svr_savings">SVR Savings</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/CONTRIBUTING">Contributing</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Introduction</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/intro_getting_started">Getting Started</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/intro_downloading_iso">Downloading ISOs</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/intro_installation">Installation</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/intro_installation_installer">Installing 128T</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/intro_installation_bootable_media">Installing From ISO</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/intro_installation_aws">Installing in AWS</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/intro_installation_otp_iso">Installing From OTP ISO</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/intro_installation_quickstart_aws">QuickStart installation in AWS</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/intro_installation_azure">Installing in Azure</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/intro_ztp">QuickStart</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/intro_creating_bootable_usb">Creating Bootable USB</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/intro_upgrading">Upgrading</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/intro_rollback">Rollback</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Concepts</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/concepts_application_discovery">Application Discovery</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/concepts_appid">Application Identification</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/concepts_ha_theoryofoperation">HA - Theory of Operation</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/concepts_interface_types">Interface Types</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/concepts_kni">Kernel Network Interfaces</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/concepts_linux_host_networking">Linux Host Networking</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/concepts_network_planes">Forwarding Planes</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/concepts_metadata">128T Metadata</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/concepts_metrics">Metrics</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/concepts_machine_communication">Machine Communication</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/concepts_pcli">PCLI</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/concepts_session_timer">Session Timers</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/concepts_glossary">Glossary</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Administration</a><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Configuration</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config_asset_connection_resiliency">Asset Connection Resiliency</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config_basics">Basics</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config_bgp">BGP</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config_reference_guide">Element Reference</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config_audit_log">Audit Log</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config_dhcp">DHCP</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config_dns_proxy">DNS Proxy</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config_dual_router_ha">High Availability (Dual Router)</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config_ldap">LDAP</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config_ha">High Availability</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config_management_over_forwarding">Management over Forwarding</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config_non_forwarding_ha_interfaces">Non-forwarding HA Interfaces</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config_adding_interfaces_to_ha_team">Adding Interfaces to HA Team Interface</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config_transition_standalone_to_ha">Transitioning a Conductor from Standalone to HA</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config_nat">NAT</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config_ospf">OSPF</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config_rate_limiting">Rate Limiting</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config_snmp">SNMP</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config_snmp_metrics">SNMP: User defined metrics</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config_static_hostname_mapping">Static Hostname Mappings</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config_tenants">Tenants</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/config_templates">Configuration Templates</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">How To</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/howto_conductor_migration">Conductor Migration</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/howto_extend_gui_nav">Extending GUI Nav</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/howto_lte">LTE</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/howto_maintenance_mode">Maintenance Mode</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/howto_ms365">Microsoft 365</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/howto_trusted_ca_certificate">Adding a Trusted Certificate</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/howto_tune_bfd">Tuning BFD</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Troubleshooting</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/ts_applications">Application Troubleshooting</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/ts_ap_salt_minion">AP: Salt Minion</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/ts_cpu_spikes">CPU Spikes</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/ts_connecting_to_routers">Connecting to Routers</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/ts_forwarding_resource_pools">Forwarding Plane Resource Pools</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/ts_logs">Logs</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/ts_mac_uniqueness">MAC Address Uniqueness</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/ts_packet_capture">PCLI Packet Capture</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/ts_t1_troubleshooting">T1 Troubleshooting</a></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Events</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/events_overview">Alarm and Events</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/events_alarms">Alarms</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/events_events">Events</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Best Practices</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/bcp_att_avpn_configuration">AT&amp;T AVPN Configuration</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/bcp_conductor_deployment">Conductor Deployment</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/bcp_qos_msft_expressroute">ExpressRoute QoS Configuration</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/bcp_lte_peering">LTE Peering</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/bcp_monitoring_headends">Monitoring Head End Routers</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/bcp_salt_pillars">Saltstack at Scale With 128T</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/bcp_sdwan_design_guide">SD-WAN Design Guide</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/bcp_service_and_service_policy_design">Service and Service Policy Design</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/bcp_service-policy_defaults">Service Policy Baseline Defaults</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/bcp_tenants">Tenancy Design</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">CLI Reference</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/cli_reference">Command Line Reference</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Plugins</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/plugin_intro">Introduction</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/plugin_dns_app_id">DNS App Id</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/plugin_dns_cache">DNS Cache</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/plugin_gre">GRE</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/plugin_icmp_reachability_detection">ICMP Reachability Detection</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/plugin_ipsec_client">IPsec Client</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/plugin_kni_namespace_scripts">KNI Namespace Scripts</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/plugin_loopback_static_routes">Loopback Static Routes</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/plugin_m800_watchdog">M800 Watchdog</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/docs/plugin_monitoring_agent">Monitoring</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/plugin_mosh">Mosh</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/plugin_sip_alg">SIP ALG</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/plugin_kni_namespace_scripts">KNI Namespace Scripts</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/plugin_wireguard">Wireguard</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">REST APIs</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/api_rest_4.2.0">128T-4.2.0</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Release Notes</a><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">128T</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/release_notes_128t_4.5">4.5</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/release_notes_128t_4.4">4.4</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/release_notes_128t_4.3">4.3</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/release_notes_128t_4.2">4.2</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/release_notes_128t_4.1">4.1</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/release_notes_128t_4.0">4.0</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">128T Installer</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/release_notes_128t_installer_2.6">2.6</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/release_notes_128t_installer_2.5">2.5</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/release_notes_128t_installer_2.4">2.4</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/release_notes_128t_installer_2.3">2.3</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/release_notes_128t_installer_2.2">2.2</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/release_notes_128t_installer_2.1">2.1</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">128T SIP ALG</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/release_notes_128t_sip_alg_2.1">2.1</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">128T ZScaler</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/release_notes_128t_zscaler_1.1">1.1</a></li></ul></li></ul></li></ul></div></div></div><main class="docMainContainer_3EyW"><div class="container padding-vert--lg docItemWrapper_1EkI"><div class="row"><div class="col docItemCol_2ASc"><div class="docItemContainer_3QWW"><article><header><h1 class="docTitle_1Lrw">128T Monitoring Agent</h1></header><div class="markdown"><p>The 128T Monitoring Agent is an entity for collecting data from a node running 128T software and to push it to a collector. It is capable of collecting the data from several sources such as metrics, events etc. The current mechanism of monitoring a 128T router involves performing REST or GraphQL queries from the conductor. At scale, this can become inefficient and be problematic in terms of the performance of the conductor. Additionally it is important to interact with 3rd party monitoring platforms as means for organizations to collect, analyze and report using various KPIs available from 128T software and other application in the network.</p><p>The monitoring agent at its core is designed to be able to push data to external platforms. It currently leverages the <a href="https://www.influxdata.com/time-series-platform/telegraf/" target="_blank" rel="noopener noreferrer">Telegraf</a> collection stack on every 128T router. However, the monitoring agent is designed with other tools and scale in mind. The monitoring agent is composed of the following:</p><ul><li><p><strong>monitoring-agent-cli</strong><br>
Used for configuring and interacting with the underlying application</p></li><li><p><strong>collectors</strong><br>
A set of inputs designed to collect data from several sources such as metrics, events etc.</p></li><li><p><strong>targets</strong><br>
A set of outputs for collecting and pushing the data to various data sinks such as external monitoring platforms, files on disk etc.</p></li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="installation"></a>Installation<a aria-hidden="true" tabindex="-1" class="hash-link" href="#installation" title="Direct link to heading">#</a></h2><p>The 128T Monitoring Agent can be obtained from the official 128T software repository. The following versions of the <strong>monitoring-agent</strong> are available for corresponding 128T software version.</p><table><thead><tr><th>Monitoring Agent</th><th>128T</th></tr></thead><tbody><tr><td><strong>128T-monitoring-agent-3.0.0</strong></td><td>128T &gt;= 4.1.0</td></tr></tbody></table><div class="admonition admonition-important alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>important</h5></div><div class="admonition-content"><p>Monitoring Agent 3.X deprecates prior releases and is compatible with all previously supported 128T versions. It should be preferred for new installations and upgrades.  </p></div></div><p>The agent can be install using the <code>dnf</code> utility.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-console codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">dnf install 128T-monitoring-agent</span></div></div></div></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="configuration"></a>Configuration<a aria-hidden="true" tabindex="-1" class="hash-link" href="#configuration" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="version-history"></a>Version History<a aria-hidden="true" tabindex="-1" class="hash-link" href="#version-history" title="Direct link to heading">#</a></h3><table><thead><tr><th>Release</th><th>Modification</th></tr></thead><tbody><tr><td>3.0.0</td><td>per input <code>sample-interval</code> and <code>push-interval</code> were introduced</td></tr><tr><td>1.2.0, 2.1.0</td><td><code>lib-directory</code> was introduced</td></tr></tbody></table><p>The monitoring agent has its own set of configurations and looks for inputs from specific directories on disk. By default, the configuration for the agent should be present in <code>/etc/128t-monitoring/config.yaml</code> and uses YAML format which looks something like this:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-yaml codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token key atrule">enabled</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token boolean important" style="color:rgb(255, 88, 116)">true</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">lib-directory</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> /var/lib/128t</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">monitoring</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">tags</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> </span><span class="token key atrule">key</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> router</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">value</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> $</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain">ROUTER</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">sample-interval</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">60</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">push-interval</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">300</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">inputs</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> events</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> t128_metrics</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">include-outputs</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">message_queue</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> t128_device_state</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">sample-interval</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">30</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">push-interval</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">90</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> t128_peer_path</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> lte_metric</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">exclude-outputs</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">file</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">outputs</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> file</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> message_queue</span></div></div></div></div></div><p>The <code>enabled</code> field is meant as global toggle for applying the monitoring agent functionality. When set to <code>disabled</code> the monitoring agent will remain dormant on the 128T.</p><p><code>lib-directory</code> is the root directory for the Monitoring Agent. Other directores exist relative to it. This is useful when intending to isolate a set of Monitoring Agent elements from others.</p><p>Each of the <code>tags</code>, a collection of key/value pairs, are used to add meta information to the collected metrics. This data makes it easier to identify the origin, and to provide filtering by the collectors. By default, the agent includes the <code>${HOSTNAME}</code>, <code>${ROUTER}</code> and <code>${NODE}</code> tags to every collected input. The corresponding values are derived from the running system. The same config can ideally be used for each node in the authority, as their respective values are evaluated at runtime.</p><p><code>sample-interval</code> and <code>push-interval</code> indicate the frequency (in seconds) for how often the data is collected and subsequently pushed to the collection target. When the <code>push-interval</code> value is greater than the <code>sample-interval</code>, the agent will produce <code>ceiling(push-interval/sample-interval)</code> samples collected within the push duration. It is recommended to configure the <code>push-interval</code> as a multiple of <code>sample-interval</code>. These values can be overridden at the input level for finer control of agent&#x27;s behavior.</p><p>The <code>inputs</code> represent a single unit of collection. This can be a combination of inputs available from <code>telegraf</code> as well as other inputs developed by 128T. The function and configuration of each of the 128T provided inputs can be found in subsequent sections. For <code>telegraf</code> inputs please refer to the <a href="https://docs.influxdata.com/telegraf/v1.13/plugins/plugin-list/#input-plugins" target="_blank" rel="noopener noreferrer">influx documentation online</a>. Each <code>input</code> can be a combination of one or more collectors and can contain other collector specific information. For each of the inputs, a user can also configure an <code>include-outputs</code> which is a list of outputs to send the collected information to. This allows the user to build a matrix of inputs and outputs and provides a granular control over which input should be sent to what output. Similarly, the user can also configure an <code>exclude-outputs</code> which will include all defined outputs except the one specified.</p><p>The <code>outputs</code> represent a data sink where the collected information is to be delivered. By virtue of using <code>telegraf</code>, the monitoring agent gets automatic support of the <a href="https://docs.influxdata.com/telegraf/v1.13/plugins/plugin-list/#output-plugins" target="_blank" rel="noopener noreferrer">available outputs supported by telegraf</a>. Each <code>input</code> can be configured to be delivered to one or more <code>output</code>.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="directory-structure"></a>Directory Structure<a aria-hidden="true" tabindex="-1" class="hash-link" href="#directory-structure" title="Direct link to heading">#</a></h2><p>The <code>monitoring-agent</code> uses a well-defined directory structure where it derives the inputs from various configuration. As described above, the base of the directory structure can be specified using the <code>lib-directory</code> configuration field. Directories exist relative to that one. The following directories are especially important:</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="inputs"></a>Inputs<a aria-hidden="true" tabindex="-1" class="hash-link" href="#inputs" title="Direct link to heading">#</a></h3><p>Path: <code>/var/lib/128t-monitoring/inputs/</code></p><p>The <code>inputs</code> directory contains config files for the various inputs that are enabled in the monitoring-agent configuration. The monitoring agent expects to see a file called <code>&lt;input-name.conf&gt;</code> in this directory. Users can override the file name by specifying <code>conf: &lt;filename.conf&gt;</code> in the input definition within the config above. This file should only contain the telegraf definition for the input(s) that belong and not any other configuration. Configuration for all the 128T inputs will automatically be staged in the inputs directory. See the Config Examples section below for more details.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="outputs"></a>Outputs<a aria-hidden="true" tabindex="-1" class="hash-link" href="#outputs" title="Direct link to heading">#</a></h3><p>Path: <code>/var/lib/128t-monitoring/outputs/</code></p><p>The <code>outputs</code> directory will contain the config files for the various data sink configured in the monitoring-agent configuration. For each <code>output</code> the conf file should contain the telegraf configuration for that one output only. This allows the monitoring-agent to create a telegraf config per input and include the appropriate outputs.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="config"></a>Config<a aria-hidden="true" tabindex="-1" class="hash-link" href="#config" title="Direct link to heading">#</a></h3><p>Path: <code>/var/lib/128t-monitoring/config</code></p><p>The <code>config</code> directory contains the fully formed telegraf config files created by the monitoring agent. These file are generated based on the contents of <code>config.yaml</code> and the <code>inputs</code> and <code>outputs</code> directories.</p><p>For example, using the <code>t128_events</code> input and the <code>file</code> output in the examples section below will result in a configuration file such as:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-toml codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">[global_tags]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">router = &quot;lte-router&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">node = &quot;lte-node&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">[agent]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">interval = 10</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">flush_interval = 20</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">[inputs]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">[[inputs.execd]]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">command = [ &quot;/usr/bin/eventCollector128t&quot;, &quot;--log-name&quot;, &quot;event_collector&quot;, &quot;--topic&quot;, &quot;events&quot;, &quot;--index-file&quot;, &quot;/tmp/events.index&quot;,]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">signal = &quot;none&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">data_format = &quot;influx&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">[inputs.execd.tagpass]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">type = [ &quot;admin&quot;,]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">[outputs]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">[[outputs.file]]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">files = [&quot;stdout&quot;, &quot;/tmp/metrics.out&quot;]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">data_format = &quot;influx&quot;</span></div></div></div></div></div><div class="admonition admonition-important alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>important</h5></div><div class="admonition-content"><p>Users should not make changes to these files as they will be overwritten by the <code>monitoring-agent-cli configure</code> command.  </p></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="samples"></a>Samples<a aria-hidden="true" tabindex="-1" class="hash-link" href="#samples" title="Direct link to heading">#</a></h3><p><code>/var/lib/128t-monitoring/samples/</code></p><p>The <code>samples</code> directory contains example configurations for the included 128T collectors. You can also display these using the <a href="#sample-config"><code>monitoring-agent-cli</code></a>.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="config-examples"></a>Config Examples<a aria-hidden="true" tabindex="-1" class="hash-link" href="#config-examples" title="Direct link to heading">#</a></h2><p>The following examples higlight just a few ways the monitoring agent can be configured. Be sure to reference the Telegraf documentation for the full ecosystem of input and outputs that are supported.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="inputs-1"></a>Inputs<a aria-hidden="true" tabindex="-1" class="hash-link" href="#inputs-1" title="Direct link to heading">#</a></h3><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="t128_metrics"></a>t128_metrics<a aria-hidden="true" tabindex="-1" class="hash-link" href="#t128_metrics" title="Direct link to heading">#</a></h4><p>This example configures the <code>t128_metrics</code> collector to gather a set of default metrics from the 128T. This file is also included in the samples directory.</p><p>Path: <code>/var/lib/128t-monitoring/inputs/t128_metrics.conf</code></p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-toml codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">[[inputs.t128_metrics]]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    ## When configured, the metric collector input will pull KPIs from the 128T system</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    ## running on the current node. Depending on the KPI, the information can be used for</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    ## monitoring various aspects of the running system such as services, interfaces, errors etc.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    ## By default, if no configuration is present, the set of metrics defined in</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    ## /etc/128t-monitoring/collectors/t128_metrics/default_config.toml will be used</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    ## for monitoring. Here&#x27;s a sample configuration on how to define custom metrics.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    ##</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    ## [[inputs.t128_metrics.metric]]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    ## name = &quot;service&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    ##</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    ## [inputs.t128_metrics.metric.fields]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    ## Refer to the 128T REST swagger documentation for the list of available metrics</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    ##     key_name = &quot;stats/&lt;path_to_metric&gt;&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    ##     packets-received = &quot;stats/aggregate-session/service/packets-received&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    ##</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    ## [inputs.t128_metrics.metric.parameters]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    ##     parameter_name = [&quot;value1&quot;, &quot;value2&quot;]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    ##     service = [&quot;service1&quot;]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    timeout = &quot;15s&quot;</span></div></div></div></div></div><div class="admonition admonition-tip alert alert--success"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</h5></div><div class="admonition-content"><p>Depending on the number of metrics you have enabled, you may need to increase the timeout to allow collection to complete. This can also influence your minimum polling interval.  </p></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="linux-system"></a>Linux System<a aria-hidden="true" tabindex="-1" class="hash-link" href="#linux-system" title="Direct link to heading">#</a></h4><p>This example gathers cpu, disk, and memory metrics from the linux host using native telegraf collectors:</p><p>Path: <code>/var/lib/128t-monitoring/inputs/system.conf</code></p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-toml codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">[[inputs.cpu]]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ## Whether to report per-cpu stats or not</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  percpu = true</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ## Whether to report total system cpu stats or not</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  totalcpu = true</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ## If true, collect raw CPU time metrics.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  collect_cpu_time = false</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ## If true, compute and report the sum of all non-idle CPU states.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  report_active = false</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">[[inputs.disk]]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ## Ignore mount points by filesystem type.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ignore_fs = [&quot;tmpfs&quot;, &quot;devtmpfs&quot;, &quot;devfs&quot;, &quot;iso9660&quot;, &quot;overlay&quot;, &quot;aufs&quot;, &quot;squashfs&quot;]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">[[inputs.mem]]</span></div></div></div></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="outputs-1"></a>Outputs<a aria-hidden="true" tabindex="-1" class="hash-link" href="#outputs-1" title="Direct link to heading">#</a></h3><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="local-filesystem"></a>Local Filesystem<a aria-hidden="true" tabindex="-1" class="hash-link" href="#local-filesystem" title="Direct link to heading">#</a></h4><p>Configuring the file output will write metrics to the local filesystem. This can be useful for testing or as a backup data source in case network connectivity issues prevent data from reaching the intended collection endpoint.</p><p>Path: <code>/var/lib/128t-monitoring/outputs/file.conf</code></p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-toml codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">[[outputs.file]]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ## Files to write to, &quot;stdout&quot; is a specially handled file.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  files = [&quot;stdout&quot;, &quot;/tmp/metrics.out&quot;]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ## Use batch serialization format instead of line based delimiting.  The</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ## batch format allows for the production of non line based output formats and</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ## may more efficiently encode metric groups.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  # use_batch_format = false</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ## The file will be rotated after the time interval specified.  When set</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ## to 0 no time based rotation is performed.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  # rotation_interval = &quot;0d&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ## The logfile will be rotated when it becomes larger than the specified</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ## size.  When set to 0 no size based rotation is performed.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  # rotation_max_size = &quot;0MB&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ## Maximum number of rotated archives to keep, any older logs are deleted.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ## If set to -1, no archives are removed.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  # rotation_max_archives = 5</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ## Data format to output.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ## Each data format has its own unique set of configuration options, read</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ## more about them here:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ## https://github.com/influxdata/telegraf/blob/master/docs/DATA_FORMATS_OUTPUT.md</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  data_format = &quot;influx&quot;</span></div></div></div></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="kafka"></a>Kafka<a aria-hidden="true" tabindex="-1" class="hash-link" href="#kafka" title="Direct link to heading">#</a></h4><p>This example sends data to a kafka broker:</p><p><code>/var/lib/128t-monitoring/outputs/kafka.conf</code></p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-toml codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">[[outputs.kafka]]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ## URLs of kafka brokers</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  brokers = [&quot;&lt;ip&gt;:9092&quot;]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ## Kafka topic for producer messages</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  topic = &quot;telegraf&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  max_retry = 3</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  data_format = &quot;json&quot;</span></div></div></div></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="syslog"></a>Syslog<a aria-hidden="true" tabindex="-1" class="hash-link" href="#syslog" title="Direct link to heading">#</a></h4><p>In this example data is sent via syslog:</p><p><code>/var/lib/128t-monitoring/outputs/syslog.conf</code></p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-toml codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">[[outputs.syslog]]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  address = &quot;udp://&lt;ip&gt;:514&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  default_sdid = &quot;128T&quot;</span></div></div></div></div></div><div class="admonition admonition-important alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>important</h5></div><div class="admonition-content"><p>For syslog output, not specifying the <code>default_sdid</code> parameter can result in empty or truncated messages  </p></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="variable-replacement"></a>Variable Replacement<a aria-hidden="true" tabindex="-1" class="hash-link" href="#variable-replacement" title="Direct link to heading">#</a></h3><p>Within an <strong>input</strong> configuration, several variables have been made available for substitution.</p><table><thead><tr><th>Value</th><th>Meaning</th><th>Version Introduced</th></tr></thead><tbody><tr><td><code>${ROUTER}</code></td><td>The router name of the running 128T instance</td><td>3.0.0</td></tr><tr><td><code>${NODE}</code></td><td>The node name of the running 128T instance</td><td>3.0.0</td></tr><tr><td><code>${128T_VERSION}</code></td><td>The version of the running 128T instance</td><td>3.0.0</td></tr></tbody></table><p>An example of this would be:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-console codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ cat /var/lib/128t-monitoring/inputs/example.conf</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">[[inputs.example]]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  version = &quot;${128T_VERSION}&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ monitoring-agent-cli generate --force</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Generating example</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ cat /var/lib/128t-monitoring/config/example.conf</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">[global_tags]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">host = &quot;${HOSTNAME}&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">[agent]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">interval = 1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">flush_interval = 1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">[inputs]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">[[inputs.example]]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">version = &quot;5.0.0&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">[outputs]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">[[outputs.file]]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">files = [ &quot;/tmp/test.out&quot;,]</span></div></div></div></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="monitoring-agent-cli"></a>Monitoring Agent CLI<a aria-hidden="true" tabindex="-1" class="hash-link" href="#monitoring-agent-cli" title="Direct link to heading">#</a></h2><p>The <code>monitoring-agent-cli</code> is a utility for validating and executing the configuration for the monitoring-agent. The various components of the CLI as follows:</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="validation"></a>Validation<a aria-hidden="true" tabindex="-1" class="hash-link" href="#validation" title="Direct link to heading">#</a></h3><p>The <code>monitoring-agent validate</code> command will ensure that the monitoring-agent config along with other inputs and outputs are correctly setup and flag any particular errors to the user. The <code>validate</code> command will not make any changes to the running system.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="sample-config"></a>Sample Config<a aria-hidden="true" tabindex="-1" class="hash-link" href="#sample-config" title="Direct link to heading">#</a></h3><p>The <code>monitoring-agent-cli sample</code> command can be used to view the various collectors that are created as part of the 128T monitoring agent. The <code>list-available</code> command will simply show the set of available inputs (and outputs) that are packaged as part of the 128T monitoring-agent. These are in addition to the ones available natively via telegraf. For example:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-console codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain"># monitoring-agent-cli sample list-available</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">inputs:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">- t128_device_state</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">- t128_metrics</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">- t128_peer_path</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">- t128_events</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">- t128_lte_metric</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">- t128_top_analytics</span></div></div></div></div></div><p>The configuration for each of these inputs can be viewed via <code>monitoring-agent-cli sample view &lt;plugin_name&gt;</code> command such as:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-console codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain"># monitoring-agent-cli sample view t128_metrics</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">[[inputs.t128_metrics]]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    ## When configured, the metric collector input will pull KPIs from the 128T system</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    ## running on the current node. Depending on the KPI, the information can be used for</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    ## monitoring various aspects of the running system such as services, interfaces, errors etc.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    ## By default, if no configuration is present, the set of metrics defined in</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    ## /etc/128t-monitoring/collectors/t128_metrics/default_config.toml will be used</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    ## for monitoring. Here&#x27;s a sample configuration on how to define custom metrics.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    ##</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    ## [[inputs.t128_metric.metric]]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    ## name = &quot;service&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    ##</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    ## [inputs.t128_metric.metric.fields]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    ## Refer to the 128T REST swagger documentation for the list of available metrics</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    ##     key_name = &quot;stats/&lt;path_to_metric&gt;&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    ##     packets-received = &quot;stats/aggregate-session/service/packets-received&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    ##</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    ## [inputs.t128_metric.metric.parameters]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    ##     parameter_name = [&quot;value1&quot;, &quot;value2&quot;]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    ##     service = [&quot;service1&quot;]</span></div></div></div></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="generation"></a>Generation<a aria-hidden="true" tabindex="-1" class="hash-link" href="#generation" title="Direct link to heading">#</a></h3><p>The <code>monitoring-agent-cli generate</code> command can be used to (re-)generate the telegraf configuration files. This command does not restart the telegraf services and is a good way to pre-stage configuration for testing.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-console codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain"># monitoring-agent-cli generate</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">The command does not start/restart 128T-telegraf services but can still impact already running instances. Do you want to continue? [Y/n]: y</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Generating t128_top_analytics</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Generating t128_device_state</span></div></div></div></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="configuration-1"></a>Configuration<a aria-hidden="true" tabindex="-1" class="hash-link" href="#configuration-1" title="Direct link to heading">#</a></h3><p>When the <code>monitoring-agent-cli configure</code> command is run, it will first validate and report any errors to the user. Once valid configuration is in place, the configure command does the following at a high level:</p><ul><li><p>For each of the configured and enabled inputs, generate a telegraf config file in the <code>/var/lib/128t-monitoring/config</code> directory</p></li><li><p>Launch an instance of the <code>128T-telegraf</code> service for each of the configured inputs which allows us to collect each input independently.</p></li></ul><p>At this point, each input will be running a telegraf instance and will allow the collection of inputs &amp; outputs to run on the system.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="testing-and-validation"></a>Testing and Validation<a aria-hidden="true" tabindex="-1" class="hash-link" href="#testing-and-validation" title="Direct link to heading">#</a></h3><p>Once the Monitoring Agent has configured and started the <code>128T-telegraf</code>services, you can use the command <code>systemctl list-units 128T-telegraf*</code> to list them out.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-console codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain"># systemctl list-units 128T-telegraf*</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">UNIT                                    LOAD   ACTIVE SUB     DESCRIPTION</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">128T-telegraf@events.service            loaded active running 128T telegraf service for events</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">128T-telegraf@system.service            loaded active running 128T telegraf service for system</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">128T-telegraf@t128_device_state.service loaded active running 128T telegraf service for t128_device_state</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">128T-telegraf@t128_metrics.service      loaded active running 128T telegraf service for t128_metrics</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">128T-telegraf@t128_peer_path.service    loaded active running 128T telegraf service for t128_peer_path</span></div></div></div></div></div><p>Additionally, its often useful to test the input configuration before full rollout. This can be easily accomplished by the <code>test-input</code> command.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-console codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain"># monitoring-agent-cli test-input t128_device_state</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Testing input t128_device_state</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">2020-04-15T06:51:17Z I! Starting Telegraf 1.14.0</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">2020-04-15T06:51:17Z D! [agent] Initializing plugins</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">&gt; device-interface-state,device-interface=dpdk1-lan,host=t127-dut2.openstacklocal,router=router1 adminStatus=&quot;ADMIN_UP&quot;,enabled=true,operationalStatus=&quot;OPER_UP&quot;,redundancyStatus=&quot;NON_REDUNDANT&quot; 1586933478000000000</span></div></div></div></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="stopping-services"></a>Stopping Services<a aria-hidden="true" tabindex="-1" class="hash-link" href="#stopping-services" title="Direct link to heading">#</a></h3><p>The <code>monitorinag-agent-cli stop</code> command can be used to stop <code>128T-telegraf</code> services launched by the <code>configure</code> command.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-console codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain"># monitoring-agent-cli stop</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Stopping telegraf service 128T-telegraf@t128_metrics.service</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Stopping telegraf service 128T-telegraf@t128_events.service</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Stopping telegraf service 128T-telegraf@t128_arp_state.service</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Stopping telegraf service 128T-telegraf@t128_device_state.service</span></div></div></div></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="128t-collectors"></a>128T Collectors<a aria-hidden="true" tabindex="-1" class="hash-link" href="#128t-collectors" title="Direct link to heading">#</a></h2><p>The 128T monitoring-agent comes pre-packaged with a set of collectors to assist in the monitoring of the 128T platform. Here are the various collectors and how to use them:</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="metric-collector"></a>Metric collector<a aria-hidden="true" tabindex="-1" class="hash-link" href="#metric-collector" title="Direct link to heading">#</a></h3><p>The <code>t128_metrics</code> input is responsible for collecting the configured metrics from a running system. By default, the metrics specified in <code>/etc/128t-monitoring/collectors/t128_metrics/default_config.toml</code> will be used by the collector. This represents a set of pre-configured metrics that 128T recommends a network operator to monitor. The configuration file in a <code>TOML</code> definition of metrics and has the following format:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-toml codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">[[metric]]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  name = &quot;service&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  [metric.fields]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    packets-received = &quot;stats/aggregate-session/service/packets-received&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    packets-transmitted = &quot;stats/aggregate-session/service/packets-transmitted&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    session-arrival-rate = &quot;stats/aggregate-session/service/session-arrival-rate&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    session-departure-rate = &quot;stats/aggregate-session/service/session-departure-rate&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    bandwidth-received = &quot;stats/aggregate-session/service/bandwidth-received&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    bandwidth-transmitted = &quot;stats/aggregate-session/service/bandwidth-transmitted&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    tcp-retransmissions = &quot;stats/aggregate-session/service/tcp-retransmissions&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    session-count = &quot;stats/aggregate-session/service/session-count&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  [metric.parameters]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    service = []</span></div></div></div></div></div><p>Each element of the configuration specifies an aspect of the <a href="https://docs.influxdata.com/influxdb/v1.8/write_protocols/line_protocol_tutorial/" target="_blank" rel="noopener noreferrer">InfluxDB line protocol</a> or the <a href="/docs/api_rest_4.2.0">128T REST API</a>.</p><ul><li><p><strong>name</strong><br>
The line protocol measurement to be used for the output</p></li><li><p><strong>fields</strong><br>
What line protocol fields should exist in the output</p></li><li><p><strong>fields.key</strong> (e.g. <code>packets-received</code>)<br>
A line protocol field key that should exist in the output</p></li><li><p><strong>fields.value</strong> (e.g. <code>stats/aggregate-session/service/packets-received</code>)<br>
The 128T KPI providing the value for the associated field key. See the <a href="/docs/api_rest_4.2.0">128T REST API documentation</a> for a full list. Note that the documentation prefixes the KPIs with <code>/router/{router}/</code>.</p></li><li><p><strong>parameters</strong> (e.g. <code>service</code>)<br>
The 128T parameters that should be preserved as line protocol tags in the output. When a non-empty list of values is provided for a parameter, only KPIs with matching parameters will be included in the output.</p></li></ul><p>A custom set of metrics can be collected by configuring the <code>t128_metrics</code> input as described in the sample. The configuration follows the same structure as the default file, but the metrics are nested under the input.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-toml codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">[[inputs.t128_metrics]]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    [[inputs.t128_metrics.metric]]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      name = &quot;disk&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    [[inputs.t128_metrics.metric.fields]]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      used = &quot;stats/disk/used&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      capacity = &quot;stats/disk/capacity&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    [[inputs.t128_metrics.metric.parameters]]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      disk = [&quot;/&quot;]</span></div></div></div></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="event-collector"></a>Event Collector<a aria-hidden="true" tabindex="-1" class="hash-link" href="#event-collector" title="Direct link to heading">#</a></h3><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="version-history-1"></a>Version History<a aria-hidden="true" tabindex="-1" class="hash-link" href="#version-history-1" title="Direct link to heading">#</a></h4><table><thead><tr><th>Release</th><th>Modification</th></tr></thead><tbody><tr><td>1.2.0, 2.1.0</td><td><code>t128_events</code> input type was introduced</td></tr></tbody></table><p>The event collector can be used for collecting and pushing events for various categories such as admin, alarm, system, traffic and provisioning as they occur on the system. The type of the event is available via a <code>tag</code> and can be used for filtering only specific events as desired. For example, the following configuration can be used for pushing just the <code>alarm</code> and <code>admin</code> event</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-toml codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">[[inputs.t128_events]]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ## Create a stream of 128T events for alarm, audit etc. This information is useful for</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ## monitoring the health of the system.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ## A (unique) file to use for index tracking. This tracking allows each</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ## event to be produced once. By default, no tracking is used and events are</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ## produced starting from the point telegraf is launched.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  # index-file = &quot;/var/lib/128t-monitoring/state/events.index&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ## The name of the log file to produce to /var/log/128t-monitoring/&lt;log-name&gt;.log</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  # log-name = &quot;event_collector&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ## The TANK topic to consume. Should be &quot;events&quot; or &quot;offline_events&quot;.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  # topic = &quot;events&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ## input event filtering based on type (admin, alarm, system, traffic, provisioning)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ## NOTE: For information on filtering severity refer to the output configuration example</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  [inputs.t128_events.tagpass]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  type = [&quot;alarm&quot;, &quot;admin&quot;]</span></div></div></div></div></div><div class="admonition admonition-important alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>important</h5></div><div class="admonition-content"><p>In versions 1.2.0, 2.1.0 and later, the more feature rich <code>t128_events</code> seen above should be used over the <code>execd</code> input version seen below. The config below should only be used with those older versions of the monitoring agent.  </p></div></div><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-toml codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">[[inputs.execd]]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ## Create a stream of 128T events for alarm, audit etc. This information is useful for</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ## monitoring the health of the system.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  command = &quot;/usr/bin/eventCollector128t&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  signal = &quot;none&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  data_format = &quot;influx&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ## input event filtering based on type (admin, alarm, system, traffic, provisioning)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ## NOTE: For information on filtering severity refer to the output configuration example</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  [inputs.execd.tagpass]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  type = [&quot;alarm&quot;, &quot;admin&quot;]</span></div></div></div></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="device-interface-state-collector"></a>Device Interface State Collector<a aria-hidden="true" tabindex="-1" class="hash-link" href="#device-interface-state-collector" title="Direct link to heading">#</a></h3><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="version-history-2"></a>Version History<a aria-hidden="true" tabindex="-1" class="hash-link" href="#version-history-2" title="Direct link to heading">#</a></h4><table><thead><tr><th>Release</th><th>Modification</th></tr></thead><tbody><tr><td>1.2.1, 2.1.1</td><td><code>mac-address</code> tag was introduced</td></tr></tbody></table><p>The <code>deviceInterfaceStateCollector128t</code> collector can be used for monitoring the admin, oper and redundancy status of various device-interfaces configured on the node. The device interface name is available as the <code>device-interface</code> tag and the mac address is available as the <code>mac-address</code> tag. Telegraf <code>tagpass</code> can be used to filter specific interfaces as needed. For example:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-toml codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">[[inputs.exec]]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ## Collect information about the 128T device-interface admin, operational and</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ## redundancy status. This information is useful for monitoring the system health.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  commands = [&quot;/usr/bin/deviceInterfaceStateCollector128t&quot;]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ## Timeout for the device-interface state collector to finish</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  timeout = &quot;5s&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ## Data format to consume.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ## Each data format has its own unique set of configuration options, read</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ## more about them here:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ## https://github.com/influxdata/telegraf/blob/master/docs/DATA_FORMATS_INPUT.md</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  data_format = &quot;influx&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ## To filter on select device interfaces, you can use the `tagpass` and `tagdrop` concepts</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ## from telegraf. For example:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ## [[inputs.exec.tagpass]]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ##     device-interface = [&quot;wan1&quot;]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ##     mac-address = [&quot;00:0a:95:9d:68:16&quot;]</span></div></div></div></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="peer-path-state-collector"></a>Peer Path State collector<a aria-hidden="true" tabindex="-1" class="hash-link" href="#peer-path-state-collector" title="Direct link to heading">#</a></h3><p>The <code>peerPathStateCollector128t</code> collector can be used for monitoring the up/down status of all the peer paths on the node. The various part of a peer-path such as <code>adjacentAddress</code> and <code>networkInterface</code> are available as tags which can be filtered. For example:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-toml codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">[[inputs.exec]]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ## Collect information about the 128T adjacency peer-path status. This information</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ## is useful to monitoring the secure WAN connectivity to the peers</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  commands = [&quot;/usr/bin/peerPathStateCollector128t&quot;]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ## Timeout for the peer-path state collector to finish</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  timeout = &quot;5s&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ## Data format to consume.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ## Each data format has its own unique set of configuration options, read</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ## more about them here:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ## https://github.com/influxdata/telegraf/blob/master/docs/DATA_FORMATS_INPUT.md</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  data_format = &quot;influx&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ## To filter on select peer-paths, you can use the `tagpass` and `tagdrop` concepts</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ## from telegraf. For example:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ## [[inputs.exec.tagpass]]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ##     adjacentAddress = [&quot;10.10.10.10&quot;]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ##     networkInterface = [&quot;wan1&quot;]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div></div></div></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="arp-state-collector"></a>Arp State Collector<a aria-hidden="true" tabindex="-1" class="hash-link" href="#arp-state-collector" title="Direct link to heading">#</a></h3><p>The <code>arpStateCollector128t</code> collector can be used for monitoring the arp table status of a network interface configured on the node. The device interface name, network interface name, vlan, ip address, and destination mac will be found as tags and telegraf tagpass can be used to filter specific arp entries as needed. For example:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-toml codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">[[inputs.exec]]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ## Collect information about the 128T arp table.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ## This information is useful for monitoring interface&#x27;s next hop reachability.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  commands = [&quot;/usr/bin/arpStateCollector128t&quot;]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ## Timeout for the arp state collector to finish</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  timeout = &quot;5s&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ## Data format to consume.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ## Each data format has its own unique set of configuration options, read</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ## more about them here:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ## https://github.com/influxdata/telegraf/blob/master/docs/DATA_FORMATS_INPUT.md</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  data_format = &quot;influx&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ## To filter on select properties of the arp entry, you can use the `tagpass` and `tagdrop` concepts</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ## from telegraf. For example:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ## [[inputs.exec.tagpass]]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ##     device-interface = [&quot;wan1&quot;]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ##     network-interface = [&quot;wan1intf&quot;]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ##     vlan = [&quot;128&quot;]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ##     ip-address = [&quot;192.169.128.0&quot;]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ##     destination-mac = [&quot;00:0a:95:9d:68:16&quot;]</span></div></div></div></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="lte-collector"></a>LTE Collector<a aria-hidden="true" tabindex="-1" class="hash-link" href="#lte-collector" title="Direct link to heading">#</a></h3><p>The <code>lteMetricCollector128t</code> collector when run will scan the current node configuration for any 128T supported and configured LTE devices. This collector can be used for pushing the <code>signal-strength</code> and <code>carrier</code> information to the monitoring stack. For example:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-toml codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">[[inputs.exec]]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ## Collect the signal-strength and carrier information from configured LTE card(s) on</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ## the system. This information is useful for monitoring any fluctuations in carrier</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ## signal causing loss of connectivity.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  commands = [&quot;/usr/bin/lteMetricCollector128t&quot;]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ## Timeout for the LTE metric collector to finish</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  timeout = &quot;10s&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ## Data format to consume.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ## Each data format has its own unique set of configuration options, read</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ## more about them here:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ## https://github.com/influxdata/telegraf/blob/master/docs/DATA_FORMATS_INPUT.md</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  data_format = &quot;influx&quot;</span></div></div></div></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="top-analytics-collector"></a>Top Analytics Collector<a aria-hidden="true" tabindex="-1" class="hash-link" href="#top-analytics-collector" title="Direct link to heading">#</a></h3><p>The <code>topAnalyticsCollector128t</code> collector can be used for monitoring the top sources, top sessions and top applications on the router. The different aspects of each of these data sources are easily tunable using the input configuration.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-toml codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">[[inputs.top_analytics]]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    # # By default all the data sources below are enabled along with their default properties.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    # [[inputs.top_analytics.sessions]]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    #     enabled = true</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    # [[inputs.top_analytics.sources]]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    #     enabled = true</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    #     max_rows = 10</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    #     category = &quot;TOTAL_DATA&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    # [[inputs.top_analytics.applications]]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    #     enabled = true</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    #     max_rows = 10</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    #     filter = &quot;&lt;word to search for in application names&gt;&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    #     # Minimum number of active session for the application to be reported</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    #     min-session-count = 1</span></div></div></div></div></div><p>The <strong>top sessions</strong> input above can be used to stream the view of the top 10 sessions by bandwidth utilization. The <strong>enabled</strong> flag can be used to turn off the collection of top sessions.</p><p>The <strong>top sources</strong> input can be used to capture the list of source IP addresses by either <strong>TOTAL_DATA</strong> (default) or by <strong>SESSION_COUNT</strong>. In addition, the user can configure the maximum number of top data samples to collect as configured by the <strong>max_rows</strong> configuration above. Finally the <strong>enabled</strong> flag can be used to turn off the top sources collection is need be.</p><p>The <strong>top applications</strong> input is useful when application identification in terms of module or tls have been configured on the router. By default, all the discovered sessions will be reported by the input. The user can tune the collection by setting up a search filter in the form of <strong>filter</strong> or eliminate the applications that have some minimum number of sessions via <strong>min-session-count</strong>. The <strong>max-rows</strong> will limit the reporting to the first N rows. The collection can be turned off by setting <strong>enabled</strong> to be false.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="release-notes"></a>Release Notes<a aria-hidden="true" tabindex="-1" class="hash-link" href="#release-notes" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="release-310"></a>Release 3.1.0<a aria-hidden="true" tabindex="-1" class="hash-link" href="#release-310" title="Direct link to heading">#</a></h3><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="new-features-and-improvements"></a>New Features and Improvements:<a aria-hidden="true" tabindex="-1" class="hash-link" href="#new-features-and-improvements" title="Direct link to heading">#</a></h4><ul><li><strong>MON-297</strong> The LTE collector will use the state file generated by 128T software where possible.</li></ul><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="issues-fixed"></a>Issues Fixed<a aria-hidden="true" tabindex="-1" class="hash-link" href="#issues-fixed" title="Direct link to heading">#</a></h4><ul><li><p><strong>MON-294</strong> LTE interfaces were not found in the 128T configuration</p><p><em><strong>Resolution</strong></em> Account for the differences in the configuration across various 128T software versions.</p></li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="release-300"></a>Release 3.0.0<a aria-hidden="true" tabindex="-1" class="hash-link" href="#release-300" title="Direct link to heading">#</a></h3><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="new-features-and-improvements-1"></a>New Features and Improvements<a aria-hidden="true" tabindex="-1" class="hash-link" href="#new-features-and-improvements-1" title="Direct link to heading">#</a></h4><ul><li><strong>MON-230</strong> Make 3.X version of the Monitoring agent compatible with 4.1.0 &lt;= 128T &lt; 6.0.0</li><li><strong>MON-233</strong> Upgrade telegraf to 1.14.5</li><li><strong>MON-234</strong> Improve metrics collection performance by creating a native Telegraf plugin</li><li><strong>MON-198</strong> Provide sample and push interval overrides per input in the agent&#x27;s config</li><li><strong>MON-246</strong> Enable value substitution in telegraf configuration files</li></ul><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="issues-fixed-1"></a>Issues Fixed<a aria-hidden="true" tabindex="-1" class="hash-link" href="#issues-fixed-1" title="Direct link to heading">#</a></h4><ul><li><p><strong>MON-280</strong> Make the arp state collector compatible with 128T 5.X</p><p><em><strong>Resolution</strong></em> The arp state collector now dynamically handles data collection depending on the 128T version.</p></li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="release-211"></a>Release 2.1.1<a aria-hidden="true" tabindex="-1" class="hash-link" href="#release-211" title="Direct link to heading">#</a></h3><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="new-features-and-improvements-2"></a>New Features and Improvements<a aria-hidden="true" tabindex="-1" class="hash-link" href="#new-features-and-improvements-2" title="Direct link to heading">#</a></h4><ul><li><p><strong>MON-225</strong> Update telegraf dependency to 1.14.3</p></li><li><p><strong>MON-227</strong> Allow this version of the Monitoring Agent to be installed with 128T &lt; 6.0.0 (previously &lt; 5.0.0)</p></li><li><p><strong>MON-218</strong> Expose MAC address in the device state input</p><ul><li>Allow better correlation between device and network interfaces.</li></ul></li><li><p><strong>MON-210</strong> Improve performance of several provided inputs</p><ul><li>Reduce the resource consumption as well as the time needed to collect data. In particular, the <code>t128_metrics</code> input has been significanly improved.</li></ul></li></ul><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="issues-fixed-2"></a>Issues Fixed<a aria-hidden="true" tabindex="-1" class="hash-link" href="#issues-fixed-2" title="Direct link to heading">#</a></h4><ul><li><p><strong>MON-205</strong> Honor the input enable/disable flag in the agent&#x27;s config</p><p><em><strong>Resolution</strong></em> The configuration allows the user to disable an input. However, an input was being treated as enabled as long as it existed in the config. That configuration option is now honored.</p></li><li><p><strong>MON-225</strong> <code>t128_events</code> input would occasionally drop or delayed events</p><p><em><strong>Resolution</strong></em> Update the telegraf dependency to 1.14.3 as well as the <code>execd</code> input to better handle simultaneous events.</p></li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="release-210"></a>Release 2.1.0<a aria-hidden="true" tabindex="-1" class="hash-link" href="#release-210" title="Direct link to heading">#</a></h3><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="new-features-and-improvements-3"></a>New Features and Improvements<a aria-hidden="true" tabindex="-1" class="hash-link" href="#new-features-and-improvements-3" title="Direct link to heading">#</a></h4><ul><li><strong>MON-184</strong> Added stop command in cli to stop all associated Telegraf services.</li></ul><p>For help using this cli option, please refer to the <a href="/docs/plugin_monitoring_agent#stopping-services">Monitoring Agent Guide</a>.</p><ul><li><strong>MON-141</strong> Added support for multiple logically seperate monitoring agent instances with the <code>lib-directory</code> config option.</li></ul><p>For help configuring this option, please refer to the <a href="/docs/plugin_monitoring_agent#configuration">Monitoring Agent Guide</a>.</p><ul><li><strong>MON-208</strong> Update Telegraf to latest stable version 1.14.2.</li></ul><p>A new stable version of telegraf was released upstream. The main reason for upgrading was to get support for multiline lines.</p><ul><li><strong>MON-194</strong> Added arp state collector to collect state of the arp table.</li></ul><p>To configure the new input plugin, please refer to the <a href="/docs/plugin_monitoring_agent#arp-state-collector">Monitoring Agent Guide</a>.</p><ul><li><strong>MON-144</strong> Added configuration option to enable tracking of index so that the event collector picks up where it left off in the case of a restart.</li></ul><p>For help configuring this option, please refer to the <a href="/docs/plugin_monitoring_agent#event-collector">Monitoring Agent Guide</a>.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="issues-fixed-3"></a>Issues Fixed<a aria-hidden="true" tabindex="-1" class="hash-link" href="#issues-fixed-3" title="Direct link to heading">#</a></h4><ul><li><p><strong>MON-195</strong> Device state collector collects state from peer node on an HA router.</p><p><em><strong>Resolution</strong></em> The device state collector will now only request state from the local node.</p></li><li><p><strong>MON-181</strong> Event collector excludes multiline events.</p><p><em><strong>Resolution</strong></em> The event collector will accumulate subsequent invalid lines and attempt to submit the accumulated line.</p></li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="release-201"></a>Release 2.0.1<a aria-hidden="true" tabindex="-1" class="hash-link" href="#release-201" title="Direct link to heading">#</a></h3><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="issues-fixed-4"></a>Issues Fixed<a aria-hidden="true" tabindex="-1" class="hash-link" href="#issues-fixed-4" title="Direct link to heading">#</a></h4><ul><li><p><strong>MON-185</strong> telegraf error when processing results from peer path input</p><p><em><strong>Resolution:</strong></em> The extra logging causing the problem was removed</p></li><li><p><strong>MON-186</strong> LTE metric collector not reporting any values</p><p><em><strong>Resolution:</strong></em> Updated the library imports and identifiers used to display the missing data</p></li><li><p><strong>MON-188</strong> The events inputs collector has invalid sample</p><p><em><strong>Resolution:</strong></em> Updated the sample and staged configuration example for events</p></li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="release-200"></a>Release 2.0.0<a aria-hidden="true" tabindex="-1" class="hash-link" href="#release-200" title="Direct link to heading">#</a></h3><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="new-features-and-improvements-4"></a>New Features and Improvements<a aria-hidden="true" tabindex="-1" class="hash-link" href="#new-features-and-improvements-4" title="Direct link to heading">#</a></h4><ul><li><strong>MON-126</strong> Automatically stage all 128T input configuration for easy of use</li></ul><p>The configuration for all 128T collectors such as t128_metrics, t128_events etc will automatically be staged in the inputs directory for convenience.</p><ul><li><strong>MON-148</strong> Top applications, sessions and sources input plugin</li></ul><p>To configure the new input plugin, please refer to the <a href="/docs/plugin_monitoring_agent#top-analytics-collector">Monitoring Agent Guide</a></p><ul><li><strong>MON-164</strong> Test monitoring-agent input configuration</li></ul><p>For verification of the data collected the user can use <code>monitoring-agent-cli generate</code> command to generate all the telegraf configuration. Subsequently, the user can run <code>monitoring-agent-cli test-input</code> to test a specific input. More details can be found in the <a href="/docs/plugin_monitoring_agent#testing-and-validation">Testing And Validation section</a></p><ul><li><strong>MON-171</strong> Update Telegraf to latest stable version 1.14.0 ####</li></ul><p>A new stable version of telegraf was released upstream with several new inputs such as execd, wireguard and others.</p><ul><li><strong>MON-175</strong> LTE metric collect will include SNR signal strength ####</li></ul><p>The <code>t128_lte_metric</code> collector will look for and report SNR signal strength if it is reported by the 128T router.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="issues-fixed-5"></a>Issues Fixed<a aria-hidden="true" tabindex="-1" class="hash-link" href="#issues-fixed-5" title="Direct link to heading">#</a></h4><ul><li><p><strong>MON-125</strong> <code>t128_metrics</code> default bfd config doesn&#x27;t work with 4.3</p><p><em><strong>Resolution:</strong></em> The new default config for metrics have the correct parameters for BFD metrics</p></li><li><p><strong>MON-146</strong> Metric collector timing out with the default config on customer system</p><p><em><strong>Resolution:</strong></em> The metric configuration will now have a default timeout of 15 seconds.</p></li><li><p><strong>MON-160</strong> sample agent-config has invalid tags</p><p><em><strong>Resolution:</strong></em> All the sample configurations now contain valid data</p></li><li><p><strong>MON-169</strong> peer-path collector only captures 1 peer-path per node</p><p><em><strong>Resolution:</strong></em> All peer paths on the node will be reported by the peer-path collector</p></li><li><p><strong>MON-170</strong> Default telegraf service (not 128T-telegraf) is enabled and running un-necessarily on the system</p><p><em><strong>Resolution:</strong></em> The system telegraf service will be stopped and disabled</p></li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="release-121"></a>Release 1.2.1<a aria-hidden="true" tabindex="-1" class="hash-link" href="#release-121" title="Direct link to heading">#</a></h3><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="new-features-and-improvements-5"></a>New Features and Improvements<a aria-hidden="true" tabindex="-1" class="hash-link" href="#new-features-and-improvements-5" title="Direct link to heading">#</a></h4><ul><li><p><strong>MON-225</strong> Update telegraf dependency to 1.14.3</p></li><li><p><strong>MON-218</strong> Expose MAC address in the device state input</p></li></ul><p>Allow better correlation between device and network interfaces.</p><ul><li><strong>MON-210</strong> Improve performance of several provided inputs</li></ul><p>Reduce the resource consumption as well as the time needed to collect data. In particular, the <code>t128_metrics</code> input has been significanly improved.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="issues-fixed-6"></a>Issues Fixed<a aria-hidden="true" tabindex="-1" class="hash-link" href="#issues-fixed-6" title="Direct link to heading">#</a></h4><ul><li><p><strong>MON-205</strong> Honor the input enable/disable flag in the agent&#x27;s config</p><p><em><strong>Resolution</strong></em> The configuration allows the user to disable an input. However, an input was being treated as enabled as long as it existed in the config. That configuration option is now honored.</p></li><li><p><strong>MON-225</strong> <code>t128_events</code> input would occasionally drop or delayed events</p><p><em><strong>Resolution</strong></em> Update the telegraf dependency to 1.14.3 as well as the <code>execd</code> input to better handle simultaneous events.</p></li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="release-120"></a>Release 1.2.0<a aria-hidden="true" tabindex="-1" class="hash-link" href="#release-120" title="Direct link to heading">#</a></h3><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="new-features-and-improvements-6"></a>New Features and Improvements<a aria-hidden="true" tabindex="-1" class="hash-link" href="#new-features-and-improvements-6" title="Direct link to heading">#</a></h4><ul><li><strong>MON-184</strong> Added stop command in cli to stop all associated Telegraf services.</li></ul><p>For help using this cli option, please refer to the <a href="/docs/plugin_monitoring_agent#stopping-services">Monitoring Agent Guide</a>.</p><ul><li><strong>MON-141</strong> Added support for multiple logically seperate monitoring agent instances with the <code>lib-directory</code> config option.</li></ul><p>For help configuring this option, please refer to the <a href="/docs/plugin_monitoring_agent#configuration">Monitoring Agent Guide</a>.</p><ul><li><strong>MON-208</strong> Update Telegraf to latest stable version 1.14.2.</li></ul><p>A new stable version of telegraf was released upstream. The main reason for upgrading was to get support for multiline lines.</p><ul><li><strong>MON-194</strong> Added arp state collector to collect state of the arp table.</li></ul><p>To configure the new input plugin, please refer to the <a href="/docs/plugin_monitoring_agent#arp-state-collector">Monitoring Agent Guide</a>.</p><ul><li><strong>MON-144</strong> Added configuration option to enable tracking of index so that the event collector picks up where it left off in the case of a restart.</li></ul><p>For help configuring this option, please refer to the <a href="/docs/plugin_monitoring_agent#event-collector">Monitoring Agent Guide</a>.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="issues-fixed-7"></a>Issues Fixed<a aria-hidden="true" tabindex="-1" class="hash-link" href="#issues-fixed-7" title="Direct link to heading">#</a></h4><ul><li><p><strong>MON-195</strong> Device state collector collects state from peer node on an HA router.</p><p><em><strong>Resolution</strong></em> The device state collector will now only request state from the local node.</p></li><li><p><strong>MON-181</strong> Event collector excludes multiline events.</p><p><em><strong>Resolution</strong></em> The event collector will accumulate subsequent invalid lines and attempt to submit the accumulated line.</p></li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="release-111"></a>Release 1.1.1<a aria-hidden="true" tabindex="-1" class="hash-link" href="#release-111" title="Direct link to heading">#</a></h3><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="issues-fixed-8"></a>Issues Fixed<a aria-hidden="true" tabindex="-1" class="hash-link" href="#issues-fixed-8" title="Direct link to heading">#</a></h4><ul><li><p><strong>MON-185</strong> telegraf error when processing results from peer path input</p><p><em><strong>Resolution:</strong></em> The extra logging causing the problem was removed</p></li><li><p><strong>MON-186</strong> LTE metric collector not reporting any values</p><p><em><strong>Resolution:</strong></em> Updated the library imports and identifiers used to display the missing data</p></li><li><p><strong>MON-188</strong> The events inputs collector has invalid sample</p><p><em><strong>Resolution:</strong></em> Updated the sample and staged configuration example for events</p></li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="release-110"></a>Release 1.1.0<a aria-hidden="true" tabindex="-1" class="hash-link" href="#release-110" title="Direct link to heading">#</a></h3><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="new-features-and-improvements-7"></a>New Features and Improvements<a aria-hidden="true" tabindex="-1" class="hash-link" href="#new-features-and-improvements-7" title="Direct link to heading">#</a></h4><ul><li><strong>MON-126</strong> Automatically stage all 128T input configuration for easy of use</li></ul><p>The configuration for all 128T collectors such as t128_metrics, t128_events etc will automatically be staged in the inputs directory for convenience.</p><ul><li><strong>MON-148</strong> Top applications, sessions and sources input plugin</li></ul><p>To configure the new input plugin, please refer to the <a href="/docs/plugin_monitoring_agent#top-analytics-collector">Monitoring Agent Guide</a></p><ul><li><strong>MON-164</strong> Test monitoring-agent input configuration</li></ul><p>For verification of the data collected the user can use <code>monitoring-agent-cli generate</code> command to generate all the telegraf configuration. Subsequently, the user can run <code>monitoring-agent-cli test-input</code> to test a specific input. More details can be found in the <a href="/docs/plugin_monitoring_agent#testing-and-validation">Testing And Validation section</a></p><ul><li><strong>MON-171</strong> Update Telegraf to latest stable version 1.14.0 ####</li></ul><p>A new stable version of telegraf was released upstream with several new inputs such as execd, wireguard and others.</p><ul><li><strong>MON-175</strong> LTE metric collect will include SNR signal strength ####</li></ul><p>The <code>t128_lte_metric</code> collector will look for and report SNR signal strength if it is reported by the 128T router.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="issues-fixed-9"></a>Issues Fixed<a aria-hidden="true" tabindex="-1" class="hash-link" href="#issues-fixed-9" title="Direct link to heading">#</a></h4><ul><li><p><strong>MON-146</strong> Metric collector timing out with the default config on customer system</p><p><em><strong>Resolution:</strong></em> The metric configuration will now have a default timeout of 15 seconds.</p></li><li><p><strong>MON-160</strong> sample agent-config has invalid tags</p><p><em><strong>Resolution:</strong></em> All the sample configurations now contain valid data</p></li><li><p><strong>MON-169</strong> peer-path collector only captures 1 peer-path per node</p><p><em><strong>Resolution:</strong></em> All peer paths on the node will be reported by the peer-path collector</p></li><li><p><strong>MON-170</strong> Default telegraf service (not 128T-telegraf) is enabled and running un-necessarily on the system</p><p><em><strong>Resolution:</strong></em> The system telegraf service will be stopped and disabled</p></li></ul></div></article><div class="margin-vert--xl"><div class="row"><div class="col"></div><div class="col text--right"><em><small>Last updated on <time datetime="2020-08-12T20:06:54.000Z" class="docLastUpdatedAt_217_">8/12/2020</time></small></em></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/plugin_m800_watchdog"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« M800 Watchdog</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/plugin_mosh"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Mosh Plugin Â»</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_3klQ"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#installation" class="table-of-contents__link">Installation</a></li><li><a href="#configuration" class="table-of-contents__link">Configuration</a><ul><li><a href="#version-history" class="table-of-contents__link">Version History</a></li></ul></li><li><a href="#directory-structure" class="table-of-contents__link">Directory Structure</a><ul><li><a href="#inputs" class="table-of-contents__link">Inputs</a></li><li><a href="#outputs" class="table-of-contents__link">Outputs</a></li><li><a href="#config" class="table-of-contents__link">Config</a></li><li><a href="#samples" class="table-of-contents__link">Samples</a></li></ul></li><li><a href="#config-examples" class="table-of-contents__link">Config Examples</a><ul><li><a href="#inputs-1" class="table-of-contents__link">Inputs</a></li><li><a href="#outputs-1" class="table-of-contents__link">Outputs</a></li><li><a href="#variable-replacement" class="table-of-contents__link">Variable Replacement</a></li></ul></li><li><a href="#monitoring-agent-cli" class="table-of-contents__link">Monitoring Agent CLI</a><ul><li><a href="#validation" class="table-of-contents__link">Validation</a></li><li><a href="#sample-config" class="table-of-contents__link">Sample Config</a></li><li><a href="#generation" class="table-of-contents__link">Generation</a></li><li><a href="#configuration-1" class="table-of-contents__link">Configuration</a></li><li><a href="#testing-and-validation" class="table-of-contents__link">Testing and Validation</a></li><li><a href="#stopping-services" class="table-of-contents__link">Stopping Services</a></li></ul></li><li><a href="#128t-collectors" class="table-of-contents__link">128T Collectors</a><ul><li><a href="#metric-collector" class="table-of-contents__link">Metric collector</a></li><li><a href="#event-collector" class="table-of-contents__link">Event Collector</a></li><li><a href="#device-interface-state-collector" class="table-of-contents__link">Device Interface State Collector</a></li><li><a href="#peer-path-state-collector" class="table-of-contents__link">Peer Path State collector</a></li><li><a href="#arp-state-collector" class="table-of-contents__link">Arp State Collector</a></li><li><a href="#lte-collector" class="table-of-contents__link">LTE Collector</a></li><li><a href="#top-analytics-collector" class="table-of-contents__link">Top Analytics Collector</a></li></ul></li><li><a href="#release-notes" class="table-of-contents__link">Release Notes</a><ul><li><a href="#release-310" class="table-of-contents__link">Release 3.1.0</a></li><li><a href="#release-300" class="table-of-contents__link">Release 3.0.0</a></li><li><a href="#release-211" class="table-of-contents__link">Release 2.1.1</a></li><li><a href="#release-210" class="table-of-contents__link">Release 2.1.0</a></li><li><a href="#release-201" class="table-of-contents__link">Release 2.0.1</a></li><li><a href="#release-200" class="table-of-contents__link">Release 2.0.0</a></li><li><a href="#release-121" class="table-of-contents__link">Release 1.2.1</a></li><li><a href="#release-120" class="table-of-contents__link">Release 1.2.0</a></li><li><a href="#release-111" class="table-of-contents__link">Release 1.1.1</a></li><li><a href="#release-110" class="table-of-contents__link">Release 1.1.0</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container"><div class="text--center"><div>Copyright Â© 2020 128 Technology, Inc.</div></div></div></footer></div>
<script src="/styles.c3d814b8.js"></script>
<script src="/runtime~main.54f3bd1c.js"></script>
<script src="/main.c993cd9a.js"></script>
<script src="/1.e48c6587.js"></script>
<script src="/2.0b9f4486.js"></script>
<script src="/124.866c24a0.js"></script>
<script src="/127.c5fb5cb6.js"></script>
<script src="/20ac7829.d2166c4c.js"></script>
<script src="/17896441.20f74e96.js"></script>
<script src="/ea10fb5e.095de107.js"></script>
</body>
</html>