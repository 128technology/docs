<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-plugin_monitoring_agent">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.3.1">
<title data-rh="true">Monitoring Agent | SSN Docs</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://docs.128technology.com/docs/plugin_monitoring_agent"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Monitoring Agent | SSN Docs"><meta data-rh="true" name="description" content="The SSR Monitoring Agent is an entity for collecting data from a node running SSR software and to push it to a collector. It is capable of collecting the data from several sources such as metrics, events etc. The current mechanism of monitoring an SSR involves performing REST or GraphQL queries from the conductor. At scale, this can become inefficient and be problematic in terms of the performance of the conductor. Additionally it is important to interact with 3rd party monitoring platforms as means for organizations to collect, analyze and report using various KPIs available from SSR software and other application in the network."><meta data-rh="true" property="og:description" content="The SSR Monitoring Agent is an entity for collecting data from a node running SSR software and to push it to a collector. It is capable of collecting the data from several sources such as metrics, events etc. The current mechanism of monitoring an SSR involves performing REST or GraphQL queries from the conductor. At scale, this can become inefficient and be problematic in terms of the performance of the conductor. Additionally it is important to interact with 3rd party monitoring platforms as means for organizations to collect, analyze and report using various KPIs available from SSR software and other application in the network."><link data-rh="true" rel="icon" href="/img/favicon.png"><link data-rh="true" rel="canonical" href="https://docs.128technology.com/docs/plugin_monitoring_agent"><link data-rh="true" rel="alternate" href="https://docs.128technology.com/docs/plugin_monitoring_agent" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.128technology.com/docs/plugin_monitoring_agent" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.8e1fdc51.css">
<link rel="preload" href="/assets/js/runtime~main.4b7ba92e.js" as="script">
<link rel="preload" href="/assets/js/main.b845ed4e.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.png" alt="Juniper Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/logo_dark.png" alt="Juniper Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate"></b></a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/docs/intro_getting_started">Docs</a><a href="https://community.juniper.net/answers/communities/community-home?CommunityKey=310d1a41-12fa-4627-9a99-880145a7c87c" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Community<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://www.juniper.net/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Company<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="searchBox_ZlJk"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/about_128t">About</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/intro_getting_started">Introduction</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/intro_system_reqs">Deployment Considerations</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/intro_installation">Installation Process</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/install_conductor_overview">Conductor Installation</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/intro_installation_bootable_media">Router Installation</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/intro_installation_image">Image-Based Installation</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/supported_cloud_platforms">Cloud Installations</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/intro_upgrade_considerations">Upgrades and Rollback</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/intro_installation_installer">Supporting Install Information - Appendix</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/concepts_application_discovery">Concepts</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/wan_overview">WAN Assurance</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/config_basics">Administration</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/events_overview">Events</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/bcp_att_avpn_configuration">Best Practices</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/cli_reference">CLI and Element Reference</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/installer_cli_reference">Installer/Initializer Reference</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/docs/plugin_intro">Plugins</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/plugin_intro">Introduction</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/plugin_bgp_community_services">BGP Community Services</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/plugin_cloud_ha">Cloud HA</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/plugin_dns_app_id">DNS App Id</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/plugin_dns_cache">DNS Cache</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/plugin_gre">GRE</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/plugin_ha_sync_redundancy">HA Sync Redundancy Plugin</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/plugin_http_probe">HTTP Probe Reachability Detection</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/plugin_icmp_reachability_detection">ICMP Reachability Detection</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/plugin_ipsec_client">IPsec Client</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/plugin_loopback_static_routes">Loopback Static Routes</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/plugin_m800_watchdog">M800 Watchdog</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/plugin_monitoring_agent">Monitoring Agent</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/plugin_mosh">Mosh</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/plugin_set_hostname">Set Hostname</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/plugin_sip_alg">SIP ALG</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/plugin_wireguard">Wireguard</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/plugin_kni_namespace_scripts">KNI Namespace Scripts</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/release_notes_128t_6.1">Release Notes</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Plugins</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Monitoring Agent</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Monitoring Agent</h1></header><p>The SSR Monitoring Agent is an entity for collecting data from a node running SSR software and to push it to a collector. It is capable of collecting the data from several sources such as metrics, events etc. The current mechanism of monitoring an SSR involves performing REST or GraphQL queries from the conductor. At scale, this can become inefficient and be problematic in terms of the performance of the conductor. Additionally it is important to interact with 3rd party monitoring platforms as means for organizations to collect, analyze and report using various KPIs available from SSR software and other application in the network.</p><p>The monitoring agent at its core is designed to be able to push data to external platforms. It currently leverages the <a href="https://www.influxdata.com/time-series-platform/telegraf/" target="_blank" rel="noopener noreferrer">Telegraf</a> collection stack on every SSR. However, the monitoring agent is designed with other tools and scale in mind. The monitoring agent is composed of the following:</p><ul><li><p><strong>monitoring-agent-cli</strong>
Used for configuring and interacting with the underlying application</p></li><li><p><strong>collectors</strong>
A set of inputs designed to collect data from several sources such as metrics, events etc.</p></li><li><p><strong>targets</strong>
A set of outputs for collecting and pushing the data to various data sinks such as external monitoring platforms, files on disk etc.</p></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="installation">Installation<a href="#installation" class="hash-link" aria-label="Direct link to Installation" title="Direct link to Installation">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="plugin">Plugin<a href="#plugin" class="hash-link" aria-label="Direct link to Plugin" title="Direct link to Plugin">​</a></h3><p>For deployments running SSR version <code>5.1.0</code> or greater on the conductor, install the monitoring agent plugin for configuration management.</p><div class="theme-admonition theme-admonition-note alert alert--secondary admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_S0QG"><p>The instructions for installing and managing the plugin can be found <a href="/docs/plugin_intro#installation-and-management">here</a>.</p></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="manual-installation">Manual installation<a href="#manual-installation" class="hash-link" aria-label="Direct link to Manual installation" title="Direct link to Manual installation">​</a></h3><p>The SSR Monitoring Agent can be obtained from the official SSR software repository. The latest 128T-monitoring-agent should always be used and is compatible with <code>128T &gt;= 4.1.0</code></p><div class="theme-admonition theme-admonition-important alert alert--info admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_S0QG"><p>Monitoring Agent 3.X deprecates prior releases and is compatible with all previously supported SSR versions. It should be preferred for new installations and upgrades.</p></div></div><p>The agent can be install using the <code>dnf</code> utility.</p><div class="language-console codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-console codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">dnf install 128T-monitoring-agent</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="configuration">Configuration<a href="#configuration" class="hash-link" aria-label="Direct link to Configuration" title="Direct link to Configuration">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="plugin-configuration">Plugin Configuration<a href="#plugin-configuration" class="hash-link" aria-label="Direct link to Plugin Configuration" title="Direct link to Plugin Configuration">​</a></h3><p>With the plugin installed, the configuration for the monitoring agent can be managed via the conductor. The general workflow for creating the configuration is as follows:</p><ul><li>Configure the inputs</li><li>Configure the outputs</li><li>Create an agent config profile</li><li>Reference the profile on the router</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="input-configuration">Input Configuration<a href="#input-configuration" class="hash-link" aria-label="Direct link to Input Configuration" title="Direct link to Input Configuration">​</a></h4><p>The monitoring agent plugin allows the user to configure a set of inputs to be captured to monitor the routers. The configuration can be found under <code>config &gt; authority &gt; monitoring &gt; input</code>. The configuration will depend on the type of input selected and here are the common fields that apply to all the inputs</p><table><thead><tr><th>Element</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>name</td><td>string</td><td>The name of the input</td></tr><tr><td>type</td><td>enumeration</td><td>The type of the input such as device-state, metrics etc</td></tr><tr><td>additional-config</td><td>multiline-toml-string</td><td>Additional telegraf configuration for the input not captured by the data model</td></tr><tr><td>tags</td><td>list</td><td>List of tags to be included for this particular input</td></tr><tr><td>tags &gt; tag</td><td>string</td><td>The name of the tag</td></tr><tr><td>tags &gt; node</td><td>-</td><td>Use the node name of the router as tag value</td></tr><tr><td>tags &gt; router</td><td>-</td><td>Use the router name of the router as tag value</td></tr><tr><td>tags &gt; value</td><td>string</td><td>User specified value for the tag</td></tr></tbody></table><p>Based on the selected type, additional type specific configuration will be configurable. Here&#x27;s an example of a <code>custom-input</code> which allows the user to create a TOML telegraf configuration.</p><div class="language-config codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-config codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">admin@node1.conductor1#</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">admin@node1.conductor1# configure authority monitoring input cpu</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">admin@node1.conductor1 (input[name=cpu])# type custom-input</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">*admin@node1.conductor1 (input[name=cpu])# config</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Enter toml for config (Press CTRL-D to finish):</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">[[inputs.cpu]]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  ## Whether to report per-cpu stats or not</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  percpu = true</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  ## Whether to report total system cpu stats or not</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  totalcpu = true</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  ## If true, collect raw CPU time metrics.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  collect_cpu_time = false</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  ## If true, compute and report the sum of all non-idle CPU states.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  report_active = false</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">*admin@node1.conductor1 (input[name=cpu])#</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="output-configuration">Output configuration<a href="#output-configuration" class="hash-link" aria-label="Direct link to Output configuration" title="Direct link to Output configuration">​</a></h4><p>The output configuration provides information about the various data sink for the inputs. The monitoring configuration provides specific output types for convenience as well as a <code>custom-output</code> type for specifying any telegraf supported output definition. The common fields are as follows:</p><table><thead><tr><th>Element</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>name</td><td>string</td><td>The name of the output</td></tr><tr><td>type</td><td>enumeration</td><td>The type of the output such as Kafka, syslog etc</td></tr><tr><td>push-jitter</td><td>uint32</td><td>The amount of time to jitter sending of the data to the output</td></tr><tr><td>batch-size</td><td>uint32</td><td>The maximum number of rows of data to send at once</td></tr><tr><td>buffer-limit</td><td>uint32</td><td>The maximum number of unsent metrics in the buffer</td></tr><tr><td>data-format</td><td>enumeration</td><td>The output data format for telegraf such as influx, json</td></tr><tr><td>format</td><td>string</td><td>When the data-format is other, the name of the output format supported by telegraf</td></tr><tr><td>additional-config</td><td>multiline-toml-string</td><td>Additional telegraf configuration for the output not captured by the data model</td></tr></tbody></table><p>Based on the selected type, additional type specific configuration will be configurable. Here&#x27;s an example of a <code>custom-output</code> which allows the user to create a TOML telegraf configuration</p><div class="language-config codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-config codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">*admin@node1.conductor1# configure authority monitoring output http</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">*admin@node1.conductor1 (output[name=http])# type custom-output</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">*admin@node1.conductor1 (output[name=http])#</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">*admin@node1.conductor1 (output[name=http])# config</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Enter toml for config (Press CTRL-D to finish):</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># A plugin that can transmit metrics over HTTP</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">[[outputs.http]]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  ## URL is the address to send metrics to</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  url = &quot;http://127.0.0.1:8080/telegraf&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">*admin@node1.conductor1 (output[name=http])#</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="agent-configuration">Agent Configuration<a href="#agent-configuration" class="hash-link" aria-label="Direct link to Agent Configuration" title="Direct link to Agent Configuration">​</a></h4><p>The <code>agent-config</code> can be leveraged to create a monitoring profile by referencing the various inputs and outputs configured in the previous steps. This allows multiple profiles to be created and applies to different routers. The various configuration options for the <code>agent-config</code> as follows:</p><table><thead><tr><th>Element</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>name</td><td>string</td><td>The name of the agent configuration profile</td></tr><tr><td>push-interval</td><td>interval</td><td>The frequency with which to send data to the output(s)</td></tr><tr><td>sample-interval</td><td>interval</td><td>The frequency with which to collect data from the input(s)</td></tr><tr><td>tags</td><td>list</td><td>List of tags to be included for this particular input</td></tr><tr><td>tags &gt; tag</td><td>string</td><td>The name of the tag</td></tr><tr><td>tags &gt; node</td><td>-</td><td>Use the node name of the router as tag value</td></tr><tr><td>tags &gt; router</td><td>-</td><td>Use the router name of the router as tag value</td></tr><tr><td>tags &gt; value</td><td>string</td><td>User specified value for the tag</td></tr><tr><td>variables</td><td>list</td><td>List of config variables which allows for customization on the running system</td></tr><tr><td>variables &gt; name</td><td>string</td><td>The name of the variable</td></tr><tr><td>variables &gt; query</td><td>string</td><td>The <a href="#graphql-variables">GraphQL query</a> to be executed to determine the value of the variable</td></tr><tr><td>input</td><td>list</td><td>List of inputs to be included in the profile</td></tr><tr><td>input &gt; name</td><td>reference</td><td>Reference to the input configured above</td></tr><tr><td>input &gt; push-interval</td><td>uint32</td><td>Override the push-interval for the specific input</td></tr><tr><td>input &gt; sample-interval</td><td>uint32</td><td>Override the sample-interval for the specific input</td></tr><tr><td>input &gt; include-all-outputs</td><td>boolean</td><td>Default; true. When enabled, the input will be sent to all configured outputs</td></tr><tr><td>input &gt; output</td><td>reference</td><td>When <code>include-all-outputs</code> is false, configure a set of outputs to be used as data sink</td></tr><tr><td>input &gt; additional-config</td><td>multiline-toml-string</td><td>Additional Telegraf configuration not present in the datamodel such as preprocessors, aggregators etc</td></tr></tbody></table><p>An example of the agent configuration looks as follows:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">config</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    authority</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        monitoring</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            agent-config  my-agent</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                name             my-agent</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                tags             custom</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    tag    custom</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    value  custom1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                tags             router</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    tag     router</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    router</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                sample-interval  10s</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                push-interval    30s</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                input            device-state</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    name                 device-state</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    include-all-outputs  false</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    output               syslog</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                input            events</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    name                 events</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    push-interval        1s</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    include-all-outputs  true</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                input            graph</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    name  graph</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                input            metrics</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    name                 metrics</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    sample-interval      100s</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    include-all-outputs  false</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    output               kafka</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">exit</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="router-configuration">Router configuration<a href="#router-configuration" class="hash-link" aria-label="Direct link to Router configuration" title="Direct link to Router configuration">​</a></h4><p>Once all the inputs, outputs and agent-config are provisioned, the profile can be referenced on the individual routers. The monitoring config elements can be found under <code>authority &gt; router &gt; system &gt; monitoring</code></p><table><thead><tr><th>Element</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>enabled</td><td>boolean</td><td>Enable or disable the Monitoring Agent</td></tr><tr><td>agent-config</td><td>reference</td><td>The agent-config that should apply to this router</td></tr></tbody></table><p>Here&#x27;s an example of the router configuration</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">config</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    authority</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        router  router1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            name    router1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            system</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                monitoring</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    enabled       true</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    agent-config  my-agent</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">exit</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="file-based-configuration">File based configuration<a href="#file-based-configuration" class="hash-link" aria-label="Direct link to File based configuration" title="Direct link to File based configuration">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="version-history">Version History<a href="#version-history" class="hash-link" aria-label="Direct link to Version History" title="Direct link to Version History">​</a></h4><table><thead><tr><th>Release</th><th>Modification</th></tr></thead><tbody><tr><td>3.3.1</td><td>runtime environment <code>name</code> was introduced</td></tr><tr><td>3.0.0</td><td>per input <code>sample-interval</code> and <code>push-interval</code> were introduced</td></tr><tr><td>1.2.0, 2.1.0</td><td><code>lib-directory</code> was introduced</td></tr></tbody></table><p>The monitoring agent has its own set of configurations and looks for inputs from specific directories on disk. By default, the configuration for the agent should be present in <code>/etc/128t-monitoring/config.yaml</code> and uses YAML format which looks something like this:</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> user</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">agent</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">enabled</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token boolean important" style="color:rgb(255, 88, 116)">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">lib-directory</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> /var/lib/128t</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">monitoring</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">tags</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> </span><span class="token key atrule">key</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> router</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">value</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> $</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain">ROUTER</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">sample-interval</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">60</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">push-interval</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">300</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">inputs</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> events</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> t128_metrics</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">include-outputs</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">message_queue</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> t128_device_state</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">sample-interval</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">30</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">push-interval</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">90</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> t128_peer_path</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> lte_metric</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">exclude-outputs</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">file</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">outputs</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> file</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> message_queue</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>When multiple instances of the Monitoring Agent are running, two inputs with the same name can collide (be started/stopped/reconfigured by both instances) even if they are listed in separate <code>config.yaml</code> files. By default, the name of the directory containing the config file will be used as the name of the environment in order to distinguish them. Alternatively, the config <code>name</code> field can be explicitly specified to identify the unique environment.</p><p>The <code>enabled</code> field is meant as global toggle for applying the monitoring agent functionality. When set to <code>disabled</code> the monitoring agent will remain dormant on the SSR.</p><p><code>lib-directory</code> is the root directory for the Monitoring Agent. Other directores exist relative to it. This is useful when intending to isolate a set of Monitoring Agent elements from others.</p><p>Each of the <code>tags</code>, a collection of key/value pairs, are used to add meta information to the collected metrics. This data makes it easier to identify the origin, and to provide filtering by the collectors. By default, the agent includes the <code>${HOSTNAME}</code>, <code>${ROUTER}</code> and <code>${NODE}</code> tags to every collected input. The corresponding values are derived from the running system. The same config can ideally be used for each node in the authority, as their respective values are evaluated at runtime.</p><p><code>sample-interval</code> and <code>push-interval</code> indicate the frequency (in seconds) for how often the data is collected and subsequently pushed to the collection target. When the <code>push-interval</code> value is greater than the <code>sample-interval</code>, the agent will produce <code>ceiling(push-interval/sample-interval)</code> samples collected within the push duration. It is recommended to configure the <code>push-interval</code> as a multiple of <code>sample-interval</code>. These values can be overridden at the input level for finer control of agent&#x27;s behavior.</p><p>The <code>inputs</code> represent a single unit of collection. This can be a combination of inputs available from <code>telegraf</code> as well as other inputs developed by Juniper. The function and configuration of each of the SSR provided inputs can be found in subsequent sections. For <code>telegraf</code> inputs please refer to the <a href="https://docs.influxdata.com/telegraf/v1/configure_plugins/input_plugins/" target="_blank" rel="noopener noreferrer">influx documentation online</a>. Each <code>input</code> can be a combination of one or more collectors and can contain other collector specific information. For each of the inputs, a user can also configure an <code>include-outputs</code> which is a list of outputs to send the collected information to. This allows the user to build a matrix of inputs and outputs and provides a granular control over which input should be sent to what output. Similarly, the user can also configure an <code>exclude-outputs</code> which will include all defined outputs except the one specified.</p><p>The <code>outputs</code> represent a data sink where the collected information is to be delivered. By virtue of using <code>telegraf</code>, the monitoring agent gets automatic support of the <a href="https://docs.influxdata.com/telegraf/v1/configure_plugins/output_plugins/" target="_blank" rel="noopener noreferrer">available outputs supported by telegraf</a>. Each <code>input</code> can be configured to be delivered to one or more <code>output</code>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="directory-structure">Directory Structure<a href="#directory-structure" class="hash-link" aria-label="Direct link to Directory Structure" title="Direct link to Directory Structure">​</a></h2><p>The <code>monitoring-agent</code> uses a well-defined directory structure where it derives the inputs from various configuration. As described above, the base of the directory structure can be specified using the <code>lib-directory</code> configuration field. Directories exist relative to that one. The following directories are especially important:</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="inputs">Inputs<a href="#inputs" class="hash-link" aria-label="Direct link to Inputs" title="Direct link to Inputs">​</a></h3><p>Path: <code>/var/lib/128t-monitoring/inputs/</code></p><p>The <code>inputs</code> directory contains config files for the various inputs that are enabled in the monitoring-agent configuration. The monitoring agent expects to see a file called <code>&lt;input-name.conf&gt;</code> in this directory. Users can override the file name by specifying <code>conf: &lt;filename.conf&gt;</code> in the input definition within the config above. This file should only contain the telegraf definition for the input(s) that belong and not any other configuration. Configuration for all the SSR inputs will automatically be staged in the inputs directory. See the Config Examples section below for more details.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="outputs">Outputs<a href="#outputs" class="hash-link" aria-label="Direct link to Outputs" title="Direct link to Outputs">​</a></h3><p>Path: <code>/var/lib/128t-monitoring/outputs/</code></p><p>The <code>outputs</code> directory will contain the config files for the various data sink configured in the monitoring-agent configuration. For each <code>output</code> the conf file should contain the telegraf configuration for that one output only. This allows the monitoring-agent to create a telegraf config per input and include the appropriate outputs.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="config">Config<a href="#config" class="hash-link" aria-label="Direct link to Config" title="Direct link to Config">​</a></h3><p>Path: <code>/var/lib/128t-monitoring/config</code></p><p>The <code>config</code> directory contains the fully formed telegraf config files created by the monitoring agent. These file are generated based on the contents of <code>config.yaml</code> and the <code>inputs</code> and <code>outputs</code> directories.</p><p>For example, using the <code>t128_events</code> input and the <code>file</code> output in the examples section below will result in a configuration file such as:</p><div class="language-toml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-toml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">[global_tags]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">router = &quot;lte-router&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">node = &quot;lte-node&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">[agent]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">interval = 10</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">flush_interval = 20</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">[inputs]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">[[inputs.execd]]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">command = [ &quot;/usr/bin/eventCollector128t&quot;, &quot;--log-name&quot;, &quot;event_collector&quot;, &quot;--topic&quot;, &quot;events&quot;, &quot;--index-file&quot;, &quot;/tmp/events.index&quot;,]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">signal = &quot;none&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">data_format = &quot;influx&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">[inputs.execd.tagpass]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">type = [ &quot;admin&quot;,]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">[outputs]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">[[outputs.file]]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">files = [&quot;stdout&quot;, &quot;/tmp/metrics.out&quot;]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">data_format = &quot;influx&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="theme-admonition theme-admonition-important alert alert--info admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_S0QG"><p>Users should not make changes to these files as they will be overwritten by the <code>monitoring-agent-cli configure</code> command.</p></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="samples">Samples<a href="#samples" class="hash-link" aria-label="Direct link to Samples" title="Direct link to Samples">​</a></h3><p><code>/var/lib/128t-monitoring/samples/</code></p><p>The <code>samples</code> directory contains example configurations for the included SSR collectors. You can also display these using the <a href="#sample-config"><code>monitoring-agent-cli</code></a>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="config-examples">Config Examples<a href="#config-examples" class="hash-link" aria-label="Direct link to Config Examples" title="Direct link to Config Examples">​</a></h2><p>The following examples higlight just a few ways the monitoring agent can be configured. Be sure to reference the Telegraf documentation for the full ecosystem of input and outputs that are supported.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="inputs-1">Inputs<a href="#inputs-1" class="hash-link" aria-label="Direct link to Inputs" title="Direct link to Inputs">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="t128_metrics">t128_metrics<a href="#t128_metrics" class="hash-link" aria-label="Direct link to t128_metrics" title="Direct link to t128_metrics">​</a></h4><p>This example configures the <code>t128_metrics</code> collector to gather a set of default metrics from the SSR. This file is also included in the samples directory.</p><p>Path: <code>/var/lib/128t-monitoring/inputs/t128_metrics.conf</code></p><div class="language-toml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-toml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">[[inputs.t128_metrics]]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    ## When configured, the metric collector input will pull KPIs from the 128T system</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    ## running on the current node. Depending on the KPI, the information can be used for</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    ## monitoring various aspects of the running system such as services, interfaces, errors etc.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    ## By default, if no configuration is present, the set of metrics defined in</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    ## /etc/128t-monitoring/collectors/t128_metrics/default_config.toml will be used</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    ## for monitoring. Here&#x27;s a sample configuration on how to define custom metrics.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    ##</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    ## [[inputs.t128_metrics.metric]]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    ## name = &quot;service&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    ##</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    ## [inputs.t128_metrics.metric.fields]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    ## Refer to the 128T REST swagger documentation for the list of available metrics</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    ##     key_name = &quot;stats/&lt;path_to_metric&gt;&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    ##     packets-received = &quot;stats/aggregate-session/service/packets-received&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    ##</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    ## [inputs.t128_metrics.metric.parameters]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    ##     parameter_name = [&quot;value1&quot;, &quot;value2&quot;]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    ##     service = [&quot;service1&quot;]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    timeout = &quot;15s&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="theme-admonition theme-admonition-tip alert alert--success admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_S0QG"><p>Depending on the number of metrics you have enabled, you may need to increase the timeout to allow collection to complete. This can also influence your minimum polling interval.</p></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="linux-system">Linux System<a href="#linux-system" class="hash-link" aria-label="Direct link to Linux System" title="Direct link to Linux System">​</a></h4><p>This example gathers cpu, disk, and memory metrics from the linux host using native telegraf collectors:</p><p>Path: <code>/var/lib/128t-monitoring/inputs/system.conf</code></p><div class="language-toml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-toml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">[[inputs.cpu]]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  ## Whether to report per-cpu stats or not</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  percpu = true</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  ## Whether to report total system cpu stats or not</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  totalcpu = true</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  ## If true, collect raw CPU time metrics.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  collect_cpu_time = false</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  ## If true, compute and report the sum of all non-idle CPU states.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  report_active = false</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">[[inputs.disk]]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  ## Ignore mount points by filesystem type.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  ignore_fs = [&quot;tmpfs&quot;, &quot;devtmpfs&quot;, &quot;devfs&quot;, &quot;iso9660&quot;, &quot;overlay&quot;, &quot;aufs&quot;, &quot;squashfs&quot;]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">[[inputs.mem]]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="outputs-1">Outputs<a href="#outputs-1" class="hash-link" aria-label="Direct link to Outputs" title="Direct link to Outputs">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="local-filesystem">Local Filesystem<a href="#local-filesystem" class="hash-link" aria-label="Direct link to Local Filesystem" title="Direct link to Local Filesystem">​</a></h4><p>Configuring the file output will write metrics to the local filesystem. This can be useful for testing or as a backup data source in case network connectivity issues prevent data from reaching the intended collection endpoint.</p><p>The file output is one of the built in available types for the monitoring agent plugin. The various configuration options available under <code>authority &gt; monitoring &gt; output &gt; file</code> are as follows:</p><table><thead><tr><th>Element</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>file</td><td>list</td><td>Either <code>stdout</code> or absolute path to file on disk</td></tr><tr><td>rotation-interval</td><td>duration</td><td>The file(s) will be rotated at the specified interval</td></tr><tr><td>rotation-max-size</td><td>uint32</td><td>The file(s) will be rotated when it becomes larger than the configured size.</td></tr><tr><td>rotation-max-archives</td><td>unit32</td><td>The maximum number of archives to keep when the file(s) is rotated.</td></tr></tbody></table><p>An example configuration for file output looks as follows:</p><div class="language-config codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-config codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">config</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    authority</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        monitoring</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            output  file</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                name  file</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                type  file</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                file</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    file                   stdout</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    file                   /tmp/foobar</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    rotation-interval      12h</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    rotation-max-size      100</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    rotation-max-archives  5</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">exit</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The monitoring configuration corresponds to the following telegraf configuration.</p><p>Path: <code>/var/lib/128t-monitoring/outputs/file.conf</code></p><div class="language-toml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-toml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">[[outputs.file]]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  ## Files to write to, &quot;stdout&quot; is a specially handled file.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  files = [&quot;stdout&quot;, &quot;/tmp/metrics.out&quot;]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  ## Use batch serialization format instead of line based delimiting.  The</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  ## batch format allows for the production of non line based output formats and</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  ## may more efficiently encode metric groups.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  # use_batch_format = false</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  ## The file will be rotated after the time interval specified.  When set</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  ## to 0 no time based rotation is performed.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  # rotation_interval = &quot;0d&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  ## The logfile will be rotated when it becomes larger than the specified</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  ## size.  When set to 0 no size based rotation is performed.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  # rotation_max_size = &quot;0MB&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  ## Maximum number of rotated archives to keep, any older logs are deleted.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  ## If set to -1, no archives are removed.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  # rotation_max_archives = 5</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  ## Data format to output.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  ## Each data format has its own unique set of configuration options, read</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  ## more about them here:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  ## https://github.com/influxdata/telegraf/blob/master/docs/DATA_FORMATS_OUTPUT.md</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  data_format = &quot;influx&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="kafka">Kafka<a href="#kafka" class="hash-link" aria-label="Direct link to Kafka" title="Direct link to Kafka">​</a></h4><p>The <code>kafka</code> output is one of the built in available types for the monitoring agent plugin. The various configuration options available under <code>authority &gt; monitoring &gt; output &gt; kafka</code> are as follows:</p><table><thead><tr><th>Element</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>broker</td><td>list</td><td>List of Kafka broker(s) to communicate with</td></tr><tr><td>broker &gt; host</td><td>ip-address or domain name</td><td>The address or domain name for the Kafka broker</td></tr><tr><td>broker &gt; port</td><td>l4-port</td><td>The port number for the Kafka broker</td></tr><tr><td>compression-codec</td><td>enumeration</td><td>The compression codec to be used for communicating with Kafka</td></tr><tr><td>max-retry</td><td>unit32</td><td>The maximum number of times to retry before failing until the next push interval</td></tr><tr><td>topic</td><td>string</td><td>The Kafka topic to produce messages for</td></tr></tbody></table><p>Here&#x27;s an example monitoring config for <code>kafka</code> output</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">config</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    authority</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        monitoring</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            output  kafka</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                name               kafka</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                type               kafka</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                data-format        json</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                kafka</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    broker  192.168.1.7 9092</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                        host  192.168.1.7</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                        port  9092</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    topic   test</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                additional-config  (text/toml)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">exit</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This example sends data to a Kafka broker:</p><p>Path: <code>/var/lib/128t-monitoring/outputs/kafka.conf</code></p><div class="language-toml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-toml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">[[outputs.kafka]]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  ## URLs of kafka brokers</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  brokers = [&quot;&lt;ip&gt;:9092&quot;]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  ## Kafka topic for producer messages</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  topic = &quot;telegraf&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  max_retry = 3</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  data_format = &quot;json&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="syslog">Syslog<a href="#syslog" class="hash-link" aria-label="Direct link to Syslog" title="Direct link to Syslog">​</a></h4><p>The <code>syslog</code> output is one of the built in available types for the monitoring agent plugin. The various configuration options available under <code>authority &gt; monitoring &gt; output &gt; syslog</code> are as follows:</p><table><thead><tr><th>Element</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>address</td><td>uri</td><td>The URL to the syslog server. For example tcp://127.0.0.1:8094</td></tr><tr><td>default-severity-code</td><td>uint8</td><td>Default severity code to be used when severity_code metric field is not present</td></tr><tr><td>default-facility-code</td><td>uint8</td><td>Default severity code to be used when severity_code metric field is not present</td></tr><tr><td>sdid</td><td>string</td><td>The default Syslog SDID to be used for fields and tags</td></tr><tr><td>tcp-keep-alive-period</td><td>duration</td><td>Period between TCP keep alive probes</td></tr></tbody></table><p>Here&#x27;s an example monitoring plugin config for <code>syslog</code> output</p><div class="language-config codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-config codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">config</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    authority</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        monitoring</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            output  syslog</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                name    syslog</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                type    syslog</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                syslog</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    address                tcp://localhost:514</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    default-severity-code  3</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    default-facility-code  20</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">exit</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>In this example data is sent via syslog:</p><p>Path: <code>/var/lib/128t-monitoring/outputs/syslog.conf</code></p><div class="language-toml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-toml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">[[outputs.syslog]]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  address = &quot;udp://&lt;ip&gt;:514&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  default_sdid = &quot;128T&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="theme-admonition theme-admonition-important alert alert--info admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_S0QG"><p>For syslog output, not specifying the <code>default_sdid</code> parameter can result in empty or truncated messages</p></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="variable-replacement">Variable Replacement<a href="#variable-replacement" class="hash-link" aria-label="Direct link to Variable Replacement" title="Direct link to Variable Replacement">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="version-history-1">Version History<a href="#version-history-1" class="hash-link" aria-label="Direct link to Version History" title="Direct link to Version History">​</a></h4><table><thead><tr><th>Release</th><th>Modification</th></tr></thead><tbody><tr><td>3.3.3</td><td>GraphQL based variables were introduced</td></tr></tbody></table><h4 class="anchor anchorWithStickyNavbar_LWe7" id="builtin-variables">Builtin variables<a href="#builtin-variables" class="hash-link" aria-label="Direct link to Builtin variables" title="Direct link to Builtin variables">​</a></h4><p>Within an <strong>input</strong> configuration, several variables have been made available for substitution.</p><table><thead><tr><th>Value</th><th>Meaning</th><th>Version Introduced</th></tr></thead><tbody><tr><td><code>${ROUTER}</code></td><td>The router name of the running SSR instance</td><td>3.0.0</td></tr><tr><td><code>${NODE}</code></td><td>The node name of the running SSR instance</td><td>3.0.0</td></tr><tr><td><code>${128T_VERSION}</code></td><td>The version of the running SSR instance</td><td>3.0.0</td></tr><tr><td><code>${WEB_PORT}</code></td><td>A local port that can be used to access SSR APIs</td><td>3.0.0</td></tr></tbody></table><p>An example of this would be:</p><div class="language-console codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-console codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">$ cat /var/lib/128t-monitoring/inputs/example.conf</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">[[inputs.example]]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  version = &quot;${128T_VERSION}&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">$ monitoring-agent-cli generate --force</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Generating example</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">$ cat /var/lib/128t-monitoring/config/example.conf</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">[global_tags]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">host = &quot;${HOSTNAME}&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">[agent]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">interval = 1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">flush_interval = 1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">[inputs]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">[[inputs.example]]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">version = &quot;5.0.0&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">[outputs]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">[[outputs.file]]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">files = [ &quot;/tmp/test.out&quot;,]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="graphql-variables">GraphQL variables<a href="#graphql-variables" class="hash-link" aria-label="Direct link to GraphQL variables" title="Direct link to GraphQL variables">​</a></h4><p>The new variable substitution scheme allows for GraphQL based queries to be executed on the router to obtain useful information to be included as tags. For example, the scheme can be used to periodically send the entitlements information or use a config description field as a tag for some inputs. The monitoring agent plugin provides a mechanism to configure such variables as shown in in the example below</p><div class="language-config codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-config codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">config</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    authority</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        monitoring</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            agent-config  my-agent</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                name             my-agent</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                variables        entitlement</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    variable  entitlement</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    query     allRouters(name:${ROUTER})/nodes/entitlement/id</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">exit</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>When configuring the variables on the file system, the agent configuration can include the variables as follows:</p><p>Path: <code>/etc/128t-monitoring/config.yaml</code></p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token key atrule">enabled</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token boolean important" style="color:rgb(255, 88, 116)">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">variables</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> ENTITLEMENT</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">query</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> allRouters(name</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain">&quot;$</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain">ROUTER</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain">&quot;)/nodes/entitlement/id</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> DESCRIPTION</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">query</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> allRouters(name</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain">&quot;$</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain">ROUTER</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain">&quot;)/nodes/nodes(name</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain">&quot;$</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain">NODE</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain">&quot;)/nodes/deviceInterfaces(name</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain">&quot;10&quot;)/nodes/description</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="monitoring-agent-cli">Monitoring Agent CLI<a href="#monitoring-agent-cli" class="hash-link" aria-label="Direct link to Monitoring Agent CLI" title="Direct link to Monitoring Agent CLI">​</a></h2><p>The <code>monitoring-agent-cli</code> is a utility for validating and executing the configuration for the monitoring-agent. The various components of the CLI as follows:</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="validation">Validation<a href="#validation" class="hash-link" aria-label="Direct link to Validation" title="Direct link to Validation">​</a></h3><p>The <code>monitoring-agent validate</code> command will ensure that the monitoring-agent config along with other inputs and outputs are correctly setup and flag any particular errors to the user. The <code>validate</code> command will not make any changes to the running system.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="sample-config">Sample Config<a href="#sample-config" class="hash-link" aria-label="Direct link to Sample Config" title="Direct link to Sample Config">​</a></h3><p>The <code>monitoring-agent-cli sample</code> command can be used to view the various collectors that are created as part of the SSR monitoring agent. The <code>list-available</code> command will simply show the set of available inputs (and outputs) that are packaged as part of the SSR monitoring-agent. These are in addition to the ones available natively via telegraf. For example:</p><div class="language-console codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-console codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain"># monitoring-agent-cli sample list-available</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">inputs:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">- t128_device_state</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">- t128_metrics</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">- t128_peer_path</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">- t128_events</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">- t128_lte_metric</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">- t128_top_analytics</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">- t128_session_records</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The configuration for each of these inputs can be viewed via <code>monitoring-agent-cli sample view &lt;plugin_name&gt;</code> command such as:</p><div class="language-console codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-console codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain"># monitoring-agent-cli sample view t128_metrics</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">[[inputs.t128_metrics]]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    ## When configured, the metric collector input will pull KPIs from the 128T system</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    ## running on the current node. Depending on the KPI, the information can be used for</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    ## monitoring various aspects of the running system such as services, interfaces, errors etc.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    ## By default, if no configuration is present, the set of metrics defined in</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    ## /etc/128t-monitoring/collectors/t128_metrics/default_config.toml will be used</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    ## for monitoring. Here&#x27;s a sample configuration on how to define custom metrics.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    ##</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    ## [[inputs.t128_metric.metric]]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    ## name = &quot;service&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    ##</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    ## [inputs.t128_metric.metric.fields]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    ## Refer to the 128T REST swagger documentation for the list of available metrics</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    ##     key_name = &quot;stats/&lt;path_to_metric&gt;&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    ##     packets-received = &quot;stats/aggregate-session/service/packets-received&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    ##</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    ## [inputs.t128_metric.metric.parameters]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    ##     parameter_name = [&quot;value1&quot;, &quot;value2&quot;]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    ##     service = [&quot;service1&quot;]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="generation">Generation<a href="#generation" class="hash-link" aria-label="Direct link to Generation" title="Direct link to Generation">​</a></h3><p>The <code>monitoring-agent-cli generate</code> command can be used to (re-)generate the telegraf configuration files. This command does not restart the telegraf services and is a good way to pre-stage configuration for testing.</p><div class="language-console codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-console codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain"># monitoring-agent-cli generate</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">The command does not start/restart 128T-telegraf services but can still impact already running instances. Do you want to continue? [Y/n]: y</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Generating t128_top_analytics</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Generating t128_device_state</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="configuration-1">Configuration<a href="#configuration-1" class="hash-link" aria-label="Direct link to Configuration" title="Direct link to Configuration">​</a></h3><p>When the <code>monitoring-agent-cli configure</code> command is run, it will first validate and report any errors to the user. Once valid configuration is in place, the configure command does the following at a high level:</p><ul><li><p>For each of the configured and enabled inputs, generate a telegraf config file in the <code>/var/lib/128t-monitoring/config</code> directory</p></li><li><p>Launch an instance of the <code>128T-telegraf</code> service for each of the configured inputs which allows us to collect each input independently.</p></li></ul><p>At this point, each input will be running a telegraf instance and will allow the collection of inputs &amp; outputs to run on the system.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="testing-and-validation">Testing and Validation<a href="#testing-and-validation" class="hash-link" aria-label="Direct link to Testing and Validation" title="Direct link to Testing and Validation">​</a></h3><p>Once the Monitoring Agent has configured and started the <code>128T-telegraf</code>services, you can use the command <code>systemctl list-units 128T-telegraf*</code> to list them out.</p><div class="language-console codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-console codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain"># systemctl list-units 128T-telegraf*</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">UNIT                                    LOAD   ACTIVE SUB     DESCRIPTION</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">128T-telegraf@events.service            loaded active running 128T telegraf service for events</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">128T-telegraf@system.service            loaded active running 128T telegraf service for system</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">128T-telegraf@t128_device_state.service loaded active running 128T telegraf service for t128_device_state</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">128T-telegraf@t128_metrics.service      loaded active running 128T telegraf service for t128_metrics</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">128T-telegraf@t128_peer_path.service    loaded active running 128T telegraf service for t128_peer_path</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Additionally, its often useful to test the input configuration before full rollout. This can be easily accomplished by the <code>test-input</code> command.</p><div class="language-console codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-console codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain"># monitoring-agent-cli test-input t128_device_state</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Testing input t128_device_state</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">2020-04-15T06:51:17Z I! Starting Telegraf 1.14.0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">2020-04-15T06:51:17Z D! [agent] Initializing plugins</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&gt; device-interface-state,device-interface=dpdk1-lan,host=t127-dut2.openstacklocal,router=router1 adminStatus=&quot;ADMIN_UP&quot;,enabled=true,operationalStatus=&quot;OPER_UP&quot;,redundancyStatus=&quot;NON_REDUNDANT&quot; 1586933478000000000</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="version-history-2">Version History<a href="#version-history-2" class="hash-link" aria-label="Direct link to Version History" title="Direct link to Version History">​</a></h4><table><thead><tr><th>Release</th><th>Modification</th></tr></thead><tbody><tr><td>3.4.0</td><td><code>run-once</code> CLI command was introduced</td></tr></tbody></table><p>In order to run an input to the configured outputs end-to-end just once for validation, testing and debugging purposes, the <code>run-once</code> command can be used. This will execute the configured inputs and produce data to the outputs as specified in the monitoring agent configuration file.</p><div class="language-console codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-console codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain"># monitoring-agent-cli run-once t128_metrics</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Collecting t128_metrics and writing to outputs for input t128_metrics</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">2021-04-08T02:49:46Z I! Starting Telegraf 1.17.4</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">2021-04-08T02:49:46Z D! [agent] Initializing plugins</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">2021-04-08T02:49:46Z D! [sarama]  Initializing new client</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">2021-04-08T02:49:46Z D! [sarama] client/metadata fetching metadata for all topics from broker 192.168.1.7:9092</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">2021-04-08T02:49:46Z D! [sarama] Connected to broker at 192.168.1.7:9092 (unregistered)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">2021-04-08T02:49:46Z D! [sarama] client/brokers registered new broker #1001 at kafka_1:9092</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">2021-04-08T02:49:46Z D! [sarama]  Successfully initialized new client</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">2021-04-08T02:49:46Z D! [agent] Connecting outputs</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">2021-04-08T02:49:46Z D! [agent] Attempting connection to [outputs.kafka]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">2021-04-08T02:49:46Z D! [agent] Successfully connected to outputs.kafka</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">2021-04-08T02:49:46Z D! [agent] Starting service inputs</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">2021-04-08T02:49:46Z D! [agent] Stopping service inputs</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">2021-04-08T02:49:46Z D! [agent] Input channel closed</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">2021-04-08T02:49:46Z I! [agent] Hang on, flushing any cached metrics before shutdown</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">2021-04-08T02:49:46Z D! [sarama] producer/broker/1001 starting up</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">2021-04-08T02:49:46Z D! [sarama] producer/broker/1001 state change to [open] on test/0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">2021-04-08T02:49:46Z D! [sarama] Connected to broker at kafka_1:9092 (registered as #1001)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">2021-04-08T02:49:46Z D! [outputs.kafka] Wrote batch of 138 metrics in 8.298753ms</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">2021-04-08T02:49:46Z D! [outputs.kafka] Buffer fullness: 0 / 10000 metrics</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">2021-04-08T02:49:46Z D! [agent] Stopped Successfully</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="stopping-services">Stopping Services<a href="#stopping-services" class="hash-link" aria-label="Direct link to Stopping Services" title="Direct link to Stopping Services">​</a></h3><p>The <code>monitorinag-agent-cli stop</code> command can be used to stop <code>128T-telegraf</code> services launched by the <code>configure</code> command.</p><div class="language-console codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-console codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain"># monitoring-agent-cli stop</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Stopping telegraf service 128T-telegraf@t128_metrics.service</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Stopping telegraf service 128T-telegraf@t128_events.service</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Stopping telegraf service 128T-telegraf@t128_arp_state.service</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Stopping telegraf service 128T-telegraf@t128_device_state.service</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="collectors">Collectors<a href="#collectors" class="hash-link" aria-label="Direct link to Collectors" title="Direct link to Collectors">​</a></h2><p>The monitoring-agent comes pre-packaged with a set of collectors to assist in the monitoring of the SSR platform. Here are the various collectors and how to use them:</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="metric-collector">Metric collector<a href="#metric-collector" class="hash-link" aria-label="Direct link to Metric collector" title="Direct link to Metric collector">​</a></h3><p>The <code>t128_metrics</code> input is responsible for collecting the configured metrics from a running system. By default, the metrics specified in <code>/etc/128t-monitoring/collectors/t128_metrics/default_config.toml</code> will be used by the collector. This represents a set of pre-configured metrics that we recommend that a network operator monitor. The various configuration options available under <code>authority &gt; monitoring &gt; input &gt; metrics</code> are as follows:</p><table><thead><tr><th>Element</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>use-default-config</td><td>boolean</td><td>Whether to use the set of builtin metrics as recommended by the SSR for monitoring</td></tr><tr><td>metric</td><td>list</td><td>List of metrics</td></tr><tr><td>metric &gt; name</td><td>string</td><td>The desired name of the metric to include in the telegraf</td></tr><tr><td>metric &gt; id</td><td>metric-id</td><td>The ID of the metric as it exists in the REST API</td></tr><tr><td>filter</td><td>list</td><td>List of parameter values that should be included in the output</td></tr><tr><td>filter &gt; parameter</td><td>string</td><td>The name of the parameter being referenced</td></tr><tr><td>filter &gt; value</td><td>leaf-list</td><td>The list of values to be included in the match</td></tr></tbody></table><p>An example configuration of the metrics input looks as follows:</p><div class="language-config codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-config codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">config</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    authority</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        monitoring</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            input  bandwidth-metrics</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                name     bandwidth-metrics</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                type     metrics</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                metrics</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    use-default-config  false</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    metric              internet-rx-bandwidth stats/aggregate-session/service/bandwidth-received</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                        name  internet-rx-bandwidth</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                        id    stats/aggregate-session/service/bandwidth-received</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    metric              internet-tx-bandwidth stats/aggregate-session/service/bandwidth-received</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                        name  internet-tx-bandwidth</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                        id    stats/aggregate-session/service/bandwidth-received</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    filter              service</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                        parameter  service</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                        value      internet</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">exit</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The configuration file in a <code>TOML</code> definition of metrics has the following format:</p><div class="language-toml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-toml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">[[metric]]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  name = &quot;service&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  [metric.fields]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    packets-received = &quot;stats/aggregate-session/service/packets-received&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    packets-transmitted = &quot;stats/aggregate-session/service/packets-transmitted&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    session-arrival-rate = &quot;stats/aggregate-session/service/session-arrival-rate&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    session-departure-rate = &quot;stats/aggregate-session/service/session-departure-rate&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    bandwidth-received = &quot;stats/aggregate-session/service/bandwidth-received&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    bandwidth-transmitted = &quot;stats/aggregate-session/service/bandwidth-transmitted&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    tcp-retransmissions = &quot;stats/aggregate-session/service/tcp-retransmissions&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    session-count = &quot;stats/aggregate-session/service/session-count&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  [metric.parameters]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    service = []</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Each element of the configuration specifies an aspect of the <a href="https://docs.influxdata.com/influxdb/v1.8/write_protocols/line_protocol_tutorial/" target="_blank" rel="noopener noreferrer">InfluxDB line protocol</a> or the SSR REST API. REST API documentation is available from the &quot;About This System&quot; page in the SSR GUI.</p><ul><li><p><strong>name</strong>
The line protocol measurement to be used for the output</p></li><li><p><strong>fields</strong>
What line protocol fields should exist in the output</p></li><li><p><strong>fields.key</strong> (e.g. <code>packets-received</code>)
A line protocol field key that should exist in the output</p></li><li><p><strong>fields.value</strong> (e.g. <code>stats/aggregate-session/service/packets-received</code>)
The SSR KPI providing the value for the associated field key. See the SSR REST API documentation available from the &quot;About This System&quot; page in the SSR GUI for a full list. Note that the documentation prefixes the KPIs with <code>/router/{router}/</code>.</p></li><li><p><strong>parameters</strong> (e.g. <code>service</code>)
The SSR parameters that should be preserved as line protocol tags in the output. When a non-empty list of values is provided for a parameter, only KPIs with matching parameters will be included in the output.</p></li></ul><p>A custom set of metrics can be collected by configuring the <code>t128_metrics</code> input as described in the sample. The configuration follows the same structure as the default file, but the metrics are nested under the input.</p><div class="language-toml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-toml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">[[inputs.t128_metrics]]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    [[inputs.t128_metrics.metric]]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      name = &quot;disk&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    [[inputs.t128_metrics.metric.fields]]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      used = &quot;stats/disk/used&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      capacity = &quot;stats/disk/capacity&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    [[inputs.t128_metrics.metric.parameters]]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      disk = [&quot;/&quot;]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="event-collector">Event Collector<a href="#event-collector" class="hash-link" aria-label="Direct link to Event Collector" title="Direct link to Event Collector">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="version-history-3">Version History<a href="#version-history-3" class="hash-link" aria-label="Direct link to Version History" title="Direct link to Version History">​</a></h4><table><thead><tr><th>Release</th><th>Modification</th></tr></thead><tbody><tr><td>1.2.0, 2.1.0</td><td><code>t128_events</code> input type was introduced</td></tr></tbody></table><p>The event collector can be used for collecting and pushing events for various categories such as admin, alarm, system, traffic and provisioning as they occur on the system. The type of the event is available via a <code>tag</code> and can be used for filtering only specific events as desired. For example, the following configuration can be used for pushing just the <code>alarm</code> and <code>admin</code> event. The various configuration options available under <code>authority &gt; monitoring &gt; input &gt; event</code> are as follows:</p><table><thead><tr><th>Element</th><th>Type</th><th>Default</th><th>Description</th></tr></thead><tbody><tr><td>admin</td><td>boolean</td><td>true</td><td>Include admin events generated by the system</td></tr><tr><td>audit</td><td>boolean</td><td>true</td><td>Include audit events generated by the system</td></tr><tr><td>alarm</td><td>boolean</td><td>true</td><td>Include alarm events generated by the system</td></tr><tr><td>traffic</td><td>boolean</td><td>true</td><td>Include traffic events generated by the system</td></tr><tr><td>provisioning</td><td>boolean</td><td>true</td><td>Include provisioning events generated by the system</td></tr><tr><td>system</td><td>boolean</td><td>true</td><td>Include system events generated by the system</td></tr><tr><td>track-index</td><td>boolean</td><td>true</td><td>Enable best effort tracking of events generated while the output cannot be reached</td></tr></tbody></table><div class="theme-admonition theme-admonition-note alert alert--secondary admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_S0QG"><p>The events described above need to be enabled for the router under <code>authority &gt; router &gt; system &gt; audit</code> for the event collector to be able to collect and push those events.</p></div></div><p>An example configuration for events inputs is as below</p><div class="language-config codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-config codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">config</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    authority</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        monitoring</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            input  events</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                name               events</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                type               events</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                event</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    admin         true</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    audit         false</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    alarm         true</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    traffic       false</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    provisioning  false</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    system        false</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">exit</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The configuration file in a <code>TOML</code> definition of event collector has the following format:</p><div class="language-toml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-toml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">[[inputs.t128_events]]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  ## Create a stream of 128T events for alarm, audit etc. This information is useful for</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  ## monitoring the health of the system.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  ## A (unique) file to use for index tracking. This tracking allows each</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  ## event to be produced once. By default, no tracking is used and events are</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  ## produced starting from the point telegraf is launched.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  # index-file = &quot;/var/lib/128t-monitoring/state/events.index&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  ## The name of the log file to produce to /var/log/128t-monitoring/&lt;log-name&gt;.log</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  # log-name = &quot;event_collector&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  ## The TANK topic to consume. Should be &quot;events&quot; or &quot;offline_events&quot;.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  # topic = &quot;events&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  ## input event filtering based on type (admin, alarm, system, traffic, provisioning)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  ## NOTE: For information on filtering severity refer to the output configuration example</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  [inputs.t128_events.tagpass]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  type = [&quot;alarm&quot;, &quot;admin&quot;]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="theme-admonition theme-admonition-important alert alert--info admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_S0QG"><p>In versions 1.2.0, 2.1.0 and later, the more feature rich <code>t128_events</code> seen above should be used over the <code>execd</code> input version seen below. The config below should only be used with those older versions of the monitoring agent.</p></div></div><div class="language-toml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-toml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">[[inputs.execd]]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  ## Create a stream of 128T events for alarm, audit etc. This information is useful for</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  ## monitoring the health of the system.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  command = &quot;/usr/bin/eventCollector128t&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  signal = &quot;none&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  data_format = &quot;influx&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  ## input event filtering based on type (admin, alarm, system, traffic, provisioning)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  ## NOTE: For information on filtering severity refer to the output configuration example</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  [inputs.execd.tagpass]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  type = [&quot;alarm&quot;, &quot;admin&quot;]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="device-interface-state-collector">Device Interface State Collector<a href="#device-interface-state-collector" class="hash-link" aria-label="Direct link to Device Interface State Collector" title="Direct link to Device Interface State Collector">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="version-history-4">Version History<a href="#version-history-4" class="hash-link" aria-label="Direct link to Version History" title="Direct link to Version History">​</a></h4><table><thead><tr><th>Release</th><th>Modification</th></tr></thead><tbody><tr><td>3.3.1</td><td><code>t128_device_state</code> input type was introduced</td></tr><tr><td>3.3.1</td><td><code>provisional-status</code> tag was added (available in SSR &gt;= 4.5.3)</td></tr><tr><td>1.2.1, 2.1.1</td><td><code>mac-address</code> tag was introduced</td></tr></tbody></table><p>The <code>t128_device_state</code> input can be used for monitoring the admin, oper, provisional, and redundancy status of various device-interfaces configured on the node. The device interface name is available as the <code>device-interface</code> tag and the mac address is available as the <code>mac-address</code> tag. The various configuration options available under <code>authority &gt; monitoring &gt; input &gt; device-interface</code> are as follows:</p><table><thead><tr><th>Element</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>interface</td><td>leaf-list</td><td>Device interface names to be included in the collection. Empty list implies all configured interfaces are collected</td></tr></tbody></table><p>The example configuration for <code>device-interface</code> collector is as shown below</p><div class="language-config codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-config codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">config</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    authority</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        monitoring</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            input  device-state</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                name              device-state</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                tags              my-tag</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    tag    my-tag</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    value  my-value</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                type              device-interface</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                device-interface</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    interface  wan1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">exit</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The <code>TOML</code> definition of the configuration looks as below. Telegraf <code>tagpass</code> can be used to filter specific interfaces as needed. For example:</p><div class="language-toml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-toml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">[[inputs.t128_device_state]]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  ## To filter on select device interfaces, you can use the `tagpass` and `tagdrop` concepts</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  ## from telegraf. For example:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  ## [inputs.t128_device_state.tagpass]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  ##     device-interface = [&quot;wan1&quot;]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  ##     mac-address = [&quot;00:0a:95:9d:68:16&quot;]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="theme-admonition theme-admonition-important alert alert--info admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_S0QG"><p>In versions 3.3.1 and later, the simplified <code>t128_device_state</code> seen above should be used over the <code>execd</code> input version seen below. The config below should only be used with those older versions of the monitoring agent.</p></div></div><div class="language-toml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-toml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">[[inputs.exec]]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  ## Collect information about the 128T device-interface admin, operational and</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  ## redundancy status. This information is useful for monitoring the system health.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  commands = [&quot;/usr/bin/deviceInterfaceStateCollector128t&quot;]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  ## Timeout for the device-interface state collector to finish</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  timeout = &quot;5s&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  ## Data format to consume.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  ## Each data format has its own unique set of configuration options, read</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  ## more about them here:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  ## https://github.com/influxdata/telegraf/blob/master/docs/DATA_FORMATS_INPUT.md</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  data_format = &quot;influx&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  ## To filter on select device interfaces, you can use the `tagpass` and `tagdrop` concepts</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  ## from telegraf. For example:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  ## [[inputs.exec.tagpass]]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  ##     device-interface = [&quot;wan1&quot;]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  ##     mac-address = [&quot;00:0a:95:9d:68:16&quot;]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="peer-path-state-collector">Peer Path State collector<a href="#peer-path-state-collector" class="hash-link" aria-label="Direct link to Peer Path State collector" title="Direct link to Peer Path State collector">​</a></h3><p>The <code>peerPathStateCollector128t</code> collector can be used for monitoring the up/down status of all the peer paths on the node. The various configuration options available under <code>authority &gt; monitoring &gt; input &gt; peer-path</code> are as follows:</p><table><thead><tr><th>Element</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>network-interface</td><td>leaf-list</td><td>Network interface names to be included in the collection. Empty list implies all configured interfaces are collected</td></tr><tr><td>peer-router</td><td>leaf-list</td><td>Peer routers to be included in the collection. Empty list implies all configured peer routers are collected</td></tr></tbody></table><p>The example configuration for <code>device-interface</code> collector is as shown below</p><div class="language-config codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-config codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">config</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    authority</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        monitoring</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            input  peer-paths</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                name       peer-paths</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                type       peer-path</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                peer-path</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    network-interface  dpdk3</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">exit</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>When using the <code>TOML</code> definition shown below the various part of a peer-path such as <code>adjacentAddress</code> and <code>networkInterface</code> are available as tags which can be filtered. For example:</p><div class="language-toml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-toml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">[[inputs.exec]]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  ## Collect information about the 128T adjacency peer-path status. This information</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  ## is useful to monitoring the secure WAN connectivity to the peers</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  commands = [&quot;/usr/bin/peerPathStateCollector128t&quot;]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  ## Timeout for the peer-path state collector to finish</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  timeout = &quot;5s&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  ## Data format to consume.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  ## Each data format has its own unique set of configuration options, read</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  ## more about them here:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  ## https://github.com/influxdata/telegraf/blob/master/docs/DATA_FORMATS_INPUT.md</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  data_format = &quot;influx&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  ## To filter on select peer-paths, you can use the `tagpass` and `tagdrop` concepts</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  ## from telegraf. For example:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  ## [[inputs.exec.tagpass]]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  ##     adjacentAddress = [&quot;10.10.10.10&quot;]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  ##     networkInterface = [&quot;wan1&quot;]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="arp-state-collector">Arp State Collector<a href="#arp-state-collector" class="hash-link" aria-label="Direct link to Arp State Collector" title="Direct link to Arp State Collector">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="version-history-5">Version History<a href="#version-history-5" class="hash-link" aria-label="Direct link to Version History" title="Direct link to Version History">​</a></h4><table><thead><tr><th>Release</th><th>Modification</th></tr></thead><tbody><tr><td>3.3.1</td><td><code>t128_arp_state</code> input type was introduced</td></tr></tbody></table><p>The <code>t128_arp_state</code> input can be used for monitoring the arp table status of a network interface configured on the node. The various configuration options available under <code>authority &gt; monitoring &gt; input &gt; arp</code> are as follows:</p><table><thead><tr><th>Element</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>device-interface</td><td>leaf-list</td><td>Device interface names to be included in the collection. Empty list implies all configured interfaces are collected</td></tr><tr><td>network-interface</td><td>leaf-list</td><td>Network interface names to be included in the collection. Empty list implies all configured interfaces are collected</td></tr></tbody></table><p>The example configuration for <code>arp</code> collector is as shown below</p><div class="language-config codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-config codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">config</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    authority</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        monitoring</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            input  arp-state</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                name  arp-state</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                type  arp</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                arp</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    device-interface  dpdk3</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">exit</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The device interface name, network interface name, vlan, ip address, and destination mac will be found as tags and telegraf tagpass can be used to filter specific arp entries as needed. For example:</p><div class="language-toml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-toml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">[[inputs.t128_arp_state]]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  ## To filter on select properties of the arp entry, you can use the `tagpass` and `tagdrop` concepts</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  ## from telegraf. For example:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  ## [inputs.t128_arp_state.tagpass]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  ##     device-interface = [&quot;wan1&quot;]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  ##     network-interface = [&quot;wan1intf&quot;]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  ##     vlan = [&quot;128&quot;]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  ##     ip-address = [&quot;192.169.128.0&quot;]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  ##     destination-mac = [&quot;00:0a:95:9d:68:16&quot;]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="theme-admonition theme-admonition-important alert alert--info admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_S0QG"><p>In versions 3.3.1 and later, the simplified <code>t128_arp_state</code> seen above should be used over the <code>execd</code> input version seen below. The config below should only be used with those older versions of the monitoring agent.</p></div></div><div class="language-toml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-toml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">[[inputs.exec]]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  ## Collect information about the 128T arp table.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  ## This information is useful for monitoring interface&#x27;s next hop reachability.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  commands = [&quot;/usr/bin/arpStateCollector128t&quot;]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  ## Timeout for the arp state collector to finish</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  timeout = &quot;5s&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  ## Data format to consume.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  ## Each data format has its own unique set of configuration options, read</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  ## more about them here:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  ## https://github.com/influxdata/telegraf/blob/master/docs/DATA_FORMATS_INPUT.md</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  data_format = &quot;influx&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  ## To filter on select properties of the arp entry, you can use the `tagpass` and `tagdrop` concepts</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  ## from telegraf. For example:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  ## [[inputs.exec.tagpass]]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  ##     device-interface = [&quot;wan1&quot;]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  ##     network-interface = [&quot;wan1intf&quot;]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  ##     vlan = [&quot;128&quot;]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  ##     ip-address = [&quot;192.169.128.0&quot;]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  ##     destination-mac = [&quot;00:0a:95:9d:68:16&quot;]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="lte-collector">LTE Collector<a href="#lte-collector" class="hash-link" aria-label="Direct link to LTE Collector" title="Direct link to LTE Collector">​</a></h3><p>The <code>lteMetricCollector128t</code> collector when run will scan the current node configuration for any SSR supported and configured LTE devices. This collector can be used for pushing the <code>signal-strength</code> and <code>carrier</code> information to the monitoring stack. For example:</p><div class="language-toml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-toml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">[[inputs.exec]]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  ## Collect the signal-strength and carrier information from configured LTE card(s) on</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  ## the system. This information is useful for monitoring any fluctuations in carrier</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  ## signal causing loss of connectivity.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  commands = [&quot;/usr/bin/lteMetricCollector128t&quot;]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  ## Timeout for the LTE metric collector to finish</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  timeout = &quot;10s&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  ## Data format to consume.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  ## Each data format has its own unique set of configuration options, read</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  ## more about them here:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  ## https://github.com/influxdata/telegraf/blob/master/docs/DATA_FORMATS_INPUT.md</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  data_format = &quot;influx&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="top-analytics-collector">Top Analytics Collector<a href="#top-analytics-collector" class="hash-link" aria-label="Direct link to Top Analytics Collector" title="Direct link to Top Analytics Collector">​</a></h3><p>The <code>topAnalyticsCollector128t</code> collector can be used for monitoring the top sources, top sessions and top applications on the router. The different aspects of each of these data sources are easily tunable using the input configuration. The monitoring agent configuration provides a way to manage each of the top-sessions, top-sources and top-applications individually as follows:</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="top-sessions">Top Sessions<a href="#top-sessions" class="hash-link" aria-label="Direct link to Top Sessions" title="Direct link to Top Sessions">​</a></h4><p>The input type of <code>top-sessions</code> can be used to enable the top-sessions configuration. An example of such configuration is as follows:</p><div class="language-config codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-config codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">config</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    authority</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        monitoring</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            input  top-sessions</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                name  top-sessions</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                type  top-sessions</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">exit</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="top-sources">Top Sources<a href="#top-sources" class="hash-link" aria-label="Direct link to Top Sources" title="Direct link to Top Sources">​</a></h4><p>The <code>top-sources</code> input can be used to configure the various aspects of the top sources API on the system. The various configuration options available under <code>authority &gt; monitoring &gt; input &gt; top-sources</code> are as follows:</p><table><thead><tr><th>Element</th><th>Type</th><th>Default</th><th>Description</th></tr></thead><tbody><tr><td>max-rows</td><td>uint32</td><td>10</td><td>The maximum number of rows to be collected per sample</td></tr><tr><td>category</td><td>enumeration</td><td>total-data</td><td>Controls how the top sources are determined. Options are <code>session-count</code> and <code>total-data</code></td></tr></tbody></table><p>An example configuration is as follows:</p><div class="language-config codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-config codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">config</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    authority</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        monitoring</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            input  top-sources</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                name         top-sources</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                type         top-sources</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                top-sources</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    max-rows  10</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    category  session-count</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">exit</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="top-applications">Top Applications<a href="#top-applications" class="hash-link" aria-label="Direct link to Top Applications" title="Direct link to Top Applications">​</a></h4><p>The monitoring agent <code>top-applications</code> input can be used to configure various aspects of the API on the system. The various configuration options available under <code>authority &gt; monitoring &gt; input &gt; top-applications</code> are as follows:</p><table><thead><tr><th>Element</th><th>Type</th><th>Default</th><th>Description</th></tr></thead><tbody><tr><td>max-rows</td><td>uint32</td><td>10</td><td>The maximum number of rows to be collected per sample</td></tr><tr><td>min-session-count</td><td>uint32</td><td>1</td><td>The minimum number of sessions for an application to be collected</td></tr><tr><td>application-filter</td><td>string</td><td>-</td><td>Restrict the applications to be included in the collection</td></tr></tbody></table><p>An example of the top applications configuration is as follows:</p><div class="language-config codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-config codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">config</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    authority</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        monitoring</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            input  top-apps</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                name              top-apps</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                type              top-applications</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                top-applications</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    max-rows           10</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    min-session-count  5</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">exit</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The <code>top_analytics</code> collector allows a simple <code>TOML</code> configuration as below to capture the various top measurements on the system.</p><div class="language-toml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-toml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">[[inputs.top_analytics]]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    # # By default all the data sources below are enabled along with their default properties.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    # [[inputs.top_analytics.sessions]]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    #     enabled = true</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    # [[inputs.top_analytics.sources]]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    #     enabled = true</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    #     max_rows = 10</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    #     category = &quot;TOTAL_DATA&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    # [[inputs.top_analytics.applications]]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    #     enabled = true</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    #     max_rows = 10</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    #     filter = &quot;&lt;word to search for in application names&gt;&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    #     # Minimum number of active session for the application to be reported</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    #     min-session-count = 1</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The <strong>top sessions</strong> input above can be used to stream the view of the top 10 sessions by bandwidth utilization. The <strong>enabled</strong> flag can be used to turn off the collection of top sessions.</p><p>The <strong>top sources</strong> input can be used to capture the list of source IP addresses by either <strong>TOTAL_DATA</strong> (default) or by <strong>SESSION_COUNT</strong>. In addition, the user can configure the maximum number of top data samples to collect as configured by the <strong>max_rows</strong> configuration above. Finally the <strong>enabled</strong> flag can be used to turn off the top sources collection is need be.</p><p>The <strong>top applications</strong> input is useful when application identification in terms of module or tls have been configured on the router. By default, all the discovered sessions will be reported by the input. The user can tune the collection by setting up a search filter in the form of <strong>filter</strong> or eliminate the applications that have some minimum number of sessions via <strong>min-session-count</strong>. The <strong>max-rows</strong> will limit the reporting to the first N rows. The collection can be turned off by setting <strong>enabled</strong> to be false.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="graphql-collector">GraphQL Collector<a href="#graphql-collector" class="hash-link" aria-label="Direct link to GraphQL Collector" title="Direct link to GraphQL Collector">​</a></h3><table><thead><tr><th>Release</th><th>Modification</th></tr></thead><tbody><tr><td>3.3.1</td><td><code>t128_graphql</code> input type was introduced</td></tr></tbody></table><p>The <code>t128_graphql</code> input can be used to retrieve data from a GraphQL API. The various configuration options available under <code>authority &gt; monitoring &gt; input &gt; graphql</code> are as follows:</p><table><thead><tr><th>Element</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>query-entry-point</td><td>string</td><td>The path to a point in the graphQL tree from which fields and tags will be extracted. This path may contain (<code>&lt;key&gt;:&lt;value&gt;</code>) graphQL arguments such as (name:&#x27;${ROUTER}&#x27;).</td></tr><tr><td>extract-field</td><td>list</td><td>List of leaf nodes to be collected from query response as fields</td></tr><tr><td>extract-field &gt; name</td><td>string</td><td>The name of the field</td></tr><tr><td>extract-field &gt; value</td><td>string</td><td>The graphQL query path from which to extract the value. The path can be relative to the entry-point or absolute. If the path is absolute, it cannot diverge from the entry point path and must exclude graphQL arguments</td></tr><tr><td>extract-tag</td><td>list</td><td>List of leaf nodes to be collected from query response as tags</td></tr><tr><td>extract-tag &gt; name</td><td>string</td><td>The name of the tag</td></tr><tr><td>extract-tag &gt; value</td><td>string</td><td>The graphQL query path from which to extract the value. The path can be relative to the entry-point or absolute. If the path is absolute, it cannot diverge from the entry point path and must exclude graphQL arguments</td></tr></tbody></table><p>An example configuration using can be seen as below</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">config</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    authority</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        monitoring</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            input  graph</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                name     graph</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                type     graphql</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                graphql</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    query-entry-point  allRouters(name:&#x27;${ROUTER}&#x27;)/nodes/nodes(name:&#x27;${NODE}&#x27;)/nodes/deviceInterfaces/nodes</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    extract-field      enabled</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                        name   enabled</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                        value  enabled</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    extract-field      interface-count</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                        name   interface-count</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                        value  allRouters/nodes/nodes/nodes/deviceInterfaces/totalCount</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    extract-tag        router-name</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                        name   router-name</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                        value  allRouters/nodes/name</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    extract-tag        name</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                        name   name</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                        value  name</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    extract-tag        type</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                        name   type</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                        value  type</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    extract-tag        admin-status</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                        name   admin-status</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                        value  state/adminStatus</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">exit</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The <code>TOML</code> configuration for the GraphQL input can be seen below</p><div class="language-toml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-toml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">[[inputs.t128_graphql]]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  ## collector_name = &quot;t128-device-state&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  ## base_url = &quot;http://localhost:${WEB_PORT}/api/v1/graphql/&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  ## unix_socket = &quot;&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  ## timeout = &quot;10s&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  ## entry_point = &quot;allRouters(name:&#x27;${ROUTER}&#x27;)/nodes/nodes(name:&#x27;${NODE}&#x27;)/nodes/deviceInterfaces/nodes&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  ## [inputs.t128_graphql.extract_fields]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  ##   enabled = &quot;enabled&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  ##   interface-count = &quot;allRouters/nodes/nodes/nodes/deviceInterfaces/totalCount    # absolute path</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  ## [inputs.t128_graphql.extract_tags]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  ##   name = &quot;name&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  ##   type = &quot;type&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  ##   admin-status = &quot;state/adminStatus&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  ##   operational-status = &quot;state/operationalStatus&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  ##   provisional-status = &quot;state/provisionalStatus&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  ##   redundancy-status = &quot;state/redundancyStatus&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  ##   duplex = &quot;state/duplex&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  ##   speed = &quot;state/speed&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  ##   mac-address = &quot;state/macAddress&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  ##   router-name = &quot;allRouters/nodes/name&quot;    # absolute path</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li><p><strong>collector_name</strong>
A name for the collector which will be used as the measurement name of the produced data</p></li><li><p><strong>base_url</strong>
The URL of the GraphQL API</p></li><li><p><strong>unix_socket</strong>
The unix socket to use; the defualt empty string indicates no unix socket is being used</p></li><li><p><strong>timeout</strong>
A limit on the amount of time taken for a given request. If the timeout is hit, no data will be produced for the sample.</p></li><li><p><strong>entry_point</strong>
The path to a point in the graph relative to which <code>extract_fields</code> and <code>extract_tags</code> will be specified. This path may contain <code>(&lt;key&gt;:&lt;value&gt;)</code> arguments corresponding to those in the GraphQL tree.</p></li><li><p><strong>extract_fields</strong>
Paths, absolute or relative to the <code>entry_point</code>, from which fields should be created. Each value MUST point to a leaf in the graph. If the path is absolute, it MUST NOT diverge from the <code>entry_point</code> and MUST exclude graphQL argument. The keys become the field names for the produced values. At least one field MUST be specified.</p></li><li><p><strong>extract_tags</strong>
Paths, absolute or relative to the <code>entry_point</code>, from which tags should be created. Each value MUST point to a leaf in the graph. If the path is absolute, it MUST NOT diverge from the <code>entry_point</code> and MUST exclude the <code>(&lt;key&gt;:&lt;value&gt;)</code> arguments which are allowed in the <code>entry_point</code>. The keys become the tag names for the produced values.</p></li></ul><p>Note that <code>(&lt;key&gt;:&lt;value&gt;)</code> arguments are valid only on the <code>entry_point</code>. They MUST NOT be specified on <code>extract_fields</code> or <code>extract_tags</code>.</p><p>It is possible for the relative paths of <code>extract_fields</code> and <code>extract_paths</code> to enter GraphQL lists. When that is the case, a separate line will be created for each entry in the list.</p><p>When dealing with multiple child nodes, it is advised that each be handled in separate <code>t128_graphql</code> inputs.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="session-records">Session Records<a href="#session-records" class="hash-link" aria-label="Direct link to Session Records" title="Direct link to Session Records">​</a></h3><table><thead><tr><th>Release</th><th>Modification</th></tr></thead><tbody><tr><td>3.6.1</td><td><code>t128_session_records</code> input type was introduced</td></tr></tbody></table><p>The monitoring agent <code>session-records</code> input can be used to generate session records on the system.</p><div class="theme-admonition theme-admonition-note alert alert--secondary admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_S0QG"><p>The session record input is only compatible with SSR &gt;= 5.4.0.</p></div></div><p>The various configuration options available under authority &gt; monitoring &gt; input &gt; session-records are as follows:</p><table><thead><tr><th>Element</th><th>Type</th><th>Default</th><th>Description</th></tr></thead><tbody><tr><td>include-all-records</td><td>string</td><td>true</td><td>Whether to include all the session records generated by the system.</td></tr><tr><td>record-type</td><td>list</td><td>empty</td><td>List of valid session record type such as create, intermediate, modify, close, error</td></tr></tbody></table><p>The <code>t128_session_records</code> collector allows a simple <code>TOML</code> configuration as below to capture the various session records on the system.</p><div class="language-toml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-toml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">[[inputs.t128_session_records]]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  ## Create a stream of 128T session reocrds.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  ## A (unique) file to use for index tracking. This tracking allows each</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  ## session record to be produced once. By default, no tracking is used and</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  ## session records are produced starting from the point telegraf is launched.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  # index-file = &quot;/var/lib/128t-monitoring/state/session_records.index&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  ## The name of the log file to produce to /var/log/128t-monitoring/&lt;log-name&gt;.log</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  # log-name = &quot;session_records&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  ## input session record filtering based on type</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  # [inputs.t128_session_records.tagpass]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  # recordType = [&quot;CREATE&quot;, &quot;INTERMEDIATE&quot;, &quot;CLOSE&quot;, &quot;ERROR&quot;, &quot;MODIFY&quot;]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ssr-processors">SSR Processors<a href="#ssr-processors" class="hash-link" aria-label="Direct link to SSR Processors" title="Direct link to SSR Processors">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="transform-processor">Transform Processor<a href="#transform-processor" class="hash-link" aria-label="Direct link to Transform Processor" title="Direct link to Transform Processor">​</a></h3><table><thead><tr><th>Release</th><th>Modification</th></tr></thead><tbody><tr><td>3.3.1</td><td><code>t128_transform</code> was introduced</td></tr><tr><td>3.5.0</td><td><code>state-change</code> transform option was introduced</td></tr><tr><td>3.5.0</td><td><code>previous_fields</code> wre introduced</td></tr></tbody></table><p>The <code>t128_transform</code> processor can be used to compute a diff or rate from fields passing through it. Alternatively, it can be used to detect a change in state for a field.</p><table><thead><tr><th>Element</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>transform</td><td>string</td><td>The transform to perform - <code>rate</code>, <code>diff</code>, or <code>state-change</code></td></tr><tr><td>expiration</td><td>duration</td><td>If no value has been seen for this amount of time, begin again as if it is the first value. For <code>state-change</code> retransmit the current state.</td></tr><tr><td>remove-original</td><td>bool</td><td>Remove the original field (<strong>NOT LINE</strong>) in the case that the field is renamed.</td></tr><tr><td>fields</td><td>dict<!-- -->[string:string]</td><td>A mapping of <code>new-field = existing-field</code> where the new field is the computed transform of the existing field. If the names are the same, the field will be replaced.</td></tr><tr><td>previous_fields</td><td>dict<!-- -->[string:string]</td><td>Optionally include a field indicating the previous observed value. Specify as <code>previous-field = new-field</code> such that the previous indicates the prior value of <code>new-field</code>.</td></tr></tbody></table><p>The processor operates on each field separately. For example, multiple metrics may pass through with a <code>value</code> field. The processor will distinguish between them using the tags and measurement name.</p><p>When there is no value to produce, the processor excludes the field. If the field name matches the source field, the field is removed. If the line is no longer valid, for example, if it has no fields, Telegraf will remove it, effectively dropping the line. When watching for state changes on lines that have a single field, the original line will be dropped. In this way, a polling mechanism can be turned into a means of notification.</p><p>Processors are not currently exposed explicitly in the plugin config, but they can be achieved through an input&#x27;s <a href="/docs/plugin_monitoring_agent#input-configuration">additional config</a>. Here are some examples of the <code>TOML</code> configuration.</p><p>State Change:</p><div class="language-toml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-toml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">[[processors.t128_transform]]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    transform = &quot;state-change&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    [processors.t128_transform.fields]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;state&quot; = &quot;state&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    [processors.t128_transform.previous_fields]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;previous-state&quot; = &quot;state&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Diff:</p><div class="language-toml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-toml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">[[processors.t128_transform]]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    transform = &quot;diff&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    remove-original = true</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    expiration = 30s</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    [processors.t128_transform.fields]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;delta&quot; = &quot;counter&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>For this diff case, the transform will compute the delta from a &quot;counter&quot; field. No delta can be computed from a single point, so the processor waits until the second observed value to produce the diff. If no values are observed for more than thirty seconds, the processor will begin computing again.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="pass-processor">Pass Processor<a href="#pass-processor" class="hash-link" aria-label="Direct link to Pass Processor" title="Direct link to Pass Processor">​</a></h3><table><thead><tr><th>Release</th><th>Modification</th></tr></thead><tbody><tr><td>3.6.1</td><td><code>t128_pass</code> was introduced</td></tr></tbody></table><p>The <code>t128_pass</code> processor can be used to filter out metrics with complex logic. The usual mechanism to filter out metrics is to use the built-in Telegraf metric selectors (<code>tagpass</code>, <code>tagdrop</code>, <code>fieldpass</code>, <code>fielddrop</code>, etc). These have a shortcoming in that they are combined by logical <code>AND</code>s. The <code>t128_pass</code> keeps the familiar syntax but allows more complex filters.</p><p>One <code>t128_pass</code> processor is composed of multiple <code>conditions</code>. The <code>conditions</code> are logically <code>OR</code>&#x27;d together. Each <code>condition</code> can be composed of <code>tags</code> and <code>fields</code> which specify acceptable values much like the built-in filtering mechanisms. A <code>condition</code>&#x27;s components are logically <code>AND</code>&#x27;d together, but can be configured to <code>OR</code>. A <code>condition</code> can have different matching <code>mode</code>s, either <code>exact</code>, <code>glob</code>, or <code>regex</code> and a <code>condition</code> can be inverted as a whole with <code>invert</code>.</p><div class="language-toml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-toml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">[[processors.t128_pass]]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  ## The conditions that must be met to pass a metric through. This is similar</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  ## behavior to a tagpass, but the multiple tags are ANDed</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  [[processors.t128_pass.condition]]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    ## Mode dictates how to match the condition&#x27;s tag values</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    ## Valid values are:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    ##  * &quot;exact&quot;: exact string comparison</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    ##  * &quot;glob&quot;: go flavored glob comparison (see https://github.com/gobwas/glob)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    ##  * &quot;regex&quot;: go flavored regex comparison</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    # mode = &quot;exact&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    ## Operation dictates how to combine the condition&#x27;s tag matching</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    ## Valid values are:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    ##  * &quot;and&quot;: logical and the results together</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    ##  * &quot;or&quot;: logical or the results together</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    # operation = &quot;and&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    ## Invert dictates whether to invert the final result of the condition</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    # invert = false</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    ## Whether to ignore if any tag or field keys are missing.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    # ignore_missing_keys = false</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  [processors.t128_pass.condition.tags]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    # tag1 = [&quot;value1&quot;, &quot;value2&quot;]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    # tag2 = [&quot;value3&quot;]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  ## Fields work the same way and can be included in the same condition.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  ## Only string values are accepted and the non-string field values in this section</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  ## will be converted to strings before comparison.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  [processors.t128_pass.condition.fields.string]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    # field1 = [&quot;value1&quot;, &quot;value2&quot;]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    # field2 = [&quot;value3&quot;]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  [[processors.t128_pass.condition]]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    # mode = &quot;exact&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  [processors.t128_pass.condition.tags]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    # tag1 = [&quot;value3&quot;]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="monitoring-agent-plugin-notes">Monitoring Agent Plugin Notes<a href="#monitoring-agent-plugin-notes" class="hash-link" aria-label="Direct link to Monitoring Agent Plugin Notes" title="Direct link to Monitoring Agent Plugin Notes">​</a></h2><h2 class="anchor anchorWithStickyNavbar_LWe7" id="release-220">Release 2.2.0<a href="#release-220" class="hash-link" aria-label="Direct link to Release 2.2.0" title="Direct link to Release 2.2.0">​</a></h2><p><strong>Release Date:</strong> Oct 25, 2022</p><p><strong>Router Version</strong></p><ul><li>128T-monitoring-agent-plugin-router-1.1.0-4</li><li>128T-monitoring-agent-3.7.3-3</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="issues-fixed">Issues Fixed<a href="#issues-fixed" class="hash-link" aria-label="Direct link to Issues Fixed" title="Direct link to Issues Fixed">​</a></h4><ul><li><p><strong>PLUGIN-1902</strong> Monitoring agent plugin fails to generate the metric input</p><p><em><strong>Resolution</strong></em> Improved the handling of default values when processing the monitoring agent metrics input configuration</p></li><li><p><strong>PLUGIN-1903</strong> Monitoring configuration does not work for milliseconds sampling and push interval</p><p><em><strong>Resolution</strong></em> The validation for the sampling and push interval no longer allows the invalid interval values in milliseconds, microseconds and nanoseconds</p></li><li><p><strong>WAN-1449</strong> The cpu state collector does not report correct values for IDP data core</p><p><em><strong>Resolution</strong></em> The query for retrieving the IDP data core usage is corrected to handle some errors more gracefully</p></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="release-210">Release 2.1.0<a href="#release-210" class="hash-link" aria-label="Direct link to Release 2.1.0" title="Direct link to Release 2.1.0">​</a></h2><p><strong>Release Date:</strong> Jun 24, 2022</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="new-features-and-improvements">New Features and Improvements:<a href="#new-features-and-improvements" class="hash-link" aria-label="Direct link to New Features and Improvements:" title="Direct link to New Features and Improvements:">​</a></h4><ul><li><strong>MON-391</strong> Add support for tech support info collection for all monitoring agent components</li><li><strong>MON-389</strong> Add support for adjacent hostname in the peer-path collector</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="issues-fixed-1">Issues Fixed<a href="#issues-fixed-1" class="hash-link" aria-label="Direct link to Issues Fixed" title="Direct link to Issues Fixed">​</a></h4><ul><li><p><strong>PLUGIN-1729</strong> Monitoring agent service stopped sending metrics</p><p><em><strong>Resolution</strong></em> The monitoring agent service will now be stopped gracefully before upgrades and will automatically restart after upgrade</p></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="release-203">Release 2.0.3<a href="#release-203" class="hash-link" aria-label="Direct link to Release 2.0.3" title="Direct link to Release 2.0.3">​</a></h2><h4 class="anchor anchorWithStickyNavbar_LWe7" id="new-features-and-improvements-1">New Features and Improvements:<a href="#new-features-and-improvements-1" class="hash-link" aria-label="Direct link to New Features and Improvements:" title="Direct link to New Features and Improvements:">​</a></h4><ul><li><strong>PLUGIN-1163</strong> Updated the plugin to use the latest monitoring agent version <a href="/docs/plugin_monitoring_agent#release-361"><code>3.6.1</code></a>.</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="release-201">Release 2.0.1<a href="#release-201" class="hash-link" aria-label="Direct link to Release 2.0.1" title="Direct link to Release 2.0.1">​</a></h2><h4 class="anchor anchorWithStickyNavbar_LWe7" id="new-features-and-improvements-2">New Features and Improvements:<a href="#new-features-and-improvements-2" class="hash-link" aria-label="Direct link to New Features and Improvements:" title="Direct link to New Features and Improvements:">​</a></h4><ul><li><strong>MON-352</strong> Updated the plugin to use the latest monitoring agent version <a href="/docs/plugin_monitoring_agent#release-342"><code>3.4.2</code></a>.</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="release-200">Release 2.0.0<a href="#release-200" class="hash-link" aria-label="Direct link to Release 2.0.0" title="Direct link to Release 2.0.0">​</a></h2><h4 class="anchor anchorWithStickyNavbar_LWe7" id="new-features-and-improvements-3">New Features and Improvements:<a href="#new-features-and-improvements-3" class="hash-link" aria-label="Direct link to New Features and Improvements:" title="Direct link to New Features and Improvements:">​</a></h4><ul><li><strong>PLUGIN-667</strong> Introduce a new monitoring agent plugin to better manage the monitoring agent through the GUI and PCLI. Some key highlights are:</li></ul><ul><li>Support all the SSR developed collectors such as metrics, events, top-sessions, etc.</li><li>Support the most commonly used outputs such as file, syslog, <code>Kafka</code>, etc.</li><li>Support multi-line input fields for generic telegraf configuration with TOML syntax validation.</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="monitoring-agent-release-notes">Monitoring Agent Release Notes<a href="#monitoring-agent-release-notes" class="hash-link" aria-label="Direct link to Monitoring Agent Release Notes" title="Direct link to Monitoring Agent Release Notes">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="release-361">Release 3.6.1<a href="#release-361" class="hash-link" aria-label="Direct link to Release 3.6.1" title="Direct link to Release 3.6.1">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="new-features-and-improvements-4">New Features and Improvements:<a href="#new-features-and-improvements-4" class="hash-link" aria-label="Direct link to New Features and Improvements:" title="Direct link to New Features and Improvements:">​</a></h4><ul><li><strong>MON-337</strong> Support absolute paths to <code>extract_fields</code> and <code>extract_tags</code> in <code>t128_graphql</code> collector</li><li><strong>MON-359</strong> Add <code>state-change</code> transform type and <code>previous_fields</code> to the <code>t128_transform</code></li><li><strong>I95-43137</strong> Add the <code>t128_session_records</code> input type.</li><li><strong>MON-305</strong> Add the <code>t128_pass</code> processor type.</li><li><strong>MON-383</strong> Allow double backslash in input configuration files.</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="issues-fixed-2">Issues Fixed:<a href="#issues-fixed-2" class="hash-link" aria-label="Direct link to Issues Fixed:" title="Direct link to Issues Fixed:">​</a></h4><ul><li><p><strong>MON-354</strong> <code>t128_device_state</code> collector has incorrect tags and fields for SSR versions &lt; 4.5.3</p><p><em><strong>Resolution</strong></em> Adjust some tags and fields in the <code>t128_device_state</code> collector for SSR versions &lt; 4.5.3</p></li><li><p><strong>I95-43137</strong> Session records and other JSON fields are truncated when used with the <code>syslog</code> output.</p><p><em><strong>Resolution</strong></em> Escape the characters not allowed by the syslog specification.</p></li><li><p><strong>MON-369</strong> Variables in output configuration files not substituted.</p><p><em><strong>Resolution</strong></em> Extend variable substitution functionality to output files.</p></li><li><p><strong>MON-320</strong> Non-string variables in configuration files not substituted.</p><p><em><strong>Resolution</strong></em> Extend variable substitution functionality to non-string variables.</p></li><li><p><strong>MON-354</strong> Input files are not generated correctly.</p><p><em><strong>Resolution</strong></em> Modify translation logic so configuration files are not overwritten.</p></li><li><p><strong>MON-365</strong> Top analytics translation file is not staged correctly.</p><p><em><strong>Resolution</strong></em> Stage the file to a subdirectory of the translations directory.</p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="release-342">Release 3.4.2<a href="#release-342" class="hash-link" aria-label="Direct link to Release 3.4.2" title="Direct link to Release 3.4.2">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="new-features-and-improvements-5">New Features and Improvements:<a href="#new-features-and-improvements-5" class="hash-link" aria-label="Direct link to New Features and Improvements:" title="Direct link to New Features and Improvements:">​</a></h4><ul><li><strong>WAN-116</strong> Allow any topic in the events input.</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="issues-fixed-3">Issues Fixed:<a href="#issues-fixed-3" class="hash-link" aria-label="Direct link to Issues Fixed:" title="Direct link to Issues Fixed:">​</a></h4><ul><li><p><strong>I95-39979</strong> Monitoring agent sending the same metrics multiple times when using the kafka output.</p><p><em><strong>Resolution</strong></em> The kafka output was enhanced to include a batch retry mechanism where it will try up to <code>max_batch_retry</code> times (default of <code>5</code>) to push the buffered metrics during the push interval. The kafka output will only try to resend metrics which failed to be sent from the previous batch retry.</p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="release-340">Release 3.4.0<a href="#release-340" class="hash-link" aria-label="Direct link to Release 3.4.0" title="Direct link to Release 3.4.0">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="new-features-and-improvements-6">New Features and Improvements:<a href="#new-features-and-improvements-6" class="hash-link" aria-label="Direct link to New Features and Improvements:" title="Direct link to New Features and Improvements:">​</a></h4><ul><li><strong>MON-337</strong> Create an ability to run specified input once on demand for testing and debugging</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="issues-fixed-4">Issues Fixed:<a href="#issues-fixed-4" class="hash-link" aria-label="Direct link to Issues Fixed:" title="Direct link to Issues Fixed:">​</a></h4><ul><li><p><strong>MON-328</strong> Monitoring agent failed to setup the environment in some installations</p><p><em><strong>Resolution</strong></em> The script to setup the environment is run every time the monitoring agent service restarts to ensure the correct environment setup</p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="release-331">Release 3.3.1<a href="#release-331" class="hash-link" aria-label="Direct link to Release 3.3.1" title="Direct link to Release 3.3.1">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="new-features-and-improvements-7">New Features and Improvements:<a href="#new-features-and-improvements-7" class="hash-link" aria-label="Direct link to New Features and Improvements:" title="Direct link to New Features and Improvements:">​</a></h4><ul><li><strong>MON-309</strong> Upgrade telegraf to 1.17.2</li><li><strong>MON-306</strong> Provide a <code>name</code> in the agent config to differentiate multiple Monitoring Agent instances</li><li><strong>MON-311</strong> A <code>t128_graphql</code> input is now available</li><li><strong>MON-311</strong> A dedicated <code>t128_device_state</code> input is now available</li><li><strong>MON-311</strong> A dedicated <code>t128_arp_state</code> input is now available</li><li><strong>I95-38959</strong> Improve <code>t128_metrics</code> performance with bulk retrieval</li><li><strong>I95-38915</strong> Create the <code>t128_transform</code> processor</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="issues-fixed-5">Issues Fixed:<a href="#issues-fixed-5" class="hash-link" aria-label="Direct link to Issues Fixed:" title="Direct link to Issues Fixed:">​</a></h4><ul><li><p><strong>MON-316</strong> Correct default metrics bug where interface <code>received-missed</code> was collected from <code>stats/interface/received/error</code></p><p><em><strong>Resolution</strong></em> The default metrics configuration was updated to point <code>received-missed</code> to the correct <code>stats/interface/received/missed</code></p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="release-310">Release 3.1.0<a href="#release-310" class="hash-link" aria-label="Direct link to Release 3.1.0" title="Direct link to Release 3.1.0">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="new-features-and-improvements-8">New Features and Improvements:<a href="#new-features-and-improvements-8" class="hash-link" aria-label="Direct link to New Features and Improvements:" title="Direct link to New Features and Improvements:">​</a></h4><ul><li><strong>MON-297</strong> The LTE collector will use the state file generated by SSR software where possible.</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="issues-fixed-6">Issues Fixed<a href="#issues-fixed-6" class="hash-link" aria-label="Direct link to Issues Fixed" title="Direct link to Issues Fixed">​</a></h4><ul><li><p><strong>MON-300</strong> Prevent the monitoring agent service from accidentally starting SSR service</p><p><em><strong>Resolution</strong></em> If SSR is not running, the MA will fail to start instead of starting SSR</p></li><li><p><strong>MON-294</strong> LTE interfaces were not found in the SSR configuration</p><p><em><strong>Resolution</strong></em> Account for the differences in the configuration across various SSR software versions.</p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="release-300">Release 3.0.0<a href="#release-300" class="hash-link" aria-label="Direct link to Release 3.0.0" title="Direct link to Release 3.0.0">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="new-features-and-improvements-9">New Features and Improvements<a href="#new-features-and-improvements-9" class="hash-link" aria-label="Direct link to New Features and Improvements" title="Direct link to New Features and Improvements">​</a></h4><ul><li><strong>MON-230</strong> Make 3.X version of the Monitoring agent compatible with 4.1.0 &lt;= SSR &lt; 6.0.0</li><li><strong>MON-233</strong> Upgrade telegraf to 1.14.5</li><li><strong>MON-234</strong> Improve metrics collection performance by creating a native Telegraf plugin</li><li><strong>MON-198</strong> Provide sample and push interval overrides per input in the agent&#x27;s config</li><li><strong>MON-246</strong> Enable value substitution in telegraf configuration files</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="issues-fixed-7">Issues Fixed<a href="#issues-fixed-7" class="hash-link" aria-label="Direct link to Issues Fixed" title="Direct link to Issues Fixed">​</a></h4><ul><li><p><strong>MON-280</strong> Make the arp state collector compatible with SSR 5.X</p><p><em><strong>Resolution</strong></em> The arp state collector now dynamically handles data collection depending on the SSR version.</p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="release-211">Release 2.1.1<a href="#release-211" class="hash-link" aria-label="Direct link to Release 2.1.1" title="Direct link to Release 2.1.1">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="new-features-and-improvements-10">New Features and Improvements<a href="#new-features-and-improvements-10" class="hash-link" aria-label="Direct link to New Features and Improvements" title="Direct link to New Features and Improvements">​</a></h4><ul><li><p><strong>MON-225</strong> Update telegraf dependency to 1.14.3</p></li><li><p><strong>MON-227</strong> Allow this version of the Monitoring Agent to be installed with SSR &lt; 6.0.0 (previously &lt; 5.0.0)</p></li><li><p><strong>MON-218</strong> Expose MAC address in the device state input</p><ul><li>Allow better correlation between device and network interfaces.</li></ul></li><li><p><strong>MON-210</strong> Improve performance of several provided inputs</p><ul><li>Reduce the resource consumption as well as the time needed to collect data. In particular, the <code>t128_metrics</code> input has been significanly improved.</li></ul></li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="issues-fixed-8">Issues Fixed<a href="#issues-fixed-8" class="hash-link" aria-label="Direct link to Issues Fixed" title="Direct link to Issues Fixed">​</a></h4><ul><li><p><strong>MON-205</strong> Honor the input enable/disable flag in the agent&#x27;s config</p><p><em><strong>Resolution</strong></em> The configuration allows the user to disable an input. However, an input was being treated as enabled as long as it existed in the config. That configuration option is now honored.</p></li><li><p><strong>MON-225</strong> <code>t128_events</code> input would occasionally drop or delayed events</p><p><em><strong>Resolution</strong></em> Update the telegraf dependency to 1.14.3 as well as the <code>execd</code> input to better handle simultaneous events.</p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="release-210-1">Release 2.1.0<a href="#release-210-1" class="hash-link" aria-label="Direct link to Release 2.1.0" title="Direct link to Release 2.1.0">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="new-features-and-improvements-11">New Features and Improvements<a href="#new-features-and-improvements-11" class="hash-link" aria-label="Direct link to New Features and Improvements" title="Direct link to New Features and Improvements">​</a></h4><ul><li><strong>MON-184</strong> Added stop command in cli to stop all associated Telegraf services.</li></ul><p>For help using this cli option, please refer to the <a href="/docs/plugin_monitoring_agent#stopping-services">Monitoring Agent Guide</a>.</p><ul><li><strong>MON-141</strong> Added support for multiple logically seperate monitoring agent instances with the <code>lib-directory</code> config option.</li></ul><p>For help configuring this option, please refer to the <a href="/docs/plugin_monitoring_agent#configuration">Monitoring Agent Guide</a>.</p><ul><li><strong>MON-208</strong> Update Telegraf to latest stable version 1.14.2.</li></ul><p>A new stable version of telegraf was released upstream. The main reason for upgrading was to get support for multiline lines.</p><ul><li><strong>MON-194</strong> Added arp state collector to collect state of the arp table.</li></ul><p>To configure the new input plugin, please refer to the <a href="/docs/plugin_monitoring_agent#arp-state-collector">Monitoring Agent Guide</a>.</p><ul><li><strong>MON-144</strong> Added configuration option to enable tracking of index so that the event collector picks up where it left off in the case of a restart.</li></ul><p>For help configuring this option, please refer to the <a href="/docs/plugin_monitoring_agent#event-collector">Monitoring Agent Guide</a>.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="issues-fixed-9">Issues Fixed<a href="#issues-fixed-9" class="hash-link" aria-label="Direct link to Issues Fixed" title="Direct link to Issues Fixed">​</a></h4><ul><li><p><strong>MON-195</strong> Device state collector collects state from peer node on an HA router.</p><p><em><strong>Resolution</strong></em> The device state collector will now only request state from the local node.</p></li><li><p><strong>MON-181</strong> Event collector excludes multiline events.</p><p><em><strong>Resolution</strong></em> The event collector will accumulate subsequent invalid lines and attempt to submit the accumulated line.</p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="release-201-1">Release 2.0.1<a href="#release-201-1" class="hash-link" aria-label="Direct link to Release 2.0.1" title="Direct link to Release 2.0.1">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="issues-fixed-10">Issues Fixed<a href="#issues-fixed-10" class="hash-link" aria-label="Direct link to Issues Fixed" title="Direct link to Issues Fixed">​</a></h4><ul><li><p><strong>MON-185</strong> telegraf error when processing results from peer path input</p><p><em><strong>Resolution:</strong></em> The extra logging causing the problem was removed</p></li><li><p><strong>MON-186</strong> LTE metric collector not reporting any values</p><p><em><strong>Resolution:</strong></em> Updated the library imports and identifiers used to display the missing data</p></li><li><p><strong>MON-188</strong> The events inputs collector has invalid sample</p><p><em><strong>Resolution:</strong></em> Updated the sample and staged configuration example for events</p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="release-200-1">Release 2.0.0<a href="#release-200-1" class="hash-link" aria-label="Direct link to Release 2.0.0" title="Direct link to Release 2.0.0">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="new-features-and-improvements-12">New Features and Improvements<a href="#new-features-and-improvements-12" class="hash-link" aria-label="Direct link to New Features and Improvements" title="Direct link to New Features and Improvements">​</a></h4><ul><li><strong>MON-126</strong> Automatically stage all SSR input configuration for easy of use</li></ul><p>The configuration for all SSR collectors such as t128_metrics, t128_events etc will automatically be staged in the inputs directory for convenience.</p><ul><li><strong>MON-148</strong> Top applications, sessions and sources input plugin</li></ul><p>To configure the new input plugin, please refer to the <a href="/docs/plugin_monitoring_agent#top-analytics-collector">Monitoring Agent Guide</a></p><ul><li><strong>MON-164</strong> Test monitoring-agent input configuration</li></ul><p>For verification of the data collected the user can use <code>monitoring-agent-cli generate</code> command to generate all the telegraf configuration. Subsequently, the user can run <code>monitoring-agent-cli test-input</code> to test a specific input. More details can be found in the <a href="/docs/plugin_monitoring_agent#testing-and-validation">Testing And Validation section</a></p><ul><li><strong>MON-171</strong> Update Telegraf to latest stable version 1.14.0 ####</li></ul><p>A new stable version of telegraf was released upstream with several new inputs such as execd, wireguard and others.</p><ul><li><strong>MON-175</strong> LTE metric collect will include SNR signal strength ####</li></ul><p>The <code>t128_lte_metric</code> collector will look for and report SNR signal strength if it is reported by the SSR.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="issues-fixed-11">Issues Fixed<a href="#issues-fixed-11" class="hash-link" aria-label="Direct link to Issues Fixed" title="Direct link to Issues Fixed">​</a></h4><ul><li><p><strong>MON-125</strong> <code>t128_metrics</code> default bfd config doesn&#x27;t work </p><p><em><strong>Resolution:</strong></em> The new default config for metrics have the correct parameters for BFD metrics</p></li><li><p><strong>MON-146</strong> Metric collector timing out with the default config on customer system</p><p><em><strong>Resolution:</strong></em> The metric configuration will now have a default timeout of 15 seconds.</p></li><li><p><strong>MON-160</strong> sample agent-config has invalid tags</p><p><em><strong>Resolution:</strong></em> All the sample configurations now contain valid data</p></li><li><p><strong>MON-169</strong> peer-path collector only captures 1 peer-path per node</p><p><em><strong>Resolution:</strong></em> All peer paths on the node will be reported by the peer-path collector</p></li><li><p><strong>MON-170</strong> Default telegraf service (not 128T-telegraf) is enabled and running un-necessarily on the system</p><p><em><strong>Resolution:</strong></em> The system telegraf service will be stopped and disabled</p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="release-121">Release 1.2.1<a href="#release-121" class="hash-link" aria-label="Direct link to Release 1.2.1" title="Direct link to Release 1.2.1">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="new-features-and-improvements-13">New Features and Improvements<a href="#new-features-and-improvements-13" class="hash-link" aria-label="Direct link to New Features and Improvements" title="Direct link to New Features and Improvements">​</a></h4><ul><li><p><strong>MON-225</strong> Update telegraf dependency to 1.14.3</p></li><li><p><strong>MON-218</strong> Expose MAC address in the device state input</p></li></ul><p>Allow better correlation between device and network interfaces.</p><ul><li><strong>MON-210</strong> Improve performance of several provided inputs</li></ul><p>Reduce the resource consumption as well as the time needed to collect data. In particular, the <code>t128_metrics</code> input has been significanly improved.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="issues-fixed-12">Issues Fixed<a href="#issues-fixed-12" class="hash-link" aria-label="Direct link to Issues Fixed" title="Direct link to Issues Fixed">​</a></h4><ul><li><p><strong>MON-205</strong> Honor the input enable/disable flag in the agent&#x27;s config</p><p><em><strong>Resolution</strong></em> The configuration allows the user to disable an input. However, an input was being treated as enabled as long as it existed in the config. That configuration option is now honored.</p></li><li><p><strong>MON-225</strong> <code>t128_events</code> input would occasionally drop or delayed events</p><p><em><strong>Resolution</strong></em> Update the telegraf dependency to 1.14.3 as well as the <code>execd</code> input to better handle simultaneous events.</p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="release-120">Release 1.2.0<a href="#release-120" class="hash-link" aria-label="Direct link to Release 1.2.0" title="Direct link to Release 1.2.0">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="new-features-and-improvements-14">New Features and Improvements<a href="#new-features-and-improvements-14" class="hash-link" aria-label="Direct link to New Features and Improvements" title="Direct link to New Features and Improvements">​</a></h4><ul><li><strong>MON-184</strong> Added stop command in cli to stop all associated Telegraf services.</li></ul><p>For help using this cli option, please refer to the <a href="/docs/plugin_monitoring_agent#stopping-services">Monitoring Agent Guide</a>.</p><ul><li><strong>MON-141</strong> Added support for multiple logically seperate monitoring agent instances with the <code>lib-directory</code> config option.</li></ul><p>For help configuring this option, please refer to the <a href="/docs/plugin_monitoring_agent#configuration">Monitoring Agent Guide</a>.</p><ul><li><strong>MON-208</strong> Update Telegraf to latest stable version 1.14.2.</li></ul><p>A new stable version of telegraf was released upstream. The main reason for upgrading was to get support for multiline lines.</p><ul><li><strong>MON-194</strong> Added arp state collector to collect state of the arp table.</li></ul><p>To configure the new input plugin, please refer to the <a href="/docs/plugin_monitoring_agent#arp-state-collector">Monitoring Agent Guide</a>.</p><ul><li><strong>MON-144</strong> Added configuration option to enable tracking of index so that the event collector picks up where it left off in the case of a restart.</li></ul><p>For help configuring this option, please refer to the <a href="/docs/plugin_monitoring_agent#event-collector">Monitoring Agent Guide</a>.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="issues-fixed-13">Issues Fixed<a href="#issues-fixed-13" class="hash-link" aria-label="Direct link to Issues Fixed" title="Direct link to Issues Fixed">​</a></h4><ul><li><p><strong>MON-195</strong> Device state collector collects state from peer node on an HA router.</p><p><em><strong>Resolution</strong></em> The device state collector will now only request state from the local node.</p></li><li><p><strong>MON-181</strong> Event collector excludes multiline events.</p><p><em><strong>Resolution</strong></em> The event collector will accumulate subsequent invalid lines and attempt to submit the accumulated line.</p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="release-111">Release 1.1.1<a href="#release-111" class="hash-link" aria-label="Direct link to Release 1.1.1" title="Direct link to Release 1.1.1">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="issues-fixed-14">Issues Fixed<a href="#issues-fixed-14" class="hash-link" aria-label="Direct link to Issues Fixed" title="Direct link to Issues Fixed">​</a></h4><ul><li><p><strong>MON-185</strong> telegraf error when processing results from peer path input</p><p><em><strong>Resolution:</strong></em> The extra logging causing the problem was removed</p></li><li><p><strong>MON-186</strong> LTE metric collector not reporting any values</p><p><em><strong>Resolution:</strong></em> Updated the library imports and identifiers used to display the missing data</p></li><li><p><strong>MON-188</strong> The events inputs collector has invalid sample</p><p><em><strong>Resolution:</strong></em> Updated the sample and staged configuration example for events</p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="release-110">Release 1.1.0<a href="#release-110" class="hash-link" aria-label="Direct link to Release 1.1.0" title="Direct link to Release 1.1.0">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="new-features-and-improvements-15">New Features and Improvements<a href="#new-features-and-improvements-15" class="hash-link" aria-label="Direct link to New Features and Improvements" title="Direct link to New Features and Improvements">​</a></h4><ul><li><strong>MON-126</strong> Automatically stage all SSR input configuration for easy of use</li></ul><p>The configuration for all SSR collectors such as t128_metrics, t128_events etc will automatically be staged in the inputs directory for convenience.</p><ul><li><strong>MON-148</strong> Top applications, sessions and sources input plugin</li></ul><p>To configure the new input plugin, please refer to the <a href="/docs/plugin_monitoring_agent#top-analytics-collector">Monitoring Agent Guide</a></p><ul><li><strong>MON-164</strong> Test monitoring-agent input configuration</li></ul><p>For verification of the data collected the user can use <code>monitoring-agent-cli generate</code> command to generate all the telegraf configuration. Subsequently, the user can run <code>monitoring-agent-cli test-input</code> to test a specific input. More details can be found in the <a href="/docs/plugin_monitoring_agent#testing-and-validation">Testing And Validation section</a></p><ul><li><strong>MON-171</strong> Update Telegraf to latest stable version 1.14.0 ####</li></ul><p>A new stable version of telegraf was released upstream with several new inputs such as execd, wireguard and others.</p><ul><li><strong>MON-175</strong> LTE metric collect will include SNR signal strength ####</li></ul><p>The <code>t128_lte_metric</code> collector will look for and report SNR signal strength if it is reported by the SSR.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="issues-fixed-15">Issues Fixed<a href="#issues-fixed-15" class="hash-link" aria-label="Direct link to Issues Fixed" title="Direct link to Issues Fixed">​</a></h4><ul><li><p><strong>MON-146</strong> Metric collector timing out with the default config on customer system</p><p><em><strong>Resolution:</strong></em> The metric configuration will now have a default timeout of 15 seconds.</p></li><li><p><strong>MON-160</strong> sample agent-config has invalid tags</p><p><em><strong>Resolution:</strong></em> All the sample configurations now contain valid data</p></li><li><p><strong>MON-169</strong> peer-path collector only captures 1 peer-path per node</p><p><em><strong>Resolution:</strong></em> All peer paths on the node will be reported by the peer-path collector</p></li><li><p><strong>MON-170</strong> Default telegraf service (not 128T-telegraf) is enabled and running un-necessarily on the system</p><p><em><strong>Resolution:</strong></em> The system telegraf service will be stopped and disabled</p></li></ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"></div><div class="col lastUpdated_vwxv"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2023-10-20T18:30:54.000Z">Oct 20, 2023</time></b></span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/plugin_m800_watchdog"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">M800 Watchdog</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/plugin_mosh"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Mosh</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#installation" class="table-of-contents__link toc-highlight">Installation</a><ul><li><a href="#plugin" class="table-of-contents__link toc-highlight">Plugin</a></li><li><a href="#manual-installation" class="table-of-contents__link toc-highlight">Manual installation</a></li></ul></li><li><a href="#configuration" class="table-of-contents__link toc-highlight">Configuration</a><ul><li><a href="#plugin-configuration" class="table-of-contents__link toc-highlight">Plugin Configuration</a></li><li><a href="#file-based-configuration" class="table-of-contents__link toc-highlight">File based configuration</a></li></ul></li><li><a href="#directory-structure" class="table-of-contents__link toc-highlight">Directory Structure</a><ul><li><a href="#inputs" class="table-of-contents__link toc-highlight">Inputs</a></li><li><a href="#outputs" class="table-of-contents__link toc-highlight">Outputs</a></li><li><a href="#config" class="table-of-contents__link toc-highlight">Config</a></li><li><a href="#samples" class="table-of-contents__link toc-highlight">Samples</a></li></ul></li><li><a href="#config-examples" class="table-of-contents__link toc-highlight">Config Examples</a><ul><li><a href="#inputs-1" class="table-of-contents__link toc-highlight">Inputs</a></li><li><a href="#outputs-1" class="table-of-contents__link toc-highlight">Outputs</a></li><li><a href="#variable-replacement" class="table-of-contents__link toc-highlight">Variable Replacement</a></li></ul></li><li><a href="#monitoring-agent-cli" class="table-of-contents__link toc-highlight">Monitoring Agent CLI</a><ul><li><a href="#validation" class="table-of-contents__link toc-highlight">Validation</a></li><li><a href="#sample-config" class="table-of-contents__link toc-highlight">Sample Config</a></li><li><a href="#generation" class="table-of-contents__link toc-highlight">Generation</a></li><li><a href="#configuration-1" class="table-of-contents__link toc-highlight">Configuration</a></li><li><a href="#testing-and-validation" class="table-of-contents__link toc-highlight">Testing and Validation</a></li><li><a href="#stopping-services" class="table-of-contents__link toc-highlight">Stopping Services</a></li></ul></li><li><a href="#collectors" class="table-of-contents__link toc-highlight">Collectors</a><ul><li><a href="#metric-collector" class="table-of-contents__link toc-highlight">Metric collector</a></li><li><a href="#event-collector" class="table-of-contents__link toc-highlight">Event Collector</a></li><li><a href="#device-interface-state-collector" class="table-of-contents__link toc-highlight">Device Interface State Collector</a></li><li><a href="#peer-path-state-collector" class="table-of-contents__link toc-highlight">Peer Path State collector</a></li><li><a href="#arp-state-collector" class="table-of-contents__link toc-highlight">Arp State Collector</a></li><li><a href="#lte-collector" class="table-of-contents__link toc-highlight">LTE Collector</a></li><li><a href="#top-analytics-collector" class="table-of-contents__link toc-highlight">Top Analytics Collector</a></li><li><a href="#graphql-collector" class="table-of-contents__link toc-highlight">GraphQL Collector</a></li><li><a href="#session-records" class="table-of-contents__link toc-highlight">Session Records</a></li></ul></li><li><a href="#ssr-processors" class="table-of-contents__link toc-highlight">SSR Processors</a><ul><li><a href="#transform-processor" class="table-of-contents__link toc-highlight">Transform Processor</a></li><li><a href="#pass-processor" class="table-of-contents__link toc-highlight">Pass Processor</a></li></ul></li><li><a href="#monitoring-agent-plugin-notes" class="table-of-contents__link toc-highlight">Monitoring Agent Plugin Notes</a></li><li><a href="#release-220" class="table-of-contents__link toc-highlight">Release 2.2.0</a></li><li><a href="#release-210" class="table-of-contents__link toc-highlight">Release 2.1.0</a></li><li><a href="#release-203" class="table-of-contents__link toc-highlight">Release 2.0.3</a></li><li><a href="#release-201" class="table-of-contents__link toc-highlight">Release 2.0.1</a></li><li><a href="#release-200" class="table-of-contents__link toc-highlight">Release 2.0.0</a></li><li><a href="#monitoring-agent-release-notes" class="table-of-contents__link toc-highlight">Monitoring Agent Release Notes</a><ul><li><a href="#release-361" class="table-of-contents__link toc-highlight">Release 3.6.1</a></li><li><a href="#release-342" class="table-of-contents__link toc-highlight">Release 3.4.2</a></li><li><a href="#release-340" class="table-of-contents__link toc-highlight">Release 3.4.0</a></li><li><a href="#release-331" class="table-of-contents__link toc-highlight">Release 3.3.1</a></li><li><a href="#release-310" class="table-of-contents__link toc-highlight">Release 3.1.0</a></li><li><a href="#release-300" class="table-of-contents__link toc-highlight">Release 3.0.0</a></li><li><a href="#release-211" class="table-of-contents__link toc-highlight">Release 2.1.1</a></li><li><a href="#release-210-1" class="table-of-contents__link toc-highlight">Release 2.1.0</a></li><li><a href="#release-201-1" class="table-of-contents__link toc-highlight">Release 2.0.1</a></li><li><a href="#release-200-1" class="table-of-contents__link toc-highlight">Release 2.0.0</a></li><li><a href="#release-121" class="table-of-contents__link toc-highlight">Release 1.2.1</a></li><li><a href="#release-120" class="table-of-contents__link toc-highlight">Release 1.2.0</a></li><li><a href="#release-111" class="table-of-contents__link toc-highlight">Release 1.1.1</a></li><li><a href="#release-110" class="table-of-contents__link toc-highlight">Release 1.1.0</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2023 Juniper Networks, Inc.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.4b7ba92e.js"></script>
<script src="/assets/js/main.b845ed4e.js"></script>
</body>
</html>