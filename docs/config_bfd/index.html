<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-config_bfd">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.3.1">
<title data-rh="true">Bidirectional Forwarding Detection (BFD) | SSN Docs</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://docs.128technology.com/docs/config_bfd"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Bidirectional Forwarding Detection (BFD) | SSN Docs"><meta data-rh="true" name="description" content="This section provides information about using BFD with BGP and OSPF protocols on the Session Smart Networking Platform."><meta data-rh="true" property="og:description" content="This section provides information about using BFD with BGP and OSPF protocols on the Session Smart Networking Platform."><link data-rh="true" rel="icon" href="/img/favicon.png"><link data-rh="true" rel="canonical" href="https://docs.128technology.com/docs/config_bfd"><link data-rh="true" rel="alternate" href="https://docs.128technology.com/docs/config_bfd" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.128technology.com/docs/config_bfd" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.8e1fdc51.css">
<link rel="preload" href="/assets/js/runtime~main.4b37cad4.js" as="script">
<link rel="preload" href="/assets/js/main.31b03ced.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.png" alt="Juniper Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/logo_dark.png" alt="Juniper Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate"></b></a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/docs/intro_getting_started">Docs</a><a href="https://community.juniper.net/answers/communities/community-home?CommunityKey=310d1a41-12fa-4627-9a99-880145a7c87c" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Community<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://www.juniper.net/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Company<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="searchBox_ZlJk"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/about_128t">About</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/intro_getting_started">Introduction</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/intro_system_reqs">Deployment Considerations</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/intro_installation">Installation Process</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/install_conductor_overview">Conductor Installation</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/intro_installation_bootable_media">Router Installation</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/intro_installation_image">Image-Based Installation</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/supported_cloud_platforms">Cloud Installations</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/intro_upgrade_considerations">Upgrades and Rollback</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/intro_installation_installer">Supporting Install Information - Appendix</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/concepts_application_discovery">Concepts</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/wan_overview">WAN Assurance</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/docs/config_basics">Administration</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/config_basics">Configuration</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" tabindex="0" href="/docs/howto_tune_bfd">Optimizing Routing Protocols</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/howto_tune_bfd">Tuning BFD</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/config_session_optimization">TCP Session Optimization</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/config_bgp">BGP</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/config_vrf_route_leaking">VRF Route Leaking</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/config_ospf">OSPF</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/config_bfd">BFD with BGP and OSPF</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/config_multicast">Multicast</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/config_lacp">Link Aggregation and LACP</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/config_dhcp">DHCP</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/config_ha">High Availability</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/config_access_mgmt">Access Management and Authentication</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/config_ntp_auth">NTP</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/sec_adaptive_encrypt">Security</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/concepts_ssr_idp">Intrusion Detection and Prevention</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/config_STEP">Service and Topology Exchange Protocol (STEP)</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/how_to_use_app_summary">How To</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/ts_applications">Troubleshooting</a></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/events_overview">Events</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/bcp_att_avpn_configuration">Best Practices</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/cli_reference">CLI and Element Reference</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/installer_cli_reference">Installer/Initializer Reference</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/plugin_intro">Plugins</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/release_notes_128t_6.2">Release Notes</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Administration</span><meta itemprop="position" content="1"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Optimizing Routing Protocols</span><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">BFD with BGP and OSPF</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Bidirectional Forwarding Detection (BFD)</h1></header><p>This section provides information about using BFD with BGP and OSPF protocols on the Session Smart Networking Platform.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="overview">Overview<a href="#overview" class="hash-link" aria-label="Direct link to Overview" title="Direct link to Overview">​</a></h2><p>BFD asynchronous mode can be enabled on the OSPF interface or the BGP neighbor. BFD configuration allows the following BFD parameters to be set: </p><ul><li><strong>enable</strong> (default: false): Enable/disable BFD asynchronous mode.</li><li><strong>multiplier</strong> (default: 3): The number of BFD packets that can be lost without the BFD session declared as down.</li><li><strong>required-min-rx-interval</strong> (default: 1000): The minimum interval in milliseconds that this system must receive a BFD control packet.</li><li><strong>desired-tx-interval</strong> (default: 1000): The minimum transmission interval in milliseconds used to send BFD control packets.</li></ul><p>For OSPF, the BFD configuration can be created for the given OSPF interface. Once a neighbor is learned on this interface, then a BFD session is created with the same addresses used to create the OSPF adjacency.  </p><p>For BGP, the BFD configuration is created for a BGP neighbor. Once the BGP neighbor is learned, then a BGP session is created. BFD uses the same addresses as the BGP adjacency. These can be interface addresses for directly connected BGP neighbors, or loopback addresses. </p><p>The BFD peers are automatically removed by the protocols once the BGP/OSPF neighbor is removed. The OSPF/BGP adjacency remains up when BFD is configured for the peer. However, if the BFD configuration is modified while the BFD session is Up, then the OSPF/BGP adjacency will flap.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="configuration">Configuration<a href="#configuration" class="hash-link" aria-label="Direct link to Configuration" title="Direct link to Configuration">​</a></h2><p>The following is a simple configuration for OSPF and BGP.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">authority</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    router A</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        routing default-instance</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                  ospf              2</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                      area          0.0.0.0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                          interface  T217_DUT2 inet20</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                                node       T217_DUT2</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                                interface  inet20</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                                    bfd</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                                        enable               true</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                                        required-min-rx-interval 500</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                                        desired-tx-interval  500</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                                        multiplier           3</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">           </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            routing-protocol bgp</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                neighbor 1.0.0.11</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    bfd</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                            enable               true</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                            required-min-rx-interval 500</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                            desired-tx-interval  500</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                            multiplier            5</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>BFD can also be enabled in the VRF.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">authority</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    router A</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        routing default-instance</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">           vrf vrfA</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                      ospf              2</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                          area          0.0.0.0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                              interface  T217_DUT2 inet30</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                                    node       T217_DUT2</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                                    interface  inet30</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                                        bfd</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                                            enable               true</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                                            required-min-rx-interval 500</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                                            desired-tx-interval  500</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                                            multiplier           3</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                routing-protocol bgp</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    neighbor 1.0.0.11</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                        bfd</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                                   enable               true</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                                   required-min-rx-interval 500</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                                   desired-tx-interval  500</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                                   multiplier           3</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="troubleshooting">Troubleshooting<a href="#troubleshooting" class="hash-link" aria-label="Direct link to Troubleshooting" title="Direct link to Troubleshooting">​</a></h2><p>The following <code>show</code> commands are available through the SSR PCLI. Additionally, the  BFD status is available in the GUI. </p><p>The following show commands are also available for insight into the configuration:</p><p><code>show bfd [vrf &lt;name&gt;] [peer &lt;ip&gt;] [&lt;verbosity&gt;]</code></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="example-output">Example Output<a href="#example-output" class="hash-link" aria-label="Direct link to Example Output" title="Direct link to Example Output">​</a></h4><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain"># show bfd</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Tue 2022-02-01 15:31:46 UTC</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">======= =========== ========== ======= =============</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> Vrf     Peer        Local      State   Uptime</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">======= =========== ========== ======= =============</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">         16.0.0.3    16.0.0.2   up      15h 54m 2s</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> music   11.1.20.4   g20        up      37m 29s</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">         11.1.10.4   g10        up      15h 58m 52s</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># show bfd vrf music peer 11.1.20.4</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Tue 2022-02-01 15:41:16 UTC</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">======= =========== ======= ======= ========</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> Vrf     Peer        Local   State   Uptime</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">======= =========== ======= ======= ========</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> music   11.1.20.4   g20     up      19s</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># show bfd detail</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Tue 2022-02-01 15:39:13 UTC</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">==========================================</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> Information</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">==========================================</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> Item:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   Remote Detect Multiplier:   3</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   Remote Receive Interval:    1000</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   Remote:                     1167833603</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   Vrf:                        default</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   Id:                         3654638929</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   Receive Interval:           1000</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   Remote Transmit Interval:   1000</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   Multihop:                   True</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   Detect Multiplier:          3</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   Passive Mode:               False</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   Status:                     up</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   Remote Echo Interval:       50</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   Local:                      16.0.0.2</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   Remote Diagnostic:          ok</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   Peer:                       16.0.0.3</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   Echo Interval:              0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   Uptime:                     57689</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   Minimum Ttl:                252</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   Diagnostic:                 ok</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   Transmit Interval:          1000</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> Item:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   Remote Detect Multiplier:   3</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   Remote:                     3892773233</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   Interface:                  g20</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   Remote Receive Interval:    1000</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   Vrf:                        music</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   Id:                         927933835</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   Receive Interval:           1000</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   Remote Transmit Interval:   1000</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   Multihop:                   False</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   Detect Multiplier:          3</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   Passive Mode:               False</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   Status:                     up</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   Remote Echo Interval:       50</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   Remote Diagnostic:          ok</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   Peer:                       11.1.20.4</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   Echo Interval:              0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   Uptime:                     2696</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   Diagnostic:                 ok</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   Transmit Interval:          1000</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> Item:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   Remote Detect Multiplier:   3</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   Remote:                     3305953639</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   Interface:                  g10</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   Remote Receive Interval:    1000</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   Vrf:                        default</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   Id:                         1713249686</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   Receive Interval:           1000</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   Remote Transmit Interval:   1000</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   Multihop:                   False</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   Detect Multiplier:          3</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   Passive Mode:               False</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   Status:                     up</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   Remote Echo Interval:       50</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   Remote Diagnostic:          ok</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   Peer:                       11.1.10.4</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   Echo Interval:              0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   Uptime:                     57979</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   Diagnostic:                 ok</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   Transmit Interval:          1000</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="bfd-echo-mode-tests">BFD Echo Mode Tests<a href="#bfd-echo-mode-tests" class="hash-link" aria-label="Direct link to BFD Echo Mode Tests" title="Direct link to BFD Echo Mode Tests">​</a></h2><p>This feature enables BFD asynchronous mode support. Many routers use BFD echo mode to ensure a forwarding path is available. While the SSR does not support the sending of BFD echo mode tests to a non-SSR router, we can return the echo mode traffic to the originating router allowing it to pass its echo mode test. Unlike BFD asynchronous mode, BFD echo mode is not handled by a BFD process on the peer router. Instead, it is intended to be processed by the packet forwarding plane and returned to the originating router. In order to pass this echo test traffic, an SSR must be configured to allow this traffic just like any other forwarding traffic. This requires a tenant and a service as with all traffic forwarded by the SSR.</p><p>To verify that the SSR is capable of relaying the echo mode packets, first <a href="/docs/ts_applications#identifying-the-requesting-tenant">identify the tenant</a> from the ingress interface and source IP address of the peer router. Then, check the FIB to verify that there is a <a href="/docs/ts_applications#identifying-the-service">match to a service</a> for this tenant. BFD echo traffic typically uses UDP destination port 3785 and should have the destination IP address of the peer router. A valid configuration does not require a specific service for BFD so long as this traffic is covered by another configured service. The next-hop of the FIB entry must point towards the egress interface that connects to this peer router.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"></div><div class="col lastUpdated_vwxv"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2024-02-05T22:05:26.000Z">Feb 5, 2024</time></b></span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/config_ospf"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">OSPF</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/config_multicast"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Multicast</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#overview" class="table-of-contents__link toc-highlight">Overview</a></li><li><a href="#configuration" class="table-of-contents__link toc-highlight">Configuration</a></li><li><a href="#troubleshooting" class="table-of-contents__link toc-highlight">Troubleshooting</a></li><li><a href="#bfd-echo-mode-tests" class="table-of-contents__link toc-highlight">BFD Echo Mode Tests</a></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2024 Juniper Networks, Inc.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.4b37cad4.js"></script>
<script src="/assets/js/main.31b03ced.js"></script>
</body>
</html>