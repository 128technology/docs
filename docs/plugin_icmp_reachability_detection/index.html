<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-plugin_icmp_reachability_detection" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.1.1">
<title data-rh="true">ICMP Reachability Detection Plugin | SSN Docs</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://docs.128technology.com/docs/plugin_icmp_reachability_detection"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="ICMP Reachability Detection Plugin | SSN Docs"><meta data-rh="true" name="description" content="The ICMP Reachability Detection Plugin has been deprecated; its functionality is available as part of Service Health Learning. For information specific to ICMP probe configuration, please refer to the ICMP Probe section of the Service Health Learning documentation."><meta data-rh="true" property="og:description" content="The ICMP Reachability Detection Plugin has been deprecated; its functionality is available as part of Service Health Learning. For information specific to ICMP probe configuration, please refer to the ICMP Probe section of the Service Health Learning documentation."><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://docs.128technology.com/docs/plugin_icmp_reachability_detection"><link data-rh="true" rel="alternate" href="https://docs.128technology.com/docs/plugin_icmp_reachability_detection" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.128technology.com/docs/plugin_icmp_reachability_detection" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/kb/rss.xml" title="SSR Knowledge Base Articles RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/kb/atom.xml" title="SSR Knowledge Base Articles Atom Feed">
<link rel="alternate" type="application/json" href="/kb/feed.json" title="SSR Knowledge Base Articles JSON Feed"><link rel="stylesheet" href="/assets/css/styles.df1c9d6e.css">
<script src="/assets/js/runtime~main.490fdca3.js" defer="defer"></script>
<script src="/assets/js/main.a20b0505.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.png" alt="Juniper Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/logo_dark.png" alt="Juniper Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate"></b></a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/docs/intro_getting_started">Docs</a><a class="navbar__item navbar__link" href="/kb">Knowledge Base</a><a href="https://community.juniper.net/answers/communities/community-home?CommunityKey=310d1a41-12fa-4627-9a99-880145a7c87c" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Community<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://www.juniper.net/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Company<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20" aria-hidden="true"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/intro_getting_started">About</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/release_notes_128t_6.3">Release Notes</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/supported-devices-overview">Supported Hardware Platforms</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/concepts-overview">Concepts</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/intro_installation">Installing Software Version 6.3.0 and Later</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/supported_cloud_platforms">Cloud / Hypervisor Installations</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/intro_installation_legacy">Installing Software Versions Earlier than 6.3.0</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/intro_upgrade_considerations">Upgrading the SSR</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/bcp_sdwan_design_guide">Best Practices</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/config_basics">Administration Guide</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/security-overview">Security</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/config_ha">High Availability</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/cli_reference">CLI and Element Reference</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/wan_overview">WAN Assurance</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/docs/plugin_intro">Plugins</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/plugin_intro">Introduction</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/plugin_bgp_community_services">BGP Community Services</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/plugin_cloud_ha">Cloud HA</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/plugin_dns_app_id">DNS App Id</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/plugin_dns_cache">DNS Cache</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/plugin_gre">GRE</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/plugin_ha_sync_redundancy">HA Sync Redundancy Plugin</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/plugin_http_probe">HTTP Probe Reachability Detection</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/plugin_icmp_reachability_detection">ICMP Reachability Detection</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/plugin_ipsec_client">IPsec Client</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/plugin_loopback_static_routes">Loopback Static Routes</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/plugin_m800_watchdog">M800 Watchdog</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/plugin_monitoring_agent">Monitoring Agent Plugin</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/plugin_mosh">Mosh</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/plugin_set_hostname">Set Hostname</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/plugin_sip_alg">SIP ALG</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/plugin_wireguard">Wireguard</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/plugin_kni_namespace_scripts">KNI Namespace Scripts</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/ts_applications">Troubleshooting</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Plugins</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">ICMP Reachability Detection</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>ICMP Reachability Detection Plugin</h1></header><div class="theme-admonition theme-admonition-important admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>important</div><div class="admonitionContent_BuS1"><p>The ICMP Reachability Detection Plugin has been deprecated; its functionality is available as part of <a href="/docs/config_service_health"><strong>Service Health Learning</strong></a>. For information specific to ICMP probe configuration, please refer to the <a href="/docs/config_service_health#icmp-probe"><strong>ICMP Probe</strong></a> section of the Service Health Learning documentation.</p><p>Service Health Learning operates in both a detection mode to gather metrics, and an enforcement mode to enforce path selection based on the experienced values, preventing failures that cause the router to effectively black-hole traffic.</p></div></div>
<p>The ICMP reachability detection plugin is designed to solve the problem where upstream next-hop failures cause the SSR to blackhole traffic for non-SVR services. When an SSR is provisioned to send traffic towards operationally valid next-hop(s), one of those next-hops might be incapable of delivering the packets to the final destination due to upstream failures beyond simple link or ARP failures causing the traffic being blackholed. The ICMP reachability detection plugin solves this problem by pinging a destination for reachability and allowing new sessions to failover to alternate paths when the primary path is unreachable. The plugin can also be used to perform a similar probe end-to-end to a server over SVR and trigger a failover in the same manner.</p>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_BuS1"><p>The instructions for installing and managing the plugin can be found <a href="/docs/plugin_intro#installation-and-management">here</a>.</p></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="overview">Overview<a href="#overview" class="hash-link" aria-label="Direct link to Overview" title="Direct link to Overview">​</a></h2>
<p>The plugin is designed to assist with failover for services that use a hunt based strategy, where traffic prefers one path over another during normal operations. (As opposed to a proportional distribution strategy which leverages multiple paths simultaneously.). If the router has two wan interfaces - broadband and LTE, the plugin can be set up to use broadband as the primary path and LTE as the secondary path. The plugin works by performing a continuous ICMP ping for the configured service(s) over each of the specified paths. A unique <a href="/docs/concepts_appid#appid-using-modules">application-id module</a> based service is generated to represent each of the potential paths. When the primary path is reachable, the corresponding primary path service will be activated to route the sessions. In the event of the primary path failure, the secondary path service will be activated and all subsequent sessions will then be routed using the new service.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="plugin-behavior">Plugin Behavior<a href="#plugin-behavior" class="hash-link" aria-label="Direct link to Plugin Behavior" title="Direct link to Plugin Behavior">​</a></h2>
<p>At the core of the plugin is the <code>ping-monitor</code> utility which will be used to do a continuous ping to the destination over all available paths. The <code>icmp-probe-agent</code> will be notified of any path status changes by the <code>ping-monitor</code> to help make decisions on how to update the application module configuration. The <code>service-route &gt; icmp-probe &gt; vector-priority</code> will be used to sort the paths in logical order.</p>
<p>The application module JSON will be set up based on the <code>service &gt; icmp-probe</code> configuration to learn the address and transport. For the example above, the JSON for the primary path will look like this:</p>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">{</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  &quot;module-name&quot;: &quot;icmp-probe-internet&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  &quot;duration&quot;: 86400,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  &quot;continue-file-watch&quot;: true,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  &quot;services&quot;: {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;icmp-internet-broadband&quot;: [</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;ip-prefix&quot;: &quot;0.0.0.0/0&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    ]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="sunny-day-scenario">Sunny Day Scenario<a href="#sunny-day-scenario" class="hash-link" aria-label="Direct link to Sunny Day Scenario" title="Direct link to Sunny Day Scenario">​</a></h3>
<p>The diagram below shows two available paths - broadband and LTE. In a sunny day scenario, the plugin will perform continuous pings to the destination and report the status as up. In this case, the configured <code>service &gt; icmp-probe &gt; address</code> will be configured in the application module for broadband service. This in turn will trigger the SSR to install the FIB entries for the <code>internet-broadband</code> service and all incoming sessions will be routed to the only available path for that service called <code>rte-internet-broadband</code>. This is essentially why the plugin can only operate in hunt mode.</p>
<p><img decoding="async" loading="lazy" alt="Sunny Day Scenario" src="/assets/images/icmp_probe_sunny_day_scenario-40506cf89f36cd2f0dcdf2ad5531118f.png" width="1283" height="665" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="primary-path-failure-scenario">Primary Path Failure Scenario<a href="#primary-path-failure-scenario" class="hash-link" aria-label="Direct link to Primary Path Failure Scenario" title="Direct link to Primary Path Failure Scenario">​</a></h3>
<p>The diagram below depicts the failure to ping the server over the broadband interface. This failure would typically cause the traffic to be blackholed as the upstream ISP gateway is still reachable via ARP. The ICMP probe plugin, however, will detect the server ICMP failure and will in turn update the application module JSON for the LTE service with the configured <code>service &gt; icmp-probe &gt; address</code>. As a result of this, the SSR will remove the FIB entries for the broadband service and replace it with FIB entries for the internet-lte service. All subsequent sessions will then be routed using the only available rte-internet-lte service route.</p>
<p><img decoding="async" loading="lazy" alt="Primary Path Failure" src="/assets/images/icmp_probe_primary_path_failover_scenario-b1b1c4a782507bbe58bb85d1f65ea99c.png" width="1283" height="665" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="primary-path-recovery-scenario">Primary Path Recovery Scenario<a href="#primary-path-recovery-scenario" class="hash-link" aria-label="Direct link to Primary Path Recovery Scenario" title="Direct link to Primary Path Recovery Scenario">​</a></h3>
<p>As soon as the primary path (broadband in the above example) is reachable, the ICMP probe process will update application module JSON with the <code>internet-broadband</code> service. This will cause the subsequent sessions to migrate back to the primary broadband interface. When the primary path comes up the system will wait <code>service &gt; icmp-probe &gt; hold-down</code> seconds before bringing it in service. This will act as a damper in case the path is flapping too frequently.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="all-path-failures">All Path Failures<a href="#all-path-failures" class="hash-link" aria-label="Direct link to All Path Failures" title="Direct link to All Path Failures">​</a></h3>
<p>The <code>service-policy &gt; best-effort</code> flag will determine the behavior of the <code>icmp-probe-agent</code> in the event where all paths are down. When <code>best-effort &gt; false</code>, the agent will update the application module with a <code>dummy</code> service name which would cause all FIB entries associated with the service to be withdrawn and the client connections to be rejected with an ICMP unreachable. When <code>best-effort &gt; true</code>, the agent will update the JSON with the primary path as defined by the vector-priority.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="configuration">Configuration<a href="#configuration" class="hash-link" aria-label="Direct link to Configuration" title="Direct link to Configuration">​</a></h2>
<p>For the plugin to operate we need to identify all the paths that can be used to reach the service. This is typically achieved by configuring a <code>service-route</code> on the router. The plugin configuration will leverage application-names and service-route to generate other relevant configurations.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="icmp-probe-enablement">ICMP Probe Enablement<a href="#icmp-probe-enablement" class="hash-link" aria-label="Direct link to ICMP Probe Enablement" title="Direct link to ICMP Probe Enablement">​</a></h3>
<p>The ICMP probe plugin is enabled on the target router as shown in the configuration excerpt below:</p>
<div class="language-config codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-config codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">admin@node1.conductor1# show config running authority router router1 icmp-probe</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">config</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    authority</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        router  router1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            name        router1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            icmp-probe</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                enabled  true</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">exit</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<table><thead><tr><th>Element</th><th>Type</th><th>Properties</th><th>Description</th></tr></thead><tbody><tr><td>enabled</td><td>boolean</td><td>default: true</td><td>Control whether the plugin is to be run on the router</td></tr><tr><td>plugin-network</td><td>ip-prefix</td><td>default: 169.254.142.0/28</td><td>This controls the IP address for the internal network for carrying the ICMP ping packets. This should only be changed if there is a conflict with another IP block in use on the same host system.</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="service-definition">Service Definition<a href="#service-definition" class="hash-link" aria-label="Direct link to Service Definition" title="Direct link to Service Definition">​</a></h3>
<p>By setting the <code>service &gt; application-name &gt; icmp-probe</code> a <code>service</code> can be designated as a candidate for performing ICMP probe based monitoring. For example:</p>
<div class="language-config codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-config codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">admin@node1.conductor1# show config running authority service internet</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">config</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    authority</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        service  internet</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            name              internet</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            application-name  icmp-probe</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            access-policy     lan</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                source  lan</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            access-policy     _internal_</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                source  _internal_</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            icmp-probe</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                address    0.0.0.0/0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                hold-down  6</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<table><thead><tr><th>Element</th><th>Type</th><th>Properties</th><th>Description</th></tr></thead><tbody><tr><td>address</td><td>ip-prefix</td><td>mandatory</td><td>The list of addresses to be associated with the service. These are the same addresses that a user would typically configure as the <code>service &gt; address</code></td></tr><tr><td>hold-down</td><td>seconds</td><td>default: 5</td><td>The amount of time a path must remain up before considering it as reachable after detecting a failure.</td></tr></tbody></table>
<p>The following considerations should be made for defining the service properties:</p>
<ul>
<li>The <code>service &gt; name</code> is used to auto-generate services of the form <code>{service-name}-{path-name}</code>. If the combined names are larger than 255 characters it will result in validation errors.</li>
<li>The <code>service &gt; service-policy &gt; lb-strategy</code> is assumed to be <code>hunt</code> and is recommended to be set to that for clarity. Even if the policy is set to <code>proportional</code>, the plugin creates unique services per path so the end behavior will still be <code>hunt</code>.</li>
<li>All the other service configuration such as access-policy, service-policy, etc., will be copied into generated services for application identification.</li>
</ul>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_BuS1"><p>When enabling ICMP probe for SVR paths any auto-generated <code>peer</code> or <code>next-peer</code> service-route should be set to <code>generated &gt; false</code> before adding the ICMP probe configuration.</p></div></div>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_BuS1"><p>The <code>service &gt; transport</code> can be configured to restrict the service to specific protocol and port ranges. The generated service will copy that configuration from the <code>icmp-probe</code> service.</p></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="service-route-definition">Service Route Definition<a href="#service-route-definition" class="hash-link" aria-label="Direct link to Service Route Definition" title="Direct link to Service Route Definition">​</a></h3>
<p>The <code>service-route</code> configuration is used to identify unique paths for a given service along with configuring the rest of the ICMP probe settings. For example:</p>
<div class="language-config codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-config codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">admin@node1.conductor1# show config running authority router router1 service-route internet-orig-broadband</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">config</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    authority</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        router  router1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            name           router1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            service-route  internet-bb-rte</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                name          internet-bb-rte</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                service-name  internet</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                next-hop      node1 broadband-intf</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    node-name  node1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    interface  broadband-intf</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                icmp-probe</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    path-name        broadband</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    vector-priority  10</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    probe-address    8.8.8.8</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    probe-interval   10</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    number-of-retries 4</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    retry-interval    1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">admin@node1.conductor1# show config running authority router router1 service-route internet-orig-lte</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">config</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    authority</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        router  router1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            name           router1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            service-route  internet-lte-rte</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                name          internet-lte-rte</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                service-name  internet</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                next-hop      node1 lte-intf</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    node-name   node1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    interface   lte-intf</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                icmp-probe</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    path-name        lte</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    vector-priority  20</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    probe-address    9.9.9.9</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    retry-interval   1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<table><thead><tr><th>Element</th><th>Type</th><th>Properties</th><th>Description</th></tr></thead><tbody><tr><td>path-name</td><td>string</td><td>required</td><td>The name to uniquely identify a single path.</td></tr><tr><td>vector-priority</td><td>integer</td><td>required</td><td>Priority value for the path. Lower vector-priority values take precedence for load balancing upon path failure.</td></tr><tr><td>probe-address</td><td>ip-address</td><td>optional</td><td>Address to ping for determining path health. When a service is defined with a single /32 address, the service &gt; address will be used as the ICMP destination</td></tr><tr><td>probe-interval</td><td>seconds</td><td>default: 10</td><td>Duration of how often to perform an ICMP probe test to the <code>probe-address</code></td></tr><tr><td>number-of-retries</td><td>integer</td><td>default: 5</td><td>Number of consecutive missed ICMP ping responses from the destination within the retry-interval before deciding that the path is unusable.</td></tr><tr><td>retry-interval</td><td>seconds</td><td>default: 5</td><td>Duration within which to reach the destination. Each attempt will be made in duration / number-of-retries interval</td></tr></tbody></table>
<p>The following considerations should be made while configuring the service-route for the plugin:</p>
<ul>
<li>Each unique path on the router should correspond to a unique value for <code>service route &gt; next-hop &gt; icmp-probe &gt; path-name</code>. For example, if the router has two interfaces broadband and LTE, each would be represented with a unique <code>path-name</code>.</li>
<li>Each <code>service route &gt; next-hop &gt; icmp-probe &gt; path-name</code> should represent a single path on the router. This will be used for generating KNIs, tenants and other configurations required to make the implementation work. Failure to do so will result in the auto config generation to fail.</li>
<li>The <code>service route &gt; next-hop &gt; icmp-probe &gt; vector-priority</code> should reflect the order in which the paths are to be preferred for routing</li>
<li>When the <code>icmp-probe &gt; probe-address</code> is not configured, the service should have a single /32 address for the probe to work. Failure to do so will result in the auto config generation to fail.</li>
<li>When the service covers more than a single address (such as 0.0.0.0/0), the <code>icmp-probe &gt; probe-address</code> effectively ties the reachability fate of the entire service and path to that single server. This could cause some false positives in reporting the path as down if the upstream server is facing some issues.</li>
</ul>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_BuS1"><p>The plugin can support any number of paths to be monitored for activity. Each path must have a unique vector-priority associated with it to determine the preference order.</p></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="triggering-manual-failover-or-recovery">Triggering Manual Failover Or Recovery<a href="#triggering-manual-failover-or-recovery" class="hash-link" aria-label="Direct link to Triggering Manual Failover Or Recovery" title="Direct link to Triggering Manual Failover Or Recovery">​</a></h2>
<p>In some situations, it might be desirable to forcefully trigger a failover or recovery for an otherwise healthy path. In the above example, the primary <code>broadband</code> can be brought down by doing the following:</p>
<ul>
<li>Stop the ping-monitor service for the path instance</li>
</ul>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain"># curl --unix-socket /var/run/128technology/plugins/icmp-probe-agent.sock http://localhost/path-info</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">{&quot;internet&quot;: {&quot;current-path&quot;: &quot;broadband&quot;, &quot;paths&quot;: {&quot;broadband&quot;: &quot;up&quot;, &quot;lte&quot;: &quot;up&quot;}}}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># systemctl stop ping-monitor-namespace@internet-broadband.service</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li>Edit the <code>/var/run/128technology/plugins/ping_monitor/{service}-{path}.state</code> and set the <code>STATUS=down</code></li>
</ul>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain"># echo &quot;STATUS=down&quot; &gt;&gt; /var/run/128technology/plugins/ping_monitor/internet-broadband.state</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># curl --unix-socket /var/run/128technology/plugins/icmp-probe-agent.sock http://localhost/path-info</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">{&quot;internet&quot;: {&quot;current-path&quot;: &quot;lte&quot;, &quot;paths&quot;: {&quot;broadband&quot;: &quot;down&quot;, &quot;lte&quot;: &quot;up&quot;}}}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># systemctl status 128T-icmp-probe-agent.service -l</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">● 128T-icmp-probe-agent.service - ICMP probe agent</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   Loaded: loaded (/usr/lib/systemd/system/128T-icmp-probe-agent.service; enabled; vendor preset: disabled)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   Active: active (running) since Thu 2020-07-30 04:56:07 UTC; 18min ago</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> Main PID: 32226 (python3.6)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    Tasks: 18</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   Memory: 22.8M</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   CGroup: /system.slice/128T-icmp-probe-agent.service</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">           └─32226 python3.6 /usr/lib/128T-icmp-reachability-detection//par/icmpProbeAgent.par -l DEBUG</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Jul 30 05:14:42 t102-dut2.openstacklocal python3.6[32226]: plugins.icmp_reachability_detection.router.icmp_probe_agent.app_id - Processing: 0.0.0.0/0 None</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Jul 30 05:14:42 t102-dut2.openstacklocal python3.6[32226]: t128.plugin.lib.app_id.builder - Updating /var/run/128technology/application-modules/icmp-probe-internet.json with</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                                                           {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                                                             &quot;module-name&quot;: &quot;icmp-probe-internet&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                                                             &quot;duration&quot;: 86400,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                                                             &quot;continue-file-watch&quot;: true,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                                                             &quot;services&quot;: {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                                                               &quot;icmp-internet-lte&quot;: [</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                                                                 {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                                                                   &quot;ip-prefix&quot;: &quot;0.0.0.0/0&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                                                                 }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                                                               ]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                                                             }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                                                           }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Jul 30 05:14:42 t102-dut2.openstacklocal python3.6[32226]: plugins.icmp_reachability_detection.router.icmp_probe_agent.state_machine - Advancing from State.PathUp-&gt;State.PathUp</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Jul 30 05:14:42 t102-dut2.openstacklocal python3.6[32226]: aiohttp.access -  [30/Jul/2020:05:14:42 +0000] &quot;POST /ping-status HTTP/1.1&quot; 200 180 &quot;-&quot; &quot;curl/7.29.0&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Jul 30 05:14:42 t102-dut2.openstacklocal python3.6[32226]: plugins.icmp_reachability_detection.router.icmp_probe_agent.agent - Handling status request</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Jul 30 05:14:42 t102-dut2.openstacklocal python3.6[32226]: plugins.icmp_reachability_detection.router.icmp_probe_agent.agent - internet received {&#x27;current-path&#x27;: &#x27;lte&#x27;, &#x27;paths&#x27;: {&#x27;broadband&#x27;: &#x27;down&#x27;, &#x27;lte&#x27;: &#x27;up&#x27;}}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Jul 30 05:14:42 t102-dut2.openstacklocal python3.6[32226]: aiohttp.access -  [30/Jul/2020:05:14:42 +0000] &quot;GET /path-info HTTP/1.1&quot; 200 239 &quot;-&quot; &quot;curl/7.29.0&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Jul 30 05:14:43 t102-dut2.openstacklocal python3.6[32226]: plugins.icmp_reachability_detection.router.icmp_probe_agent.agent - Handling status request</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Jul 30 05:14:43 t102-dut2.openstacklocal python3.6[32226]: plugins.icmp_reachability_detection.router.icmp_probe_agent.agent - internet received {&#x27;current-path&#x27;: &#x27;lte&#x27;, &#x27;paths&#x27;: {&#x27;broadband&#x27;: &#x27;down&#x27;, &#x27;lte&#x27;: &#x27;up&#x27;}}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Jul 30 05:14:43 t102-dut2.openstacklocal python3.6[32226]: aiohttp.access -  [30/Jul/2020:05:14:43 +0000] &quot;GET /path-info HTTP/1.1&quot; 200 239 &quot;-&quot; &quot;curl/7.29.0&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_BuS1"><p>The same steps can be used to bring <code>up</code> a path that is currently <code>down</code> by changing <code>STATUS=up</code> in the steps above.</p></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="troubleshooting">Troubleshooting<a href="#troubleshooting" class="hash-link" aria-label="Direct link to Troubleshooting" title="Direct link to Troubleshooting">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="checking-the-icmp-probe-and-agent-status">Checking the ICMP Probe and Agent Status<a href="#checking-the-icmp-probe-and-agent-status" class="hash-link" aria-label="Direct link to Checking the ICMP Probe and Agent Status" title="Direct link to Checking the ICMP Probe and Agent Status">​</a></h3>
<p>The status of the ICMP probe for the various paths can be discovered by querying the path based KNI interfaces as shown below:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">admin@node1.conductor1# show device-interface router router1 name lte</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Thu 2020-07-30 04:50:21 UTC</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">============================================</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> node1.router1:lte</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">============================================</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> Type:                host</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> Forwarding:          true</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> Mode:                host</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> MAC Address:         6a:5e:62:52:e8:d0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> Admin Status:        up</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> Operational Status:  up</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> Redundancy Status:   non-redundant</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> Speed:               1000</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> in-octets:                     6053488</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> in-unicast-pkts:                100882</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> in-errors:                           0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> out-octets:                    4328304</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> out-unicast-pkts:                92378</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> out-errors:                          0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> ICMP:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   Agent:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     internet:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">       current-path:  broadband</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">       paths:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">         broadband: up</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">         lte:       up</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   Probe:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">       icmp-probe-internet-broadband:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">         attempts:    733</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">         elapsed:     0.01019028015434742</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">         last_attempt: 2020-07-30 18:39:31.779657</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">         status:      up</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Completed in 0.07 seconds</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">admin@node1.conductor1#</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The <code>icmp-probe-agent</code> determines the state of the current path selection and reports its status via the path KNIs as seen in the example above. The result of the path selection should also be reflected via application-id module changes and can be viewed as follows:</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">admin@node1.conductor1# show application names router router1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Thu 2020-07-30 05:09:39 UTC</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Node: node1.router1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">========================= =============== ================ ===================== =====================</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> Application Name          Session Count   Ip Tuple Count   Date Discovered       Last Updated</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">========================= =============== ================ ===================== =====================</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">...</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> icmp-internet-broadband                   0                1   2020-07-30 05:09:15   2020-07-30 05:09:15</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">...</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Completed in 0.11 seconds</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">admin@node1.conductor1#</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="service-status">Service Status<a href="#service-status" class="hash-link" aria-label="Direct link to Service Status" title="Direct link to Service Status">​</a></h3>
<p>The plugin relies various <code>systemd</code> services to work in concert to provide a robust solution.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="plugin-config-handling">Plugin Config Handling<a href="#plugin-config-handling" class="hash-link" aria-label="Direct link to Plugin Config Handling" title="Direct link to Plugin Config Handling">​</a></h4>
<p>The following services are triggered for any changes made to the plugin configuration on the conductor.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain"># systemctl status 128T-handle-icmp-reachability-detection-config.path</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">● 128T-handle-icmp-reachability-detection-config.path</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   Loaded: loaded (/usr/lib/systemd/system/128T-handle-icmp-reachability-detection-config.path; enabled; vendor preset: disabled)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   Active: active (waiting) since Mon 2020-06-29 22:17:07 UTC; 4 weeks 2 days ago</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Jun 29 22:17:07 t102-dut2.openstacklocal systemd[1]: Stopped 128T-handle-icmp-reachability-detection-config.path.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Jun 29 22:17:07 t102-dut2.openstacklocal systemd[1]: Stopping 128T-handle-icmp-reachability-detection-config.path.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Jun 29 22:17:07 t102-dut2.openstacklocal systemd[1]: Started 128T-handle-icmp-reachability-detection-config.path.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># systemctl status 128T-handle-icmp-reachability-detection-config.service</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">● 128T-handle-icmp-reachability-detection-config.service - Config Handler for 128T icmp reachability detection plugin</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   Loaded: loaded (/usr/lib/systemd/system/128T-handle-icmp-reachability-detection-config.service; static; vendor preset: disabled)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   Active: inactive (dead) since Sat 2020-07-25 06:02:34 UTC; 4 days ago</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> Main PID: 19709 (code=exited, status=0/SUCCESS)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Jul 25 06:02:34 t102-dut2.openstacklocal python3.6[19709]: plugins.icmp_reachability_detection.router.lib.config - Generating KNI config for internet and lte</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Jul 25 06:02:34 t102-dut2.openstacklocal python3.6[19709]: plugins.icmp_reachability_detection.router.lib.config - Generating application-id script for service internet</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Jul 25 06:02:34 t102-dut2.openstacklocal python3.6[19709]: __main__ - Stopping the icmp-probe-agent service</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Jul 25 06:02:34 t102-dut2.openstacklocal python3.6[19709]: __main__ - Stopping services ping-monitor-namespace@internet-broadband.service 128T-icmp-path-change-notifier@internet-broadband.path</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Jul 25 06:02:34 t102-dut2.openstacklocal python3.6[19709]: __main__ - Stopping services ping-monitor-namespace@internet-lte.service 128T-icmp-path-change-notifier@internet-lte.path</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Jul 25 06:02:34 t102-dut2.openstacklocal python3.6[19709]: __main__ - Restarting the icmp-probe-agent service</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Jul 25 06:02:34 t102-dut2.openstacklocal python3.6[19709]: __main__ - Starting services ping-monitor-namespace@internet-broadband.service 128T-icmp-path-change-notifier@internet-broadband.path</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Jul 25 06:02:34 t102-dut2.openstacklocal python3.6[19709]: __main__ - Starting services ping-monitor-namespace@internet-lte.service 128T-icmp-path-change-notifier@internet-lte.path</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Jul 25 06:02:34 t102-dut2.openstacklocal python3.6[19709]: __main__ - Done!!</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Jul 25 06:02:34 t102-dut2.openstacklocal systemd[1]: Started Config Handler for 128T icmp reachability detection plugin.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="status-of-the-icmp-pings-per-path">Status of the ICMP Pings Per Path<a href="#status-of-the-icmp-pings-per-path" class="hash-link" aria-label="Direct link to Status of the ICMP Pings Per Path" title="Direct link to Status of the ICMP Pings Per Path">​</a></h4>
<p>The <code>ping-monitor</code> utility is used to perform a continuous ping and is run as a template service. The status for each of the path instances can be checked as follows:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain"># systemctl status ping-monitor-namespace@internet-broadband.service</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">● ping-monitor-namespace@internet-broadband.service - Ping Monitor for destination internet/broadband within network namespace</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   Loaded: loaded (/usr/lib/systemd/system/ping-monitor-namespace@.service; disabled; vendor preset: disabled)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   Active: active (running) since Thu 2020-07-30 04:56:07 UTC; 1min 58s ago</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> Main PID: 32229 (python3.6)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   CGroup: /system.slice/system-ping\x2dmonitor\x2dnamespace.slice/ping-monitor-namespace@internet-broadband.service</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">           └─32229 python3.6 /usr/lib/ping-monitor//par/ping_monitor.par --path-name=internet-broadband --address=8.8.8.8 --timeout=5 --num-tries=5 --interval=10 --socket-path=/var/run/128technology/icmp-probe-internet-broadband.sock --log-level=</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Jul 30 04:57:17 t102-dut2.openstacklocal ip[32229]: - - [30/Jul/2020 04:57:17] &quot;GET / HTTP/1.1&quot; 200 -</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Jul 30 04:57:18 t102-dut2.openstacklocal python3.6[32229]: apps.ping_monitor.ping - Got [Errno 101] Network is unreachable while pinging 8.8.8.8</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Jul 30 04:57:27 t102-dut2.openstacklocal ip[32229]: - - [30/Jul/2020 04:57:27] &quot;GET / HTTP/1.1&quot; 200 -</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Jul 30 04:57:28 t102-dut2.openstacklocal python3.6[32229]: apps.ping_monitor.ping - Got [Errno 101] Network is unreachable while pinging 8.8.8.8</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Jul 30 04:57:37 t102-dut2.openstacklocal ip[32229]: - - [30/Jul/2020 04:57:37] &quot;GET / HTTP/1.1&quot; 200 -</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Jul 30 04:57:38 t102-dut2.openstacklocal python3.6[32229]: apps.ping_monitor.ping - Got [Errno 101] Network is unreachable while pinging 8.8.8.8</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Jul 30 04:57:48 t102-dut2.openstacklocal python3.6[32229]: apps.ping_monitor.ping - Got [Errno 101] Network is unreachable while pinging 8.8.8.8</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Jul 30 04:57:49 t102-dut2.openstacklocal ip[32229]: - - [30/Jul/2020 04:57:49] &quot;GET / HTTP/1.1&quot; 200 -</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Jul 30 04:57:58 t102-dut2.openstacklocal python3.6[32229]: apps.ping_monitor.ping - Got [Errno 101] Network is unreachable while pinging 8.8.8.8</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Jul 30 04:58:00 t102-dut2.openstacklocal ip[32229]: - - [30/Jul/2020 04:58:00] &quot;GET / HTTP/1.1&quot; 200 -</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># systemctl status ping-monitor-namespace@internet-lte.service</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">● ping-monitor-namespace@internet-lte.service - Ping Monitor for destination internet/lte within network namespace</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   Loaded: loaded (/usr/lib/systemd/system/ping-monitor-namespace@.service; disabled; vendor preset: disabled)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   Active: active (running) since Thu 2020-07-30 04:56:08 UTC; 2min 40s ago</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> Main PID: 32232 (python3.6)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   CGroup: /system.slice/system-ping\x2dmonitor\x2dnamespace.slice/ping-monitor-namespace@internet-lte.service</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">           └─32232 python3.6 /usr/lib/ping-monitor//par/ping_monitor.par --path-name=internet-lte --address=9.9.9.9 --timeout=1 --num-tries=5 --interval=10 --socket-path=/var/run/128technology/icmp-probe-internet-lte.sock --log-level=</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Jul 30 04:57:09 t102-dut2.openstacklocal ip[32232]: - - [30/Jul/2020 04:57:09] &quot;GET / HTTP/1.1&quot; 200 -</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Jul 30 04:57:19 t102-dut2.openstacklocal ip[32232]: - - [30/Jul/2020 04:57:19] &quot;GET / HTTP/1.1&quot; 200 -</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Jul 30 04:57:29 t102-dut2.openstacklocal ip[32232]: - - [30/Jul/2020 04:57:29] &quot;GET / HTTP/1.1&quot; 200 -</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Jul 30 04:57:40 t102-dut2.openstacklocal ip[32232]: - - [30/Jul/2020 04:57:40] &quot;GET / HTTP/1.1&quot; 200 -</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Jul 30 04:57:51 t102-dut2.openstacklocal ip[32232]: - - [30/Jul/2020 04:57:51] &quot;GET / HTTP/1.1&quot; 200 -</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Jul 30 04:58:02 t102-dut2.openstacklocal ip[32232]: - - [30/Jul/2020 04:58:02] &quot;GET / HTTP/1.1&quot; 200 -</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Jul 30 04:58:13 t102-dut2.openstacklocal ip[32232]: - - [30/Jul/2020 04:58:13] &quot;GET / HTTP/1.1&quot; 200 -</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Jul 30 04:58:23 t102-dut2.openstacklocal ip[32232]: - - [30/Jul/2020 04:58:23] &quot;GET / HTTP/1.1&quot; 200 -</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Jul 30 04:58:34 t102-dut2.openstacklocal ip[32232]: - - [30/Jul/2020 04:58:34] &quot;GET / HTTP/1.1&quot; 200 -</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Jul 30 04:58:44 t102-dut2.openstacklocal ip[32232]: - - [30/Jul/2020 04:58:44] &quot;GET / HTTP/1.1&quot; 200 -</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_BuS1"><p>Additional debugging can be turned on for the <code>ping-monitor</code> instance by setting <code>LOG_LEVEL=DEBUG</code> in <code>/var/run/128technology/plugins/ping_monitor/{service}-{path}.conf</code> config file</p></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="status-of-the-path-selection-algorithm">Status of the Path Selection Algorithm<a href="#status-of-the-path-selection-algorithm" class="hash-link" aria-label="Direct link to Status of the Path Selection Algorithm" title="Direct link to Status of the Path Selection Algorithm">​</a></h4>
<p>The <code>icmp-probe-agent</code> takes its inputs from the <code>ping-monitor</code> services by watching on path updates for those instances. In addition it determines the current path selection and udpates the <code>application-id</code> modules accordingly. The following service status can be used for troubleshooting:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain"># systemctl status 128T-icmp-path-change-notifier@internet-broadband.path</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">● 128T-icmp-path-change-notifier@internet-broadband.path - Path watcher for ping-monitor status updates on internet-broadband</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   Loaded: loaded (/usr/lib/systemd/system/128T-icmp-path-change-notifier@.path; disabled; vendor preset: disabled)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   Active: active (waiting) since Thu 2020-07-30 04:56:07 UTC; 6min ago</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Jul 30 04:56:07 t102-dut2.openstacklocal systemd[1]: Started Path watcher for ping-monitor status updates on internet-broadband.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># systemctl status 128T-icmp-path-change-notifier@internet-broadband.service</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">● 128T-icmp-path-change-notifier@internet-broadband.service - Ping Monitor for destination internet-broadband</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   Loaded: loaded (/usr/lib/systemd/system/128T-icmp-path-change-notifier@.service; static; vendor preset: disabled)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   Active: inactive (dead) since Thu 2020-07-30 04:56:09 UTC; 6min ago</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  Process: 32271 ExecStop=/usr/bin/curl --unix-socket /var/run/128technology/plugins/icmp-probe-agent.sock http://localhost/path-info (code=exited, status=0/SUCCESS)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  Process: 32248 ExecStart=/usr/libexec/128T-icmp-status-update.sh ${NAME} ${STATUS} ${MAX_RETRIES} (code=exited, status=0/SUCCESS)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  Process: 32246 ExecStartPre=/usr/bin/echo Executing path update for ${NAME} with ${STATUS} (code=exited, status=0/SUCCESS)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> Main PID: 32248 (code=exited, status=0/SUCCESS)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Jul 30 04:56:08 t102-dut2.openstacklocal systemd[1]: Starting Ping Monitor for destination internet-broadband...</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Jul 30 04:56:08 t102-dut2.openstacklocal echo[32246]: Executing path update for internet-broadband with down</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Jul 30 04:56:08 t102-dut2.openstacklocal 128T-icmp-status-update.sh[32248]: failed to update icmp-probe-agent 7, retrying in a second</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Jul 30 04:56:09 t102-dut2.openstacklocal 128T-icmp-status-update.sh[32248]: Finished updating the icmp-probe-agent</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Jul 30 04:56:09 t102-dut2.openstacklocal curl[32271]: % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Jul 30 04:56:09 t102-dut2.openstacklocal curl[32271]: Dload  Upload   Total   Spent    Left  Speed</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Jul 30 04:56:09 t102-dut2.openstacklocal curl[32271]: [155B blob data]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Jul 30 04:56:09 t102-dut2.openstacklocal curl[32271]: {&quot;internet&quot;: {&quot;current-path&quot;: &quot;lte&quot;, &quot;paths&quot;: {&quot;broadband&quot;: &quot;down&quot;, &quot;lte&quot;: &quot;up&quot;}}}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Jul 30 04:56:09 t102-dut2.openstacklocal systemd[1]: Started Ping Monitor for destination internet-broadband.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># systemctl status 128T-icmp-path-change-notifier@internet-lte.path</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">● 128T-icmp-path-change-notifier@internet-lte.path - Path watcher for ping-monitor status updates on internet-lte</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   Loaded: loaded (/usr/lib/systemd/system/128T-icmp-path-change-notifier@.path; disabled; vendor preset: disabled)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   Active: active (waiting) since Thu 2020-07-30 04:56:08 UTC; 6min ago</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Jul 30 04:56:08 t102-dut2.openstacklocal systemd[1]: Started Path watcher for ping-monitor status updates on internet-lte.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># systemctl status 128T-icmp-path-change-notifier@internet-lte.service</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">● 128T-icmp-path-change-notifier@internet-lte.service - Ping Monitor for destination internet-lte</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   Loaded: loaded (/usr/lib/systemd/system/128T-icmp-path-change-notifier@.service; static; vendor preset: disabled)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   Active: inactive (dead) since Thu 2020-07-30 04:56:09 UTC; 6min ago</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  Process: 32262 ExecStop=/usr/bin/curl --unix-socket /var/run/128technology/plugins/icmp-probe-agent.sock http://localhost/path-info (code=exited, status=0/SUCCESS)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  Process: 32238 ExecStart=/usr/libexec/128T-icmp-status-update.sh ${NAME} ${STATUS} ${MAX_RETRIES} (code=exited, status=0/SUCCESS)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  Process: 32237 ExecStartPre=/usr/bin/echo Executing path update for ${NAME} with ${STATUS} (code=exited, status=0/SUCCESS)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> Main PID: 32238 (code=exited, status=0/SUCCESS)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Jul 30 04:56:08 t102-dut2.openstacklocal systemd[1]: Starting Ping Monitor for destination internet-lte...</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Jul 30 04:56:08 t102-dut2.openstacklocal echo[32237]: Executing path update for internet-lte with up</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Jul 30 04:56:08 t102-dut2.openstacklocal 128T-icmp-status-update.sh[32238]: failed to update icmp-probe-agent 7, retrying in a second</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Jul 30 04:56:09 t102-dut2.openstacklocal 128T-icmp-status-update.sh[32238]: Finished updating the icmp-probe-agent</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Jul 30 04:56:09 t102-dut2.openstacklocal curl[32262]: % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Jul 30 04:56:09 t102-dut2.openstacklocal curl[32262]: Dload  Upload   Total   Spent    Left  Speed</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Jul 30 04:56:09 t102-dut2.openstacklocal curl[32262]: [155B blob data]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Jul 30 04:56:09 t102-dut2.openstacklocal systemd[1]: Started Ping Monitor for destination internet-lte.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Jul 30 04:56:09 t102-dut2.openstacklocal curl[32262]: {&quot;internet&quot;: {&quot;current-path&quot;: &quot;broadband&quot;, &quot;paths&quot;: {&quot;broadband&quot;: &quot;down&quot;, &quot;lte&quot;: &quot;up&quot;}}}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># systemctl status 128T-icmp-probe-agent.service  -l</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">● 128T-icmp-probe-agent.service - ICMP probe agent</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   Loaded: loaded (/usr/lib/systemd/system/128T-icmp-probe-agent.service; enabled; vendor preset: disabled)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   Active: active (running) since Thu 2020-07-30 04:56:07 UTC; 7min ago</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> Main PID: 32226 (python3.6)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    Tasks: 5</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   Memory: 22.2M</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   CGroup: /system.slice/128T-icmp-probe-agent.service</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">           └─32226 python3.6 /usr/lib/128T-icmp-reachability-detection//par/icmpProbeAgent.par -l DEBUG</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Jul 30 04:56:09 t102-dut2.openstacklocal python3.6[32226]: plugins.icmp_reachability_detection.router.icmp_probe_agent.state_machine - Updating path-info PathUp for path lte for service internet</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Jul 30 04:56:09 t102-dut2.openstacklocal python3.6[32226]: plugins.icmp_reachability_detection.router.icmp_probe_agent.app_id - Service DotMap(icmpProbe=DotMap(address=[&#x27;0.0.0.0/0&#x27;], holdDown=6), name=&#x27;internet&#x27;, transport=DotMap())</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Jul 30 04:56:09 t102-dut2.openstacklocal python3.6[32226]: plugins.icmp_reachability_detection.router.icmp_probe_agent.app_id - Creating service for internet, icmp-internet-lte, [&#x27;0.0.0.0/0&#x27;], DotMap()</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Jul 30 04:56:09 t102-dut2.openstacklocal python3.6[32226]: plugins.icmp_reachability_detection.router.icmp_probe_agent.app_id - Processing: 0.0.0.0/0 None</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Jul 30 04:56:09 t102-dut2.openstacklocal python3.6[32226]: t128.plugin.lib.app_id.builder - Updating /var/run/128technology/application-modules/icmp-probe-internet.json with</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                                                           {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                                                             &quot;module-name&quot;: &quot;icmp-probe-internet&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                                                             &quot;duration&quot;: 86400,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                                                             &quot;continue-file-watch&quot;: true,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                                                             &quot;services&quot;: {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                                                               &quot;icmp-internet-lte&quot;: [</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                                                                 {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                                                                   &quot;ip-prefix&quot;: &quot;0.0.0.0/0&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                                                                 }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                                                               ]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                                                             }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                                                           }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Jul 30 04:56:09 t102-dut2.openstacklocal python3.6[32226]: plugins.icmp_reachability_detection.router.icmp_probe_agent.state_machine - Advancing from State.HoldDown-&gt;State.PathUp</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Jul 30 04:56:09 t102-dut2.openstacklocal python3.6[32226]: aiohttp.access -  [30/Jul/2020:04:56:09 +0000] &quot;POST /ping-status HTTP/1.1&quot; 200 180 &quot;-&quot; &quot;curl/7.29.0&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Jul 30 04:56:09 t102-dut2.openstacklocal python3.6[32226]: plugins.icmp_reachability_detection.router.icmp_probe_agent.agent - Handling status request</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Jul 30 04:56:09 t102-dut2.openstacklocal python3.6[32226]: plugins.icmp_reachability_detection.router.icmp_probe_agent.agent - internet received {&#x27;current-path&#x27;: &#x27;lte&#x27;, &#x27;paths&#x27;: {&#x27;broadband&#x27;: &#x27;down&#x27;, &#x27;lte&#x27;: &#x27;up&#x27;}}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Jul 30 04:56:09 t102-dut2.openstacklocal python3.6[32226]: aiohttp.access -  [30/Jul/2020:04:56:09 +0000] &quot;GET /path-info HTTP/1.1&quot; 200 239 &quot;-&quot; &quot;curl/7.29.0&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_BuS1"><p>Additional debugging can be turned on for the <code>icmp-probe-agent</code> by passing the <code>-l DEBUG</code> to the <code>/usr/lib/systemd/system/128T-icmp-probe-agent.service</code> on the <code>ExecStart</code> line</p></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="appendix-auto-generated-configuration">Appendix: Auto-Generated Configuration<a href="#appendix-auto-generated-configuration" class="hash-link" aria-label="Direct link to Appendix: Auto-Generated Configuration" title="Direct link to Appendix: Auto-Generated Configuration">​</a></h2>
<p>The <code>service &gt; icmp-probe</code> and <code>service-route &gt; icmp-probe</code> configuration will be used to generate other functional configuration elements as needed. At a high level, configuration needs to be generated to do the following:</p>
<ul>
<li>ICMP reachability detection<!-- -->
<ul>
<li>KNI for each of the paths to be used for the service(s)</li>
<li>Service and service-routes to enable ICMP over those paths</li>
<li>Tenants to uniquely identify each of the generated KNIs</li>
</ul>
</li>
<li>Per path app-id services<!-- -->
<ul>
<li>An application-id service with unique application name for each of the path for the service</li>
<li>Service routes to route sessions over appropriate paths</li>
</ul>
</li>
</ul>
<p>The above example configuration will result in the following auto-generated configuration for this plugin</p>
<div class="language-config codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-config codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">admin@node1.conductor1# show config running authority tenant broadband</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">config</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    authority</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        tenant  broadband</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            name         broadband</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            description  &quot;Auto-generated tenant for icmp-reachability-detection&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">admin@node1.conductor1# show config running authority tenant lte</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">config</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    authority</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        tenant  lte</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            name         lte</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            description  &quot;Auto-generated tenant for icmp-reachability-detection&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">admin@node1.conductor1# show config running authority service broadband-icmp</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">config</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    authority</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        service  broadband-icmp</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            name                  broadband-icmp</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            transport             icmp</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                protocol  icmp</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            address               8.8.8.8</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            access-policy         broadband</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                source      broadband</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                permission  allow</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            share-service-routes  false</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">admin@node1.conductor1# show config running authority service lte-icmp</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">config</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    authority</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        service  lte-icmp</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            name                  lte-icmp</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            transport             icmp</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                protocol  icmp</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            address               9.9.9.9</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            access-policy         lte</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                source      lte</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                permission  allow</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            share-service-routes  false</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">admin@node1.conductor1# show config running authority service internet-broadband</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">config</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    authority</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        service  internet-broadband</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            name              internet-broadband</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            application-name  icmp-internet-broadband</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            access-policy     _internal_</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                source  _internal_</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">admin@node1.conductor1# show config running authority service internet-lte</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">config</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    authority</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        service  internet-lte</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            name              internet-lte</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            application-name  icmp-internet-lte</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            access-policy     _internal_</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                source  _internal_</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">admin@node1.conductor1# show config running authority router router1 node node1 device-interface broadband</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">config</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    authority</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        router  router1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            name  router1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            node  node1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                name              node1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                device-interface  broadband</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    name               broadband</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    description        &quot;Auto generated host KNI interface for internet&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    type               host</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    network-namespace  broadband</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    network-interface  broadband-intf</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                        name       broadband-intf</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                        global-id  3</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                        type       external</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                        tenant     broadband</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                        address    169.254.142.2</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                            ip-address     169.254.142.2</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                            prefix-length  31</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                            gateway        169.254.142.3</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                        exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">admin@node1.conductor1# show config running authority router router1 node node1 device-interface lte</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">config</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    authority</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        router  router1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            name  router1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            node  node1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                name              node1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                device-interface  lte</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    name               lte</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    description        &quot;Auto generated host KNI interface for internet&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    type               host</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    network-namespace  lte</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    network-interface  lte-intf</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                        name       lte-intf</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                        global-id  5</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                        type       external</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                        tenant     lte</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                        address    169.254.142.4</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                            ip-address     169.254.142.4</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                            prefix-length  31</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                            gateway        169.254.142.5</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                        exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">admin@node1.conductor1# show config running authority router router1 service-route rte-broadband-icmp</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">config</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    authority</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        router  router1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            name           router1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            service-route  rte-broadband-icmp</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                name          rte-broadband-icmp</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                service-name  broadband-icmp</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                next-hop      node1 broadband-intf</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    node-name  node1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    interface  broadband-intf</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">admin@node1.conductor1# show config running authority router router1 service-route rte-lte-icmp</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">config</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    authority</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        router  router1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            name           router1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            service-route  rte-lte-icmp</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                name          rte-lte-icmp</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                service-name  lte-icmp</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                next-hop      node1 lte-intf</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    node-name   node1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    interface   lte-intf</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">admin@node1.conductor1# show config running authority router router1 service-route rte-internet-broadband</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">config</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    authority</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        router  router1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            name           router1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            service-route  rte-internet-broadband</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                name          rte-internet-broadband</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                service-name  internet-broadband</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                next-hop      node1 broadband-intf</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    node-name  node1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    interface  broadband-intf</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">admin@node1.conductor1# show config running authority router router1 service-route rte-internet-lte</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">config</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    authority</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        router  router1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            name           router1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            service-route  rte-internet-lte</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                name          rte-internet-lte</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                service-name  internet-lte</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                next-hop      node1 lte-intf</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    node-name   node1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    interface   lte-intf</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Some of the key aspects of the auto-generated configuration are as follows:</p>
<ul>
<li>Each of the generated service has an application-name of the form <code>icmp-{service}-{path}</code> as can be seen with <code>icmp-internet-broadband</code> and <code>icmp-internet-lte</code> in the above example. These application names determine which path is currently available for the service.</li>
<li>The generated KNIs each represent a unique path and are useful for performing the ICMP probe over those paths. The <code>broadband-icmp</code> and <code>lte-icmp</code> services are generated to assist with that.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="release-notes">Release Notes<a href="#release-notes" class="hash-link" aria-label="Direct link to Release Notes" title="Direct link to Release Notes">​</a></h2>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>warning</div><div class="admonitionContent_BuS1"><p>The plugin must be updated to version 3.0.3 or later prior to <a href="/docs/intro_upgrade_considerations#plugin-configuration-generation-changes">upgrading the conductor to SSR version 5.4.0.</a></p></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="release-306">Release 3.0.6<a href="#release-306" class="hash-link" aria-label="Direct link to Release 3.0.6" title="Direct link to Release 3.0.6">​</a></h3>
<p><strong>Release Date:</strong> Apr 25, 2024</p>
<p><strong>Router Version</strong></p>
<ul>
<li>128T-icmp-reachability-detection-router-1.1.3-2</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="issues-fixed">Issues Fixed<a href="#issues-fixed" class="hash-link" aria-label="Direct link to Issues Fixed" title="Direct link to Issues Fixed">​</a></h4>
<ul>
<li>
<p><strong>PLUGIN-2371</strong> Adding additional debugging to plugin</p>
<p><em><strong>Resolution:</strong></em> Log level is set through config and support for <code>save tech-support-info</code> has been added.</p>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="release-305">Release 3.0.5<a href="#release-305" class="hash-link" aria-label="Direct link to Release 3.0.5" title="Direct link to Release 3.0.5">​</a></h3>
<p><strong>Release Date:</strong> Mar 01, 2023</p>
<p><strong>Router Version</strong></p>
<ul>
<li>128T-icmp-reachability-detection-router-1.1.2-2</li>
</ul>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_BuS1"><p>The release with the version number 3.0.4 was skipped due to internal issues.</p></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="issues-fixed-1">Issues Fixed<a href="#issues-fixed-1" class="hash-link" aria-label="Direct link to Issues Fixed" title="Direct link to Issues Fixed">​</a></h4>
<ul>
<li>
<p><strong>PLUGIN-1480</strong> Large configuration was causing plugin config generation to fail.</p>
<p><em><strong>Resolution:</strong></em> The config generation logic for the plugin will handle config with long lines correctly.</p>
</li>
<li>
<p><strong>PLUGIN-1494</strong>  No route being injected into FIB table for dns-app-id custom apps.</p>
<p><em><strong>Resolution:</strong></em> Automatically enable the module mode on router with dns-app-id config enabled.</p>
</li>
<li>
<p><strong>PLUGIN-2009</strong> The preferred service path not selected after failover and recovery.</p>
<p><em><strong>Resolution:</strong></em> The ICMP probe state machine gracefully handles the boot up scenario as different paths come up at different times.</p>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="release-303">Release 3.0.3<a href="#release-303" class="hash-link" aria-label="Direct link to Release 3.0.3" title="Direct link to Release 3.0.3">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="issues-fixed-2">Issues Fixed<a href="#issues-fixed-2" class="hash-link" aria-label="Direct link to Issues Fixed" title="Direct link to Issues Fixed">​</a></h4>
<ul>
<li>
<p><strong>PLUGIN-1322</strong> Plugins do not clean up the the salt states on uninstall</p>
<p><em><strong>Resolution:</strong></em> Each plugin RPM now manages their dependencies to ensure proper clean up on uninstall</p>
</li>
<li>
<p><strong>PLUGIN-1378</strong> Plugin config generation was failing to remove certain elements from XML</p>
<p><em><strong>Resolution:</strong></em> Handle the case for missing elements before attempting to remove them. In addition, ensure that the failure for config generation on one router doesn&#x27;t affect the rest of the routers.</p>
</li>
<li>
<p><strong>PLUGIN-1383</strong> Plugin generated services do not work when module mode is not configured</p>
<p><em><strong>Resolution:</strong></em> The plugin will auto generate the application-identification module mode when possible to ensure the plugin generated services operate correctly.</p>
</li>
<li>
<p><strong>PLUGIN-1419</strong> Invalid service config generated for the config director mode</p>
<p><em><strong>Resolution:</strong></em> The plugin correctly generates the application-name field for generated services to conform to the config director type validation.</p>
</li>
<li>
<p><strong>PLUGIN-1322</strong> The plugin state command doesn&#x27;t show correct information</p>
<p><em><strong>Resolution</strong></em> The plugin state command output was improved for both summary and detail mode to show correct information.</p>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="release-301">Release 3.0.1<a href="#release-301" class="hash-link" aria-label="Direct link to Release 3.0.1" title="Direct link to Release 3.0.1">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="issues-fixed-3">Issues Fixed<a href="#issues-fixed-3" class="hash-link" aria-label="Direct link to Issues Fixed" title="Direct link to Issues Fixed">​</a></h4>
<ul>
<li>
<p><strong>PLUGIN-1170</strong>  Config generation for the plugin failing in the Bonsai mode</p>
<p><em><strong>Resolution:</strong></em> Correctly handle the config generation for routers where the ICMP plugin is not enabled during bonsai config generation</p>
</li>
<li>
<p><strong>PLUGIN-1088</strong>  ICMP plugin keeps pinging in the background even when disabled</p>
<p><em><strong>Resolution:</strong></em> When the plugin is disabled the relevant systemd services are stopped and the router components are uninstalled.</p>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="release-201">Release 2.0.1<a href="#release-201" class="hash-link" aria-label="Direct link to Release 2.0.1" title="Direct link to Release 2.0.1">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="issues-fixed-4">Issues Fixed<a href="#issues-fixed-4" class="hash-link" aria-label="Direct link to Issues Fixed" title="Direct link to Issues Fixed">​</a></h4>
<ul>
<li>
<p><strong>PLUGIN-1088</strong>  ICMP plugin keeps pinging in the background even when disabled</p>
<p><em><strong>Resolution:</strong></em> When the plugin is disabled the relevant systemd services are stopped and the router components are uninstalled.</p>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="release-300">Release 3.0.0<a href="#release-300" class="hash-link" aria-label="Direct link to Release 3.0.0" title="Direct link to Release 3.0.0">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="issues-fixed-5">Issues Fixed<a href="#issues-fixed-5" class="hash-link" aria-label="Direct link to Issues Fixed" title="Direct link to Issues Fixed">​</a></h4>
<ul>
<li><strong>PLUGIN-768</strong> Support the ICMP Reachability Detection plugin in SSR versions <code>5.1.0</code> and greater.</li>
<li><strong>PLUGIN-611</strong> Added support for plugin state. Plugin state information can be accessed on the PCLI using <code>show plugins state [router &lt;router&gt;] [node &lt;node&gt;] [{detail | summmary}] 128T-icmp-reachability-detection</code></li>
</ul></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/plugin_http_probe"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">HTTP Probe Reachability Detection</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/plugin_ipsec_client"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">IPsec Client</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#overview" class="table-of-contents__link toc-highlight">Overview</a></li><li><a href="#plugin-behavior" class="table-of-contents__link toc-highlight">Plugin Behavior</a><ul><li><a href="#sunny-day-scenario" class="table-of-contents__link toc-highlight">Sunny Day Scenario</a></li><li><a href="#primary-path-failure-scenario" class="table-of-contents__link toc-highlight">Primary Path Failure Scenario</a></li><li><a href="#primary-path-recovery-scenario" class="table-of-contents__link toc-highlight">Primary Path Recovery Scenario</a></li><li><a href="#all-path-failures" class="table-of-contents__link toc-highlight">All Path Failures</a></li></ul></li><li><a href="#configuration" class="table-of-contents__link toc-highlight">Configuration</a><ul><li><a href="#icmp-probe-enablement" class="table-of-contents__link toc-highlight">ICMP Probe Enablement</a></li><li><a href="#service-definition" class="table-of-contents__link toc-highlight">Service Definition</a></li><li><a href="#service-route-definition" class="table-of-contents__link toc-highlight">Service Route Definition</a></li></ul></li><li><a href="#triggering-manual-failover-or-recovery" class="table-of-contents__link toc-highlight">Triggering Manual Failover Or Recovery</a></li><li><a href="#troubleshooting" class="table-of-contents__link toc-highlight">Troubleshooting</a><ul><li><a href="#checking-the-icmp-probe-and-agent-status" class="table-of-contents__link toc-highlight">Checking the ICMP Probe and Agent Status</a></li><li><a href="#service-status" class="table-of-contents__link toc-highlight">Service Status</a></li></ul></li><li><a href="#appendix-auto-generated-configuration" class="table-of-contents__link toc-highlight">Appendix: Auto-Generated Configuration</a></li><li><a href="#release-notes" class="table-of-contents__link toc-highlight">Release Notes</a><ul><li><a href="#release-306" class="table-of-contents__link toc-highlight">Release 3.0.6</a></li><li><a href="#release-305" class="table-of-contents__link toc-highlight">Release 3.0.5</a></li><li><a href="#release-303" class="table-of-contents__link toc-highlight">Release 3.0.3</a></li><li><a href="#release-301" class="table-of-contents__link toc-highlight">Release 3.0.1</a></li><li><a href="#release-201" class="table-of-contents__link toc-highlight">Release 2.0.1</a></li><li><a href="#release-300" class="table-of-contents__link toc-highlight">Release 3.0.0</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="footer"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 Juniper Networks, Inc.</div></div></div></footer></div>
</body>
</html>