<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.14">
<title data-react-helmet="true">ICMP Reachability Detection Plugin | SSN Docs</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://docs.128technology.com/docs/plugin_icmp_reachability_detection"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="ICMP Reachability Detection Plugin | SSN Docs"><meta data-react-helmet="true" name="description" content="The ICMP reachability detection plugin is designed to solve the problem where upstream next-hop failures cause the SSR to blackhole traffic for non-SVR services. When an SSR is provisioned to send traffic towards operationally valid next-hop(s), one of those next-hops might be incapable of delivering the packets to the final destination due to upstream failures beyond simple link or ARP failures causing the traffic being blackholed. The ICMP reachability detection plugin solves this problem by pinging a destination for reachability and allowing new sessions to failover to alternate paths when the primary path is unreachable. The plugin can also be used to perform a similar probe end-to-end to a server over SVR and trigger a failover in the same manner."><meta data-react-helmet="true" property="og:description" content="The ICMP reachability detection plugin is designed to solve the problem where upstream next-hop failures cause the SSR to blackhole traffic for non-SVR services. When an SSR is provisioned to send traffic towards operationally valid next-hop(s), one of those next-hops might be incapable of delivering the packets to the final destination due to upstream failures beyond simple link or ARP failures causing the traffic being blackholed. The ICMP reachability detection plugin solves this problem by pinging a destination for reachability and allowing new sessions to failover to alternate paths when the primary path is unreachable. The plugin can also be used to perform a similar probe end-to-end to a server over SVR and trigger a failover in the same manner."><link data-react-helmet="true" rel="icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://docs.128technology.com/docs/plugin_icmp_reachability_detection"><link data-react-helmet="true" rel="alternate" href="https://docs.128technology.com/docs/plugin_icmp_reachability_detection" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://docs.128technology.com/docs/plugin_icmp_reachability_detection" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.21b25f22.css">
<link rel="preload" href="/assets/js/runtime~main.a6409479.js" as="script">
<link rel="preload" href="/assets/js/main.555dbe5a.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_OuoZ">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="Juniper Logo" class="themedImage_TMUO themedImage--light_4Vu1"><img src="/img/logo_dark.png" alt="Juniper Logo" class="themedImage_TMUO themedImage--dark_uzRr"></div><b class="navbar__title">Session Smart</b></a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/docs/intro_getting_started">Docs</a><a href="https://community.juniper.net/answers/communities/community-home?CommunityKey=310d1a41-12fa-4627-9a99-880145a7c87c" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>Session Smart Community<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><a href="https://www.juniper.net/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>Company<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_lDyR"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_i9tI" type="button"></button><aside class="docSidebarContainer_0YBq"><div class="sidebar_a3j0"><nav class="menu thin-scrollbar menu_cyFh"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/docs/about_128t">About</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/docs/intro_getting_started">Introduction</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/docs/intro_system_reqs">Deployment Considerations</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/docs/intro_installation">Installation Process</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/docs/intro_installation_image">Image-Based Installation</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/docs/supported_cloud_platforms">Cloud Installations</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/docs/intro_upgrade_considerations">Upgrades and Rollback</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/docs/intro_installation_installer">Supporting Install Information - Appendix</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/docs/concepts_application_discovery">Concepts</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/docs/wan_overview">WAN Assurance</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/docs/config_basics">Administration</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/docs/events_overview">Events</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/docs/bcp_att_avpn_configuration">Best Practices</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/docs/cli_reference">CLI and Element Reference</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/docs/installer_cli_reference">Installer/Initializer Reference</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active hasHref_TwRn" href="/docs/plugin_intro">Plugins</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/plugin_intro">Introduction</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/plugin_aws_tgw_connect">AWS Transit Gateway Connect</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/plugin_bgp_community_services">BGP Community Services</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/plugin_cloud_ha">Cloud HA</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/plugin_dns_app_id">DNS App Id</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/plugin_dns_cache">DNS Cache</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/plugin_gre">GRE</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/plugin_ha_sync_redundancy">HA Sync Redundancy Plugin</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/plugin_http_probe">HTTP Probe Reachability Detection</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/plugin_icmp_reachability_detection">ICMP Reachability Detection</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/plugin_ipsec_client">IPsec Client</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/plugin_loopback_static_routes">Loopback Static Routes</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/plugin_m800_watchdog">M800 Watchdog</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/plugin_monitoring_agent">Monitoring Agent</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/plugin_mosh">Mosh</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/plugin_set_hostname">Set Hostname</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/plugin_sip_alg">SIP ALG</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/plugin_wireguard">Wireguard</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/plugin_kni_namespace_scripts">KNI Namespace Scripts</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/docs/release_notes_128t_6.0">Release Notes</a></div></li></ul></nav></div></aside><main class="docMainContainer_r8cw"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_zHA2"><div class="docItemContainer_oiyr"><article><div class="tocCollapsible_aw-L theme-doc-toc-mobile tocMobile_Tx6Y"><button type="button" class="clean-btn tocCollapsibleButton_zr6a">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>ICMP Reachability Detection Plugin</h1></header><p>The ICMP reachability detection plugin is designed to solve the problem where upstream next-hop failures cause the SSR to blackhole traffic for non-SVR services. When an SSR is provisioned to send traffic towards operationally valid next-hop(s), one of those next-hops might be incapable of delivering the packets to the final destination due to upstream failures beyond simple link or ARP failures causing the traffic being blackholed. The ICMP reachability detection plugin solves this problem by pinging a destination for reachability and allowing new sessions to failover to alternate paths when the primary path is unreachable. The plugin can also be used to perform a similar probe end-to-end to a server over SVR and trigger a failover in the same manner.</p><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>The instructions for installing and managing the plugin can be found <a href="/docs/plugin_intro#installation-and-management">here</a>.</p></div></div><h2 class="anchor anchorWithStickyNavbar_y2LR" id="overview">Overview<a class="hash-link" href="#overview" title="Direct link to heading">​</a></h2><p> The plugin is designed to assist with failover for services that use a hunt based strategy, where traffic prefers one path over another during normal operations. (As opposed to a proportional distribution strategy which leverages multiple paths simultaneously.). If the router has two wan interfaces - broadband and LTE, the plugin can be set up to use broadband as the primary path and LTE as the secondary path. The plugin works by performing a continuous ICMP ping for the configured service(s) over each of the specified paths. A unique <a href="/docs/concepts_appid#appid-using-modules">application-id module</a> based service is generated to represent each of the potential paths. When the primary path is reachable, the corresponding primary path service will be activated to route the sessions. In the event of the primary path failure, the secondary path service will be activated and all subsequent sessions will then be routed using the new service.</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="plugin-behavior">Plugin Behavior<a class="hash-link" href="#plugin-behavior" title="Direct link to heading">​</a></h2><p>At the core of the plugin is the <code>ping-monitor</code> utility which will be used to do a continuous ping to the destination over all available paths. The <code>icmp-probe-agent</code> will be notified of any path status changes by the <code>ping-monitor</code> to help make decisions on how to update the application module configuration. The <code>service-route &gt; icmp-probe &gt; vector-priority</code> will be used to sort the paths in logical order.</p><p>The application module JSON will be set up based on the <code>service &gt; icmp-probe</code> configuration to learn the address and transport. For the example above, the JSON for the primary path will look like this:</p><div class="codeBlockContainer_J+bg language-json theme-code-block"><div class="codeBlockContent_csEI json"><pre tabindex="0" class="prism-code language-json codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token property">&quot;module-name&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;icmp-probe-internet&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token property">&quot;duration&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">86400</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token property">&quot;continue-file-watch&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(255, 88, 116)">true</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token property">&quot;services&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;icmp-internet-broadband&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token property">&quot;ip-prefix&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;0.0.0.0/0&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_y2LR" id="sunny-day-scenario">Sunny Day Scenario<a class="hash-link" href="#sunny-day-scenario" title="Direct link to heading">​</a></h3><p>The diagram below shows two available paths - broadband and LTE. In a sunny day scenario, the plugin will perform continuous pings to the destination and report the status as up. In this case, the configured <code>service &gt; icmp-probe &gt; address</code> will be configured in the application module for broadband service. This in turn will trigger the SSR to install the FIB entries for the <code>internet-broadband</code> service and all incoming sessions will be routed to the only available path for that service called <code>rte-internet-broadband</code>. This is essentially why the plugin can only operate in hunt mode.</p><p><img alt="Sunny Day Scenario" src="/assets/images/icmp_probe_sunny_day_scenario-40506cf89f36cd2f0dcdf2ad5531118f.png"></p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="primary-path-failure-scenario">Primary Path Failure Scenario<a class="hash-link" href="#primary-path-failure-scenario" title="Direct link to heading">​</a></h3><p>The diagram below depicts the failure to ping the server over the broadband interface. This failure would typically cause the traffic to be blackholed as the upstream ISP gateway is still reachable via ARP. The ICMP probe plugin, however, will detect the server ICMP failure and will in turn update the application module JSON for the LTE service with the configured <code>service &gt; icmp-probe &gt; address</code>. As a result of this, the SSR will remove the FIB entries for the broadband service and replace it with FIB entries for the internet-lte service. All subsequent sessions will then be routed using the only available rte-internet-lte service route.</p><p><img alt="Primary Path Failure" src="/assets/images/icmp_probe_primary_path_failover_scenario-b1b1c4a782507bbe58bb85d1f65ea99c.png"></p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="primary-path-recovery-scenario">Primary Path Recovery Scenario<a class="hash-link" href="#primary-path-recovery-scenario" title="Direct link to heading">​</a></h3><p>As soon as the primary path (broadband in the above example) is reachable, the ICMP probe process will update application module JSON with the <code>internet-broadband</code> service. This will cause the subsequent sessions to migrate back to the primary broadband interface. When the primary path comes up the system will wait <code>service &gt; icmp-probe &gt; hold-down</code> seconds before bringing it in service. This will act as a damper in case the path is flapping too frequently.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="all-path-failures">All Path Failures<a class="hash-link" href="#all-path-failures" title="Direct link to heading">​</a></h3><p>The <code>service-policy &gt; best-effort</code> flag will determine the behavior of the <code>icmp-probe-agent</code> in the event where all paths are down. When <code>best-effort &gt; false</code>, the agent will update the application module with a <code>dummy</code> service name which would cause all FIB entries associated with the service to be withdrawn and the client connections to be rejected with an ICMP unreachable. When <code>best-effort &gt; true</code>, the agent will update the JSON with the primary path as defined by the vector-priority.</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="configuration">Configuration<a class="hash-link" href="#configuration" title="Direct link to heading">​</a></h2><p>For the plugin to operate we need to identify all the paths that can be used to reach the service. This is typically achieved by configuring a <code>service-route</code> on the router. The plugin configuration will leverage application-names and service-route to generate other relevant configurations.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="icmp-probe-enablement">ICMP Probe Enablement<a class="hash-link" href="#icmp-probe-enablement" title="Direct link to heading">​</a></h3><p>The ICMP probe plugin is enabled on the target router as shown in the configuration excerpt below:</p><div class="codeBlockContainer_J+bg language-config theme-code-block"><div class="codeBlockContent_csEI config"><pre tabindex="0" class="prism-code language-config codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">admin@node1.conductor1# show config running authority router router1 icmp-probe</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">config</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    authority</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        router  router1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            name        router1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            icmp-probe</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                enabled  true</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">exit</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><table><thead><tr><th>Element</th><th>Type</th><th>Properties</th><th>Description</th></tr></thead><tbody><tr><td>enabled</td><td>boolean</td><td>default: true</td><td>Control whether the plugin is to be run on the router</td></tr><tr><td>plugin-network</td><td>ip-prefix</td><td>default: 169.254.142.0/28</td><td>This controls the IP address for the internal network for carrying the ICMP ping packets. This should only be changed if there is a conflict with another IP block in use on the same host system.</td></tr></tbody></table><h3 class="anchor anchorWithStickyNavbar_y2LR" id="service-definition">Service Definition<a class="hash-link" href="#service-definition" title="Direct link to heading">​</a></h3><p>By setting the <code>service &gt; application-name &gt; icmp-probe</code> a <code>service</code> can be designated as a candidate for performing ICMP probe based monitoring. For example:</p><div class="codeBlockContainer_J+bg language-config theme-code-block"><div class="codeBlockContent_csEI config"><pre tabindex="0" class="prism-code language-config codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">admin@node1.conductor1# show config running authority service internet</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">config</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    authority</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        service  internet</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            name              internet</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            application-name  icmp-probe</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            access-policy     lan</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                source  lan</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            access-policy     _internal_</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                source  _internal_</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            icmp-probe</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                address    0.0.0.0/0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                hold-down  6</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><table><thead><tr><th>Element</th><th>Type</th><th>Properties</th><th>Description</th></tr></thead><tbody><tr><td>address</td><td>ip-prefix</td><td>mandatory</td><td>The list of addresses to be associated with the service. These are the same addresses that a user would typically configure as the <code>service &gt; address</code></td></tr><tr><td>hold-down</td><td>seconds</td><td>default: 5</td><td>The amount of time a path must remain up before considering it as reachable after detecting a failure.</td></tr></tbody></table><p>The following considerations should be made for defining the service properties:</p><ul><li>The <code>service &gt; name</code> is used to auto-generate services of the form <code>{service-name}-{path-name}</code>. If the combined names are larger than 255 characters it will result in validation errors.</li><li>The <code>service &gt; service-policy &gt; lb-strategy</code> is assumed to be <code>hunt</code> and is recommended to be set to that for clarity. Even if the policy is set to <code>proportional</code>, the plugin creates unique services per path so the end behavior will still be <code>hunt</code>.</li><li>All the other service configuration such as access-policy, service-policy, etc., will be copied into generated services for application identification.</li></ul><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>When enabling ICMP probe for SVR paths any auto-generated <code>peer</code> or <code>next-peer</code> service-route should be set to <code>generated &gt; false</code> before adding the ICMP probe configuration.</p></div></div><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>The <code>service &gt; transport</code> can be configured to restrict the service to specific protocol and port ranges. The generated service will copy that configuration from the <code>icmp-probe</code> service.</p></div></div><h3 class="anchor anchorWithStickyNavbar_y2LR" id="service-route-definition">Service Route Definition<a class="hash-link" href="#service-route-definition" title="Direct link to heading">​</a></h3><p>The <code>service-route</code> configuration is used to identify unique paths for a given service along with configuring the rest of the ICMP probe settings. For example:</p><div class="codeBlockContainer_J+bg language-config theme-code-block"><div class="codeBlockContent_csEI config"><pre tabindex="0" class="prism-code language-config codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">admin@node1.conductor1# show config running authority router router1 service-route internet-orig-broadband</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">config</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    authority</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        router  router1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            name           router1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            service-route  internet-bb-rte</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                name          internet-bb-rte</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                service-name  internet</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                next-hop      node1 broadband-intf</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    node-name  node1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    interface  broadband-intf</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                icmp-probe</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    path-name        broadband</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    vector-priority  10</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    probe-address    8.8.8.8</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    probe-interval   10</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    number-of-retries 4</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    retry-interval    1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">admin@node1.conductor1# show config running authority router router1 service-route internet-orig-lte</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">config</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    authority</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        router  router1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            name           router1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            service-route  internet-lte-rte</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                name          internet-lte-rte</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                service-name  internet</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                next-hop      node1 lte-intf</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    node-name   node1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    interface   lte-intf</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                icmp-probe</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    path-name        lte</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    vector-priority  20</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    probe-address    9.9.9.9</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    retry-interval   1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><table><thead><tr><th>Element</th><th>Type</th><th>Properties</th><th>Description</th></tr></thead><tbody><tr><td>path-name</td><td>string</td><td>required</td><td>The name to uniquely identify a single path.</td></tr><tr><td>vector-priority</td><td>integer</td><td>required</td><td>Priority value for the path. Lower vector-priority values take precedence for load balancing upon path failure.</td></tr><tr><td>probe-address</td><td>ip-address</td><td>optional</td><td>Address to ping for determining path health. When a service is defined with a single /32 address, the service &gt; address will be used as the ICMP destination</td></tr><tr><td>probe-interval</td><td>seconds</td><td>default: 10</td><td>Duration of how often to perform an ICMP probe test to the <code>probe-address</code></td></tr><tr><td>number-of-retries</td><td>integer</td><td>default: 5</td><td>Number of consecutive missed ICMP ping responses from the destination within the retry-interval before deciding that the path is unusable.</td></tr><tr><td>retry-interval</td><td>seconds</td><td>default: 5</td><td>Duration within which to reach the destination. Each attempt will be made in duration / number-of-retries interval</td></tr></tbody></table><p>The following considerations should be made while configuring the service-route for the plugin:</p><ul><li>Each unique path on the router should correspond to a unique value for <code>service route &gt; next-hop &gt; icmp-probe &gt; path-name</code>. For example, if the router has two interfaces broadband and LTE, each would be represented with a unique <code>path-name</code>.</li><li>Each <code>service route &gt; next-hop &gt; icmp-probe &gt; path-name</code> should represent a single path on the router. This will be used for generating KNIs, tenants and other configurations required to make the implementation work. Failure to do so will result in the auto config generation to fail.</li><li>The <code>service route &gt; next-hop &gt; icmp-probe &gt; vector-priority</code> should reflect the order in which the paths are to be preferred for routing</li><li>When the <code>icmp-probe &gt; probe-address</code> is not configured, the service should have a single /32 address for the probe to work. Failure to do so will result in the auto config generation to fail.</li><li>When the service covers more than a single address (such as 0.0.0.0/0), the <code>icmp-probe &gt; probe-address</code> effectively ties the reachability fate of the entire service and path to that single server. This could cause some false positives in reporting the path as down if the upstream server is facing some issues.</li></ul><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>The plugin can support any number of paths to be monitored for activity. Each path must have a unique vector-priority associated with it to determine the preference order.</p></div></div><h2 class="anchor anchorWithStickyNavbar_y2LR" id="triggering-manual-failover-or-recovery">Triggering Manual Failover Or Recovery<a class="hash-link" href="#triggering-manual-failover-or-recovery" title="Direct link to heading">​</a></h2><p>In some situations, it might be desirable to forcefully trigger a failover or recovery for an otherwise healthy path. In the above example, the primary <code>broadband</code> can be brought down by doing the following:</p><ul><li>Stop the ping-monitor service for the path instance</li></ul><div class="codeBlockContainer_J+bg language-bash theme-code-block"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># curl --unix-socket /var/run/128technology/plugins/icmp-probe-agent.sock http://localhost/path-info</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;internet&quot;</span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;current-path&quot;</span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;broadband&quot;</span><span class="token plain">, </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;paths&quot;</span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;broadband&quot;</span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;up&quot;</span><span class="token plain">, </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;lte&quot;</span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;up&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># systemctl stop ping-monitor-namespace@internet-broadband.service</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><ul><li>Edit the <code>/var/run/128technology/plugins/ping_monitor/{service}-{path}.state</code> and set the <code>STATUS=down</code></li></ul><div class="codeBlockContainer_J+bg language-bash theme-code-block"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># echo &quot;STATUS=down&quot; &gt;&gt; /var/run/128technology/plugins/ping_monitor/internet-broadband.state</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># curl --unix-socket /var/run/128technology/plugins/icmp-probe-agent.sock http://localhost/path-info</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;internet&quot;</span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;current-path&quot;</span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;lte&quot;</span><span class="token plain">, </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;paths&quot;</span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;broadband&quot;</span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;down&quot;</span><span class="token plain">, </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;lte&quot;</span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;up&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># systemctl status 128T-icmp-probe-agent.service -l</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">● 128T-icmp-probe-agent.service - ICMP probe agent</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   Loaded: loaded </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">/usr/lib/systemd/system/128T-icmp-probe-agent.service</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> enabled</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> vendor preset: disabled</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   Active: active </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">running</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> since Thu </span><span class="token number" style="color:rgb(247, 140, 108)">2020</span><span class="token plain">-07-30 04:56:07 UTC</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> 18min ago</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> Main PID: </span><span class="token number" style="color:rgb(247, 140, 108)">32226</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">python3.6</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    Tasks: </span><span class="token number" style="color:rgb(247, 140, 108)">18</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   Memory: </span><span class="token number" style="color:rgb(247, 140, 108)">22</span><span class="token plain">.8M</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   CGroup: /system.slice/128T-icmp-probe-agent.service</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">           └─32226 python3.6 /usr/lib/128T-icmp-reachability-detection//par/icmpProbeAgent.par -l DEBUG</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Jul </span><span class="token number" style="color:rgb(247, 140, 108)">30</span><span class="token plain"> 05:14:42 t102-dut2.openstacklocal python3.6</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">32226</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">: plugins.icmp_reachability_detection.router.icmp_probe_agent.app_id - Processing: </span><span class="token number" style="color:rgb(247, 140, 108)">0.0</span><span class="token plain">.0.0/0 None</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Jul </span><span class="token number" style="color:rgb(247, 140, 108)">30</span><span class="token plain"> 05:14:42 t102-dut2.openstacklocal python3.6</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">32226</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">: t128.plugin.lib.app_id.builder - Updating /var/run/128technology/application-modules/icmp-probe-internet.json with</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                                                           </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                                                             </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;module-name&quot;</span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;icmp-probe-internet&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                                                             </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;duration&quot;</span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">86400</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                                                             </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;continue-file-watch&quot;</span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">:</span><span class="token plain"> true,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                                                             </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;services&quot;</span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                                                               </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;icmp-internet-lte&quot;</span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                                                                 </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                                                                   </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;ip-prefix&quot;</span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;0.0.0.0/0&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                                                                 </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                                                               </span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                                                             </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                                                           </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Jul </span><span class="token number" style="color:rgb(247, 140, 108)">30</span><span class="token plain"> 05:14:42 t102-dut2.openstacklocal python3.6</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">32226</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">: plugins.icmp_reachability_detection.router.icmp_probe_agent.state_machine - Advancing from State.PathUp-</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain">State.PathUp</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Jul </span><span class="token number" style="color:rgb(247, 140, 108)">30</span><span class="token plain"> 05:14:42 t102-dut2.openstacklocal python3.6</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">32226</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">: aiohttp.access -  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">30</span><span class="token plain">/Jul/2020:05:14:42 +0000</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;POST /ping-status HTTP/1.1&quot;</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">200</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">180</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;-&quot;</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;curl/7.29.0&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Jul </span><span class="token number" style="color:rgb(247, 140, 108)">30</span><span class="token plain"> 05:14:42 t102-dut2.openstacklocal python3.6</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">32226</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">: plugins.icmp_reachability_detection.router.icmp_probe_agent.agent - Handling status request</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Jul </span><span class="token number" style="color:rgb(247, 140, 108)">30</span><span class="token plain"> 05:14:42 t102-dut2.openstacklocal python3.6</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">32226</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">: plugins.icmp_reachability_detection.router.icmp_probe_agent.agent - internet received </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;current-path&#x27;</span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;lte&#x27;</span><span class="token plain">, </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;paths&#x27;</span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;broadband&#x27;</span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;down&#x27;</span><span class="token plain">, </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;lte&#x27;</span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;up&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Jul </span><span class="token number" style="color:rgb(247, 140, 108)">30</span><span class="token plain"> 05:14:42 t102-dut2.openstacklocal python3.6</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">32226</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">: aiohttp.access -  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">30</span><span class="token plain">/Jul/2020:05:14:42 +0000</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;GET /path-info HTTP/1.1&quot;</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">200</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">239</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;-&quot;</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;curl/7.29.0&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Jul </span><span class="token number" style="color:rgb(247, 140, 108)">30</span><span class="token plain"> 05:14:43 t102-dut2.openstacklocal python3.6</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">32226</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">: plugins.icmp_reachability_detection.router.icmp_probe_agent.agent - Handling status request</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Jul </span><span class="token number" style="color:rgb(247, 140, 108)">30</span><span class="token plain"> 05:14:43 t102-dut2.openstacklocal python3.6</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">32226</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">: plugins.icmp_reachability_detection.router.icmp_probe_agent.agent - internet received </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;current-path&#x27;</span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;lte&#x27;</span><span class="token plain">, </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;paths&#x27;</span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;broadband&#x27;</span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;down&#x27;</span><span class="token plain">, </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;lte&#x27;</span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;up&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Jul </span><span class="token number" style="color:rgb(247, 140, 108)">30</span><span class="token plain"> 05:14:43 t102-dut2.openstacklocal python3.6</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">32226</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">: aiohttp.access -  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">30</span><span class="token plain">/Jul/2020:05:14:43 +0000</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;GET /path-info HTTP/1.1&quot;</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">200</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">239</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;-&quot;</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;curl/7.29.0&quot;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><div class="admonition admonition-tip alert alert--success"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</h5></div><div class="admonition-content"><p>The same steps can be used to bring <code>up</code> a path that is currently <code>down</code> by changing <code>STATUS=up</code> in the steps above.</p></div></div><h2 class="anchor anchorWithStickyNavbar_y2LR" id="troubleshooting">Troubleshooting<a class="hash-link" href="#troubleshooting" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_y2LR" id="checking-the-icmp-probe-and-agent-status">Checking the ICMP Probe and Agent Status<a class="hash-link" href="#checking-the-icmp-probe-and-agent-status" title="Direct link to heading">​</a></h3><p>The status of the ICMP probe for the various paths can be discovered by querying the path based KNI interfaces as shown below:</p><div class="codeBlockContainer_J+bg theme-code-block"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">admin@node1.conductor1# show device-interface router router1 name lte</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Thu 2020-07-30 04:50:21 UTC</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">============================================</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> node1.router1:lte</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">============================================</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> Type:                host</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> Forwarding:          true</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> Mode:                host</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> MAC Address:         6a:5e:62:52:e8:d0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> Admin Status:        up</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> Operational Status:  up</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> Redundancy Status:   non-redundant</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> Speed:               1000</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> in-octets:                     6053488</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> in-unicast-pkts:                100882</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> in-errors:                           0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> out-octets:                    4328304</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> out-unicast-pkts:                92378</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> out-errors:                          0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> ICMP:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   Agent:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     internet:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">       current-path:  broadband</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">       paths:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">         broadband: up</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">         lte:       up</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   Probe:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">       icmp-probe-internet-broadband:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">         attempts:    733</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">         elapsed:     0.01019028015434742</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">         last_attempt: 2020-07-30 18:39:31.779657</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">         status:      up</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Completed in 0.07 seconds</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">admin@node1.conductor1#</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>The <code>icmp-probe-agent</code> determines the state of the current path selection and reports its status via the path KNIs as seen in the example above. The result of the path selection should also be reflected via application-id module changes and can be viewed as follows:</p><div class="codeBlockContainer_J+bg language-shell theme-code-block"><div class="codeBlockContent_csEI shell"><pre tabindex="0" class="prism-code language-shell codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">admin@node1.conductor1</span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># show application names router router1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Thu </span><span class="token number" style="color:rgb(247, 140, 108)">2020</span><span class="token plain">-07-30 05:09:39 UTC</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Node: node1.router1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token operator" style="color:rgb(137, 221, 255)">==</span><span class="token operator" style="color:rgb(137, 221, 255)">==</span><span class="token operator" style="color:rgb(137, 221, 255)">==</span><span class="token operator" style="color:rgb(137, 221, 255)">==</span><span class="token operator" style="color:rgb(137, 221, 255)">==</span><span class="token operator" style="color:rgb(137, 221, 255)">==</span><span class="token operator" style="color:rgb(137, 221, 255)">==</span><span class="token operator" style="color:rgb(137, 221, 255)">==</span><span class="token operator" style="color:rgb(137, 221, 255)">==</span><span class="token operator" style="color:rgb(137, 221, 255)">==</span><span class="token operator" style="color:rgb(137, 221, 255)">==</span><span class="token operator" style="color:rgb(137, 221, 255)">==</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">==</span><span class="token operator" style="color:rgb(137, 221, 255)">==</span><span class="token operator" style="color:rgb(137, 221, 255)">==</span><span class="token operator" style="color:rgb(137, 221, 255)">==</span><span class="token operator" style="color:rgb(137, 221, 255)">==</span><span class="token operator" style="color:rgb(137, 221, 255)">==</span><span class="token operator" style="color:rgb(137, 221, 255)">==</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">==</span><span class="token operator" style="color:rgb(137, 221, 255)">==</span><span class="token operator" style="color:rgb(137, 221, 255)">==</span><span class="token operator" style="color:rgb(137, 221, 255)">==</span><span class="token operator" style="color:rgb(137, 221, 255)">==</span><span class="token operator" style="color:rgb(137, 221, 255)">==</span><span class="token operator" style="color:rgb(137, 221, 255)">==</span><span class="token operator" style="color:rgb(137, 221, 255)">==</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">==</span><span class="token operator" style="color:rgb(137, 221, 255)">==</span><span class="token operator" style="color:rgb(137, 221, 255)">==</span><span class="token operator" style="color:rgb(137, 221, 255)">==</span><span class="token operator" style="color:rgb(137, 221, 255)">==</span><span class="token operator" style="color:rgb(137, 221, 255)">==</span><span class="token operator" style="color:rgb(137, 221, 255)">==</span><span class="token operator" style="color:rgb(137, 221, 255)">==</span><span class="token operator" style="color:rgb(137, 221, 255)">==</span><span class="token operator" style="color:rgb(137, 221, 255)">==</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">==</span><span class="token operator" style="color:rgb(137, 221, 255)">==</span><span class="token operator" style="color:rgb(137, 221, 255)">==</span><span class="token operator" style="color:rgb(137, 221, 255)">==</span><span class="token operator" style="color:rgb(137, 221, 255)">==</span><span class="token operator" style="color:rgb(137, 221, 255)">==</span><span class="token operator" style="color:rgb(137, 221, 255)">==</span><span class="token operator" style="color:rgb(137, 221, 255)">==</span><span class="token operator" style="color:rgb(137, 221, 255)">==</span><span class="token operator" style="color:rgb(137, 221, 255)">==</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> Application Name          Session Count   Ip Tuple Count   Date Discovered       Last Updated</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token operator" style="color:rgb(137, 221, 255)">==</span><span class="token operator" style="color:rgb(137, 221, 255)">==</span><span class="token operator" style="color:rgb(137, 221, 255)">==</span><span class="token operator" style="color:rgb(137, 221, 255)">==</span><span class="token operator" style="color:rgb(137, 221, 255)">==</span><span class="token operator" style="color:rgb(137, 221, 255)">==</span><span class="token operator" style="color:rgb(137, 221, 255)">==</span><span class="token operator" style="color:rgb(137, 221, 255)">==</span><span class="token operator" style="color:rgb(137, 221, 255)">==</span><span class="token operator" style="color:rgb(137, 221, 255)">==</span><span class="token operator" style="color:rgb(137, 221, 255)">==</span><span class="token operator" style="color:rgb(137, 221, 255)">==</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">==</span><span class="token operator" style="color:rgb(137, 221, 255)">==</span><span class="token operator" style="color:rgb(137, 221, 255)">==</span><span class="token operator" style="color:rgb(137, 221, 255)">==</span><span class="token operator" style="color:rgb(137, 221, 255)">==</span><span class="token operator" style="color:rgb(137, 221, 255)">==</span><span class="token operator" style="color:rgb(137, 221, 255)">==</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">==</span><span class="token operator" style="color:rgb(137, 221, 255)">==</span><span class="token operator" style="color:rgb(137, 221, 255)">==</span><span class="token operator" style="color:rgb(137, 221, 255)">==</span><span class="token operator" style="color:rgb(137, 221, 255)">==</span><span class="token operator" style="color:rgb(137, 221, 255)">==</span><span class="token operator" style="color:rgb(137, 221, 255)">==</span><span class="token operator" style="color:rgb(137, 221, 255)">==</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">==</span><span class="token operator" style="color:rgb(137, 221, 255)">==</span><span class="token operator" style="color:rgb(137, 221, 255)">==</span><span class="token operator" style="color:rgb(137, 221, 255)">==</span><span class="token operator" style="color:rgb(137, 221, 255)">==</span><span class="token operator" style="color:rgb(137, 221, 255)">==</span><span class="token operator" style="color:rgb(137, 221, 255)">==</span><span class="token operator" style="color:rgb(137, 221, 255)">==</span><span class="token operator" style="color:rgb(137, 221, 255)">==</span><span class="token operator" style="color:rgb(137, 221, 255)">==</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">==</span><span class="token operator" style="color:rgb(137, 221, 255)">==</span><span class="token operator" style="color:rgb(137, 221, 255)">==</span><span class="token operator" style="color:rgb(137, 221, 255)">==</span><span class="token operator" style="color:rgb(137, 221, 255)">==</span><span class="token operator" style="color:rgb(137, 221, 255)">==</span><span class="token operator" style="color:rgb(137, 221, 255)">==</span><span class="token operator" style="color:rgb(137, 221, 255)">==</span><span class="token operator" style="color:rgb(137, 221, 255)">==</span><span class="token operator" style="color:rgb(137, 221, 255)">==</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">..</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> icmp-internet-broadband                   </span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token plain">                </span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token plain">   </span><span class="token number" style="color:rgb(247, 140, 108)">2020</span><span class="token plain">-07-30 05:09:15   </span><span class="token number" style="color:rgb(247, 140, 108)">2020</span><span class="token plain">-07-30 05:09:15</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">..</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Completed </span><span class="token keyword" style="font-style:italic">in</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">0.11</span><span class="token plain"> seconds</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">admin@node1.conductor1</span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">#</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_y2LR" id="service-status">Service Status<a class="hash-link" href="#service-status" title="Direct link to heading">​</a></h3><p>The plugin relies various <code>systemd</code> services to work in concert to provide a robust solution.</p><h4 class="anchor anchorWithStickyNavbar_y2LR" id="plugin-config-handling">Plugin Config Handling<a class="hash-link" href="#plugin-config-handling" title="Direct link to heading">​</a></h4><p>The following services are triggered for any changes made to the plugin configuration on the conductor.</p><div class="codeBlockContainer_J+bg language-bash theme-code-block"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># systemctl status 128T-handle-icmp-reachability-detection-config.path</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">● 128T-handle-icmp-reachability-detection-config.path</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   Loaded: loaded </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">/usr/lib/systemd/system/128T-handle-icmp-reachability-detection-config.path</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> enabled</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> vendor preset: disabled</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   Active: active </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">waiting</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> since Mon </span><span class="token number" style="color:rgb(247, 140, 108)">2020</span><span class="token plain">-06-29 </span><span class="token number" style="color:rgb(247, 140, 108)">22</span><span class="token plain">:17:07 UTC</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">4</span><span class="token plain"> weeks </span><span class="token number" style="color:rgb(247, 140, 108)">2</span><span class="token plain"> days ago</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Jun </span><span class="token number" style="color:rgb(247, 140, 108)">29</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">22</span><span class="token plain">:17:07 t102-dut2.openstacklocal systemd</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">: Stopped 128T-handle-icmp-reachability-detection-config.path.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Jun </span><span class="token number" style="color:rgb(247, 140, 108)">29</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">22</span><span class="token plain">:17:07 t102-dut2.openstacklocal systemd</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">: Stopping 128T-handle-icmp-reachability-detection-config.path.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Jun </span><span class="token number" style="color:rgb(247, 140, 108)">29</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">22</span><span class="token plain">:17:07 t102-dut2.openstacklocal systemd</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">: Started 128T-handle-icmp-reachability-detection-config.path.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># systemctl status 128T-handle-icmp-reachability-detection-config.service</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">● 128T-handle-icmp-reachability-detection-config.service - Config Handler </span><span class="token keyword" style="font-style:italic">for</span><span class="token plain"> 128T icmp reachability detection plugin</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   Loaded: loaded </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">/usr/lib/systemd/system/128T-handle-icmp-reachability-detection-config.service</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> static</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> vendor preset: disabled</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   Active: inactive </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">dead</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> since Sat </span><span class="token number" style="color:rgb(247, 140, 108)">2020</span><span class="token plain">-07-25 06:02:34 UTC</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">4</span><span class="token plain"> days ago</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> Main PID: </span><span class="token number" style="color:rgb(247, 140, 108)">19709</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">code</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">exited, </span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">status</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token plain">/SUCCESS</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Jul </span><span class="token number" style="color:rgb(247, 140, 108)">25</span><span class="token plain"> 06:02:34 t102-dut2.openstacklocal python3.6</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">19709</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">: plugins.icmp_reachability_detection.router.lib.config - Generating KNI config </span><span class="token keyword" style="font-style:italic">for</span><span class="token plain"> internet and lte</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Jul </span><span class="token number" style="color:rgb(247, 140, 108)">25</span><span class="token plain"> 06:02:34 t102-dut2.openstacklocal python3.6</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">19709</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">: plugins.icmp_reachability_detection.router.lib.config - Generating application-id script </span><span class="token keyword" style="font-style:italic">for</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">service</span><span class="token plain"> internet</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Jul </span><span class="token number" style="color:rgb(247, 140, 108)">25</span><span class="token plain"> 06:02:34 t102-dut2.openstacklocal python3.6</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">19709</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">: __main__ - Stopping the icmp-probe-agent </span><span class="token function" style="color:rgb(130, 170, 255)">service</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Jul </span><span class="token number" style="color:rgb(247, 140, 108)">25</span><span class="token plain"> 06:02:34 t102-dut2.openstacklocal python3.6</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">19709</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">: __main__ - Stopping services ping-monitor-namespace@internet-broadband.service 128T-icmp-path-change-notifier@internet-broadband.path</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Jul </span><span class="token number" style="color:rgb(247, 140, 108)">25</span><span class="token plain"> 06:02:34 t102-dut2.openstacklocal python3.6</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">19709</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">: __main__ - Stopping services ping-monitor-namespace@internet-lte.service 128T-icmp-path-change-notifier@internet-lte.path</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Jul </span><span class="token number" style="color:rgb(247, 140, 108)">25</span><span class="token plain"> 06:02:34 t102-dut2.openstacklocal python3.6</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">19709</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">: __main__ - Restarting the icmp-probe-agent </span><span class="token function" style="color:rgb(130, 170, 255)">service</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Jul </span><span class="token number" style="color:rgb(247, 140, 108)">25</span><span class="token plain"> 06:02:34 t102-dut2.openstacklocal python3.6</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">19709</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">: __main__ - Starting services ping-monitor-namespace@internet-broadband.service 128T-icmp-path-change-notifier@internet-broadband.path</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Jul </span><span class="token number" style="color:rgb(247, 140, 108)">25</span><span class="token plain"> 06:02:34 t102-dut2.openstacklocal python3.6</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">19709</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">: __main__ - Starting services ping-monitor-namespace@internet-lte.service 128T-icmp-path-change-notifier@internet-lte.path</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Jul </span><span class="token number" style="color:rgb(247, 140, 108)">25</span><span class="token plain"> 06:02:34 t102-dut2.openstacklocal python3.6</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">19709</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">: __main__ - Done</span><span class="token operator" style="color:rgb(137, 221, 255)">!</span><span class="token operator" style="color:rgb(137, 221, 255)">!</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Jul </span><span class="token number" style="color:rgb(247, 140, 108)">25</span><span class="token plain"> 06:02:34 t102-dut2.openstacklocal systemd</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">: Started Config Handler </span><span class="token keyword" style="font-style:italic">for</span><span class="token plain"> 128T icmp reachability detection plugin.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h4 class="anchor anchorWithStickyNavbar_y2LR" id="status-of-the-icmp-pings-per-path">Status of the ICMP Pings Per Path<a class="hash-link" href="#status-of-the-icmp-pings-per-path" title="Direct link to heading">​</a></h4><p>The <code>ping-monitor</code> utility is used to perform a continuous ping and is run as a template service. The status for each of the path instances can be checked as follows:</p><div class="codeBlockContainer_J+bg language-bash theme-code-block"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># systemctl status ping-monitor-namespace@internet-broadband.service</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">● ping-monitor-namespace@internet-broadband.service - Ping Monitor </span><span class="token keyword" style="font-style:italic">for</span><span class="token plain"> destination internet/broadband within network namespace</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   Loaded: loaded </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">/usr/lib/systemd/system/ping-monitor-namespace@.service</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> disabled</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> vendor preset: disabled</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   Active: active </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">running</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> since Thu </span><span class="token number" style="color:rgb(247, 140, 108)">2020</span><span class="token plain">-07-30 04:56:07 UTC</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> 1min 58s ago</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> Main PID: </span><span class="token number" style="color:rgb(247, 140, 108)">32229</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">python3.6</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   CGroup: /system.slice/system-ping</span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain">x2dmonitor</span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain">x2dnamespace.slice/ping-monitor-namespace@internet-broadband.service</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">           └─32229 python3.6 /usr/lib/ping-monitor//par/ping_monitor.par --path-name</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">internet-broadband --address</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token number" style="color:rgb(247, 140, 108)">8.8</span><span class="token plain">.8.8 --timeout</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token number" style="color:rgb(247, 140, 108)">5</span><span class="token plain"> --num-tries</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token number" style="color:rgb(247, 140, 108)">5</span><span class="token plain"> --interval</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token number" style="color:rgb(247, 140, 108)">10</span><span class="token plain"> --socket-path</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">/var/run/128technology/icmp-probe-internet-broadband.sock --log-level</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Jul </span><span class="token number" style="color:rgb(247, 140, 108)">30</span><span class="token plain"> 04:57:17 t102-dut2.openstacklocal ip</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">32229</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">: - - </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">30</span><span class="token plain">/Jul/2020 04:57:17</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;GET / HTTP/1.1&quot;</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">200</span><span class="token plain"> -</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Jul </span><span class="token number" style="color:rgb(247, 140, 108)">30</span><span class="token plain"> 04:57:18 t102-dut2.openstacklocal python3.6</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">32229</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">: apps.ping_monitor.ping - Got </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">Errno </span><span class="token number" style="color:rgb(247, 140, 108)">101</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"> Network is unreachable </span><span class="token keyword" style="font-style:italic">while</span><span class="token plain"> pinging </span><span class="token number" style="color:rgb(247, 140, 108)">8.8</span><span class="token plain">.8.8</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Jul </span><span class="token number" style="color:rgb(247, 140, 108)">30</span><span class="token plain"> 04:57:27 t102-dut2.openstacklocal ip</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">32229</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">: - - </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">30</span><span class="token plain">/Jul/2020 04:57:27</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;GET / HTTP/1.1&quot;</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">200</span><span class="token plain"> -</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Jul </span><span class="token number" style="color:rgb(247, 140, 108)">30</span><span class="token plain"> 04:57:28 t102-dut2.openstacklocal python3.6</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">32229</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">: apps.ping_monitor.ping - Got </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">Errno </span><span class="token number" style="color:rgb(247, 140, 108)">101</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"> Network is unreachable </span><span class="token keyword" style="font-style:italic">while</span><span class="token plain"> pinging </span><span class="token number" style="color:rgb(247, 140, 108)">8.8</span><span class="token plain">.8.8</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Jul </span><span class="token number" style="color:rgb(247, 140, 108)">30</span><span class="token plain"> 04:57:37 t102-dut2.openstacklocal ip</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">32229</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">: - - </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">30</span><span class="token plain">/Jul/2020 04:57:37</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;GET / HTTP/1.1&quot;</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">200</span><span class="token plain"> -</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Jul </span><span class="token number" style="color:rgb(247, 140, 108)">30</span><span class="token plain"> 04:57:38 t102-dut2.openstacklocal python3.6</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">32229</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">: apps.ping_monitor.ping - Got </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">Errno </span><span class="token number" style="color:rgb(247, 140, 108)">101</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"> Network is unreachable </span><span class="token keyword" style="font-style:italic">while</span><span class="token plain"> pinging </span><span class="token number" style="color:rgb(247, 140, 108)">8.8</span><span class="token plain">.8.8</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Jul </span><span class="token number" style="color:rgb(247, 140, 108)">30</span><span class="token plain"> 04:57:48 t102-dut2.openstacklocal python3.6</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">32229</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">: apps.ping_monitor.ping - Got </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">Errno </span><span class="token number" style="color:rgb(247, 140, 108)">101</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"> Network is unreachable </span><span class="token keyword" style="font-style:italic">while</span><span class="token plain"> pinging </span><span class="token number" style="color:rgb(247, 140, 108)">8.8</span><span class="token plain">.8.8</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Jul </span><span class="token number" style="color:rgb(247, 140, 108)">30</span><span class="token plain"> 04:57:49 t102-dut2.openstacklocal ip</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">32229</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">: - - </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">30</span><span class="token plain">/Jul/2020 04:57:49</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;GET / HTTP/1.1&quot;</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">200</span><span class="token plain"> -</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Jul </span><span class="token number" style="color:rgb(247, 140, 108)">30</span><span class="token plain"> 04:57:58 t102-dut2.openstacklocal python3.6</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">32229</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">: apps.ping_monitor.ping - Got </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">Errno </span><span class="token number" style="color:rgb(247, 140, 108)">101</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"> Network is unreachable </span><span class="token keyword" style="font-style:italic">while</span><span class="token plain"> pinging </span><span class="token number" style="color:rgb(247, 140, 108)">8.8</span><span class="token plain">.8.8</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Jul </span><span class="token number" style="color:rgb(247, 140, 108)">30</span><span class="token plain"> 04:58:00 t102-dut2.openstacklocal ip</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">32229</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">: - - </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">30</span><span class="token plain">/Jul/2020 04:58:00</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;GET / HTTP/1.1&quot;</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">200</span><span class="token plain"> -</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># systemctl status ping-monitor-namespace@internet-lte.service</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">● ping-monitor-namespace@internet-lte.service - Ping Monitor </span><span class="token keyword" style="font-style:italic">for</span><span class="token plain"> destination internet/lte within network namespace</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   Loaded: loaded </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">/usr/lib/systemd/system/ping-monitor-namespace@.service</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> disabled</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> vendor preset: disabled</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   Active: active </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">running</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> since Thu </span><span class="token number" style="color:rgb(247, 140, 108)">2020</span><span class="token plain">-07-30 04:56:08 UTC</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> 2min 40s ago</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> Main PID: </span><span class="token number" style="color:rgb(247, 140, 108)">32232</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">python3.6</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   CGroup: /system.slice/system-ping</span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain">x2dmonitor</span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain">x2dnamespace.slice/ping-monitor-namespace@internet-lte.service</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">           └─32232 python3.6 /usr/lib/ping-monitor//par/ping_monitor.par --path-name</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">internet-lte --address</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token number" style="color:rgb(247, 140, 108)">9.9</span><span class="token plain">.9.9 --timeout</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token plain"> --num-tries</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token number" style="color:rgb(247, 140, 108)">5</span><span class="token plain"> --interval</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token number" style="color:rgb(247, 140, 108)">10</span><span class="token plain"> --socket-path</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">/var/run/128technology/icmp-probe-internet-lte.sock --log-level</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Jul </span><span class="token number" style="color:rgb(247, 140, 108)">30</span><span class="token plain"> 04:57:09 t102-dut2.openstacklocal ip</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">32232</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">: - - </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">30</span><span class="token plain">/Jul/2020 04:57:09</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;GET / HTTP/1.1&quot;</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">200</span><span class="token plain"> -</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Jul </span><span class="token number" style="color:rgb(247, 140, 108)">30</span><span class="token plain"> 04:57:19 t102-dut2.openstacklocal ip</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">32232</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">: - - </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">30</span><span class="token plain">/Jul/2020 04:57:19</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;GET / HTTP/1.1&quot;</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">200</span><span class="token plain"> -</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Jul </span><span class="token number" style="color:rgb(247, 140, 108)">30</span><span class="token plain"> 04:57:29 t102-dut2.openstacklocal ip</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">32232</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">: - - </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">30</span><span class="token plain">/Jul/2020 04:57:29</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;GET / HTTP/1.1&quot;</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">200</span><span class="token plain"> -</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Jul </span><span class="token number" style="color:rgb(247, 140, 108)">30</span><span class="token plain"> 04:57:40 t102-dut2.openstacklocal ip</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">32232</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">: - - </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">30</span><span class="token plain">/Jul/2020 04:57:40</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;GET / HTTP/1.1&quot;</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">200</span><span class="token plain"> -</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Jul </span><span class="token number" style="color:rgb(247, 140, 108)">30</span><span class="token plain"> 04:57:51 t102-dut2.openstacklocal ip</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">32232</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">: - - </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">30</span><span class="token plain">/Jul/2020 04:57:51</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;GET / HTTP/1.1&quot;</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">200</span><span class="token plain"> -</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Jul </span><span class="token number" style="color:rgb(247, 140, 108)">30</span><span class="token plain"> 04:58:02 t102-dut2.openstacklocal ip</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">32232</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">: - - </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">30</span><span class="token plain">/Jul/2020 04:58:02</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;GET / HTTP/1.1&quot;</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">200</span><span class="token plain"> -</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Jul </span><span class="token number" style="color:rgb(247, 140, 108)">30</span><span class="token plain"> 04:58:13 t102-dut2.openstacklocal ip</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">32232</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">: - - </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">30</span><span class="token plain">/Jul/2020 04:58:13</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;GET / HTTP/1.1&quot;</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">200</span><span class="token plain"> -</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Jul </span><span class="token number" style="color:rgb(247, 140, 108)">30</span><span class="token plain"> 04:58:23 t102-dut2.openstacklocal ip</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">32232</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">: - - </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">30</span><span class="token plain">/Jul/2020 04:58:23</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;GET / HTTP/1.1&quot;</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">200</span><span class="token plain"> -</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Jul </span><span class="token number" style="color:rgb(247, 140, 108)">30</span><span class="token plain"> 04:58:34 t102-dut2.openstacklocal ip</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">32232</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">: - - </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">30</span><span class="token plain">/Jul/2020 04:58:34</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;GET / HTTP/1.1&quot;</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">200</span><span class="token plain"> -</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Jul </span><span class="token number" style="color:rgb(247, 140, 108)">30</span><span class="token plain"> 04:58:44 t102-dut2.openstacklocal ip</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">32232</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">: - - </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">30</span><span class="token plain">/Jul/2020 04:58:44</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;GET / HTTP/1.1&quot;</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">200</span><span class="token plain"> -</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><div class="admonition admonition-tip alert alert--success"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</h5></div><div class="admonition-content"><p>Additional debugging can be turned on for the <code>ping-monitor</code> instance by setting <code>LOG_LEVEL=DEBUG</code> in <code>/var/run/128technology/plugins/ping_monitor/{service}-{path}.conf</code> config file</p></div></div><h4 class="anchor anchorWithStickyNavbar_y2LR" id="status-of-the-path-selection-algorithm">Status of the Path Selection Algorithm<a class="hash-link" href="#status-of-the-path-selection-algorithm" title="Direct link to heading">​</a></h4><p>The <code>icmp-probe-agent</code> takes its inputs from the <code>ping-monitor</code> services by watching on path updates for those instances. In addition it determines the current path selection and udpates the <code>application-id</code> modules accordingly. The following service status can be used for troubleshooting:</p><div class="codeBlockContainer_J+bg language-bash theme-code-block"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># systemctl status 128T-icmp-path-change-notifier@internet-broadband.path</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">● 128T-icmp-path-change-notifier@internet-broadband.path - Path watcher </span><span class="token keyword" style="font-style:italic">for</span><span class="token plain"> ping-monitor status updates on internet-broadband</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   Loaded: loaded </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">/usr/lib/systemd/system/128T-icmp-path-change-notifier@.path</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> disabled</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> vendor preset: disabled</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   Active: active </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">waiting</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> since Thu </span><span class="token number" style="color:rgb(247, 140, 108)">2020</span><span class="token plain">-07-30 04:56:07 UTC</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> 6min ago</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Jul </span><span class="token number" style="color:rgb(247, 140, 108)">30</span><span class="token plain"> 04:56:07 t102-dut2.openstacklocal systemd</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">: Started Path watcher </span><span class="token keyword" style="font-style:italic">for</span><span class="token plain"> ping-monitor status updates on internet-broadband.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># systemctl status 128T-icmp-path-change-notifier@internet-broadband.service</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">● 128T-icmp-path-change-notifier@internet-broadband.service - Ping Monitor </span><span class="token keyword" style="font-style:italic">for</span><span class="token plain"> destination internet-broadband</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   Loaded: loaded </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">/usr/lib/systemd/system/128T-icmp-path-change-notifier@.service</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> static</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> vendor preset: disabled</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   Active: inactive </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">dead</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> since Thu </span><span class="token number" style="color:rgb(247, 140, 108)">2020</span><span class="token plain">-07-30 04:56:09 UTC</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> 6min ago</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  Process: </span><span class="token number" style="color:rgb(247, 140, 108)">32271</span><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">ExecStop</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">/usr/bin/curl --unix-socket /var/run/128technology/plugins/icmp-probe-agent.sock http://localhost/path-info </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">code</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">exited, </span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">status</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token plain">/SUCCESS</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  Process: </span><span class="token number" style="color:rgb(247, 140, 108)">32248</span><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">ExecStart</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">/usr/libexec/128T-icmp-status-update.sh </span><span class="token variable" style="color:rgb(191, 199, 213)">${NAME}</span><span class="token plain"> </span><span class="token variable" style="color:rgb(191, 199, 213)">${STATUS}</span><span class="token plain"> </span><span class="token variable" style="color:rgb(191, 199, 213)">${MAX_RETRIES}</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">code</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">exited, </span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">status</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token plain">/SUCCESS</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  Process: </span><span class="token number" style="color:rgb(247, 140, 108)">32246</span><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">ExecStartPre</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">/usr/bin/echo Executing path update </span><span class="token keyword" style="font-style:italic">for</span><span class="token plain"> </span><span class="token variable" style="color:rgb(191, 199, 213)">${NAME}</span><span class="token plain"> with </span><span class="token variable" style="color:rgb(191, 199, 213)">${STATUS}</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">code</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">exited, </span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">status</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token plain">/SUCCESS</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> Main PID: </span><span class="token number" style="color:rgb(247, 140, 108)">32248</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">code</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">exited, </span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">status</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token plain">/SUCCESS</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Jul </span><span class="token number" style="color:rgb(247, 140, 108)">30</span><span class="token plain"> 04:56:08 t102-dut2.openstacklocal systemd</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">: Starting Ping Monitor </span><span class="token keyword" style="font-style:italic">for</span><span class="token plain"> destination internet-broadband</span><span class="token punctuation" style="color:rgb(199, 146, 234)">..</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Jul </span><span class="token number" style="color:rgb(247, 140, 108)">30</span><span class="token plain"> 04:56:08 t102-dut2.openstacklocal echo</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">32246</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">: Executing path update </span><span class="token keyword" style="font-style:italic">for</span><span class="token plain"> internet-broadband with down</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Jul </span><span class="token number" style="color:rgb(247, 140, 108)">30</span><span class="token plain"> 04:56:08 t102-dut2.openstacklocal 128T-icmp-status-update.sh</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">32248</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">: failed to update icmp-probe-agent </span><span class="token number" style="color:rgb(247, 140, 108)">7</span><span class="token plain">, retrying </span><span class="token keyword" style="font-style:italic">in</span><span class="token plain"> a second</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Jul </span><span class="token number" style="color:rgb(247, 140, 108)">30</span><span class="token plain"> 04:56:09 t102-dut2.openstacklocal 128T-icmp-status-update.sh</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">32248</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">: Finished updating the icmp-probe-agent</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Jul </span><span class="token number" style="color:rgb(247, 140, 108)">30</span><span class="token plain"> 04:56:09 t102-dut2.openstacklocal curl</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">32271</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">: % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Jul </span><span class="token number" style="color:rgb(247, 140, 108)">30</span><span class="token plain"> 04:56:09 t102-dut2.openstacklocal curl</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">32271</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">: Dload  Upload   Total   Spent    Left  Speed</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Jul </span><span class="token number" style="color:rgb(247, 140, 108)">30</span><span class="token plain"> 04:56:09 t102-dut2.openstacklocal curl</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">32271</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">: </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">155B blob data</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Jul </span><span class="token number" style="color:rgb(247, 140, 108)">30</span><span class="token plain"> 04:56:09 t102-dut2.openstacklocal curl</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">32271</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">: </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;internet&quot;</span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;current-path&quot;</span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;lte&quot;</span><span class="token plain">, </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;paths&quot;</span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;broadband&quot;</span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;down&quot;</span><span class="token plain">, </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;lte&quot;</span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;up&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Jul </span><span class="token number" style="color:rgb(247, 140, 108)">30</span><span class="token plain"> 04:56:09 t102-dut2.openstacklocal systemd</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">: Started Ping Monitor </span><span class="token keyword" style="font-style:italic">for</span><span class="token plain"> destination internet-broadband.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># systemctl status 128T-icmp-path-change-notifier@internet-lte.path</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">● 128T-icmp-path-change-notifier@internet-lte.path - Path watcher </span><span class="token keyword" style="font-style:italic">for</span><span class="token plain"> ping-monitor status updates on internet-lte</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   Loaded: loaded </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">/usr/lib/systemd/system/128T-icmp-path-change-notifier@.path</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> disabled</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> vendor preset: disabled</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   Active: active </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">waiting</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> since Thu </span><span class="token number" style="color:rgb(247, 140, 108)">2020</span><span class="token plain">-07-30 04:56:08 UTC</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> 6min ago</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Jul </span><span class="token number" style="color:rgb(247, 140, 108)">30</span><span class="token plain"> 04:56:08 t102-dut2.openstacklocal systemd</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">: Started Path watcher </span><span class="token keyword" style="font-style:italic">for</span><span class="token plain"> ping-monitor status updates on internet-lte.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># systemctl status 128T-icmp-path-change-notifier@internet-lte.service</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">● 128T-icmp-path-change-notifier@internet-lte.service - Ping Monitor </span><span class="token keyword" style="font-style:italic">for</span><span class="token plain"> destination internet-lte</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   Loaded: loaded </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">/usr/lib/systemd/system/128T-icmp-path-change-notifier@.service</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> static</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> vendor preset: disabled</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   Active: inactive </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">dead</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> since Thu </span><span class="token number" style="color:rgb(247, 140, 108)">2020</span><span class="token plain">-07-30 04:56:09 UTC</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> 6min ago</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  Process: </span><span class="token number" style="color:rgb(247, 140, 108)">32262</span><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">ExecStop</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">/usr/bin/curl --unix-socket /var/run/128technology/plugins/icmp-probe-agent.sock http://localhost/path-info </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">code</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">exited, </span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">status</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token plain">/SUCCESS</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  Process: </span><span class="token number" style="color:rgb(247, 140, 108)">32238</span><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">ExecStart</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">/usr/libexec/128T-icmp-status-update.sh </span><span class="token variable" style="color:rgb(191, 199, 213)">${NAME}</span><span class="token plain"> </span><span class="token variable" style="color:rgb(191, 199, 213)">${STATUS}</span><span class="token plain"> </span><span class="token variable" style="color:rgb(191, 199, 213)">${MAX_RETRIES}</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">code</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">exited, </span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">status</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token plain">/SUCCESS</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  Process: </span><span class="token number" style="color:rgb(247, 140, 108)">32237</span><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">ExecStartPre</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">/usr/bin/echo Executing path update </span><span class="token keyword" style="font-style:italic">for</span><span class="token plain"> </span><span class="token variable" style="color:rgb(191, 199, 213)">${NAME}</span><span class="token plain"> with </span><span class="token variable" style="color:rgb(191, 199, 213)">${STATUS}</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">code</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">exited, </span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">status</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token plain">/SUCCESS</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> Main PID: </span><span class="token number" style="color:rgb(247, 140, 108)">32238</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">code</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">exited, </span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">status</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token plain">/SUCCESS</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Jul </span><span class="token number" style="color:rgb(247, 140, 108)">30</span><span class="token plain"> 04:56:08 t102-dut2.openstacklocal systemd</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">: Starting Ping Monitor </span><span class="token keyword" style="font-style:italic">for</span><span class="token plain"> destination internet-lte</span><span class="token punctuation" style="color:rgb(199, 146, 234)">..</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Jul </span><span class="token number" style="color:rgb(247, 140, 108)">30</span><span class="token plain"> 04:56:08 t102-dut2.openstacklocal echo</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">32237</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">: Executing path update </span><span class="token keyword" style="font-style:italic">for</span><span class="token plain"> internet-lte with up</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Jul </span><span class="token number" style="color:rgb(247, 140, 108)">30</span><span class="token plain"> 04:56:08 t102-dut2.openstacklocal 128T-icmp-status-update.sh</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">32238</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">: failed to update icmp-probe-agent </span><span class="token number" style="color:rgb(247, 140, 108)">7</span><span class="token plain">, retrying </span><span class="token keyword" style="font-style:italic">in</span><span class="token plain"> a second</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Jul </span><span class="token number" style="color:rgb(247, 140, 108)">30</span><span class="token plain"> 04:56:09 t102-dut2.openstacklocal 128T-icmp-status-update.sh</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">32238</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">: Finished updating the icmp-probe-agent</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Jul </span><span class="token number" style="color:rgb(247, 140, 108)">30</span><span class="token plain"> 04:56:09 t102-dut2.openstacklocal curl</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">32262</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">: % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Jul </span><span class="token number" style="color:rgb(247, 140, 108)">30</span><span class="token plain"> 04:56:09 t102-dut2.openstacklocal curl</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">32262</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">: Dload  Upload   Total   Spent    Left  Speed</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Jul </span><span class="token number" style="color:rgb(247, 140, 108)">30</span><span class="token plain"> 04:56:09 t102-dut2.openstacklocal curl</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">32262</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">: </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">155B blob data</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Jul </span><span class="token number" style="color:rgb(247, 140, 108)">30</span><span class="token plain"> 04:56:09 t102-dut2.openstacklocal systemd</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">: Started Ping Monitor </span><span class="token keyword" style="font-style:italic">for</span><span class="token plain"> destination internet-lte.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Jul </span><span class="token number" style="color:rgb(247, 140, 108)">30</span><span class="token plain"> 04:56:09 t102-dut2.openstacklocal curl</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">32262</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">: </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;internet&quot;</span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;current-path&quot;</span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;broadband&quot;</span><span class="token plain">, </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;paths&quot;</span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;broadband&quot;</span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;down&quot;</span><span class="token plain">, </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;lte&quot;</span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;up&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># systemctl status 128T-icmp-probe-agent.service  -l</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">● 128T-icmp-probe-agent.service - ICMP probe agent</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   Loaded: loaded </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">/usr/lib/systemd/system/128T-icmp-probe-agent.service</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> enabled</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> vendor preset: disabled</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   Active: active </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">running</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> since Thu </span><span class="token number" style="color:rgb(247, 140, 108)">2020</span><span class="token plain">-07-30 04:56:07 UTC</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> 7min ago</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> Main PID: </span><span class="token number" style="color:rgb(247, 140, 108)">32226</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">python3.6</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    Tasks: </span><span class="token number" style="color:rgb(247, 140, 108)">5</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   Memory: </span><span class="token number" style="color:rgb(247, 140, 108)">22</span><span class="token plain">.2M</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   CGroup: /system.slice/128T-icmp-probe-agent.service</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">           └─32226 python3.6 /usr/lib/128T-icmp-reachability-detection//par/icmpProbeAgent.par -l DEBUG</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Jul </span><span class="token number" style="color:rgb(247, 140, 108)">30</span><span class="token plain"> 04:56:09 t102-dut2.openstacklocal python3.6</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">32226</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">: plugins.icmp_reachability_detection.router.icmp_probe_agent.state_machine - Updating path-info PathUp </span><span class="token keyword" style="font-style:italic">for</span><span class="token plain"> path lte </span><span class="token keyword" style="font-style:italic">for</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">service</span><span class="token plain"> internet</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Jul </span><span class="token number" style="color:rgb(247, 140, 108)">30</span><span class="token plain"> 04:56:09 t102-dut2.openstacklocal python3.6</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">32226</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">: plugins.icmp_reachability_detection.router.icmp_probe_agent.app_id - Service DotMap</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">icmpProbe</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">DotMap</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">address</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;0.0.0.0/0&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">, </span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">holdDown</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token number" style="color:rgb(247, 140, 108)">6</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain">, </span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">name</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;internet&#x27;</span><span class="token plain">, </span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">transport</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">DotMap</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">))</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Jul </span><span class="token number" style="color:rgb(247, 140, 108)">30</span><span class="token plain"> 04:56:09 t102-dut2.openstacklocal python3.6</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">32226</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">: plugins.icmp_reachability_detection.router.icmp_probe_agent.app_id - Creating </span><span class="token function" style="color:rgb(130, 170, 255)">service</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">for</span><span class="token plain"> internet, icmp-internet-lte, </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;0.0.0.0/0&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">, DotMap</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Jul </span><span class="token number" style="color:rgb(247, 140, 108)">30</span><span class="token plain"> 04:56:09 t102-dut2.openstacklocal python3.6</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">32226</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">: plugins.icmp_reachability_detection.router.icmp_probe_agent.app_id - Processing: </span><span class="token number" style="color:rgb(247, 140, 108)">0.0</span><span class="token plain">.0.0/0 None</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Jul </span><span class="token number" style="color:rgb(247, 140, 108)">30</span><span class="token plain"> 04:56:09 t102-dut2.openstacklocal python3.6</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">32226</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">: t128.plugin.lib.app_id.builder - Updating /var/run/128technology/application-modules/icmp-probe-internet.json with</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                                                           </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                                                             </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;module-name&quot;</span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;icmp-probe-internet&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                                                             </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;duration&quot;</span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">86400</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                                                             </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;continue-file-watch&quot;</span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">:</span><span class="token plain"> true,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                                                             </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;services&quot;</span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                                                               </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;icmp-internet-lte&quot;</span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                                                                 </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                                                                   </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;ip-prefix&quot;</span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;0.0.0.0/0&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                                                                 </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                                                               </span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                                                             </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                                                           </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Jul </span><span class="token number" style="color:rgb(247, 140, 108)">30</span><span class="token plain"> 04:56:09 t102-dut2.openstacklocal python3.6</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">32226</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">: plugins.icmp_reachability_detection.router.icmp_probe_agent.state_machine - Advancing from State.HoldDown-</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain">State.PathUp</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Jul </span><span class="token number" style="color:rgb(247, 140, 108)">30</span><span class="token plain"> 04:56:09 t102-dut2.openstacklocal python3.6</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">32226</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">: aiohttp.access -  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">30</span><span class="token plain">/Jul/2020:04:56:09 +0000</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;POST /ping-status HTTP/1.1&quot;</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">200</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">180</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;-&quot;</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;curl/7.29.0&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Jul </span><span class="token number" style="color:rgb(247, 140, 108)">30</span><span class="token plain"> 04:56:09 t102-dut2.openstacklocal python3.6</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">32226</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">: plugins.icmp_reachability_detection.router.icmp_probe_agent.agent - Handling status request</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Jul </span><span class="token number" style="color:rgb(247, 140, 108)">30</span><span class="token plain"> 04:56:09 t102-dut2.openstacklocal python3.6</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">32226</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">: plugins.icmp_reachability_detection.router.icmp_probe_agent.agent - internet received </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;current-path&#x27;</span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;lte&#x27;</span><span class="token plain">, </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;paths&#x27;</span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;broadband&#x27;</span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;down&#x27;</span><span class="token plain">, </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;lte&#x27;</span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;up&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Jul </span><span class="token number" style="color:rgb(247, 140, 108)">30</span><span class="token plain"> 04:56:09 t102-dut2.openstacklocal python3.6</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">32226</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain">: aiohttp.access -  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">30</span><span class="token plain">/Jul/2020:04:56:09 +0000</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;GET /path-info HTTP/1.1&quot;</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">200</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">239</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;-&quot;</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;curl/7.29.0&quot;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><div class="admonition admonition-tip alert alert--success"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</h5></div><div class="admonition-content"><p>Additional debugging can be turned on for the <code>icmp-probe-agent</code> by passing the <code>-l DEBUG</code> to the <code>/usr/lib/systemd/system/128T-icmp-probe-agent.service</code> on the <code>ExecStart</code> line</p></div></div><h2 class="anchor anchorWithStickyNavbar_y2LR" id="appendix-auto-generated-configuration">Appendix: Auto-Generated Configuration<a class="hash-link" href="#appendix-auto-generated-configuration" title="Direct link to heading">​</a></h2><p>The <code>service &gt; icmp-probe</code> and <code>service-route &gt; icmp-probe</code> configuration will be used to generate other functional configuration elements as needed. At a high level, configuration needs to be generated to do the following:</p><ul><li>ICMP reachability detection<ul><li>KNI for each of the paths to be used for the service(s)</li><li>Service and service-routes to enable ICMP over those paths</li><li>Tenants to uniquely identify each of the generated KNIs</li></ul></li><li>Per path app-id services<ul><li>An application-id service with unique application name for each of the path for the service</li><li>Service routes to route sessions over appropriate paths</li></ul></li></ul><p>The above example configuration will result in the following auto-generated configuration for this plugin</p><div class="codeBlockContainer_J+bg language-config theme-code-block"><div class="codeBlockContent_csEI config"><pre tabindex="0" class="prism-code language-config codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">admin@node1.conductor1# show config running authority tenant broadband</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">config</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    authority</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        tenant  broadband</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            name         broadband</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            description  &quot;Auto-generated tenant for icmp-reachability-detection&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">admin@node1.conductor1# show config running authority tenant lte</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">config</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    authority</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        tenant  lte</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            name         lte</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            description  &quot;Auto-generated tenant for icmp-reachability-detection&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">admin@node1.conductor1# show config running authority service broadband-icmp</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">config</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    authority</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        service  broadband-icmp</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            name                  broadband-icmp</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            transport             icmp</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                protocol  icmp</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            address               8.8.8.8</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            access-policy         broadband</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                source      broadband</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                permission  allow</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            share-service-routes  false</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">admin@node1.conductor1# show config running authority service lte-icmp</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">config</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    authority</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        service  lte-icmp</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            name                  lte-icmp</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            transport             icmp</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                protocol  icmp</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            address               9.9.9.9</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            access-policy         lte</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                source      lte</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                permission  allow</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            share-service-routes  false</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">admin@node1.conductor1# show config running authority service internet-broadband</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">config</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    authority</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        service  internet-broadband</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            name              internet-broadband</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            application-name  icmp-internet-broadband</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            access-policy     _internal_</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                source  _internal_</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">admin@node1.conductor1# show config running authority service internet-lte</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">config</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    authority</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        service  internet-lte</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            name              internet-lte</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            application-name  icmp-internet-lte</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            access-policy     _internal_</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                source  _internal_</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">admin@node1.conductor1# show config running authority router router1 node node1 device-interface broadband</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">config</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    authority</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        router  router1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            name  router1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            node  node1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                name              node1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                device-interface  broadband</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    name               broadband</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    description        &quot;Auto generated host KNI interface for internet&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    type               host</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    network-namespace  broadband</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    network-interface  broadband-intf</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                        name       broadband-intf</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                        global-id  3</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                        type       external</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                        tenant     broadband</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                        address    169.254.142.2</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                            ip-address     169.254.142.2</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                            prefix-length  31</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                            gateway        169.254.142.3</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                        exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">admin@node1.conductor1# show config running authority router router1 node node1 device-interface lte</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">config</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    authority</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        router  router1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            name  router1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            node  node1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                name              node1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                device-interface  lte</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    name               lte</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    description        &quot;Auto generated host KNI interface for internet&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    type               host</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    network-namespace  lte</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    network-interface  lte-intf</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                        name       lte-intf</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                        global-id  5</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                        type       external</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                        tenant     lte</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                        address    169.254.142.4</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                            ip-address     169.254.142.4</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                            prefix-length  31</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                            gateway        169.254.142.5</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                        exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">admin@node1.conductor1# show config running authority router router1 service-route rte-broadband-icmp</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">config</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    authority</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        router  router1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            name           router1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            service-route  rte-broadband-icmp</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                name          rte-broadband-icmp</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                service-name  broadband-icmp</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                next-hop      node1 broadband-intf</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    node-name  node1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    interface  broadband-intf</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">admin@node1.conductor1# show config running authority router router1 service-route rte-lte-icmp</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">config</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    authority</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        router  router1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            name           router1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            service-route  rte-lte-icmp</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                name          rte-lte-icmp</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                service-name  lte-icmp</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                next-hop      node1 lte-intf</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    node-name   node1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    interface   lte-intf</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">admin@node1.conductor1# show config running authority router router1 service-route rte-internet-broadband</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">config</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    authority</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        router  router1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            name           router1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            service-route  rte-internet-broadband</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                name          rte-internet-broadband</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                service-name  internet-broadband</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                next-hop      node1 broadband-intf</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    node-name  node1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    interface  broadband-intf</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">admin@node1.conductor1# show config running authority router router1 service-route rte-internet-lte</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">config</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    authority</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        router  router1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            name           router1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            service-route  rte-internet-lte</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                name          rte-internet-lte</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                service-name  internet-lte</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                next-hop      node1 lte-intf</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    node-name   node1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    interface   lte-intf</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">exit</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Some of the key aspects of the auto-generated configuration are as follows:</p><ul><li>Each of the generated service has an application-name of the form <code>icmp-{service}-{path}</code> as can be seen with <code>icmp-internet-broadband</code> and <code>icmp-internet-lte</code> in the above example. These application names determine which path is currently available for the service.</li><li>The generated KNIs each represent a unique path and are useful for performing the ICMP probe over those paths. The <code>broadband-icmp</code> and <code>lte-icmp</code> services are generated to assist with that.</li></ul><h2 class="anchor anchorWithStickyNavbar_y2LR" id="release-notes">Release Notes<a class="hash-link" href="#release-notes" title="Direct link to heading">​</a></h2><div class="admonition admonition-warning alert alert--danger"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"></path></svg></span>warning</h5></div><div class="admonition-content"><p>The plugin must be updated to version 3.0.3 or later prior to <a href="/docs/intro_upgrade_considerations#plugin-config-generation-changes">upgrading the conductor to SSR version 5.4.0.</a></p></div></div><h3 class="anchor anchorWithStickyNavbar_y2LR" id="release-303">Release 3.0.3<a class="hash-link" href="#release-303" title="Direct link to heading">​</a></h3><h4 class="anchor anchorWithStickyNavbar_y2LR" id="issues-fixed">Issues Fixed<a class="hash-link" href="#issues-fixed" title="Direct link to heading">​</a></h4><ul><li><p><strong>PLUGIN-1322</strong> Plugins do not clean up the the salt states on uninstall</p><p>  <em><strong>Resolution:</strong></em> Each plugin RPM now manages their dependencies to ensure proper clean up on uninstall</p></li><li><p><strong>PLUGIN-1378</strong> Plugin config generation was failing to remove certain elements from XML</p><p>  <em><strong>Resolution:</strong></em> Handle the case for missing elements before attempting to remove them. In addition, ensure that the failure for config generation on one router doesn&#x27;t affect the rest of the routers.</p></li><li><p><strong>PLUGIN-1383</strong> Plugin generated services do not work when module mode is not configured</p><p>  <em><strong>Resolution:</strong></em> The plugin will auto generate the application-identification module mode when possible to ensure the plugin generated services operate correctly.</p></li><li><p><strong>PLUGIN-1419</strong> Invalid service config generated for the config director mode</p><p>  <em><strong>Resolution:</strong></em> The plugin correctly generates the application-name field for generated services to conform to the config director type validation.</p></li><li><p><strong>PLUGIN-1322</strong> The plugin state command doesn&#x27;t show correct information</p><p>  <em><strong>Resolution</strong></em> The plugin state command output was improved for both summary and detail mode to show correct information.</p></li></ul><h3 class="anchor anchorWithStickyNavbar_y2LR" id="release-301">Release 3.0.1<a class="hash-link" href="#release-301" title="Direct link to heading">​</a></h3><h4 class="anchor anchorWithStickyNavbar_y2LR" id="issues-fixed-1">Issues Fixed<a class="hash-link" href="#issues-fixed-1" title="Direct link to heading">​</a></h4><ul><li><p><strong>PLUGIN-1170</strong>  Config generation for the plugin failing in the Bonsai mode</p><p><em><strong>Resolution:</strong></em> Correctly handle the config generation for routers where the ICMP plugin is not enabled during bonsai config generation</p></li><li><p><strong>PLUGIN-1088</strong>  ICMP plugin keeps pinging in the background even when disabled</p><p><em><strong>Resolution:</strong></em> When the plugin is disabled the relevant systemd services are stopped and the router components are uninstalled.</p></li></ul><h3 class="anchor anchorWithStickyNavbar_y2LR" id="release-201">Release 2.0.1<a class="hash-link" href="#release-201" title="Direct link to heading">​</a></h3><h4 class="anchor anchorWithStickyNavbar_y2LR" id="issues-fixed-2">Issues Fixed<a class="hash-link" href="#issues-fixed-2" title="Direct link to heading">​</a></h4><ul><li><p><strong>PLUGIN-1088</strong>  ICMP plugin keeps pinging in the background even when disabled</p><p><em><strong>Resolution:</strong></em> When the plugin is disabled the relevant systemd services are stopped and the router components are uninstalled.</p></li></ul><h3 class="anchor anchorWithStickyNavbar_y2LR" id="release-300">Release 3.0.0<a class="hash-link" href="#release-300" title="Direct link to heading">​</a></h3><h4 class="anchor anchorWithStickyNavbar_y2LR" id="issues-fixed-3">Issues Fixed<a class="hash-link" href="#issues-fixed-3" title="Direct link to heading">​</a></h4><ul><li><strong>PLUGIN-768</strong> Support the ICMP Reachability Detection plugin in SSR versions <code>5.1.0</code> and greater.</li><li><strong>PLUGIN-611</strong> Added support for plugin state. Plugin state information can be accessed on the PCLI using <code>show plugins state [router &lt;router&gt;] [node &lt;node&gt;] [{detail | summmary}] 128T-icmp-reachability-detection</code></li></ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"></div><div class="col lastUpdated_mt2f"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2022-11-13T18:18:14.000Z">11/13/2022</time></b></span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/plugin_http_probe"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">HTTP Probe Reachability Detection</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/plugin_ipsec_client"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">IPsec Client</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_vrFS thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#overview" class="table-of-contents__link toc-highlight">Overview</a></li><li><a href="#plugin-behavior" class="table-of-contents__link toc-highlight">Plugin Behavior</a><ul><li><a href="#sunny-day-scenario" class="table-of-contents__link toc-highlight">Sunny Day Scenario</a></li><li><a href="#primary-path-failure-scenario" class="table-of-contents__link toc-highlight">Primary Path Failure Scenario</a></li><li><a href="#primary-path-recovery-scenario" class="table-of-contents__link toc-highlight">Primary Path Recovery Scenario</a></li><li><a href="#all-path-failures" class="table-of-contents__link toc-highlight">All Path Failures</a></li></ul></li><li><a href="#configuration" class="table-of-contents__link toc-highlight">Configuration</a><ul><li><a href="#icmp-probe-enablement" class="table-of-contents__link toc-highlight">ICMP Probe Enablement</a></li><li><a href="#service-definition" class="table-of-contents__link toc-highlight">Service Definition</a></li><li><a href="#service-route-definition" class="table-of-contents__link toc-highlight">Service Route Definition</a></li></ul></li><li><a href="#triggering-manual-failover-or-recovery" class="table-of-contents__link toc-highlight">Triggering Manual Failover Or Recovery</a></li><li><a href="#troubleshooting" class="table-of-contents__link toc-highlight">Troubleshooting</a><ul><li><a href="#checking-the-icmp-probe-and-agent-status" class="table-of-contents__link toc-highlight">Checking the ICMP Probe and Agent Status</a></li><li><a href="#service-status" class="table-of-contents__link toc-highlight">Service Status</a></li></ul></li><li><a href="#appendix-auto-generated-configuration" class="table-of-contents__link toc-highlight">Appendix: Auto-Generated Configuration</a></li><li><a href="#release-notes" class="table-of-contents__link toc-highlight">Release Notes</a><ul><li><a href="#release-303" class="table-of-contents__link toc-highlight">Release 3.0.3</a></li><li><a href="#release-301" class="table-of-contents__link toc-highlight">Release 3.0.1</a></li><li><a href="#release-201" class="table-of-contents__link toc-highlight">Release 2.0.1</a></li><li><a href="#release-300" class="table-of-contents__link toc-highlight">Release 3.0.0</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2022 Juniper Networks, Inc.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.a6409479.js"></script>
<script src="/assets/js/main.555dbe5a.js"></script>
</body>
</html>