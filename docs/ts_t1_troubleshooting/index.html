<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-ts_t1_troubleshooting">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.3.1">
<title data-rh="true">T1 Troubleshooting | SSN Docs</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://docs.128technology.com/docs/ts_t1_troubleshooting"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="T1 Troubleshooting | SSN Docs"><meta data-rh="true" name="description" content="T1 Troubleshooting Process"><meta data-rh="true" property="og:description" content="T1 Troubleshooting Process"><link data-rh="true" rel="icon" href="/img/favicon.png"><link data-rh="true" rel="canonical" href="https://docs.128technology.com/docs/ts_t1_troubleshooting"><link data-rh="true" rel="alternate" href="https://docs.128technology.com/docs/ts_t1_troubleshooting" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.128technology.com/docs/ts_t1_troubleshooting" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.8e1fdc51.css">
<link rel="preload" href="/assets/js/runtime~main.2a317733.js" as="script">
<link rel="preload" href="/assets/js/main.7f15ba45.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.png" alt="Juniper Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/logo_dark.png" alt="Juniper Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate"></b></a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/docs/intro_getting_started">Docs</a><a href="https://community.juniper.net/answers/communities/community-home?CommunityKey=310d1a41-12fa-4627-9a99-880145a7c87c" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Community<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://www.juniper.net/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Company<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="searchBox_ZlJk"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/about_128t">About</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/intro_getting_started">Introduction</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/intro_system_reqs">Deployment Considerations</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/intro_installation">Installation Process</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/install_conductor_overview">Conductor Installation</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/intro_installation_bootable_media">Router Installation</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/intro_installation_image">Image-Based Installation</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/supported_cloud_platforms">Cloud Installations</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/intro_upgrade_considerations">Upgrades and Rollback</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/intro_installation_installer">Supporting Install Information - Appendix</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/concepts_application_discovery">Concepts</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/wan_overview">WAN Assurance</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/docs/config_basics">Administration</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/config_basics">Configuration</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/howto_tune_bfd">Optimizing Routing Protocols</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/config_ha">High Availability</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/config_access_mgmt">Access Management and Authentication</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/config_ntp_auth">NTP</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/sec_adaptive_encrypt">Security</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/concepts_ssr_idp">Intrusion Detection and Prevention</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/config_STEP">Service and Topology Exchange Protocol (STEP)</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/how_to_use_app_summary">How To</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" tabindex="0" href="/docs/ts_applications">Troubleshooting</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/ts_applications">Application Troubleshooting</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/ts_ap_duplicate_assets">AP: Duplicate Asset ID Error</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/ts_ap_salt_minion">AP: Salt Minion</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/ts_cpu_spikes">CPU Spikes</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/ts_connecting_to_routers">Connecting to Routers</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/ts_forwarding_resource_pools">Forwarding Plane Resource Pools</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/ts_logs">Logs</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/ts_mac_uniqueness">MAC Address Uniqueness</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/ts_packet_capture">Packet Capture</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/ts_serial_console_tsing">Serial Console Troubleshooting</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/ts_t1_troubleshooting">T1 Troubleshooting</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/ts_traceroute">Traceroute</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/ts_troubleshooting_vrf">Troubleshooting VRF</a></li></ul></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/events_overview">Events</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/bcp_att_avpn_configuration">Best Practices</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/cli_reference">CLI and Element Reference</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/installer_cli_reference">Installer/Initializer Reference</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/plugin_intro">Plugins</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/release_notes_128t_6.1">Release Notes</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Administration</span><meta itemprop="position" content="1"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Troubleshooting</span><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">T1 Troubleshooting</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>T1 Troubleshooting</h1></header><h2 class="anchor anchorWithStickyNavbar_LWe7" id="t1-troubleshooting-process">T1 Troubleshooting Process<a href="#t1-troubleshooting-process" class="hash-link" aria-label="Direct link to T1 Troubleshooting Process" title="Direct link to T1 Troubleshooting Process">​</a></h2><p>The SSR software is often configured to leverage legacy T1/E1 circuits to connect to provider MPLS networks. This document contains troubleshooting techniques available to SSR administrators, to confirm whether a T1 has issues prior to escalating to service provider, and to distinguish between a T1 issue and a downstream issue.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="confirm-interface-status">Confirm Interface Status<a href="#confirm-interface-status" class="hash-link" aria-label="Direct link to Confirm Interface Status" title="Direct link to Confirm Interface Status">​</a></h3><p>The PCLI command <a href="/docs/cli_reference#show-device-interface"><code>show device-interface</code></a> shows the status of the T1 interface, including its administrative status and its operational status. For functioning T1 interfaces, the interface state will be <code>up</code> both administratively and operationally.</p><p>Here is an example from a healthy system:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">admin@node1.router# show device-interface node all summary  | egrep &quot;Status|t1&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> Name              Admin Status   Operational Status   Redundancy Status   MAC Address</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> node1:t1-carrier1 up             up                   non-redundant       ea:83:07:63:27:74</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> node2:t1-carrier2 up             up                   non-redundant       fa:88:6a:46:20:a3</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Here is an example from a system with T1 problems:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">admin@node1.router# show device-interface node all summary  | egrep &quot;Status|t1&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> Name              Admin Status   Operational Status   Redundancy Status   MAC Address</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> node1:t1-carrier1 up             unknown              non-redundant       a6:c2:7f:75:47:26</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> node2:t1-carrier2 up             down                 non-redundant       72:c4:48:fc:6f:3f</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="theme-admonition theme-admonition-note alert alert--secondary admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_S0QG"><p>The state of <code>unknown</code> represents a T1 that has <em>never successfully come online since SSR system start</em>. The initial state of a T1 interface on the SSR platform is <code>unknown</code>, until it transitions to <code>up</code>. When a T1 is <code>unknown</code>, it can be treated as out of service.</p></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="confirm-peer-status">Confirm Peer Status<a href="#confirm-peer-status" class="hash-link" aria-label="Direct link to Confirm Peer Status" title="Direct link to Confirm Peer Status">​</a></h3><p>Typically, a site will have multiple upstream peers that it connects with over any given transport circuit; for example, a branch location will connect to multiple head ends on each of its T1 circuit, its broadband circuit, LTE connection, etc. These individual connections are referred to as &quot;peer paths,&quot; and are periodically measured using BFD packets. If some but not all of the peer paths are down on a given circuit, or only a subset are flapping (repeatedly transitioning between up and down), the issue is most likely related to a downstream issue and not a local T1 issue. As an additional point of investigation, it is encouraged to look at other branch locations that peer with the same head ends/peers to see if there is any correlation to down/flapping peer paths.</p><p>Here is an example of a system with working peers:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">admin@node1.router# show peers | egrep &quot;Status|t1&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> Peer       Node    Network Interface   Destination       Status   Hostname      Path MTU</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> headend1   node1   mpls-t1-backup      192.0.2.201       standby  unavailable   unavailable</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> headend1   node1   mpls-t1-backup      192.0.2.202       standby  unavailable   unavailable</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> headend1   node2   mpls-t1             192.0.2.201       up       unavailable   unavailable</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> headend1   node2   mpls-t1             192.0.2.202       up       unavailable   unavailable</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> headend2   node1   mpls-t1-backup      198.51.100.11     standby  unavailable   unavailable</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> headend2   node1   mpls-t1-backup      198.51.100.12     standby  unavailable   unavailable</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> headend2   node2   mpls-t1             198.51.100.11     up       unavailable   unavailable</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> headend2   node2   mpls-t1             198.51.100.12     up       unavailable   unavailable</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> ucaas-he1  node1   mpls-t1-backup      203.0.113.101     standby  unavailable   unavailable</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> ucaas-he1  node2   mpls-t1             203.0.113.102     up       unavailable   unavailable</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="theme-admonition theme-admonition-note alert alert--secondary admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_S0QG"><p>In some deployments there will be &quot;standby&quot; paths to router peers. These may show as either <code>down</code> or <code>standby</code> in the output of <code>show peers</code>. In the sample output above these are displayed as <code>standby</code> for the backup MPLS link.</p></div></div><p>Here is an example of a system with issues communicating to peers over its T1 circuit:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">admin@node1.router# show peers | egrep &quot;Status|t1&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> Peer       Node    Network Interface   Destination       Status   Hostname      Path MTU</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> headend1   node1   mpls-t1-backup      192.0.2.201       down     unavailable   unavailable</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> headend1   node1   mpls-t1-backup      192.0.2.202       down     unavailable   unavailable</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> headend1   node2   mpls-t1             192.0.2.201       down     unavailable   unavailable</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> headend1   node2   mpls-t1             192.0.2.202       down     unavailable   unavailable</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> headend2   node1   mpls-t1-backup      198.51.100.11     down     unavailable   unavailable</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> headend2   node1   mpls-t1-backup      198.51.100.12     down     unavailable   unavailable</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> headend2   node2   mpls-t1             198.51.100.11     down     unavailable   unavailable</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> headend2   node2   mpls-t1             198.51.100.12     down     unavailable   unavailable</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> ucaas-he1  node1   mpls-t1-backup      203.0.113.101     down     unavailable   unavailable</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> ucaas-he1  node2   mpls-t1             203.0.113.102     down     unavailable   unavailable</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="build-a-timeline">Build a Timeline<a href="#build-a-timeline" class="hash-link" aria-label="Direct link to Build a Timeline" title="Direct link to Build a Timeline">​</a></h3><p>Based on when your monitoring system detects a failure, or your users report connectivity problems, start building a timeline of events. This is conventional wisdom in network troubleshooting: piece together the information from logs, event history, and alarms, to compile a timeline that can be traced back to the <em>trigger</em> of the problem. This is how we will arrive at the root cause of the issue.</p><p>Log into the local router&#x27;s PCLI to view active alarms and event history.</p><div class="theme-admonition theme-admonition-note alert alert--secondary admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_S0QG"><p>The PCLI output is often very wide and may cause lines to wrap making it difficult to read on narrow screens. Ensure your screen is wide enough to prevent line wrap.</p></div></div><ol><li>First, check the current system time from within the PCLI:</li></ol><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">admin@node1.router# shell date</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Mon Mar  9 11:19:41 EDT 2020</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="2"><li>Choose a timeframe (e.g., 24 hours) offset from the current time, and use the <code>show events alarm</code> command to list all T1 events that have occurred in that timeframe by passing the <code>from</code> argument. The timezone of the value passed to <code>from</code> in the example below is assumed to be the same as that of the system.</li></ol><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">admin@node1.router# show events alarm from &quot;2020-03-08 11:19&quot; | grep t1</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="3"><li>Compile each of these events into a timeline. Each event that is displayed will indicate in the <code>Event Type</code> column whether it is a new event (the type is <code>add</code>), or clearing a prior event (the type is <code>clear</code>). Furthermore, each event will fall into one of two Categories: <code>network-interface</code> or <code>peer</code>.</li></ol><h4 class="anchor anchorWithStickyNavbar_LWe7" id="interpreting-the-data">Interpreting the Data<a href="#interpreting-the-data" class="hash-link" aria-label="Direct link to Interpreting the Data" title="Direct link to Interpreting the Data">​</a></h4><p>The <code>network-interface</code> category is used when the interface transitions to up or down, either administratively (i.e., disabled or enabled by an administrator), or operationally (the physical circuit).</p><p>The <code>peer</code> category reflects the ability for the SSR software to reach remote devices over that circuit.</p><p>When a <code>network-interface</code> is down, either operationally or administratively, this will obviously impact all traffic on that interface. For circumstances when the <code>network-interface</code> is operationally down, proceed to the Circuit Troubleshooting section of this document.</p><p>For peers, it is important to identify if the issue affects <em>just one peer or all of the peers</em> leveraging the T1 interface. When the issue is limited to one peer, it is typically a downstream issue that should be escalated to the circuit provider. When the issue affects all peers, it is typically a circuit issue.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="circuit-troubleshooting">Circuit Troubleshooting<a href="#circuit-troubleshooting" class="hash-link" aria-label="Direct link to Circuit Troubleshooting" title="Direct link to Circuit Troubleshooting">​</a></h2><p>The command <a href="/docs/cli_reference#show-device-interface"><code>show device-interface</code></a> will show the details of the T1 interface activity, including errors, alarms, and signal strength.</p><p>Here is an example of a clean T1 circuit.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">admin@node1.router# show device node node1 name t1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Mon 2020-03-09 17:56:40 UTC</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">======================================================</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> node1:t1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">======================================================</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> Type:                t1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> Mode:                host</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> MAC Address:         2e:8d:d0:21:a3:9a</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> Admin Status:        up</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> Operational Status:  up</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> Redundancy Status:   non-redundant</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> Speed:               1000</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> in-octets:                 44113322596</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> in-unicast-pkts:             274899493</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> in-errors:                           0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> out-octets:                45274259759</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> out-unicast-pkts:            248173338</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> out-errors:                          0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> T1 State:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     State:           up</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     Flags:           PPP, RUNNING, UP, NOARP</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     Iface:           w1g1ppp</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     MTU:             1500</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     RX-DRP:          0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     RX-ERR:          0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     RX-OK:           282904443</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     RX-OVR:          0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     TX-DRP:          0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     TX-ERR:          0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     TX-OK:           254742784</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     TX-OVR:          0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     Alarms: </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> ***** w1g1: T1 Rx Alarms (Framer) *****</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> ALOS:  OFF     | LOS:  OFF</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> RED:   OFF     | AIS:  OFF</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> LOF:   OFF     | RAI:  OFF</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> ***** w1g1: T1 Rx Alarms (LIU) *****</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> Short Circuit: OFF</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> Open Circuit:  OFF</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> Loss of Signal:        OFF</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> ***** w1g1: T1 Tx Alarms *****</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> AIS:   OFF     | YEL:  OFF</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> ***** w1g1: T1 Performance Monitoring Counters *****</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> Line Code Violation    : 0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> Bit Errors (CRC6/Ft/Fs)        : 0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> Out of Frame Errors    : 0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> Sync Errors            : 0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> Rx Level       : &gt; -2.5db</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Here is an example of a misbehaving T1; note the section on Performance Monitoring Counters at the end of the output:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">admin@node1.router# show device-interface node node1 name t1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Mon 2020-03-09 17:50:14 UTC</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">======================================================</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> node1:t1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">======================================================</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> Type:                t1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> Mode:                host</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> MAC Address:         f6:a0:e7:ea:39:0a</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> Admin Status:        up</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> Operational Status:  up</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> Redundancy Status:   non-redundant</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> Speed:               1000</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> in-octets:                    36727823</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> in-unicast-pkts:                233085</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> in-errors:                           0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> out-octets:                   38634055</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> out-unicast-pkts:               229578</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> out-errors:                          0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> T1 State:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     State:           up</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     Flags:           PPP, RUNNING, UP, NOARP</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     Iface:           w1g1ppp</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     MTU:             1500</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     RX-DRP:          9</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     RX-ERR:          0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     RX-OK:           238562</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     RX-OVR:          0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     TX-DRP:          0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     TX-ERR:          0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     TX-OK:           233929</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     TX-OVR:          0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     Alarms:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">***** w1g1: T1 Rx Alarms (Framer) *****</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> ALOS:  OFF     | LOS:  OFF</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> RED:   OFF     | AIS:  OFF</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> LOF:   OFF     | RAI:  OFF</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> ***** w1g1: T1 Rx Alarms (LIU) *****</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> Short Circuit: OFF</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> Open Circuit:  OFF</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> Loss of Signal:        OFF</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> ***** w1g1: T1 Tx Alarms *****</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> AIS:   OFF     | YEL:  OFF</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> ***** w1g1: T1 Performance Monitoring Counters *****</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> Line Code Violation    : 0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> Bit Errors (CRC6/Ft/Fs)        : 284284</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> Out of Frame Errors    : 349</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> Sync Errors            : 1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> Rx Level       : &gt; -2.5db</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="theme-admonition theme-admonition-note alert alert--secondary admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_S0QG"><p>The SSR solution includes the Sangoma E1/T1 card for interfacing to MPLS networks. For more information on the Framer alarms, the LIU alarms, and the Tx alarms, refer to the Sangoma Reference Guide for details.</p></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="checking-the-circuit-status">Checking the Circuit Status<a href="#checking-the-circuit-status" class="hash-link" aria-label="Direct link to Checking the Circuit Status" title="Direct link to Checking the Circuit Status">​</a></h4><p>From Linux prompt on the node where the T1 card is installed, use the following command to confirm if the T1 card is observing circuit flapping. For this we&#x27;ll use the <code>journalctl</code> command, which shows log messages in the system&#x27;s journal. We can restrict it to start and end times, and then pipe it to the <code>grep</code> command to filter out everything but the messages related to <code>wanpipe</code> (the Sangoma card).</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">journalctl --since &quot;START TIME&quot; --until &quot;END TIME&quot; | grep wanpipe | grep -i connect</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Example:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">[t128@node1 ~]$ journalctl --since &quot;2019-09-20 00:00&quot; --until &quot;2019-09-20 23:55&quot; | grep wanpipe | grep -i connect</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Sep 20 18:50:23 node1 kernel: wanpipe1: T1 disconnected!</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Sep 20 18:50:29 node1 kernel: wanpipe1: T1 connected!</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Sep 20 18:50:37 node1 kernel: wanpipe1: T1 disconnected!</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Sep 20 18:50:42 node1 kernel: wanpipe1: T1 connected!</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>In this example we can see that the T1 card (<code>wanpipe1</code>) is reporting circuit loss at 18:50:23, restored six seconds later, down again eight seconds after that, and restored again in five seconds. This is a classic example of a &quot;flapping&quot; circuit. This circuit behavior will affect all peers, and cause all traffic to be migrated off of the circuit. This should correspond to interface failures in the output of <code>show events alarm</code>.</p><p>These should be added to your troubleshooting timeline.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="check-for--t1-physical-errors">Check for  T1 physical errors<a href="#check-for--t1-physical-errors" class="hash-link" aria-label="Direct link to Check for  T1 physical errors" title="Direct link to Check for  T1 physical errors">​</a></h4><p>We&#x27;ll use the command <code>show device-interface node &lt;name&gt; name &lt;interfaceName&gt;</code> to look at the error counters for the circuit.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">admin@node1.router# show device-interface node node1 name t1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">...</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> ***** w1g1: T1 Performance Monitoring Counters *****</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> Line Code Violation    : 263653</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> Bit Errors (CRC6/Ft/Fs)        : 1286</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> Out of Frame Errors    : 230</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> Sync Errors            : 17</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Repeat this command several times to see if errors are incrementing, or if these counters are residual from an earlier incident.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">admin@node1.router# show device-interface node node1 name t1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">...</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> ***** w1g1: T1 Performance Monitoring Counters *****</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> Line Code Violation    : 2732653</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> Bit Errors (CRC6/Ft/Fs)        : 1386</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> Out of Frame Errors    : 239</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> Sync Errors            : 17</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="clearing-the-counters">Clearing the Counters<a href="#clearing-the-counters" class="hash-link" aria-label="Direct link to Clearing the Counters" title="Direct link to Clearing the Counters">​</a></h4><p>The SSR cannot reset Sangoma counters within its administrative interfaces. To clear the counters, you must follow these steps within the Linux host operating system.</p><div class="theme-admonition theme-admonition-note alert alert--secondary admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_S0QG"><p>The <strong>Sync Errors</strong> counter cannot be cleared.</p></div></div><ol><li>Use the command <code>ip netns</code> to identify the <a href="https://en.wikipedia.org/wiki/Linux_namespaces" target="_blank" rel="noopener noreferrer">Linux namespace</a> used for the T1 interface. This will be of the format <code>t1-ns-&lt;number&gt;</code>.</li></ol><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">[t128@node1 ~]$ ip netns</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">t1-ns-5 (id: 1073741828)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">routingEngine</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>In this example, the T1 namespace is <code>t1-ns-5</code>.</p><ol start="2"><li>Clear the performance counters using the command <code>ip netns exec &lt;t1 namespace&gt; wanpipemon -i w1g1 -c fpm</code></li></ol><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">[t128@node1 ~]$ sudo ip netns exec t1-ns-5 wanpipemon -i w1g1 -c fpm</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">DSU/CSU Perfomance Monitoring counters were flushed.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Performance monitoring counters flushed</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="confirm-presence-of-the-sangoma-card">Confirm Presence of the Sangoma card<a href="#confirm-presence-of-the-sangoma-card" class="hash-link" aria-label="Direct link to Confirm Presence of the Sangoma card" title="Direct link to Confirm Presence of the Sangoma card">​</a></h4><p>Use the Linux command <code>lspci</code> to confirm that the card appears on the Linux system&#x27;s PCI bus. Here is the expected result (note that the PCI address <code>04:04.0</code> may be different on your hardware platform):</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">[root@node1 ~]# lspci | grep Sangoma</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">04:04.0 Network controller: Sangoma Technologies Corp. A200/Remora FXO/FXS Analog AFT card</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>If the card is not present, this is the output:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">[root@node1 ~]# lspci | grep Sangoma</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">[root@node1 ~]# </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This is indicative of a failure to the Sangoma card or the host machine.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="confirm-status-of-the-t1-card">Confirm Status of the T1 Card<a href="#confirm-status-of-the-t1-card" class="hash-link" aria-label="Direct link to Confirm Status of the T1 Card" title="Direct link to Confirm Status of the T1 Card">​</a></h4><p>Use the command <code>wanrouter status</code> to make sure the card is active and connected. The expected output should look something like this:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">[root@node1 ~]# wanrouter status</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Devices currently active:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        Wanpipe1  Wanpipe Config:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Device name | Protocol Map | Adapter  | IRQ | Slot/IO | If&#x27;s | CLK | Baud rate |</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">wanpipe1    | N/A          | A101/1D/2/2D/4/4D/8/8D/16/16D| 22  | 4       | 1    | N/A | 0         |</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Wanrouter Status:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Device name | Protocol | Station | Status        |</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">wanpipe1    | AFT TE1  | N/A     | Connected     |</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>If the card or drivers are malfunctioning, it will look like this:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">[root@node1 ~]# wanrouter status</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Router is stopped !</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">[root@node1 ~]#</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Failure in this scenario means that the T1 card is not loading properly. Try to restore connectivity to the card by powering off the entire host, waiting a short time, and powering it back on. If the failure persists, this system should be replaced.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="confirm-the-system-can-query-the-device">Confirm the System can Query the Device<a href="#confirm-the-system-can-query-the-device" class="hash-link" aria-label="Direct link to Confirm the System can Query the Device" title="Direct link to Confirm the System can Query the Device">​</a></h4><p>Use the command <code>wanrouter hwprobe</code> to confirm communication between the host operating system and the Sangoma card. Expected output:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">[root@node1 ~]# wanrouter hwprobe</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">-------------------------------</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">| Wanpipe Hardware Probe Info |</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">-------------------------------</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">1 . AFT-A101-SH : SLOT=4 : BUS=4 : IRQ=22 : CPU=A : PORT=1 : HWEC=0 : V=40</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Sangoma Card Count: A101-2=1 </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Failure output:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">[root@node1 ~]# wanrouter hwprobe</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">modprobe: ERROR: could not insert &#x27;wanpipe&#x27;: No such device</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>For failure cases, more information may be in the logfile <code>/var/log/wanrouter</code> and the system journal:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">root@node1 log]# cat /var/log/wanrouter</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Tue Oct  1 09:07:52 UTC 2019: starting WAN router</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Loading driver wanpipe ... fail</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Use the <code>journalctl</code> command and look for messages related to <code>wanpipe</code>:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">root@node1 log]# journalctl --since “2019-09-21 00:00:00” --until “2019-09-21 20:00:00” | grep wanpipe</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Sep 21 21:18:02 node1 kernel: __sdla_bus_read_4:1157: wanpipe PCI Error: Illegal Register read: 0x0040 = 0xFFFFFFFF</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Sep 21 21:18:02 node1 kernel: __sdla_bus_read_4:1157: wanpipe PCI Error: Illegal Register read: 0x0040 = 0xFFFFFFFF</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Sep 21 21:18:02 node1 kernel: __sdla_shark_te1_read_fe:567: wanpipe PCI Error: Illegal Register read: 0x40 = 0xFFFFFFFF</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="confirm-layer3-ppp-connection-using-icmp">Confirm Layer3 PPP connection using ICMP<a href="#confirm-layer3-ppp-connection-using-icmp" class="hash-link" aria-label="Direct link to Confirm Layer3 PPP connection using ICMP" title="Direct link to Confirm Layer3 PPP connection using ICMP">​</a></h4><p>We&#x27;ll use the old standby <code>ping</code> to make sure we can reach the PPP peer. Use the <code>ping</code> command, specifying the egress interface, and put in the service provider&#x27;s Provider Edge (PE) IP address:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">admin@node1.router# ping node node1 egress-interface t1 10.61.73.170</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">PING 10.61.73.170 56 bytes of data.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Ping from 10.61.73.170 (10.61.73.170): icmp_seq=0 ttl=254 time=13.388ms</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Ping from 10.61.73.170 (10.61.73.170): icmp_seq=1 ttl=254 time=9.513ms</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Ping from 10.61.73.170 (10.61.73.170): icmp_seq=2 ttl=254 time=11.235ms</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Ping from 10.61.73.170 (10.61.73.170): icmp_seq=3 ttl=254 time=11.583ms</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>If the ping request fails and all indications from the SSR and Sangoma diagnostics indicate an otherwise healthy system, escalate to the service provider for investigation on the PE equipment.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="manual-loopback">Manual Loopback<a href="#manual-loopback" class="hash-link" aria-label="Direct link to Manual Loopback" title="Direct link to Manual Loopback">​</a></h2><p>The Sangoma T1 Card with the latest firmware will automatically loop back on detection of a loop signal from the service provider. However, there may be cases where you will need to manually loop up the card. This is done through the Linux shell using <code>wanpipe</code> commands.</p><div class="theme-admonition theme-admonition-note alert alert--secondary admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_S0QG"><p>When T1 is placed in loopback, the interface is no longer usable for remote administration, conductor connectivity, traffic forwarding, etc. <strong>This should only be done during scheduled maintenance, or in critical situations.</strong> Because this can interfere with remote administration, <em>it is essential another path be available so that the Node can be accessed to enter the command to disable T1 loopback</em> (thus restoring normal service) issued locally.</p></div></div><p>The output of <code>show device-interface</code> will indicate a status of Admin: Up and Oper: Down while the loopback is engaged. You will need to use the Linux shell to query the card for statistics while it is unavailable to SSR.</p><p>Performance counters can be retrieved using the Linux command <code>wanpipemon -i w1g1 -c Ta</code></p><div class="theme-admonition theme-admonition-note alert alert--secondary admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_S0QG"><p>All of the commands in this section must be run from within the T1&#x27;s namespace in Linux. You can either precede all of the commands with <code>ip netns exec t1-ns-&lt;number&gt;</code>, or use the command <code>ip netns exec t1-ns-&lt;number&gt; bash</code> to start a shell within that namespace. If using the latter technique, all commands will be run from within the namespace; use the <code>exit</code> command to leave that shell and return to the default namespace.</p><p>For the examples in this section, we will <strong>not</strong> use individual <code>ip netns exec</code> commands for each sample output. These were run from within a <code>bash</code> shell in the namespace.</p></div></div><p>To enable a manual loopback:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">[root@node1 ~]# wanpipemon -i w1g1 -c Tallb</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Enable Line/Remote Loopback mode ... Done!</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">LB CMD Return Code: SANG_STATUS_SUCCESS (0)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>To confirm the loopback status:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">[root@node1 ~]# wanpipemon -i w1g1 -c Tlb</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">***** w1g1: T1 Loopback status (0x00000080) *****</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Line (Remote) Loopback: ON</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>To disable line loopback mode:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">[root@node1 ~]# wanpipemon -i w1g1 -c Tdllb</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Disable Line/Remote Loopback mode ... Done!</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">LB CMD Return Code: SANG_STATUS_SUCCESS (0)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>To confirm loopback is disabled:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">[root@node1 ~]# wanpipemon -i w1g1 -c Tlb</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">All loopback modes are disabled!</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="standard-t1-configuration-file">Standard T1 Configuration File<a href="#standard-t1-configuration-file" class="hash-link" aria-label="Direct link to Standard T1 Configuration File" title="Direct link to Standard T1 Configuration File">​</a></h2><p>Below is the standard configuration file included with the SSR software. <strong>This configuration is generated by the SSR software and should not be modified, it is provided here for reference only.</strong> </p><p>The file is located at <code>/etc/wanpipe/wanpipe1.conf</code>.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">[devices]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">wanpipe1 = WAN_AFT_TE1, Comment</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">[interfaces]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">w1g1 = wanpipe1, , STACK, Comment</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">w1g1ppp = wanpipe1, , WANPIPE, ppp, w1g1.ppp</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">[wanpipe1]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">CARD_TYPE         = AFT</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">S514CPU         = A</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">CommPort         = PRI</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">AUTO_PCISLOT         = YES</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">FE_MEDIA        = T1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">FE_LCODE        = B8ZS</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">FE_FRAME        = ESF</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">FE_LINE                = 1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">TE_CLOCK         = NORMAL</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">TE_REF_CLOCK         = 0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">TE_HIGHIMPEDANCE        = NO</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">TE_RX_SLEVEL        = 360</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">LBO                 = 0DB</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">FE_TXTRISTATE        = NO</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">MTU                 = 1500</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">UDPPORT         = 9000</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">TTL                = 255</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">IGNORE_FRONT_END = NO</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">TDMV_HW_DTMF        = NO</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">[w1g1ppp]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">IPX        = NO</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">MULTICAST        = NO</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">DYN_INTR_CFG        = NO</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">TRUE_ENCODING_TYPE        = NO</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">GATEWAY        = NO</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">[w1g1.ppp]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">IP_MODE        = STATIC</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">PAP        = NO</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">CHAP        = NO</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">[w1g1]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">HDLC_STREAMING        = YES</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">ACTIVE_CH        = ALL</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">MTU                = 0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">MRU                = 0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">DATA_MUX        = NO</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="escalating-to-the-service-provider">Escalating to the Service Provider<a href="#escalating-to-the-service-provider" class="hash-link" aria-label="Direct link to Escalating to the Service Provider" title="Direct link to Escalating to the Service Provider">​</a></h2><p>If the troubleshooting exercise leads you to believe the issue is with the service provider&#x27;s circuit, we recommend collecting the following information prior to escalating.</p><ol><li>Confirm the circuit is plugged in and the node has power </li><li>Status of active T1<ol><li>Admin: up/down</li><li>Operational: up/down/unknown</li><li>T1 State: up/down</li><li>T1 Flags: RUNNING versus Missing</li><li>T1 Card Present in system Yes/No</li></ol></li><li>Alarm Analysis: (Provide Command Output)<ol><li>T1 interface flapping: Yes/No</li><li>T1 peers flapping (all): Yes/No</li><li>BGP flapping: Yes/No (Correlated to T1 Events?)</li></ol></li><li>Interface Error Analysis: (Provide Command Output)<ol><li>KNI errors accumulating: Yes/No</li><li>Layer 3 Errors accumulating: Yes/No</li><li>T1 Performance Errors Accumulting : Yes/No</li><li>T1 RX signal in spec: Yes/No </li></ol></li><li>Can ping PPP peer (Provider Edge) IP: Yes/No</li><li>The timeline of events observed by the SSR and uncovered during your analysis</li></ol></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"></div><div class="col lastUpdated_vwxv"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2023-10-05T21:57:03.000Z">Oct 5, 2023</time></b></span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/ts_serial_console_tsing"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Serial Console Troubleshooting</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/ts_traceroute"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Traceroute</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#t1-troubleshooting-process" class="table-of-contents__link toc-highlight">T1 Troubleshooting Process</a><ul><li><a href="#confirm-interface-status" class="table-of-contents__link toc-highlight">Confirm Interface Status</a></li><li><a href="#confirm-peer-status" class="table-of-contents__link toc-highlight">Confirm Peer Status</a></li><li><a href="#build-a-timeline" class="table-of-contents__link toc-highlight">Build a Timeline</a></li></ul></li><li><a href="#circuit-troubleshooting" class="table-of-contents__link toc-highlight">Circuit Troubleshooting</a></li><li><a href="#manual-loopback" class="table-of-contents__link toc-highlight">Manual Loopback</a></li><li><a href="#standard-t1-configuration-file" class="table-of-contents__link toc-highlight">Standard T1 Configuration File</a></li><li><a href="#escalating-to-the-service-provider" class="table-of-contents__link toc-highlight">Escalating to the Service Provider</a></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2023 Juniper Networks, Inc.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.2a317733.js"></script>
<script src="/assets/js/main.7f15ba45.js"></script>
</body>
</html>